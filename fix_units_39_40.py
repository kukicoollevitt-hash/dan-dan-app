#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Unit 39, 40 전체 확장 스크립트 (수정판)
"""

import shutil
from datetime import datetime

FILE_PATH = '/Users/dandan/Desktop/dan-dan-app_1212/public/BRAINUP/person/deep_people2_content.js'

# 백업 생성
backup_path = f"{FILE_PATH}.backup_fix_{int(datetime.now().timestamp())}"
shutil.copy2(FILE_PATH, backup_path)
print(f"백업 생성: {backup_path}")

# 파일 읽기
with open(FILE_PATH, 'r', encoding='utf-8') as f:
    lines = f.readlines()

# 새로운 내용으로 교체
output = []
i = 0
unit39_found = False
unit40_found = False

while i < len(lines):
    line = lines[i]

    # Unit 39 passage 교체
    if 'deep_people2_39:' in line and not unit39_found:
        # labelNo와 title까지 그대로 복사
        output.append(line)  # deep_people2_39: {
        output.append(lines[i+1])  # labelNo
        output.append(lines[i+2])  # title

        # passage 찾기
        j = i + 3
        while j < len(lines) and 'passage:' not in lines[j]:
            output.append(lines[j])
            j += 1

        if 'passage:' in lines[j]:
            # passage 교체
            output.append("    passage: [\n")
            output.append("      '갈릴레오 갈릴레이는 1564년 <b>이탈리아</b> 피사에서 태어났습니다. 아버지 빈첸초 갈릴레이는 유명한 음악가이자 수학자였고, 갈릴레오도 어린 시절 류트라는 악기를 배우며 음악적 재능을 보였어요. 하지만 아버지의 권유로 1581년 피사 대학교에 입학하여 <b>의학</b>을 공부하기 시작했습니다. 그러나 우연히 진자의 규칙적인 움직임을 관찰한 후 수학과 <b>물리학</b>에 큰 매력을 느껴 전공을 바꾸었어요. 스물다섯 살의 젊은 나이에 피사 대학교의 <b>수학</b> 교수가 되었고, 이후 파도바 대학교에서도 18년간 가르쳤습니다. 갈릴레오는 <b>관찰</b>과 <b>실험</b>을 무엇보다 중요하게 생각한 혁명적인 과학자였어요. 당시 대부분의 학자들은 고대 그리스 철학자 <b>아리스토텔레스</b>의 가르침을 실험 없이 맹목적으로 따랐습니다. 아리스토텔레스는 "무거운 물체가 가벼운 물체보다 빨리 떨어진다"고 주장했어요. 하지만 갈릴레오는 유명한 피사의 사탑에서 서로 다른 무게의 공을 동시에 떨어뜨려 이 이론이 틀렸음을 증명했다는 전설이 전해집니다. 실제로 그는 <b>경사면</b> 실험을 통해 낙하 운동의 법칙을 정확하게 밝혀냈어요.',\n")
            output.append("      '1609년, 갈릴레오는 네덜란드에서 발명된 <b>망원경</b>에 대해 듣고 렌즈를 직접 갈아 훨씬 더 성능이 좋은 망원경을 제작했습니다. 그가 만든 망원경은 물체를 최대 30배까지 확대할 수 있었어요. 베네치아 정부에 이 망원경을 시연하여 큰 관심을 받았고, 군사적 용도로도 활용되었습니다. 갈릴레오는 자신이 개량한 망원경을 밤하늘로 돌려 우주를 체계적으로 관찰하기 시작했어요. 그 결과 당시 사람들의 우주관을 완전히 뒤바꾸는 놀라운 발견들을 하게 됩니다. 먼저 달 표면이 완벽하게 매끄러운 구체가 아니라 산과 <b>분화구</b>로 울퉁불퉁하다는 사실을 밝혀냈어요. 또한 <b>목성</b> 주위를 규칙적으로 도는 네 개의 <b>위성</b>(이오, 유로파, 가니메데, 칼리스토)을 발견했습니다. 이 위성들은 오늘날 "갈릴레이 위성"이라고 불리며 그의 이름을 영원히 기억하게 해요. 금성의 위상 변화도 관찰하여 금성이 태양 주위를 돈다는 증거를 찾아냈습니다. <b>은하수</b>가 무수히 많은 별들로 이루어져 있다는 것, 태양 표면의 <b>흑점</b>도 발견했어요. 이러한 발견들은 "지구가 우주의 중심이며 모든 천체가 지구 주위를 돈다"는 <b>천동설</b>에 심각한 타격을 입혔습니다. 갈릴레오는 폴란드 천문학자 니콜라우스 <b>코페르니�b>가 주장한 <b>지동설</b>, 즉 지구가 태양 주위를 돈다는 이론을 자신의 관찰 결과로 강력하게 지지했어요.',\n")
            output.append("      '하지만 당시 가톨릭 <b>교회</b>는 천동설을 성경에 기반한 공식 교리로 가르쳤고, 지동설은 성경에 위배되는 위험한 <b>이단</b> 사상으로 간주되었습니다. 1616년, 교회는 갈릴레오를 로마로 불러 지동설을 더 이상 가르치거나 옹호하지 말라고 엄중히 경고했어요. 갈릴레오는 한동안 침묵을 지켰지만, 진실을 포기할 수 없었습니다. 1632년, 그는 『두 세계 체계에 관한 대화(Dialogo)』라는 혁명적인 책을 출판했어요. 이 책은 천동설을 믿는 심플리치오와 지동설을 지지하는 살비아티, 중립적인 사그레도의 대화 형식으로 쓰였습니다. 표면적으로는 중립적인 척했지만, 실제로는 지동설의 우월성을 명백히 드러내는 내용이었어요. 심플리치오가 어리석은 사람으로 묘사되자 교황 우르바누스 8세는 자신을 조롱한 것이라고 분노했습니다. 분노한 교회는 당시 69세의 노인이었던 갈릴레오를 로마의 <b>종교 재판</b>소(Inquisition)에 회부했어요. 1633년 재판에서 갈릴레오는 강압에 못 이겨 자신의 주장을 철회하고 무릎 꿇고 사과해야 했습니다. 재판 후 법정을 나서며 "그래도 지구는 돈다(E pur si muove)"라고 나지막이 중얼거렸다는 유명한 <b>일화</b>가 전해지지만, 이것이 실제로 있었던 일인지는 역사학자들 사이에서 논란이 있어요.',\n")
            output.append("      '갈릴레오는 종교 재판 이후 피렌체 근처 아르체트리에서 가택 <b>연금</b> 상태로 여생을 보내야 했습니다. 집 밖으로 자유롭게 나갈 수 없고, 방문객도 엄격히 제한되는 상황이었어요. 설상가상으로 그는 노년에 시력을 완전히 잃어 <b>실명</b>하게 되었습니다. 평생 관찰을 중시한 과학자가 눈을 잃은 것은 비극이었어요. 하지만 연금과 실명 속에서도 갈릴레오는 연구를 멈추지 않았습니다. 제자들의 도움을 받아 『새로운 두 과학에 관한 논의(Discorsi)』라는 책을 구술로 집필했어요. 이 책에서 그는 운동의 법칙, <b>역학</b>, 재료의 강도 등을 다루며 근대 물리학의 기초를 확립했습니다. 1642년 1월 8일, 갈릴레오는 77세의 나이로 조용히 세상을 떠났어요. 놀랍게도 갈릴레오가 죽은 바로 그해에 영국에서 아이작 뉴턴이 태어났다는 것은 과학사의 흥미로운 우연입니다. 수백 년이 흐른 1992년, 교황 요한 바오로 2세는 갈릴레오에 대한 종교 재판이 잘못되었음을 공식적으로 인정하고 사과했습니다. 359년이 걸린 명예 회복이었어요. 갈릴레오 갈릴레이는 "근대 <b>과학</b>의 아버지", "실험물리학의 아버지", "과학적 방법의 아버지"로 불리며 과학사에 길이 남았습니다. 권위나 전통이 아닌 관찰과 실험, 그리고 <b>수학적 증명</b>을 통해 진실을 찾으려 한 그의 정신은 오늘날 모든 과학자들의 귀감이 되고 있어요.'\n")
            output.append("    ],\n")

            # passage 끝까지 스킵
            j += 1
            while j < len(lines) and '],':
                if '],' in lines[j]:
                    j += 1
                    break
                j += 1

            i = j
            unit39_found = True
            continue

    output.append(line)
    i += 1

# 파일 쓰기
with open(FILE_PATH, 'w', encoding='utf-8') as f:
    f.writelines(output)

print("Unit 39 passage 수정 완료")
print(f"백업: {backup_path}")
