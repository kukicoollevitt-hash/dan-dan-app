/**
 * ✅ 단원 자동 인식 (강화)
 * 우선순위: ?unit=earth_XX → 파일명 earth_XX.html → 제목 숫자
 */
(function () {
  // 이미 설정된 CUR_UNIT이 있고, earth_로 시작하면 덮어쓰지 않음
  if (window.CUR_UNIT && window.CUR_UNIT.startsWith('earth_')) {
    console.log('[earth_content.js] CUR_UNIT 이미 설정됨:', window.CUR_UNIT);
    return;
  }

  const qs = new URLSearchParams(location.search).get('unit');
  let unit = null;

  if (qs) {
    const m = qs.toLowerCase().match(/earth[_-]?(\d{1,2})/);
    if (m) unit = `earth_${m[1].padStart(2, '0')}`;
  }

  if (!unit) {
    const m2 = location.pathname.toLowerCase().match(/earth[_-]?(\d{1,2})\.html/);
    if (m2) unit = `earth_${m2[1].padStart(2, '0')}`;
  }

  if (!unit && document.title) {
    const m3 = document.title.match(/(\d{1,2})/);
    if (m3) unit = `earth_${m3[1].padStart(2, '0')}`;
  }

  window.CUR_UNIT = unit || 'earth_01';
  console.log('[earth_content.js] CUR_UNIT 설정됨:', window.CUR_UNIT);
})();

/* ===============================
   ✅ 전역 CONTENTS 준비 (단일화)
   =============================== */
window.CONTENTS = window.CONTENTS || {};

/* ===== 콘텐츠 팩: 단원별 지문/어휘/문제/정답 =====
   ✅ 기존 const CONTENTS = {...} → window.CONTENTS 에 합치기
*/
window.CONTENTS = Object.assign(window.CONTENTS, {
  /* ===== earth_01 : "지구는 어떻게 만들어졌을까?" ===== */
  earth_01: {
    labelNo: '01',
    title: '🌍 지구는 어떻게 만들어졌을까?',
    passage: [
      '아주, 아주 오래전 약 46억 년 전, 지구는 아직 존재하지 않았어요. 그때 우주에는 <b>가스</b>와 <b>먼지</b>가 가득했답니다. 이 물질들이 천천히 모여서 커다란 구름처럼 되었다가 태양을 중심으로 돌며 조금씩 뭉쳐졌어요.',
      '먼지가 모이고 또 모여 작은 돌덩이가 되었고, 이 돌덩이들이 서로 <b>부딪치</b>고 합쳐져서 점점 더 큰 지구의 씨앗이 만들어졌어요. 그 씨앗이 바로 <b>원시 지구</b>예요.',
      '처음의 지구는 지금보다 훨씬 뜨겁고 빨갛게 빛나는 불덩이 <b>행성</b>이었어요. 표면은 모두 <b>마그마(녹은 돌)</b>로 덮여 있었고, 부딪힘으로 생긴 열 때문에 공기조차 뜨거웠지요.',
      '하지만 오랜 시간이 지나면서 지구의 겉은 천천히 <b>식어</b> 단단해졌고, 그렇게 해서 <b>지각(지구의 껍질)</b>이 만들어졌어요. 이렇게 해서 우리가 사는 지구가 태어난 거예요.'
    ],
    vocab: [
      ['가스','공기처럼 모양이 없고 자유롭게 퍼지는 물질'],
      ['먼지','공기 중에 떠다니거나 땅에 쌓여 있는 매우 작은 물질 조각'],
      ['원시 지구','갓 만들어진, 지구의 가장 초기 모습(지구의 씨앗)'],
      ['마그마(녹은 돌)','지구 내부의 뜨거운 열 때문에 녹아 있는 돌'],
      ['지각(지구의 껍질)','지구의 가장 바깥 부분으로 단단한 돌로 이루어진 층'],
      ['행성','태양 주위를 돌며 둥근 모양을 가진 천체'],
      ['부딪치다','두 물체가 서로 맞닿아 충돌하다'],
      ['식다','뜨거웠던 것이 시간이 지나면서 차가워지거나 온도가 내려가다']
    ],
    vocabFill: {
      instructions: '',
      items: [
        { no: 1, text: '약 46억 년 전, 우주에는 공기처럼 모양이 없는 (      )와 작은 물질 조각인 먼지가 가득했어요.', answer: '가스', initials: 'ㄱㅅ', aliases: ['가스'] },
        { no: 2, text: '공기 중에 떠다니는 매우 작은 물질 조각을 (      )라고 해요.', answer: '먼지', initials: 'ㅁㅈ', aliases: ['먼지'] },
        { no: 3, text: '갓 만들어진 지구의 가장 초기 모습을 (        )라고 불러요.', answer: '원시 지구', initials: 'ㅇㅅ ㅈㄱ', aliases: ['원시지구'] },
        { no: 4, text: '지구 내부의 열로 녹아 있는 돌을 (      )라고 해요.', answer: '마그마', initials: 'ㅁㄱㅁ', aliases: ['마그마','녹은 돌','녹은돌'] },
        { no: 5, text: '지구의 가장 바깥 부분인 단단한 층을 (      )이라고 해요.', answer: '지각', initials: 'ㅈㄱ', aliases: ['지각','지구의 껍질','지구의껍질'] },
        { no: 6, text: '태양 주위를 돌며 둥근 모양을 가진 천체를 (      )이라고 해요.', answer: '행성', initials: 'ㅎㅅ', aliases: ['행성'] },
        { no: 7, text: '돌덩이들이 서로 (        ) 합쳐져서 지구가 만들어졌어요.', answer: '부딪치고', initials: 'ㅂㄷㅊㄱ', aliases: ['부딪치고','부딪혀','충돌하고'] },
        { no: 8, text: '뜨거웠던 지구의 겉이 천천히 (      ) 단단해졌어요.', answer: '식어', initials: 'ㅅㅇ', aliases: ['식어','식어서','식다'] }
      ]
    },
    quiz: {
      q1_text: '지구가 처음 만들어졌을 때의 모습으로 가장 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 지금처럼 푸른 바다와 초록색 숲이 있었다.',
        '② 표면이 마그마로 덮인 뜨거운 불덩이 행성이었다.',
        '③ 처음부터 단단한 땅과 차가운 공기가 있었다.',
        '④ 얼음으로 뒤덮인 차가운 행성이었다.'
      ],
      q2_text: '다음 중 지구가 만들어지는 과정을 순서대로 바르게 나열한 것은 무엇인가요?',
      q2_opts: [
        '① 가스와 먼지 → 마그마 → 돌덩이 충돌 → 지각 형성',
        '② 가스와 먼지 → 돌덩이 충돌 → 마그마 표면 → 지각 형성',
        '③ 돌덩이 충돌 → 가스와 먼지 → 지각 형성 → 마그마',
        '④ 지각 형성 → 마그마 → 가스와 먼지 → 돌덩이 충돌'
      ],
      q3_1_ph: 'ㅇㅅ', q3_2_ph: 'ㅈㄱ',
      q4_1_ph: 'ㅁㄱㅁ', q4_2_ph: 'ㅈㄱ',
      q5_text: '지구가 뜨거운 불덩이에서 우리가 살 수 있는 행성이 되기까지 어떤 변화가 있었는지 자신의 말로 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'2', q3_1:['원시','원시 지구','원시지구'], q3_2:['지구'], q4_1:['마그마','녹은 돌'], q4_2:['지각','껍질'] },
    essayKeywords: ['마그마','식다','지각','단단','표면','냉각','껍질'],
    explain: {
      q1:'해설: 처음 지구는 마그마로 덮인 뜨거운 불덩이 행성이었어요.',
      q2:'해설: 가스와 먼지가 모여 → 돌덩이가 충돌하며 원시 지구 형성 → 표면이 마그마로 덮임 → 식어서 지각이 형성됨.',
      q3:'해설: 갓 만들어진 지구의 초기 모습을 원시 지구라고 해요.',
      q4:'해설: 녹은 돌인 마그마가 식어서 단단한 지각(껍질)이 되었어요.',
      q5:'예시: 뜨거운 마그마로 덮여 있던 지구가 오랜 시간에 걸쳐 천천히 식으면서 표면이 단단해지고 지각이 형성되어 생명체가 살 수 있는 환경이 되었어요.'
    }
  },

  /* ===== earth_02 : "마그마가 들려주는 지구의 이야기" ===== */
  earth_02: {
    labelNo: '02',
    title: '🌋 마그마가 들려주는 지구의 이야기',
    passage: [
      '지구의 깊은 땅속에서는 뜨겁게 녹은 <b>마그마</b>가 계속 움직이고 있어요. 이 마그마는 지구 내부의 열에 의해 흐르듯 이동하다가 어느 순간 한곳에 모여 <b>압력</b>이 점점 높아집니다. 압력이 너무 세지면 <b>지각</b>의 약한 틈을 밀어 올리게 되고, 결국 그 틈을 통해 마그마가 지표면 가까이까지 올라오게 돼요. 이때 뜨거운 <b>용암</b>과 재, 돌조각, 가스가 한꺼번에 뿜어져 나오며 \'화산 <b>폭발</b>\'이 일어나지요. 화산이 폭발할 때는 엄청난 불빛과 연기, 그리고 큰 굉음이 하늘로 치솟아 주변 공기가 흐려질 정도로 강력합니다.',
      '화산의 폭발은 매우 위험해서 주변의 나무나 건물이 불에 타거나 무너질 수도 있어요. 폭발 뒤에는 공기 중에 <b>화산재</b>가 퍼져 낮에도 어둡고 흐릿하게 보일 만큼 시야가 나빠지기도 합니다. 하지만 시간이 지나면 뜨거웠던 용암도 식고 굳어 새로운 땅을 만들어내요. 처음에는 아무것도 없는 것처럼 보이지만, 바람이 씨앗을 가져오고 비가 내리면서 조금씩 식물이 자라기 시작합니다. 이렇게 화산은 한편으로는 파괴를 일으키지만, 다른 한편으로는 새로운 환경을 만들어 주는 자연의 특별한 과정이에요.',
      '우리나라의 제주도나 멀리 태평양의 하와이처럼, 오래전에 화산이 폭발하여 만들어진 지역도 많아요. 사람들은 이런 화산 지형 위에서 살아가며 자연이 남긴 흔적을 관광지나 연구 자원으로 활용하고 있지요. 또한 화산이 뿜어낸 뜨거운 열은 <b>지열 발전소</b>에서 전기를 만드는 데 쓰이기도 하고, 자연 온천을 만들어 사람들이 휴식을 즐길 수 있도록 도와주기도 해요. 위험할 때도 있지만, 화산은 지구가 스스로 변하며 살아 움직인다는 증거이며 새로운 생명을 키우는 힘을 품고 있는 소중한 자연 현상이랍니다.'
    ],
    vocab: [
      ['마그마','지하 깊은 곳에서 녹은 암석'],
      ['압력','누르는 힘'],
      ['지각','지구의 가장 바깥 단단한 껍질'],
      ['용암','지상으로 나온 뜨거운 마그마'],
      ['화산재','폭발하면서 날아오르는 미세한 재'],
      ['지열 발전소','땅속 열을 이용해 전기를 만드는 곳'],
      ['폭발','세게 터지는 현상'],
      ['섬','사방이 바다로 둘러싸인 땅']
    ],
    /* ✅ 어휘학습(빈칸) */
    vocabFill: {
      instructions: '[화산과 마그마 관련 어휘]',
      items: [
        { no: 1, text: '지하 깊은 곳에서 녹은 암석을 (      )라고 해요.', answer: '마그마', initials: 'ㅁㄱㅁ', aliases: ['마그마'] },
        { no: 2, text: '마그마가 한곳에 모이면 (      )이 점점 높아져요.', answer: '압력', initials: 'ㅇㄹ', aliases: ['압력'] },
        { no: 3, text: '지구의 가장 바깥 단단한 껍질을 (      )이라고 해요.', answer: '지각', initials: 'ㅈㄱ', aliases: ['지각'] },
        { no: 4, text: '마그마가 지상으로 나오면 (      )이라고 불러요.', answer: '용암', initials: 'ㅇㅇ', aliases: ['용암'] },
        { no: 5, text: '화산 폭발 시 날아오르는 미세한 재를 (      )라고 해요.', answer: '화산재', initials: 'ㅎㅅㅈ', aliases: ['화산재'] },
        { no: 6, text: '땅속 열을 이용해 전기를 만드는 곳을 (        )라고 해요.', answer: '지열 발전소', initials: 'ㅈㅇ ㅂㅈㅅ', aliases: ['지열발전소'] },
        { no: 7, text: '화산이 세게 터지는 현상을 (      )이라고 해요.', answer: '폭발', initials: 'ㅍㅂ', aliases: ['폭발'] },
        { no: 8, text: '제주도나 하와이처럼 사방이 바다로 둘러싸인 땅을 (      )이라고 해요.', answer: '섬', initials: 'ㅅ', aliases: ['섬'] }
      ]
    },
    quiz: {
      q1_text: '마그마가 지표면까지 올라오게 되는 가장 직접적인 원인으로 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 지구 내부의 온도가 갑자기 내려가기 때문이다.',
        '② 마그마가 한곳에 모여 압력이 높아지기 때문이다.',
        '③ 바람과 비가 땅속으로 스며들기 때문이다.',
        '④ 사람들이 땅을 깊이 파서 마그마가 나오기 때문이다.'
      ],
      q2_text: '다음 중 본문의 내용 흐름(구조)을 가장 잘 설명한 것은 무엇인가요?',
      q2_opts: [
        '① 화산의 정의 → 화산의 종류 → 화산 예방법',
        '② 마그마의 이동과 폭발 → 화산의 피해와 회복 → 화산의 활용과 의미',
        '③ 지구의 탄생 → 마그마의 소멸 → 새로운 행성의 등장',
        '④ 제주도 소개 → 하와이 소개 → 온천 이용법'
      ],
      q3_html: `지하 깊은 곳에서 녹은 암석인
                <input class="inline-input" id="q3-1" type="text" placeholder="ㅁㄱㅁ"> 가 한곳에 모이면
                <input class="inline-input" id="q3-2" type="text" placeholder="ㅇㄹ"> 이 높아집니다.`,
      q4_html: `압력이 너무 세지면
                <input class="inline-input" id="q4-1" type="text" placeholder="ㅈㄱ"> 의 약한 틈을 뚫고 올라와
                <input class="inline-input" id="q4-2" type="text" placeholder="ㅇㅇ"> 이 되어 분출합니다.`,
      q3_1_ph: 'ㅁㄱㅁ', q3_2_ph: 'ㅇㄹ',
      q4_1_ph: 'ㅈㄱ', q4_2_ph: 'ㅇㅇ',
      q5_text: '화산은 위험하지만 동시에 인간에게 도움을 주기도 합니다. 본문을 바탕으로 화산이 주는 긍정적인 면을 두 가지 이상 써 보세요.'
    },
    answerKey: { q1:'2', q2:'2', q3_1:['마그마'], q3_2:['압력'], q4_1:['지각'], q4_2:['용암'] },
    essayKeywords: ['지열','발전','온천','관광','새로운 땅','섬','제주도','하와이','전기','휴식'],
    explain: {
      q1:'해설: 마그마가 모여 압력이 높아지면 지각의 약한 틈을 뚫고 올라와요.',
      q2:'해설: 본문은 마그마 이동·폭발 → 피해·회복 → 활용·의미 순으로 전개돼요.',
      q3:'해설: 지하 깊은 곳의 녹은 암석=마그마, 누르는 힘=압력.',
      q4:'해설: 지구 바깥 껍질=지각, 지상으로 나온 마그마=용암.',
      q5:'예시: 화산은 지열 발전소에서 전기를 만들거나 온천을 통해 휴식을 제공하고, 새로운 땅과 관광자원을 만들어 줘요.'
    }
  },

  /* ===== earth_03 : "돌은 어떻게 만들어질까?" ===== */
  earth_03: {
    labelNo: '03',
    title: '🪨 돌은 어떻게 만들어질까?',
    passage: [
      '지구의 겉부분, 즉 <b>지각</b>은 여러 종류의 단단한 암석으로 이루어져 있어요. 우리가 흔히 \'돌\', \'바위\'라고 부르는 것들도 사실은 암석이지요. 그런데 암석은 어떻게 만들어졌는지에 따라 세 가지로 구분할 수 있습니다. 뜨거운 마그마가 식어 굳어 생긴 <b>화성암</b>, 흙과 모래가 쌓여 굳어진 <b>퇴적암</b>, 다른 암석이 높은 열과 압력을 받아 성질이 바뀐 <b>변성암</b>이 바로 그것이에요. 각각의 암석은 지구가 오랜 시간 동안 변화해 온 모습을 보여 주는 기록과도 같아요.',
      '먼저 화성암은 마그마가 식는 속도와 장소에 따라 모습이 달라져요. 땅속 깊은 곳에서 천천히 식으면 입자가 굵고 단단한 <b>심성암</b>이 되는데, 대표적인 예가 <b>화강암</b>이에요. 화강암은 돌이 단단하고 무늬가 아름다워 오래전부터 건축물에 자주 사용되었고, 석굴암에도 이 돌이 쓰였지요. 한편, 지표 밖으로 흘러나온 용암이 빠르게 식으면 작은 구멍이 많고 결이 거친 <b>화산암</b>이 됩니다. 우리가 제주도나 현무암 절벽에서 자주 볼 수 있는 바위가 바로 이런 암석이에요.',
      '다음으로 퇴적암은 강물, 파도, 바람 등에 의해 운반된 흙·모래·자갈 등이 강바닥이나 바다 밑에 오랜 시간 쌓이면서 만들어져요. 층층이 쌓인 퇴적물이 눌리고 굳어지면 성질이 다른 암석으로 변하는데, 모래가 굳으면 <b>사암</b>, 자갈이 굳으면 역암, 조개껍데기나 석회 성분이 쌓여 굳으면 <b>석회암</b>이 됩니다. 퇴적암은 지층이 층처럼 보이는 것이 특징이에요.',
      '마지막으로 변성암은 기존 암석이 지하 깊은 곳에서 강한 열과 압력을 받으며 성질이 바뀌어 만들어진 돌입니다. 오랜 시간 뜨거운 곳에 놓여 있어 돌 속의 광물이 다시 배열되거나 변형되는 과정이 일어나지요. 예를 들어, 사암이 높은 온도와 압력에 노출되면 더 단단한 <b>규암</b>이 되고, 석회암은 매끄러운 결을 가진 <b>대리암</b>으로 변합니다. 변성암은 환경이 바뀌면 암석도 새로운 모습으로 변할 수 있다는 사실을 보여 주는 자연의 멋진 예 중 하나예요.'
    ],
    vocab: [
      ['화성암', '마그마가 식어 굳은 암석'],
      ['심성암', '땅속 깊은 곳에서 천천히 굳은 암석'],
      ['화산암', '용암이 빠르게 식어 생긴 암석'],
      ['퇴적암', '쌓인 흙과 모래가 굳어 만들어진 암석'],
      ['사암', '모래가 굳어 생긴 암석'],
      ['석회암', '석회 성분이 굳어 형성된 암석'],
      ['변성암', '기존 암석이 열과 압력을 받아 변한 암석'],
      ['규암', '사암이 변하여 더 단단해진 암석']
    ],
    /* ✅ 어휘학습(빈칸) */
    vocabFill: {
      instructions: '[암석의 종류와 생성 관련 어휘]',
      items: [
        { no: 1, text: '마그마가 식어서 굳은 암석을 (      )이라고 한다.', answer: '화성암', initials: 'ㅎㅅㅇ', aliases: ['화성암'] },
        { no: 2, text: '땅속 깊은 곳에서 마그마가 천천히 식어 만들어진 암석을 (      )이라 한다.', answer: '심성암', initials: 'ㅅㅅㅇ', aliases: ['심성암'] },
        { no: 3, text: '용암이 지표에서 빠르게 식어 생긴 암석을 (      )이라 한다.', answer: '화산암', initials: 'ㅎㅅㅇ', aliases: ['화산암'] },
        { no: 4, text: '흙, 모래, 자갈 등이 쌓여 굳어진 암석을 (      )이라고 한다.', answer: '퇴적암', initials: 'ㅌㅈㅇ', aliases: ['퇴적암'] },
        { no: 5, text: '모래가 굳어서 만들어진 퇴적암을 (      )이라 한다.', answer: '사암', initials: 'ㅅㅇ', aliases: ['사암'] },
        { no: 6, text: '기존 암석이 열과 압력을 받아 성질이 변한 암석을 (      )이라 한다.', answer: '변성암', initials: 'ㅂㅅㅇ', aliases: ['변성암'] },
        { no: 7, text: '사암이 높은 열과 압력을 받아 더 단단해진 암석을 (      )이라 한다.', answer: '규암', initials: 'ㄱㅇ', aliases: ['규암'] },
        { no: 8, text: '석회 성분이 쌓여 굳어진 퇴적암을 (      )이라 한다.', answer: '석회암', initials: 'ㅅㅎㅇ', aliases: ['석회암'] }
      ]
    },
    quiz: {
      q1_text: '화성암에 대한 설명으로 가장 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 흙과 모래가 쌓여 굳어진 암석이다.',
        '② 마그마가 식어서 굳어진 암석이다.',
        '③ 기존 암석이 열과 압력을 받아 변한 암석이다.',
        '④ 조개껍데기가 쌓여 만들어진 암석이다.'
      ],
      q2_text: '이 글의 전개 방식으로 가장 적절한 것은 무엇인가요?',
      q2_opts: [
        '① 암석의 종류를 세 가지로 나누어 각각의 생성 과정과 특징을 설명하고 있다.',
        '② 화성암의 장점과 단점을 비교하여 분석하고 있다.',
        '③ 암석이 만들어지는 시간 순서대로 나열하고 있다.',
        '④ 전문가의 의견을 인용하여 암석의 중요성을 강조하고 있다.'
      ],
      q3_html: `암석은 생성 방식에 따라 마그마가 식어 굳은 <input class="inline-input" id="q3-1" type="text" placeholder="ㅎㅅㅇ">, 흙과 모래가 쌓여 굳은 <input class="inline-input" id="q3-2" type="text" placeholder="ㅌㅈㅇ">으로 나눌 수 있다.`,
      q4_html: `심성암의 대표적인 예는 <input class="inline-input" id="q4-1" type="text" placeholder="ㅎㄱㅇ">이고, 사암이 열과 압력을 받아 변하면 <input class="inline-input" id="q4-2" type="text" placeholder="ㄱㅇ">이 된다.`,
      q3_1_ph: 'ㅎㅅㅇ', q3_2_ph: 'ㅌㅈㅇ', q4_1_ph: 'ㅎㄱㅇ', q4_2_ph: 'ㄱㅇ',
      q5_text: '만약 지구에서 열과 압력이 전혀 없다면 변성암은 만들어질 수 있을까요? 그 이유를 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'1', q3_1:['화성암'], q3_2:['퇴적암'], q4_1:['화강암'], q4_2:['규암'] },
    essayKeywords: ['변성암','열','압력','변화','환경','성질','광물','배열','만들어지지 않는다','불가능'],
    explain: {
      q1:'해설: 화성암은 뜨거운 마그마가 식어서 굳어진 암석이다. 흙과 모래가 쌓여 굳어진 것은 퇴적암, 열과 압력을 받아 변한 것은 변성암이다.',
      q2:'해설: 이 글은 암석을 화성암, 퇴적암, 변성암 세 가지로 분류한 뒤 각각의 생성 과정과 특징, 예시를 차례로 설명하는 분류-설명 구조로 전개되고 있다.',
      q3:'해설: 암석은 생성 방식에 따라 화성암(마그마가 식어 굳음), 퇴적암(흙·모래가 쌓여 굳음), 변성암(열과 압력으로 변함)으로 나뉜다.',
      q4:'해설: 심성암의 대표 예는 화강암이고, 사암이 높은 열과 압력을 받으면 더 단단한 규암으로 변한다.',
      q5:'예시 답안: 변성암은 만들어질 수 없습니다. 변성암은 기존 암석이 지하 깊은 곳에서 강한 열과 압력을 받아야만 광물이 재배열되거나 성질이 바뀌어 만들어지기 때문입니다. 열과 압력이 없다면 암석의 성질 변화가 일어나지 않아 변성암이 생성되지 않습니다.'
    },
    /* ✅ 창의활동 */
    creative: {
      title: 'Ai고래쌤과 함께하는 창의활동 — 나만의 암석 도감 만들기',
      instruction: '다음 활동을 통해 암석의 종류와 특징을 정리해 봅시다.',
      steps: [
        {
          step: 1,
          title: '🪨 암석 선택하기',
          content: '화성암, 퇴적암, 변성암 중 하나를 선택하고, 그 안에서 구체적인 암석 하나를 골라 소개해 보세요. (예: 화강암, 사암, 대리암 등)'
        },
        {
          step: 2,
          title: '📝 암석 소개 카드 작성하기',
          content: '선택한 암석의 생성 과정, 특징, 실생활에서 사용되는 예를 적어 보세요.'
        },
        {
          step: 3,
          title: '💭 생각 나누기',
          content: '만약 내가 건축가라면, 어떤 암석으로 무엇을 만들고 싶은지 상상해서 적어 보세요.'
        }
      ],
      reflection: '이 활동을 통해 암석이 어떻게 만들어지고 우리 생활에 어떻게 활용되는지 이해할 수 있습니다.'
    }
  },

  /* ===== earth_04 : "작은 알갱이가 되기까지, 암석의 삶" ===== */
  earth_04: {
    labelNo: '04',
    title: '🏜️ 작은 알갱이가 되기까지, 암석의 삶',
    passage: [
      '우리가 보기에는 단단하고 변하지 않을 것 같은 암석도, 사실은 아주 긴 시간 동안 자연의 여러 힘을 받으며 조금씩 달라지고 있어요. 햇빛이 암석을 달구고, 밤에는 차갑게 식는 과정이 반복되면 바위의 겉과 속이 다르게 <b>팽창</b>하고 <b>수축</b>해요. 여기에 비·바람 같은 기후 요인이 더해지면 암석은 서서히 금이 가고 작은 조각으로 떨어져 나갑니다. 처음에는 커다란 바위가 작은 돌이 되고, 돌은 자갈이 되며, 결국에는 고운 모래처럼 아주 작은 알갱이로 부서지게 되지요. 이런 자연 속의 분해 과정을 <b>풍화 작용</b>이라고 합니다.',
      '암석이 부서지는 이유는 기온 변화만 있는 것이 아니에요. 강의 상류에서 빠르게 흐르는 물에 휩쓸린 바위는 서로 부딪히며 모서리가 깎이고, 강을 따라 <b>하류</b>로 내려갈수록 점점 더 작아집니다. 또한 식물의 뿌리도 중요한 역할을 해요. 바위 <b>틈새</b>로 뿌리가 자라 들어가면 점점 굵어지면서 틈을 벌리고 결국 바위를 깨뜨리기도 합니다. 생물의 활동도 암석의 풍화에 영향을 주는 것이죠. 이처럼 다양한 물리적 힘들이 동시에 작용해 암석은 아주 긴 시간 동안 조금씩 형태를 잃어 갑니다.',
      '암석을 변화시키는 또 하나의 힘은 <b>화학 반응</b>입니다. 공기 중의 산소나 물에 녹아 있는 이산화탄소는 암석을 이루는 <b>성분</b>과 서서히 반응하여 색을 바꾸거나 바위를 약하게 만들어 녹여 버리기도 해요. 이러한 화학 변화가 물리적 변화와 함께 오랜 세월 반복되면, 암석은 마침내 흙이 됩니다. 우리가 손으로 움켜쥘 수 있는 흙 한 줌은 단순한 흙이 아니라, 수천 년 동안 쌓이고 반복된 자연의 변화가 만들어 낸 귀중한 결과물이에요. 이처럼 흙은 자연이 아주 오랜 시간 동안 천천히 빚어 낸 작품이라고 할 수 있습니다.'
    ],
    vocab: [
      ['풍화 작용', '암석이 자연의 힘으로 잘게 부서지는 과정'],
      ['팽창·수축', '온도 변화로 물질이 커졌다가 작아지는 현상'],
      ['하류', '강물의 흐름에서 아래쪽 방향'],
      ['마찰', '물체끼리 부딪히며 닳거나 깎이는 작용'],
      ['틈새', '물질 사이에 생긴 작은 공간'],
      ['성분', '물질을 이루는 기본 요소'],
      ['화학 반응', '물질이 만나 새로운 형태나 성질로 바뀌는 현상'],
      ['퇴적', '알갱이나 흙이 쌓여 새로운 층을 이루는 과정']
    ],
    /* ✅ 어휘학습(빈칸) */
    vocabFill: {
      instructions: '[암석 풍화 관련 어휘]',
      items: [
        { no: 1, text: '암석이 자연의 힘으로 잘게 부서지는 과정을 (      )이라고 한다.', answer: '풍화 작용', initials: 'ㅍㅎ ㅈㅇ', aliases: ['풍화작용','풍화'] },
        { no: 2, text: '온도 변화로 물질이 커졌다가 작아지는 현상을 (      )이라고 한다.', answer: '팽창·수축', initials: 'ㅍㅊ ㅅㅊ', aliases: ['팽창수축','팽창과 수축','팽창 수축'] },
        { no: 3, text: '강물의 흐름에서 아래쪽 방향을 (      )라고 한다.', answer: '하류', initials: 'ㅎㄹ', aliases: ['하류'] },
        { no: 4, text: '물체끼리 부딪히며 닳거나 깎이는 작용을 (      )이라고 한다.', answer: '마찰', initials: 'ㅁㅊ', aliases: ['마찰'] },
        { no: 5, text: '물질 사이에 생긴 작은 공간을 (      )라고 한다.', answer: '틈새', initials: 'ㅌㅅ', aliases: ['틈새'] },
        { no: 6, text: '물질이 만나 새로운 형태나 성질로 바뀌는 현상을 (      )이라고 한다.', answer: '화학 반응', initials: 'ㅎㅎ ㅂㅇ', aliases: ['화학반응'] },
        { no: 7, text: '물질을 이루는 기본 요소를 (      )이라고 한다.', answer: '성분', initials: 'ㅅㅂ', aliases: ['성분'] },
        { no: 8, text: '알갱이나 흙이 쌓여 새로운 층을 이루는 과정을 (      )이라고 한다.', answer: '퇴적', initials: 'ㅌㅈ', aliases: ['퇴적'] }
      ]
    },
    quiz: {
      q1_text: '본문에서 설명하는 "풍화 작용"의 의미로 가장 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 암석이 마그마에 의해 녹아 새로운 암석이 되는 과정',
        '② 암석이 물에 떠서 다른 곳으로 이동하는 과정',
        '③ 암석이 자연의 힘으로 잘게 부서지는 과정',
        '④ 암석이 화산 폭발로 하늘 높이 날아가는 과정'
      ],
      q2_text: '본문의 구조를 가장 잘 설명한 것은 무엇인가요?',
      q2_opts: [
        '① 암석이 변하는 원인을 시간 순서대로 나열하고 있다.',
        '② 물리적 풍화와 화학적 풍화를 나누어 설명하고 있다.',
        '③ 여러 나라의 풍화 사례를 비교하고 있다.',
        '④ 암석의 종류를 분류하여 소개하고 있다.'
      ],
      q3_html: `온도 변화로 암석의 겉과 속이 다르게 <input class="inline-input" id="q3-1" type="text" placeholder="ㅍㅊ">하고
                <input class="inline-input" id="q3-2" type="text" placeholder="ㅅㅊ">하면 금이 가게 된다.`,
      q4_html: `식물의 뿌리가 바위 <input class="inline-input" id="q4-1" type="text" placeholder="ㅌㅅ">로 자라 들어가 틈을 벌리고,
                공기 중 산소와 물의 <input class="inline-input" id="q4-2" type="text" placeholder="ㅎㅎ ㅂㅇ">도 암석을 변화시킨다.`,
      q3_1_ph: 'ㅍㅊ', q3_2_ph: 'ㅅㅊ', q4_1_ph: 'ㅌㅅ', q4_2_ph: 'ㅎㅎ ㅂㅇ',
      q5_text: '"흙 한 줌이 수천 년 자연 변화의 결과물"이라는 말의 의미를 본문 내용을 바탕으로 설명해 보세요.'
    },
    answerKey: { q1:'3', q2:'2', q3_1:['팽창'], q3_2:['수축'], q4_1:['틈새'], q4_2:['화학반응','화학 반응'] },
    essayKeywords: ['풍화','물리적','화학적','팽창','수축','뿌리','오랜 시간','흙'],
    explain: {
      q1:'해설: 풍화 작용은 암석이 자연의 힘(기온 변화, 물, 생물 등)으로 잘게 부서지는 과정이다.',
      q2:'해설: 본문은 물리적 풍화(1~2문단)와 화학적 풍화(3문단)를 나누어 설명하는 구조이다.',
      q3:'해설: 낮에 팽창하고 밤에 수축하는 과정이 반복되어 암석에 금이 간다.',
      q4:'해설: 뿌리가 틈새로 파고들고, 산소·이산화탄소의 화학 반응이 암석을 변화시킨다.',
      q5:'예시: 암석이 풍화 작용으로 수천 년에 걸쳐 서서히 부서지고 화학 변화를 거쳐 흙이 되므로, 흙 한 줌도 오랜 세월 자연이 만든 결과물이다.'
    },
    creative: {
      title: '🏜️ 작은 알갱이가 되기까지, 암석의 삶 - 암석의 일기 쓰기',
      instruction: '커다란 바위가 모래 알갱이가 되기까지의 여정을 바위 입장에서 일기로 써 봅시다.',
      steps: [
        {
          step: 1,
          title: '🪨 바위의 시작',
          content: '커다란 바위였던 시절의 모습을 상상해 보세요. 어디에 있었고, 어떤 기분이었을까요?',
          example: '예: 나는 산꼭대기에서 세상을 내려다보던 거대한 바위였다. 아무도 나를 움직일 수 없을 것 같았다.'
        },
        {
          step: 2,
          title: '🌡️ 풍화의 시작',
          content: '햇빛과 밤의 추위, 비와 바람이 바위에게 어떤 영향을 주었는지 일기로 적어 보세요.',
          example: '예: 낮에는 뜨거운 햇볕에 몸이 뜨거워지고, 밤에는 차갑게 식었다. 어느 날 내 몸에 작은 금이 생겼다...'
        },
        {
          step: 3,
          title: '💧 변화의 여정',
          content: '강물에 휩쓸리거나 식물 뿌리에 의해 깨지는 경험을 일기로 써 보세요.',
          example: '예: 비가 많이 온 날, 나는 강물에 떠밀려 굴러갔다. 다른 돌들과 부딪히며 모서리가 둥글해졌다.'
        },
        {
          step: 4,
          title: '🏖️ 모래가 되어',
          content: '마침내 작은 알갱이가 된 바위의 마지막 일기를 써 보세요.',
          example: '예: 이제 나는 해변의 고운 모래가 되었다. 아이들이 내 위에서 모래성을 쌓는다. 새로운 삶이 시작되었다.'
        }
      ],
      reflection: '수천 년에 걸친 바위의 변화를 상상하며 자연의 힘이 얼마나 강하고 꾸준한지 느낄 수 있었나요?'
    }
  },

  /* ===== earth_05 : "강의 흐름이 빚어낸 자연 조각품" ===== */
  earth_05: {
    labelNo: '05',
    title: '🌊 강의 흐름이 빚어낸 자연 조각품',
    passage: [
      '자연 속에서 물은 늘 움직이며 지형을 바꾸는 강력한 힘을 가지고 있어요. 물이 빠르게 흐르면 흙과 돌을 깎아 내리는데, 이러한 과정을 <b>침식</b> 작용이라고 합니다. 반대로 물이 천천히 흐르는 곳에서는 깎여 나온 흙과 자갈이 쌓이게 되는데, 이것을 <b>퇴적</b> 작용이라 불러요. 비가 많이 내리거나 여러 계절이 반복되면서 물은 끊임없이 흐르고, 이 흐름에 따라 땅의 모습은 조금씩 변해 갑니다.',
      '경사가 급한 산 위에서는 비가 내릴 때 물이 빠르게 흘러내리기 때문에 땅이 세게 깎입니다. 그래서 계곡의 단면이 알파벳 \'V\'처럼 좁고 깊은 <b>V자 계곡</b>이 만들어지지요. 물이 산 아래의 완만한 지역으로 내려오면 속도가 줄어들어 흙과 자갈이 쌓이기 쉬워집니다. 이렇게 해서 넓은 부채 모양의 \'<b>선상지</b>\'가 생겨요. 평평한 땅에서는 물이 직선으로 흐르지 않고, 차츰 S자 모양으로 굽어지며 흐릅니다. 굽은 부분 바깥쪽은 물살이 강해서 침식이 일어나고, 안쪽은 물살이 느려 흙이 쌓이는 퇴적이 나타납니다. 이런 강을 \'<b>곡류 하천</b>\'이라고 합니다.',
      '강이 바다에 다가갈수록 흘러가는 속도는 점점 느려지고, 물이 운반해 온 흙이 쌓이기 시작합니다. 바다와 만나는 지점에서는 특히 퇴적이 활발하게 일어나는데, 그 결과 흙이 삼각형 모양으로 넓게 퍼져 쌓여요. 이렇게 형성된 지형을 \'<b>삼각주</b>\'라고 합니다. 삼각주는 시간이 지나면서 점점 넓어지고 새로운 땅이 생겨나기도 해요. 결국 흐르는 물은 높은 산에서 바다에 이를 때까지 다양한 방식으로 땅을 깎고 쌓으며 지구의 모습을 계속 새롭게 만들고 있는 셈이지요.'
    ],
    vocab: [
      ['침식', '물·바람 등이 땅이나 암석을 깎아 내리는 과정'],
      ['퇴적', '흙·모래·자갈 등이 쌓이는 현상'],
      ['V자 계곡', '물이 빠르게 흐르며 형성된 좁고 깊은 계곡'],
      ['선상지', '산 아래 평지에 흙과 자갈이 부채꼴로 쌓인 지형'],
      ['곡류 하천', 'S자 모양으로 굽이치며 흐르는 강'],
      ['하류', '강이 바다와 가까운 아래쪽 지역'],
      ['유속', '물이 흐르는 속도'],
      ['삼각주', '강이 바다와 만나는 곳에 퇴적물이 쌓여 삼각형이 된 지형']
    ],
    vocabFill: {
      instructions: '[강의 지형 관련 어휘]',
      items: [
        { no: 1, text: '물·바람 등이 땅이나 암석을 깎아 내리는 과정을 (      )이라고 한다.', answer: '침식', initials: 'ㅊㅅ', aliases: ['침식'] },
        { no: 2, text: '흙·모래·자갈 등이 쌓이는 현상을 (      )이라고 한다.', answer: '퇴적', initials: 'ㅌㅈ', aliases: ['퇴적'] },
        { no: 3, text: '물이 빠르게 흐르며 형성된 좁고 깊은 계곡을 (        )이라 한다.', answer: 'V자 계곡', initials: 'Vㅈㄱㄱ', aliases: ['V자계곡','V자 계곡','브이자 계곡'] },
        { no: 4, text: '산 아래 평지에 흙과 자갈이 부채꼴로 쌓인 지형을 (      )라 한다.', answer: '선상지', initials: 'ㅅㅅㅈ', aliases: ['선상지'] },
        { no: 5, text: 'S자 모양으로 굽이치며 흐르는 강을 (        )이라 한다.', answer: '곡류 하천', initials: 'ㄱㄹ ㅎㅊ', aliases: ['곡류하천','곡류 하천'] },
        { no: 6, text: '강이 바다와 가까운 아래쪽 지역을 (      )라고 한다.', answer: '하류', initials: 'ㅎㄹ', aliases: ['하류'] },
        { no: 7, text: '물이 흐르는 속도를 (      )이라고 한다.', answer: '유속', initials: 'ㅇㅅ', aliases: ['유속'] },
        { no: 8, text: '강이 바다와 만나는 곳에 퇴적물이 쌓여 삼각형이 된 지형을 (      )라고 한다.', answer: '삼각주', initials: 'ㅅㄱㅈ', aliases: ['삼각주'] }
      ]
    },
    quiz: {
      q1_text: '물이 빠르게 흐르는 곳에서 일어나는 작용으로 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 퇴적 작용이 활발하게 일어난다.',
        '② 흙과 자갈이 넓게 쌓인다.',
        '③ 침식 작용으로 땅이 깎인다.',
        '④ 삼각주가 형성된다.'
      ],
      q2_text: '이 글의 전개 구조로 가장 알맞은 것은 무엇인가요?',
      q2_opts: [
        '① 문제 제기 → 원인 분석 → 해결 방안 제시',
        '② 침식·퇴적 개념 → 상류~중류 지형 → 하류 지형',
        '③ 과거 상황 → 현재 비교 → 미래 예측',
        '④ 주장 제시 → 근거 나열 → 결론 요약'
      ],
      q3_html: `경사가 급한 산에서는 물이 빠르게 흘러 <input class="inline-input" id="q3-1" type="text" placeholder="Vㅈㄱㄱ">이 만들어지고, 산 아래 완만한 지역에서는 <input class="inline-input" id="q3-2" type="text" placeholder="ㅅㅅㅈ">가 형성됩니다.`,
      q4_html: `강이 바다와 만나는 곳에서는 <input class="inline-input" id="q4-1" type="text" placeholder="ㅌㅈ"> 작용이 활발하여 <input class="inline-input" id="q4-2" type="text" placeholder="ㅅㄱㅈ">가 만들어집니다.`,
      q3_1_ph: 'Vㅈㄱㄱ', q3_2_ph: 'ㅅㅅㅈ', q4_1_ph: 'ㅌㅈ', q4_2_ph: 'ㅅㄱㅈ',
      q5_text: '침식 작용과 퇴적 작용이 일어나는 조건의 차이를 설명하고, 각각의 예를 들어 보세요.'
    },
    answerKey: { q1:'3', q2:'2', q3_1:['V자 계곡','V자계곡','브이자 계곡','V자계곡'], q3_2:['선상지'], q4_1:['퇴적'], q4_2:['삼각주'] },
    essayKeywords: ['침식','퇴적','빠르게','느리게','깎다','쌓다','V자 계곡','선상지','곡류','삼각주','유속'],
    explain: {
      q1:'해설: 물이 빠르게 흐르면 침식 작용으로 땅이 깎입니다.',
      q2:'해설: 본문은 침식·퇴적 개념 설명 → 상류~중류 지형(V자 계곡, 선상지, 곡류 하천) → 하류 지형(삼각주) 순서로 전개됩니다.',
      q3:'해설: 경사가 급한 산에서는 "V자 계곡"이, 산 아래 완만한 지역에서는 "선상지"가 형성됩니다.',
      q4:'해설: 강이 바다와 만나는 곳에서는 "퇴적" 작용이 활발하여 "삼각주"가 만들어집니다.',
      q5:'예시: 침식은 물이 빠르게 흐를 때 일어나며(예: V자 계곡), 퇴적은 물이 느리게 흐를 때 일어납니다(예: 삼각주, 선상지).'
    },
    creative: {
      title: '내가 만드는 강 여행 지도',
      topic: '강이 산에서 바다까지 흐르며 만드는 지형들을 상상하며, 나만의 강 여행 지도를 글로 설명해 보세요.',
      hint: '💡 힌트) 상류(V자 계곡), 중류(선상지, 곡류 하천), 하류(삼각주) 등 어떤 지형을 지나는지 순서대로 적어 보세요.',
      examples: [
        '예시 1) 높은 산에서 시작한 강물은 V자 계곡을 만들며 빠르게 흘러내렸다.',
        '예시 2) 산 아래에 도착하니 속도가 느려지며 부채 모양의 선상지가 펼쳐졌다.',
        '예시 3) 강이 바다에 가까워지자 삼각주가 나타났고, 넓은 평야가 보였다.'
      ]
    }
  },

  /* ===== earth_06 : "지도를 보고 길을 찾아가다" (샘플 데이터) ===== */
  earth_06: {
    labelNo: '06',
    title: '🗺️ 지도를 보고 길을 찾아가다',
    passage: [
      '낯선 장소에 갔을 때 가장 먼저 하는 일은 지도를 확인하는 것입니다. 지도는 <b>방향</b>과 <b>거리</b>를 알려주어 목적지까지 안전하게 도달할 수 있게 합니다.',
      '지도를 읽을 때는 <b>축척</b>, <b>방위표</b>, <b>범례</b> 등을 이해해야 합니다. 이러한 정보를 활용하면 실제 공간에서 길을 찾는 데 큰 도움이 됩니다.',
      '요즘은 스마트폰의 <b>GPS</b> 기능으로 실시간 위치를 확인하며 길을 찾을 수 있지만, 종이 지도를 읽는 능력도 여전히 중요합니다.'
    ],
    vocab: [
      ['방향','동서남북 등 나아가는 쪽'],
      ['거리','두 지점 사이의 길이'],
      ['축척','실제와 지도의 크기 비율'],
      ['방위표','지도에서 방향을 나타내는 표시'],
      ['범례','지도 기호의 의미를 설명한 것'],
      ['GPS','위성을 이용한 위치 확인 시스템'],
      ['실시간','바로 지금 이 순간'],
      ['목적지','가고자 하는 곳'],
      ['경로','출발지에서 목적지까지의 길']
    ],
    vocabFill: {
      instructions: '[지도 읽기 어휘]',
      items: [
        { no: 1, text: '동서남북 등 나아가는 쪽을 (      )이라고 한다.', answer: '방향', initials: 'ㅂㅎ', aliases: ['방향'] },
        { no: 2, text: '두 지점 사이의 길이를 (      )라고 한다.', answer: '거리', initials: 'ㄱㄹ', aliases: ['거리'] },
        { no: 3, text: '실제와 지도의 크기 비율을 (      )이라 한다.', answer: '축척', initials: 'ㅊㅊ', aliases: ['축척'] },
        { no: 4, text: '지도에서 방향을 나타내는 표시를 (      )라 한다.', answer: '방위표', initials: 'ㅂㅇㅍ', aliases: ['방위표'] },
        { no: 5, text: '지도 기호의 의미를 설명한 것을 (      )라 한다.', answer: '범례', initials: 'ㅂㄹ', aliases: ['범례'] },
        { no: 6, text: '위성을 이용한 위치 확인 시스템을 (   )라 한다.', answer: 'GPS', initials: 'ㅈㅍㅅ', aliases: ['GPS','지피에스'] },
        { no: 7, text: '바로 지금 이 순간을 (      )이라고 한다.', answer: '실시간', initials: 'ㅅㅅㄱ', aliases: ['실시간'] },
        { no: 8, text: '가고자 하는 곳을 (      )라고 한다.', answer: '목적지', initials: 'ㅁㅈㅈ', aliases: ['목적지'] },
        { no: 9, text: '출발지에서 목적지까지의 길을 (      )라고 한다.', answer: '경로', initials: 'ㄱㄹ', aliases: ['경로'] }
      ]
    },
    quiz: {
      q1_text: '지도를 읽을 때 가장 중요한 요소는 무엇인가요?',
      q1_opts: ['① 지도의 색깔', '② 축척, 방위표, 범례', '③ 지도의 크기', '④ 지도를 만든 사람'],
      q2_text: 'GPS의 장점은 무엇인가요?',
      q2_opts: ['① 종이가 필요 없다', '② 실시간으로 위치를 확인할 수 있다', '③ 배터리가 필요 없다', '④ 항상 정확하다'],
      q3_1_ph: 'ㅊㅊ', q3_2_ph: 'ㅂㅇㅍ',
      q4_1_ph: 'ㅈㅍㅅ', q4_2_ph: 'ㅅㅅㄱ',
      q5_text: '종이 지도와 디지털 지도의 장단점을 비교하여 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'2', q3_1:['축척'], q3_2:['방위표'], q4_1:['GPS','지피에스'], q4_2:['실시간'] },
    essayKeywords: ['지도','종이','디지털','GPS','장점','단점'],
    explain: {
      q1:'해설: 축척, 방위표, 범례는 지도 읽기의 핵심 요소.',
      q2:'해설: GPS는 실시간 위치 확인이 가능함.',
      q3:'해설: 축척으로 거리를, 방위표로 방향을 알 수 있음.',
      q4:'해설: GPS는 실시간 위치 추적 가능.',
      q5:'예시: 종이 지도는 배터리 불필요, 디지털은 실시간 업데이트 가능.'
    }
  },

  /* ===== earth_07 : "세계 여러 나라의 위치와 특징" (샘플 데이터) ===== */
  earth_07: {
    labelNo: '07',
    title: '🌍 세계 여러 나라의 위치와 특징',
    passage: [
      '지구에는 약 200개가 넘는 나라가 있으며, 각 나라는 고유한 <b>지리적 위치</b>와 <b>문화</b>를 가지고 있습니다.',
      '나라의 위치는 그 나라의 <b>기후</b>, <b>산업</b>, <b>생활 방식</b>에 큰 영향을 미칩니다. 예를 들어 적도 근처 나라는 더운 날씨, 북극 근처 나라는 추운 날씨를 보입니다.',
      '세계 지도를 통해 각 나라의 위치를 파악하고, 그 특징을 이해하는 것은 <b>국제 이해</b>의 첫걸음입니다.'
    ],
    vocab: [
      ['지리적 위치','지구상에서 특정 지점이 있는 자리'],
      ['문화','한 사회의 생활 양식과 전통'],
      ['기후','어떤 지역의 평균적인 날씨'],
      ['산업','물건을 만들거나 서비스를 제공하는 일'],
      ['생활 방식','사람들이 살아가는 방법'],
      ['적도','지구의 중심을 가로지르는 가상의 선'],
      ['국제 이해','여러 나라를 이해하고 존중하는 태도'],
      ['대륙','지구를 이루는 큰 땅덩어리'],
      ['해양','지구를 둘러싼 넓은 바다']
    ],
    vocabFill: {
      instructions: '[세계 지리 어휘]',
      items: [
        { no: 1, text: '지구상에서 특정 지점이 있는 자리를 (        )라고 한다.', answer: '지리적 위치', initials: 'ㅈㄹㅈ ㅇㅊ', aliases: ['지리적위치'] },
        { no: 2, text: '한 사회의 생활 양식과 전통을 (      )라고 한다.', answer: '문화', initials: 'ㅁㅎ', aliases: ['문화'] },
        { no: 3, text: '어떤 지역의 평균적인 날씨를 (      )라고 한다.', answer: '기후', initials: 'ㄱㅎ', aliases: ['기후'] },
        { no: 4, text: '물건을 만들거나 서비스를 제공하는 일을 (      )이라 한다.', answer: '산업', initials: 'ㅅㅇ', aliases: ['산업'] },
        { no: 5, text: '사람들이 살아가는 방법을 (        )이라 한다.', answer: '생활 방식', initials: 'ㅅㅎ ㅂㅅ', aliases: ['생활방식'] },
        { no: 6, text: '지구의 중심을 가로지르는 가상의 선을 (      )라 한다.', answer: '적도', initials: 'ㅈㄷ', aliases: ['적도'] },
        { no: 7, text: '여러 나라를 이해하고 존중하는 태도를 (        )라 한다.', answer: '국제 이해', initials: 'ㄱㅈ ㅇㅎ', aliases: ['국제이해'] },
        { no: 8, text: '지구를 이루는 큰 땅덩어리를 (      )라고 한다.', answer: '대륙', initials: 'ㄷㄹ', aliases: ['대륙'] },
        { no: 9, text: '지구를 둘러싼 넓은 바다를 (      )라고 한다.', answer: '해양', initials: 'ㅎㅇ', aliases: ['해양'] }
      ]
    },
    quiz: {
      q1_text: '나라의 위치가 그 나라에 미치는 영향으로 가장 알맞은 것은?',
      q1_opts: ['① 위치는 기후와 산업에 영향을 준다', '② 위치는 아무 영향이 없다', '③ 위치는 문화와 무관하다', '④ 모든 나라의 위치는 같다'],
      q2_text: '국제 이해가 중요한 이유는 무엇인가요?',
      q2_opts: ['① 다른 나라를 비판하기 위해', '② 여러 나라를 이해하고 존중하기 위해', '③ 우리나라만 발전시키기 위해', '④ 세계 지도를 외우기 위해'],
      q3_1_ph: 'ㄱㅎ', q3_2_ph: 'ㅅㅇ',
      q4_1_ph: 'ㅈㄷ', q4_2_ph: 'ㄷㄹ',
      q5_text: '세계 여러 나라의 위치를 아는 것이 왜 중요한지 설명해 보세요.'
    },
    answerKey: { q1:'1', q2:'2', q3_1:['기후'], q3_2:['산업'], q4_1:['적도'], q4_2:['대륙'] },
    essayKeywords: ['세계','나라','위치','이해','기후','문화'],
    explain: {
      q1:'해설: 위치는 기후, 산업, 생활 방식에 영향을 미침.',
      q2:'해설: 국제 이해는 다양성 존중의 기초.',
      q3:'해설: 위치에 따라 기후와 산업이 달라짐.',
      q4:'해설: 적도 근처는 더운 기후, 대륙별로 특징 다름.',
      q5:'예시: 각 나라의 문화와 생활을 이해하고 존중하기 위해 필요함.'
    }
  },

  /* ===== earth_08 : "우리나라의 지리적 특성 이해하기" (샘플 데이터) ===== */
  earth_08: {
    labelNo: '08',
    title: '🇰🇷 우리나라의 지리적 특성 이해하기',
    passage: [
      '우리나라는 <b>한반도</b>에 위치하며, 삼면이 바다로 둘러싸여 있습니다. <b>동해</b>, <b>서해</b>, <b>남해</b>가 각각 다른 특징을 가지고 있습니다.',
      '국토의 약 70%가 산지로 이루어져 있어 <b>산악 지형</b>이 발달했습니다. 이로 인해 계곡과 분지가 많으며, 평야는 주로 서해안에 분포합니다.',
      '우리나라는 <b>사계절</b>이 뚜렷하여 계절마다 다른 풍경과 생활 모습을 보입니다.'
    ],
    vocab: [
      ['한반도','우리나라가 위치한 반도'],
      ['동해','한반도 동쪽의 바다'],
      ['서해','한반도 서쪽의 바다'],
      ['남해','한반도 남쪽의 바다'],
      ['산악 지형','산이 많은 땅의 모양'],
      ['평야','넓고 평평한 땅'],
      ['사계절','봄, 여름, 가을, 겨울'],
      ['계곡','산과 산 사이의 골짜기'],
      ['분지','주위가 산으로 둘러싸인 평지']
    ],
    vocabFill: {
      instructions: '[우리나라 지리 어휘]',
      items: [
        { no: 1, text: '우리나라가 위치한 반도를 (      )라고 한다.', answer: '한반도', initials: 'ㅎㅂㄷ', aliases: ['한반도'] },
        { no: 2, text: '한반도 동쪽의 바다를 (      )라고 한다.', answer: '동해', initials: 'ㄷㅎ', aliases: ['동해'] },
        { no: 3, text: '한반도 서쪽의 바다를 (      )라고 한다.', answer: '서해', initials: 'ㅅㅎ', aliases: ['서해'] },
        { no: 4, text: '한반도 남쪽의 바다를 (      )라고 한다.', answer: '남해', initials: 'ㄴㅎ', aliases: ['남해'] },
        { no: 5, text: '산이 많은 땅의 모양을 (        )이라 한다.', answer: '산악 지형', initials: 'ㅅㅇ ㅈㅎ', aliases: ['산악지형'] },
        { no: 6, text: '넓고 평평한 땅을 (      )라고 한다.', answer: '평야', initials: 'ㅍㅇ', aliases: ['평야'] },
        { no: 7, text: '봄, 여름, 가을, 겨울을 (      )이라 한다.', answer: '사계절', initials: 'ㅅㄱㅈ', aliases: ['사계절'] },
        { no: 8, text: '산과 산 사이의 골짜기를 (      )라고 한다.', answer: '계곡', initials: 'ㄱㄱ', aliases: ['계곡'] },
        { no: 9, text: '주위가 산으로 둘러싸인 평지를 (      )라고 한다.', answer: '분지', initials: 'ㅂㅈ', aliases: ['분지'] }
      ]
    },
    quiz: {
      q1_text: '우리나라의 지리적 특징으로 가장 알맞은 것은?',
      q1_opts: ['① 사면이 바다로 둘러싸임', '② 삼면이 바다, 산지 많음', '③ 평야만 있음', '④ 사막이 많음'],
      q2_text: '사계절이 뚜렷한 이유는 무엇인가요?',
      q2_opts: ['① 위도와 기후의 영향', '② 바다가 많아서', '③ 산이 많아서', '④ 인구가 많아서'],
      q3_1_ph: 'ㅎㅂㄷ', q3_2_ph: 'ㅅㅇ ㅈㅎ',
      q4_1_ph: 'ㅅㄱㅈ', q4_2_ph: 'ㅍㅇ',
      q5_text: '우리나라의 지리적 특징이 우리 생활에 미치는 영향을 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'1', q3_1:['한반도'], q3_2:['산악지형','산악 지형'], q4_1:['사계절'], q4_2:['평야'] },
    essayKeywords: ['한반도','산','바다','사계절','평야','생활'],
    explain: {
      q1:'해설: 삼면이 바다, 국토의 70%가 산지.',
      q2:'해설: 위도와 기후의 영향으로 사계절 뚜렷.',
      q3:'해설: 한반도는 산악 지형이 발달.',
      q4:'해설: 사계절과 평야가 농업에 영향.',
      q5:'예시: 산지는 등산 문화, 바다는 어업, 사계절은 다양한 계절 행사.'
    }
  },

  /* ===== earth_09 : "자연재해와 인간의 대응" (샘플 데이터) ===== */
  earth_09: {
    labelNo: '09',
    title: '⚠️ 자연재해와 인간의 대응',
    passage: [
      '자연재해는 <b>지진</b>, <b>태풍</b>, <b>홍수</b>, <b>가뭄</b> 등 자연 현상으로 인해 발생하는 피해를 말합니다.',
      '이러한 재해는 인간의 생명과 재산에 큰 피해를 주지만, 사전에 철저히 <b>대비</b>하고 <b>대응</b>하면 피해를 줄일 수 있습니다.',
      '최근에는 <b>재해 예측 시스템</b>과 <b>대피 훈련</b>을 통해 피해를 최소화하려는 노력이 이루어지고 있습니다.'
    ],
    vocab: [
      ['자연재해','자연 현상으로 인한 큰 피해'],
      ['지진','땅이 흔들리는 현상'],
      ['태풍','강한 바람과 비를 동반하는 열대 저기압'],
      ['홍수','물이 넘쳐 피해를 주는 현상'],
      ['가뭄','오랫동안 비가 오지 않는 현상'],
      ['대비','미리 준비하는 것'],
      ['대응','상황에 맞게 행동하는 것'],
      ['재해 예측 시스템','재해를 미리 알려주는 기술'],
      ['대피 훈련','위험 상황에서 안전하게 피하는 연습']
    ],
    vocabFill: {
      instructions: '[자연재해 어휘]',
      items: [
        { no: 1, text: '자연 현상으로 인한 큰 피해를 (        )라고 한다.', answer: '자연재해', initials: 'ㅈㅇ ㅈㅎ', aliases: ['자연재해'] },
        { no: 2, text: '땅이 흔들리는 현상을 (      )이라고 한다.', answer: '지진', initials: 'ㅈㅈ', aliases: ['지진'] },
        { no: 3, text: '강한 바람과 비를 동반하는 열대 저기압을 (      )이라 한다.', answer: '태풍', initials: 'ㅌㅍ', aliases: ['태풍'] },
        { no: 4, text: '물이 넘쳐 피해를 주는 현상을 (      )라고 한다.', answer: '홍수', initials: 'ㅎㅅ', aliases: ['홍수'] },
        { no: 5, text: '오랫동안 비가 오지 않는 현상을 (      )이라 한다.', answer: '가뭄', initials: 'ㄱㅁ', aliases: ['가뭄'] },
        { no: 6, text: '미리 준비하는 것을 (      )라고 한다.', answer: '대비', initials: 'ㄷㅂ', aliases: ['대비'] },
        { no: 7, text: '상황에 맞게 행동하는 것을 (      )라고 한다.', answer: '대응', initials: 'ㄷㅇ', aliases: ['대응'] },
        { no: 8, text: '재해를 미리 알려주는 기술을 (            )이라 한다.', answer: '재해 예측 시스템', initials: 'ㅈㅎ ㅇㅊ ㅅㅅㅌ', aliases: ['재해예측시스템'] },
        { no: 9, text: '위험 상황에서 안전하게 피하는 연습을 (        )이라 한다.', answer: '대피 훈련', initials: 'ㄷㅍ ㅎㄹ', aliases: ['대피훈련'] }
      ]
    },
    quiz: {
      q1_text: '자연재해 피해를 줄이는 방법으로 가장 알맞은 것은?',
      q1_opts: ['① 아무것도 하지 않기', '② 사전 대비와 대응', '③ 재해 후에만 행동', '④ 무조건 피하기'],
      q2_text: '대피 훈련이 중요한 이유는 무엇인가요?',
      q2_opts: ['① 재미있어서', '② 위험 상황에서 빠르게 대응하기 위해', '③ 시간을 보내기 위해', '④ 법으로 정해져서'],
      q3_1_ph: 'ㅈㅈ', q3_2_ph: 'ㅌㅍ',
      q4_1_ph: 'ㄷㅂ', q4_2_ph: 'ㄷㅇ',
      q5_text: '자연재해가 발생했을 때 우리가 해야 할 행동을 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'2', q3_1:['지진'], q3_2:['태풍'], q4_1:['대비'], q4_2:['대응'] },
    essayKeywords: ['재해','대비','대응','안전','대피','예방'],
    explain: {
      q1:'해설: 사전 대비와 신속한 대응이 피해를 줄임.',
      q2:'해설: 대피 훈련은 실제 상황에서 생명을 구함.',
      q3:'해설: 지진, 태풍 등 다양한 자연재해 존재.',
      q4:'해설: 미리 대비하고 상황에 맞게 대응해야 함.',
      q5:'예시: 안전한 곳으로 대피하고, 긴급 연락망을 확인하며, 침착하게 행동.'
    }
  },

  /* ===== earth_10 : "환경 문제와 지속 가능한 발전" (샘플 데이터) ===== */
  earth_10: {
    labelNo: '10',
    title: '🌱 환경 문제와 지속 가능한 발전',
    passage: [
      '현대 사회는 <b>환경 오염</b>, <b>지구 온난화</b>, <b>생물 다양성 감소</b> 등 심각한 환경 문제에 직면해 있습니다.',
      '이러한 문제를 해결하기 위해서는 <b>재생 에너지</b> 사용, <b>재활용</b>, <b>탄소 배출 감소</b> 등의 노력이 필요합니다.',
      '<b>지속 가능한 발전</b>은 현재 세대의 필요를 충족하면서도 미래 세대의 환경을 보호하는 것을 의미합니다.'
    ],
    vocab: [
      ['환경 오염','공기, 물, 토양이 더러워지는 것'],
      ['지구 온난화','지구의 평균 기온이 높아지는 현상'],
      ['생물 다양성','여러 종류의 생물이 존재하는 것'],
      ['재생 에너지','다시 만들어 쓸 수 있는 에너지'],
      ['재활용','쓴 물건을 다시 사용하는 것'],
      ['탄소 배출','이산화탄소를 내보내는 것'],
      ['지속 가능한 발전','미래를 위한 균형 잡힌 발전'],
      ['온실가스','지구를 덥게 만드는 기체'],
      ['친환경','환경을 보호하는']
    ],
    vocabFill: {
      instructions: '[환경과 발전 어휘]',
      items: [
        { no: 1, text: '공기, 물, 토양이 더러워지는 것을 (        )이라 한다.', answer: '환경 오염', initials: 'ㅎㄱ ㅇㅇ', aliases: ['환경오염'] },
        { no: 2, text: '지구의 평균 기온이 높아지는 현상을 (          )이라 한다.', answer: '지구 온난화', initials: 'ㅈㄱ ㅇㄴㅎ', aliases: ['지구온난화'] },
        { no: 3, text: '여러 종류의 생물이 존재하는 것을 (          )이라 한다.', answer: '생물 다양성', initials: 'ㅅㅁ ㄷㅇㅅ', aliases: ['생물다양성'] },
        { no: 4, text: '다시 만들어 쓸 수 있는 에너지를 (        )라 한다.', answer: '재생 에너지', initials: 'ㅈㅅ ㅇㄴㅈ', aliases: ['재생에너지'] },
        { no: 5, text: '쓴 물건을 다시 사용하는 것을 (      )이라 한다.', answer: '재활용', initials: 'ㅈㅎㅇ', aliases: ['재활용'] },
        { no: 6, text: '이산화탄소를 내보내는 것을 (        )이라 한다.', answer: '탄소 배출', initials: 'ㅌㅅ ㅂㅊ', aliases: ['탄소배출'] },
        { no: 7, text: '미래를 위한 균형 잡힌 발전을 (            )이라 한다.', answer: '지속 가능한 발전', initials: 'ㅈㅅ ㄱㄴㅎ ㅂㅈ', aliases: ['지속가능한발전'] },
        { no: 8, text: '지구를 덥게 만드는 기체를 (      )라고 한다.', answer: '온실가스', initials: 'ㅇㅅㄱㅅ', aliases: ['온실가스'] },
        { no: 9, text: '환경을 보호하는 것을 (      )이라고 한다.', answer: '친환경', initials: 'ㅊㅎㄱ', aliases: ['친환경'] }
      ]
    },
    quiz: {
      q1_text: '지속 가능한 발전의 의미로 가장 알맞은 것은?',
      q1_opts: ['① 현재만 생각', '② 미래 세대도 고려', '③ 개발 중단', '④ 환경 파괴'],
      q2_text: '환경 보호를 위해 우리가 할 수 있는 일은?',
      q2_opts: ['① 일회용품 많이 쓰기', '② 재활용하기', '③ 에너지 낭비', '④ 쓰레기 버리기'],
      q3_1_ph: 'ㅎㄱ ㅇㅇ', q3_2_ph: 'ㅈㄱ ㅇㄴㅎ',
      q4_1_ph: 'ㅈㅎㅇ', q4_2_ph: 'ㅈㅅ ㅇㄴㅈ',
      q5_text: '지속 가능한 발전을 위해 개인이 실천할 수 있는 방법을 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'2', q3_1:['환경오염','환경 오염'], q3_2:['지구온난화','지구 온난화'], q4_1:['재활용'], q4_2:['재생에너지','재생 에너지'] },
    essayKeywords: ['환경','재활용','에너지','탄소','지속','실천'],
    explain: {
      q1:'해설: 지속 가능한 발전은 미래 세대를 고려한 균형 발전.',
      q2:'해설: 재활용은 환경 보호의 기본 실천.',
      q3:'해설: 환경 오염과 지구 온난화는 현대의 주요 문제.',
      q4:'해설: 재활용과 재생 에너지가 핵심 해결책.',
      q5:'예시: 일회용품 줄이기, 분리수거, 대중교통 이용, 에너지 절약.'
    }
  },

  /* ===== earth_11 ~ earth_20 샘플 데이터 (더 간략하게) ===== */

  earth_11: {
    labelNo: '11',
    title: '🏙️ 도시와 농촌의 차이',
    passage: ['도시는 인구가 많고 다양한 산업이 발달한 곳입니다.','농촌은 자연과 가까우며 농업이 중심입니다.','각각의 특징을 이해하고 조화롭게 발전해야 합니다.'],
    vocab: [['도시','인구와 시설이 밀집한 곳'],['농촌','농업 중심의 시골 지역'],['인구 밀집','사람이 많이 모여 사는 것'],['산업','생산과 서비스 활동'],['농업','농사를 짓는 일'],['교통','이동 수단과 시스템'],['인프라','기반 시설'],['생활 환경','사람들이 사는 조건'],['조화','균형 있게 어울림']],
    vocabFill: { instructions: '[도시와 농촌]', items: [
      {no:1,text:'인구와 시설이 밀집한 곳을 (   )라고 한다.',answer:'도시',initials:'ㄷㅅ',aliases:['도시']},
      {no:2,text:'농업 중심의 시골 지역을 (   )이라 한다.',answer:'농촌',initials:'ㄴㅊ',aliases:['농촌']},
      {no:3,text:'사람이 많이 모여 사는 것을 (      )이라 한다.',answer:'인구 밀집',initials:'ㅇㄱ ㅁㅈ',aliases:['인구밀집']},
      {no:4,text:'생산과 서비스 활동을 (   )이라 한다.',answer:'산업',initials:'ㅅㅇ',aliases:['산업']},
      {no:5,text:'농사를 짓는 일을 (   )이라 한다.',answer:'농업',initials:'ㄴㅇ',aliases:['농업']},
      {no:6,text:'이동 수단과 시스템을 (   )이라 한다.',answer:'교통',initials:'ㄱㅌ',aliases:['교통']},
      {no:7,text:'기반 시설을 (     )라고 한다.',answer:'인프라',initials:'ㅇㅍㄹ',aliases:['인프라']},
      {no:8,text:'사람들이 사는 조건을 (      )이라 한다.',answer:'생활 환경',initials:'ㅅㅎ ㅎㄱ',aliases:['생활환경']},
      {no:9,text:'균형 있게 어울림을 (   )라고 한다.',answer:'조화',initials:'ㅈㅎ',aliases:['조화']}
    ]},
    quiz: {q1_text:'도시의 특징은?',q1_opts:['① 인구 많음','② 인구 적음','③ 농업만','④ 시설 없음'],q2_text:'농촌의 장점은?',q2_opts:['① 자연과 가까움','② 시설 많음','③ 인구 많음','④ 공기 나쁨'],q3_1_ph:'ㄷㅅ',q3_2_ph:'ㄴㅊ',q4_1_ph:'ㅅㅇ',q4_2_ph:'ㄴㅇ',q5_text:'도시와 농촌이 조화롭게 발전하려면 어떻게 해야 할까요?'},
    answerKey: {q1:'1',q2:'1',q3_1:['도시'],q3_2:['농촌'],q4_1:['산업'],q4_2:['농업']},
    essayKeywords: ['도시','농촌','조화','발전','균형'],
    explain: {q1:'해설: 도시는 인구와 시설이 밀집.',q2:'해설: 농촌은 자연환경이 좋음.',q3:'해설: 도시와 농촌 각각의 특징.',q4:'해설: 도시=산업, 농촌=농업.',q5:'예시: 상호 교류와 균형 발전 필요.'}
  },

  earth_12: {
    labelNo: '12',
    title: '🚄 교통과 통신의 발달',
    passage: ['교통은 사람과 물건을 옮기는 수단입니다.','통신은 정보를 주고받는 방법입니다.','둘 다 현대 사회를 연결하는 중요한 역할을 합니다.'],
    vocab: [['교통','이동 수단'],['통신','정보 전달'],['발달','발전하여 나아감'],['연결','이어 붙임'],['정보','알아야 할 내용'],['수단','방법이나 도구'],['네트워크','연결망'],['기술','과학적 방법'],['현대','지금의 시대']],
    vocabFill: { instructions: '[교통과 통신]', items: [
      {no:1,text:'이동 수단을 (   )이라 한다.',answer:'교통',initials:'ㄱㅌ',aliases:['교통']},
      {no:2,text:'정보 전달을 (   )이라 한다.',answer:'통신',initials:'ㅌㅅ',aliases:['통신']},
      {no:3,text:'발전하여 나아감을 (   )이라 한다.',answer:'발달',initials:'ㅂㄷ',aliases:['발달']},
      {no:4,text:'이어 붙임을 (   )이라 한다.',answer:'연결',initials:'ㅇㄱ',aliases:['연결']},
      {no:5,text:'알아야 할 내용을 (   )이라 한다.',answer:'정보',initials:'ㅈㅂ',aliases:['정보']},
      {no:6,text:'방법이나 도구를 (   )이라 한다.',answer:'수단',initials:'ㅅㄷ',aliases:['수단']},
      {no:7,text:'연결망을 (     )라고 한다.',answer:'네트워크',initials:'ㄴㅌㅇㅋ',aliases:['네트워크']},
      {no:8,text:'과학적 방법을 (   )이라 한다.',answer:'기술',initials:'ㄱㅅ',aliases:['기술']},
      {no:9,text:'지금의 시대를 (   )라고 한다.',answer:'현대',initials:'ㅎㄷ',aliases:['현대']}
    ]},
    quiz: {q1_text:'교통 발달의 영향은?',q1_opts:['① 이동 빨라짐','② 느려짐','③ 정보만 전달','④ 변화 없음'],q2_text:'통신의 중요성은?',q2_opts:['① 정보 빠르게 전달','② 필요 없음','③ 이동만 가능','④ 느림'],q3_1_ph:'ㄱㅌ',q3_2_ph:'ㅌㅅ',q4_1_ph:'ㅂㄷ',q4_2_ph:'ㄱㅅ',q5_text:'교통과 통신의 발달이 우리 생활에 미친 영향을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['교통'],q3_2:['통신'],q4_1:['발달'],q4_2:['기술']},
    essayKeywords: ['교통','통신','발달','연결','편리','생활'],
    explain: {q1:'해설: 교통 발달로 이동 시간 단축.',q2:'해설: 통신으로 정보 신속 전달.',q3:'해설: 교통과 통신의 정의.',q4:'해설: 기술 발달이 핵심.',q5:'예시: 빠른 이동, 즉각적 정보 교환, 세계화 촉진.'}
  },

  earth_13: {
    labelNo: '13',
    title: '👨‍👩‍👧‍👦 인구 분포와 이동',
    passage: ['인구는 사람들이 사는 지역에 따라 분포가 다릅니다.','일자리와 생활 환경을 찾아 사람들이 이동합니다.','인구 분포와 이동은 지역 발전에 영향을 줍니다.'],
    vocab: [['인구','사람의 수'],['분포','퍼져 있는 상태'],['이동','장소를 옮김'],['도시화','도시로 인구 집중'],['일자리','직업과 고용'],['환경','주변 조건'],['밀도','단위 면적당 수'],['이촌향도','농촌→도시'],['정주','한곳에 머무름']],
    vocabFill: { instructions: '[인구 분포와 이동]', items: [
      {no:1,text:'사람의 수를 (   )라고 한다.',answer:'인구',initials:'ㅇㄱ',aliases:['인구']},
      {no:2,text:'퍼져 있는 상태를 (   )라 한다.',answer:'분포',initials:'ㅂㅍ',aliases:['분포']},
      {no:3,text:'장소를 옮김을 (   )이라 한다.',answer:'이동',initials:'ㅇㄷ',aliases:['이동']},
      {no:4,text:'도시로 인구가 집중되는 것을 (    )라고 한다.',answer:'도시화',initials:'ㄷㅅㅎ',aliases:['도시화']},
      {no:5,text:'직업과 고용을 (    )라고 한다.',answer:'일자리',initials:'ㅇㅈㄹ',aliases:['일자리']},
      {no:6,text:'주변 조건을 (   )이라 한다.',answer:'환경',initials:'ㅎㄱ',aliases:['환경']},
      {no:7,text:'단위 면적당 수를 (   )라고 한다.',answer:'밀도',initials:'ㅁㄷ',aliases:['밀도']},
      {no:8,text:'농촌에서 도시로 이동을 (      )라고 한다.',answer:'이촌향도',initials:'ㅇㅊㅎㄷ',aliases:['이촌향도']},
      {no:9,text:'한곳에 머무름을 (   )라고 한다.',answer:'정주',initials:'ㅈㅈ',aliases:['정주']}
    ]},
    quiz: {q1_text:'인구 이동의 주요 원인은?',q1_opts:['① 일자리','② 무관심','③ 강제','④ 여행'],q2_text:'도시화의 문제점은?',q2_opts:['① 인구 집중','② 인구 감소','③ 발전 없음','④ 농업 증가'],q3_1_ph:'ㅇㄱ',q3_2_ph:'ㅂㅍ',q4_1_ph:'ㅇㄷ',q4_2_ph:'ㄷㅅㅎ',q5_text:'인구 이동이 지역에 미치는 영향을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['인구'],q3_2:['분포'],q4_1:['이동'],q4_2:['도시화']},
    essayKeywords: ['인구','이동','분포','도시','일자리','영향'],
    explain: {q1:'해설: 일자리를 찾아 이동.',q2:'해설: 도시 인구 집중 문제.',q3:'해설: 인구와 분포 정의.',q4:'해설: 이동과 도시화.',q5:'예시: 도시는 과밀, 농촌은 과소화.'}
  },

  earth_14: {
    labelNo: '14',
    title: '🏭 산업의 발달과 지역 변화',
    passage: ['산업이 발달하면서 지역의 모습이 크게 변했습니다.','공업 지역과 상업 지역이 생겨났습니다.','산업 발달은 경제 성장을 가져오지만 환경 문제도 발생합니다.'],
    vocab: [['산업','생산 활동'],['공업','제품 제조'],['상업','물건 사고파는 일'],['발달','성장하여 발전'],['경제','재화와 서비스'],['지역','특정한 장소'],['성장','커지고 발전'],['환경 문제','자연 훼손'],['균형 발전','골고루 발전']],
    vocabFill: { instructions: '[산업과 지역]', items: [
      {no:1,text:'생산 활동을 (   )이라 한다.',answer:'산업',initials:'ㅅㅇ',aliases:['산업']},
      {no:2,text:'제품 제조를 (   )이라 한다.',answer:'공업',initials:'ㄱㅇ',aliases:['공업']},
      {no:3,text:'물건 사고파는 일을 (   )이라 한다.',answer:'상업',initials:'ㅅㅇ',aliases:['상업']},
      {no:4,text:'성장하여 발전함을 (   )이라 한다.',answer:'발달',initials:'ㅂㄷ',aliases:['발달']},
      {no:5,text:'재화와 서비스를 (   )라고 한다.',answer:'경제',initials:'ㄱㅈ',aliases:['경제']},
      {no:6,text:'특정한 장소를 (   )라고 한다.',answer:'지역',initials:'ㅈㅇ',aliases:['지역']},
      {no:7,text:'커지고 발전함을 (   )이라 한다.',answer:'성장',initials:'ㅅㅈ',aliases:['성장']},
      {no:8,text:'자연 훼손을 (      )이라 한다.',answer:'환경 문제',initials:'ㅎㄱ ㅁㅈ',aliases:['환경문제']},
      {no:9,text:'골고루 발전을 (      )이라 한다.',answer:'균형 발전',initials:'ㄱㅎ ㅂㅈ',aliases:['균형발전']}
    ]},
    quiz: {q1_text:'산업 발달의 긍정적 영향은?',q1_opts:['① 경제 성장','② 환경 파괴','③ 인구 감소','④ 후퇴'],q2_text:'산업 발달의 문제점은?',q2_opts:['① 환경 오염','② 발전 없음','③ 인구 증가','④ 기술 퇴보'],q3_1_ph:'ㅅㅇ',q3_2_ph:'ㄱㅇ',q4_1_ph:'ㄱㅈ',q4_2_ph:'ㅎㄱ',q5_text:'산업 발달이 지역에 미친 변화를 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['산업'],q3_2:['공업'],q4_1:['경제'],q4_2:['환경']},
    essayKeywords: ['산업','발달','지역','경제','환경','변화'],
    explain: {q1:'해설: 산업 발달로 경제 성장.',q2:'해설: 환경 오염 발생.',q3:'해설: 산업과 공업.',q4:'해설: 경제와 환경.',q5:'예시: 도시 형성, 일자리 증가, 환경 오염.'}
  },

  earth_15: {
    labelNo: '15',
    title: '🌦️ 세계의 다양한 기후',
    passage: ['세계 각지는 다양한 기후를 가지고 있습니다.','기후는 그 지역의 생활과 문화에 영향을 줍니다.','열대, 온대, 한대 등 기후대가 있습니다.'],
    vocab: [['기후','평균 날씨'],['열대','매우 더운 지역'],['온대','따뜻한 지역'],['한대','매우 추운 지역'],['기후대','기후 구분 영역'],['강수량','비 오는 양'],['기온','공기의 온도'],['계절','시간에 따른 날씨 변화'],['영향','결과에 미치는 힘']],
    vocabFill: { instructions: '[세계 기후]', items: [
      {no:1,text:'평균 날씨를 (   )라고 한다.',answer:'기후',initials:'ㄱㅎ',aliases:['기후']},
      {no:2,text:'매우 더운 지역을 (   )라고 한다.',answer:'열대',initials:'ㅇㄷ',aliases:['열대']},
      {no:3,text:'따뜻한 지역을 (   )라고 한다.',answer:'온대',initials:'ㅇㄷ',aliases:['온대']},
      {no:4,text:'매우 추운 지역을 (   )라고 한다.',answer:'한대',initials:'ㅎㄷ',aliases:['한대']},
      {no:5,text:'기후 구분 영역을 (    )라고 한다.',answer:'기후대',initials:'ㄱㅎㄷ',aliases:['기후대']},
      {no:6,text:'비 오는 양을 (    )라고 한다.',answer:'강수량',initials:'ㄱㅅㄹ',aliases:['강수량']},
      {no:7,text:'공기의 온도를 (   )이라 한다.',answer:'기온',initials:'ㄱㅇ',aliases:['기온']},
      {no:8,text:'시간에 따른 날씨 변화를 (   )이라 한다.',answer:'계절',initials:'ㄱㅈ',aliases:['계절']},
      {no:9,text:'결과에 미치는 힘을 (   )이라 한다.',answer:'영향',initials:'ㅇㅎ',aliases:['영향']}
    ]},
    quiz: {q1_text:'기후가 생활에 미치는 영향은?',q1_opts:['① 의식주 결정','② 영향 없음','③ 언어만 결정','④ 색깔만 결정'],q2_text:'열대 기후의 특징은?',q2_opts:['① 매우 더움','② 매우 추움','③ 사계절 뚜렷','④ 비 안 옴'],q3_1_ph:'ㄱㅎ',q3_2_ph:'ㅇㄷ',q4_1_ph:'ㄱㅎㄷ',q4_2_ph:'ㄱㅅㄹ',q5_text:'기후가 지역 문화에 미치는 영향을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['기후'],q3_2:['열대'],q4_1:['기후대'],q4_2:['강수량']},
    essayKeywords: ['기후','열대','온대','한대','생활','문화'],
    explain: {q1:'해설: 기후가 의식주 결정.',q2:'해설: 열대는 매우 더움.',q3:'해설: 기후와 열대.',q4:'해설: 기후대와 강수량.',q5:'예시: 더운 지역은 가벼운 옷, 추운 지역은 두꺼운 옷.'}
  },

  earth_16: {
    labelNo: '16',
    title: '⛏️ 자원의 분포와 이용',
    passage: ['자원은 인간에게 필요한 물질입니다.','석유, 석탄, 광물 등이 있습니다.','자원은 지역마다 분포가 다르며 한정적입니다.'],
    vocab: [['자원','필요한 물질'],['석유','연료 원료'],['석탄','연료 광물'],['광물','땅속 자원'],['분포','퍼진 상태'],['한정적','제한된'],['이용','사용함'],['채굴','캐냄'],['보존','아껴 지킴']],
    vocabFill: { instructions: '[자원 분포와 이용]', items: [
      {no:1,text:'필요한 물질을 (   )이라 한다.',answer:'자원',initials:'ㅈㅇ',aliases:['자원']},
      {no:2,text:'연료 원료를 (   )라고 한다.',answer:'석유',initials:'ㅅㅇ',aliases:['석유']},
      {no:3,text:'연료 광물을 (   )이라 한다.',answer:'석탄',initials:'ㅅㅌ',aliases:['석탄']},
      {no:4,text:'땅속 자원을 (   )이라 한다.',answer:'광물',initials:'ㄱㅁ',aliases:['광물']},
      {no:5,text:'퍼진 상태를 (   )라고 한다.',answer:'분포',initials:'ㅂㅍ',aliases:['분포']},
      {no:6,text:'제한된 것을 (    )이라고 한다.',answer:'한정적',initials:'ㅎㅈㅈ',aliases:['한정적']},
      {no:7,text:'사용함을 (   )이라 한다.',answer:'이용',initials:'ㅇㅇ',aliases:['이용']},
      {no:8,text:'캐냄을 (   )이라 한다.',answer:'채굴',initials:'ㅊㄱ',aliases:['채굴']},
      {no:9,text:'아껴 지킴을 (   )이라 한다.',answer:'보존',initials:'ㅂㅈ',aliases:['보존']}
    ]},
    quiz: {q1_text:'자원이 한정적인 이유는?',q1_opts:['① 다시 안 만들어짐','② 무한함','③ 필요 없음','④ 항상 생김'],q2_text:'자원 보존 방법은?',q2_opts:['① 아껴 쓰기','② 많이 쓰기','③ 버리기','④ 무시하기'],q3_1_ph:'ㅈㅇ',q3_2_ph:'ㅂㅍ',q4_1_ph:'ㅎㅈㅈ',q4_2_ph:'ㅂㅈ',q5_text:'자원을 아껴 써야 하는 이유를 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['자원'],q3_2:['분포'],q4_1:['한정적'],q4_2:['보존']},
    essayKeywords: ['자원','한정','보존','이용','미래'],
    explain: {q1:'해설: 자원은 다시 안 만들어짐.',q2:'해설: 아껴 쓰는 것이 보존.',q3:'해설: 자원과 분포.',q4:'해설: 한정적이므로 보존 필요.',q5:'예시: 미래 세대를 위해 자원 절약 필요.'}
  },

  earth_17: {
    labelNo: '17',
    title: '🎭 문화와 지리적 특성',
    passage: ['지리적 환경은 문화 형성에 영향을 줍니다.','산지, 해안, 평야 등에 따라 다른 문화가 발달합니다.','문화는 지역의 정체성을 만듭니다.'],
    vocab: [['문화','생활 양식'],['지리적','땅과 관련된'],['환경','주변 조건'],['정체성','고유한 특성'],['전통','옛것을 이어옴'],['풍습','관습과 습관'],['의식주','옷,음식,집'],['다양성','여러 가지'],['공존','함께 존재']],
    vocabFill: { instructions: '[문화와 지리]', items: [
      {no:1,text:'생활 양식을 (   )이라 한다.',answer:'문화',initials:'ㅁㅎ',aliases:['문화']},
      {no:2,text:'땅과 관련된 것을 (    )이라고 한다.',answer:'지리적',initials:'ㅈㄹㅈ',aliases:['지리적']},
      {no:3,text:'주변 조건을 (   )이라 한다.',answer:'환경',initials:'ㅎㄱ',aliases:['환경']},
      {no:4,text:'고유한 특성을 (    )이라 한다.',answer:'정체성',initials:'ㅈㅊㅅ',aliases:['정체성']},
      {no:5,text:'옛것을 이어옴을 (   )이라 한다.',answer:'전통',initials:'ㅈㅌ',aliases:['전통']},
      {no:6,text:'관습과 습관을 (   )이라 한다.',answer:'풍습',initials:'ㅍㅅ',aliases:['풍습']},
      {no:7,text:'옷,음식,집을 (    )라고 한다.',answer:'의식주',initials:'ㅇㅅㅈ',aliases:['의식주']},
      {no:8,text:'여러 가지를 (    )라고 한다.',answer:'다양성',initials:'ㄷㅇㅅ',aliases:['다양성']},
      {no:9,text:'함께 존재함을 (   )이라 한다.',answer:'공존',initials:'ㄱㅈ',aliases:['공존']}
    ]},
    quiz: {q1_text:'지리적 환경이 문화에 미치는 영향은?',q1_opts:['① 생활 방식 결정','② 영향 없음','③ 언어만 결정','④ 색깔만 결정'],q2_text:'문화 다양성의 의미는?',q2_opts:['① 여러 문화 존중','② 한 가지만','③ 무시함','④ 통일'],q3_1_ph:'ㅁㅎ',q3_2_ph:'ㅈㄹㅈ',q4_1_ph:'ㅈㅊㅅ',q4_2_ph:'ㄷㅇㅅ',q5_text:'지리적 환경이 문화 형성에 어떤 영향을 주는지 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['문화'],q3_2:['지리적'],q4_1:['정체성'],q4_2:['다양성']},
    essayKeywords: ['문화','지리','환경','다양성','정체성'],
    explain: {q1:'해설: 환경이 생활 방식 결정.',q2:'해설: 다양성은 여러 문화 존중.',q3:'해설: 문화와 지리적.',q4:'해설: 정체성과 다양성.',q5:'예시: 산지는 산림 문화, 해안은 어업 문화 발달.'}
  },

  earth_18: {
    labelNo: '18',
    title: '🌐 국제 무역과 경제 협력',
    passage: ['국가 간 물건을 사고파는 것을 무역이라 합니다.','무역은 경제 발전에 도움을 줍니다.','국제 협력으로 함께 발전할 수 있습니다.'],
    vocab: [['무역','국가 간 거래'],['수출','물건 팔기'],['수입','물건 사기'],['경제','재화와 서비스'],['협력','함께 도움'],['국제','나라 사이'],['발전','성장함'],['교류','주고받음'],['상호 의존','서로 의지']],
    vocabFill: { instructions: '[국제 무역]', items: [
      {no:1,text:'국가 간 거래를 (   )라고 한다.',answer:'무역',initials:'ㅁㅇ',aliases:['무역']},
      {no:2,text:'물건 팔기를 (   )라고 한다.',answer:'수출',initials:'ㅅㅊ',aliases:['수출']},
      {no:3,text:'물건 사기를 (   )라고 한다.',answer:'수입',initials:'ㅅㅇ',aliases:['수입']},
      {no:4,text:'재화와 서비스를 (   )라고 한다.',answer:'경제',initials:'ㄱㅈ',aliases:['경제']},
      {no:5,text:'함께 도움을 (   )이라 한다.',answer:'협력',initials:'ㅎㄹ',aliases:['협력']},
      {no:6,text:'나라 사이를 (   )라고 한다.',answer:'국제',initials:'ㄱㅈ',aliases:['국제']},
      {no:7,text:'성장함을 (   )이라 한다.',answer:'발전',initials:'ㅂㅈ',aliases:['발전']},
      {no:8,text:'주고받음을 (   )이라 한다.',answer:'교류',initials:'ㄱㄹ',aliases:['교류']},
      {no:9,text:'서로 의지함을 (      )라고 한다.',answer:'상호 의존',initials:'ㅅㅎ ㅇㅈ',aliases:['상호의존']}
    ]},
    quiz: {q1_text:'무역의 장점은?',q1_opts:['① 경제 성장','② 고립','③ 감소','④ 중단'],q2_text:'국제 협력이 중요한 이유는?',q2_opts:['① 함께 발전','② 경쟁만','③ 단절','④ 무시'],q3_1_ph:'ㅁㅇ',q3_2_ph:'ㅅㅊ',q4_1_ph:'ㅎㄹ',q4_2_ph:'ㄱㅈ',q5_text:'국제 무역이 경제에 미치는 영향을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['무역'],q3_2:['수출'],q4_1:['협력'],q4_2:['국제']},
    essayKeywords: ['무역','수출','수입','협력','발전'],
    explain: {q1:'해설: 무역으로 경제 성장.',q2:'해설: 협력으로 함께 발전.',q3:'해설: 무역과 수출.',q4:'해설: 협력과 국제.',q5:'예시: 필요한 물건 교환, 경제 활성화, 상호 발전.'}
  },

  earth_19: {
    labelNo: '19',
    title: '🌏 지구촌 문제와 해결 방안',
    passage: ['지구촌은 전 세계가 하나로 연결된 것입니다.','환경, 빈곤, 전쟁 등 공동 문제가 있습니다.','협력하여 함께 해결해야 합니다.'],
    vocab: [['지구촌','세계가 하나로'],['환경 문제','자연 훼손'],['빈곤','가난한 상태'],['전쟁','무력 충돌'],['해결','문제 풀기'],['협력','함께 도움'],['공동','함께 하는'],['지속 가능','미래도 유지'],['연대','함께 뭉침']],
    vocabFill: { instructions: '[지구촌 문제]', items: [
      {no:1,text:'세계가 하나로 연결된 것을 (    )라고 한다.',answer:'지구촌',initials:'ㅈㄱㅊ',aliases:['지구촌']},
      {no:2,text:'자연 훼손을 (      )이라 한다.',answer:'환경 문제',initials:'ㅎㄱ ㅁㅈ',aliases:['환경문제']},
      {no:3,text:'가난한 상태를 (   )이라 한다.',answer:'빈곤',initials:'ㅂㄱ',aliases:['빈곤']},
      {no:4,text:'무력 충돌을 (   )이라 한다.',answer:'전쟁',initials:'ㅈㅈ',aliases:['전쟁']},
      {no:5,text:'문제 풀기를 (   )이라 한다.',answer:'해결',initials:'ㅎㄱ',aliases:['해결']},
      {no:6,text:'함께 도움을 (   )이라 한다.',answer:'협력',initials:'ㅎㄹ',aliases:['협력']},
      {no:7,text:'함께 하는 것을 (   )이라 한다.',answer:'공동',initials:'ㄱㄷ',aliases:['공동']},
      {no:8,text:'미래도 유지를 (        )이라 한다.',answer:'지속 가능',initials:'ㅈㅅ ㄱㄴ',aliases:['지속가능']},
      {no:9,text:'함께 뭉침을 (   )라고 한다.',answer:'연대',initials:'ㅇㄷ',aliases:['연대']}
    ]},
    quiz: {q1_text:'지구촌 문제 해결 방법은?',q1_opts:['① 국제 협력','② 무시','③ 방치','④ 혼자 해결'],q2_text:'지속 가능 발전이 중요한 이유는?',q2_opts:['① 미래 세대 위해','② 현재만','③ 개발만','④ 파괴'],q3_1_ph:'ㅈㄱㅊ',q3_2_ph:'ㅎㄱ ㅁㅈ',q4_1_ph:'ㅎㄹ',q4_2_ph:'ㅎㄱ',q5_text:'지구촌 문제를 해결하기 위해 우리가 할 수 있는 일을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['지구촌'],q3_2:['환경문제','환경 문제'],q4_1:['협력'],q4_2:['해결']},
    essayKeywords: ['지구촌','협력','환경','해결','지속'],
    explain: {q1:'해설: 국제 협력으로 해결.',q2:'해설: 미래 세대를 위해.',q3:'해설: 지구촌과 환경 문제.',q4:'해설: 협력과 해결.',q5:'예시: 환경 보호, 기부, 봉사, 평화 노력.'}
  },

  earth_20: {
    labelNo: '20',
    title: '🔮 미래의 지리적 변화와 전망',
    passage: ['미래에는 기후 변화와 기술 발전이 지리를 바꿀 것입니다.','새로운 도시와 교통 수단이 생길 것입니다.','우리는 미래를 준비하고 대비해야 합니다.'],
    vocab: [['미래','앞으로의 시간'],['전망','예상과 예측'],['변화','달라짐'],['기술 발전','과학 진보'],['기후 변화','날씨 변동'],['대비','준비함'],['예측','미리 짐작'],['지속 가능','미래 유지'],['혁신','새로운 변화']],
    vocabFill: { instructions: '[미래 전망]', items: [
      {no:1,text:'앞으로의 시간을 (   )라고 한다.',answer:'미래',initials:'ㅁㄹ',aliases:['미래']},
      {no:2,text:'예상과 예측을 (   )이라 한다.',answer:'전망',initials:'ㅈㅁ',aliases:['전망']},
      {no:3,text:'달라짐을 (   )이라 한다.',answer:'변화',initials:'ㅂㅎ',aliases:['변화']},
      {no:4,text:'과학 진보를 (      )이라 한다.',answer:'기술 발전',initials:'ㄱㅅ ㅂㅈ',aliases:['기술발전']},
      {no:5,text:'날씨 변동을 (      )이라 한다.',answer:'기후 변화',initials:'ㄱㅎ ㅂㅎ',aliases:['기후변화']},
      {no:6,text:'준비함을 (   )라고 한다.',answer:'대비',initials:'ㄷㅂ',aliases:['대비']},
      {no:7,text:'미리 짐작함을 (   )이라 한다.',answer:'예측',initials:'ㅇㅊ',aliases:['예측']},
      {no:8,text:'미래 유지를 (        )이라 한다.',answer:'지속 가능',initials:'ㅈㅅ ㄱㄴ',aliases:['지속가능']},
      {no:9,text:'새로운 변화를 (   )이라 한다.',answer:'혁신',initials:'ㅎㅅ',aliases:['혁신']}
    ]},
    quiz: {q1_text:'미래 지리 변화의 주요 요인은?',q1_opts:['① 기후·기술','② 변화 없음','③ 과거만','④ 무관심'],q2_text:'미래를 준비하는 방법은?',q2_opts:['① 지속 가능 발전','② 방치','③ 무시','④ 파괴'],q3_1_ph:'ㅁㄹ',q3_2_ph:'ㅂㅎ',q4_1_ph:'ㄱㅅ ㅂㅈ',q4_2_ph:'ㄷㅂ',q5_text:'미래의 지리적 변화를 예측하고 우리가 준비해야 할 것을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['미래'],q3_2:['변화'],q4_1:['기술발전','기술 발전'],q4_2:['대비']},
    essayKeywords: ['미래','변화','기술','기후','준비','지속'],
    explain: {q1:'해설: 기후 변화와 기술 발전이 주요 요인.',q2:'해설: 지속 가능한 발전으로 준비.',q3:'해설: 미래와 변화.',q4:'해설: 기술 발전에 대비.',q5:'예시: 환경 보호, 새 기술 학습, 적응력 키우기.'}
  }
});

/* ===============================
   ★ 어휘 빈칸 렌더러 & 탭 이벤트
=================================*/
function getCurrentUnit() {
  return (window.CUR_UNIT || 'earth_01');
}

window.renderVocabFill = function () {
  const unit = window.CUR_UNIT || 'earth_01';
  const pack = window.CONTENTS?.[unit];
  const root = document.getElementById('vocab-fill') 
            || document.querySelector('.vocab-fill-text');

  if (!root || !pack?.vocabFill?.items?.length) {
    console.warn('[vocab] root or items missing:', { root: !!root, unit, items: pack?.vocabFill?.items?.length });
    return;
  }

  const html = (pack.vocabFill.items || []).map(({ no, text, answer, initials }) => {
    const slot = `
      <span class="blank-wrap" data-answer="${answer}">
        <span class="blank-icon">${no}</span>
        <span class="blank-mark"></span>
        <input type="text" class="blank-input" placeholder="${initials || ''}">
      </span>
    `;
    const p = text.replace(/\(\s*[-＿—\u00A0]*\s*\)/, slot);
    return `<p>${p}</p>`;
  }).join('');

  root.innerHTML = `
    <div class="vocab-instruction">${pack.vocabFill.instructions || ''}</div>
    <div class="vocab-inline">${html}</div>
  `;

  (function ensureVocabInlineStyle(){
    if (document.getElementById('vocab-inline-style')) return;
    const st = document.createElement('style');
    st.id = 'vocab-inline-style';
    st.textContent = `
      /* vocab 영역에서만 줄글 처리 */
      .vocab-box .vocab-inline > p { display:inline !important; margin:0 !important; }
      .vocab-box .vocab-inline > p + p::before { content:" "; }

      #vocab-fill .vocab-inline > p,
      .vocab-fill-text .vocab-inline > p { display:inline !important; margin:0 !important; }
      #vocab-fill .vocab-inline > p + p::before,
      .vocab-fill-text .vocab-inline > p + p::before { content:" "; }

      /* 🔶 줄 간격 조정 */
      .vocab-inline { line-height: 5.0 !important; }
    `;
    document.head.appendChild(st);
  })();

  window.reportState = window.reportState || {};
  window.reportState.vocabTotal = pack.vocabFill.items.length;

  // ✅ 어휘 렌더링 직후 상태 복원
  setTimeout(() => {
    // 1. localStorage에서 복원
    if (typeof window.loadVocabState === 'function') {
      window.loadVocabState();
    }
    // 2. 서버 데이터가 있으면 서버 데이터로 복원 (우선순위 높음)
    if (typeof window.restoreVocabFromServerData === 'function') {
      window.restoreVocabFromServerData();
    }
  }, 100);
};

// ✅ 이벤트 리스너 중복 방지를 위한 플래그
let _tabEventsInitialized = false;

function _bindTabEvents() {
  // 이미 초기화되었으면 건너뛰기
  if (_tabEventsInitialized) return;
  _tabEventsInitialized = true;

  document.addEventListener('click', (e)=>{
    const btn = e.target.closest('[data-tab]');
    if (!btn) return;
    const tab = btn.getAttribute('data-tab');
    if (tab === 'vocab') renderVocabFill();
  });
}

/* ===== 텍스트 주입 (HTML 구조/ids 유지) ===== */
function applyContentPack(unitKey) {
  console.log('[applyContentPack] 호출됨, unitKey:', unitKey);
  const pack = window.CONTENTS[unitKey];
  if (!pack) {
    console.error('[applyContentPack] pack이 없음! unitKey:', unitKey, 'CONTENTS:', window.CONTENTS);
    return;
  }

  const labelNoEl = document.querySelector('.passage-label strong');
  const titleEl   = document.querySelector('.passage-title');
  if (labelNoEl) labelNoEl.textContent = pack.labelNo;
  if (titleEl)   titleEl.innerHTML = pack.title;

  const passageBox = document.querySelector('.passage-text');
  console.log('[applyContentPack] passageBox:', passageBox, 'pack.passage:', pack.passage);
  if (passageBox) {
    const html = pack.passage.map(p => `<p>${p}</p>`).join('');
    console.log('[applyContentPack] 생성된 HTML 길이:', html.length);
    passageBox.innerHTML = html;
    console.log('[applyContentPack] passageBox.innerHTML 설정 완료');
  }

  const vocabBox = document.querySelector('.passage-vocab ol');
  if (vocabBox)  vocabBox.innerHTML = pack.vocab.map(([w,d]) => `<li><b>${w}</b>: ${d}</li>`).join('');

  const blocks = Array.from(document.querySelectorAll('#tab-reading .quiz-block'));

  // Q1
  if (blocks[0]) {
    const q1Text = blocks[0].querySelector('.quiz-q');
    const q1Lis  = blocks[0].querySelectorAll('.quiz-options li');
    if (q1Text) q1Text.textContent = pack.quiz.q1_text;
    if (q1Lis.length === 4) {
      q1Lis.forEach((li,i)=> li.innerHTML = `<label><input type="radio" name="q1" value="${i+1}"><span>${pack.quiz.q1_opts[i]}</span></label>`);
    }
  }

  // Q2
  if (blocks[1]) {
    const q2Text = blocks[1].querySelector('.quiz-q');
    const q2Lis  = blocks[1].querySelectorAll('.quiz-options li');
    if (q2Text) q2Text.textContent = pack.quiz.q2_text;
    if (q2Lis.length === 4) {
      q2Lis.forEach((li,i)=> li.innerHTML = `<label><input type="radio" name="q2" value="${i+1}"><span>${pack.quiz.q2_opts[i]}</span></label>`);
    }
  }

  // Q3
  if (blocks[2]) {
    const q3P = blocks[2].querySelector('.quiz-q');
    if (q3P && pack.quiz.q3_html) q3P.innerHTML = pack.quiz.q3_html;
    const q3_1 = document.getElementById('q3-1');
    const q3_2 = document.getElementById('q3-2');
    if (q3_1 && pack.quiz.q3_1_ph) q3_1.placeholder = pack.quiz.q3_1_ph;
    if (q3_2 && pack.quiz.q3_2_ph) q3_2.placeholder = pack.quiz.q3_2_ph;
  }

  // Q4
  if (blocks[3]) {
    const q4P = blocks[3].querySelector('.quiz-q');
    if (q4P && pack.quiz.q4_html) q4P.innerHTML = pack.quiz.q4_html;
    const q4_1 = document.getElementById('q4-1');
    const q4_2 = document.getElementById('q4-2');
    if (q4_1 && pack.quiz.q4_1_ph) q4_1.placeholder = pack.quiz.q4_1_ph;
    if (q4_2 && pack.quiz.q4_2_ph) q4_2.placeholder = pack.quiz.q4_2_ph;
  }

  // Q5
  if (blocks[4]) {
    const q5Text = blocks[4].querySelector('.quiz-q');
    if (q5Text && pack.quiz.q5_text) q5Text.textContent = pack.quiz.q5_text;
  }

  // ✅ 모든 콘텐츠 로드 완료 후 로딩 오버레이 숨기기
  requestAnimationFrame(() => {
    const loadingOverlay = document.getElementById('loadingOverlay');
    if (loadingOverlay) {
      // 분석리포트 탭일 경우 1.3초 후에 숨기기
      const unit = window.CUR_UNIT || 'earth_01';
      const savedTab = localStorage.getItem(`current-geo-tab:${unit}`);
      const delay = (savedTab === 'report') ? 1300 : 0;

      setTimeout(() => {
        loadingOverlay.classList.remove('show');
        console.log('[applyContentPack] 로딩 오버레이 숨김 완료');
      }, delay);
    }
  });
}

/* ==== 본문학습 상태 저장/복원 (✅ 학생별 분리 저장) ==== */

/* 🔐 현재 로그인 학생 정보 가져오기 */
function getCurrentStudentForReading() {
  const saved = localStorage.getItem('currentStudent');
  if (!saved) return null;
  try { return JSON.parse(saved); } catch (e) { return null; }
}

/* 🔐 학생키 만들기: 학년_이름_전화숫자 */
function buildStudentKeyForReading(stu) {
  const cleanPhone = (stu.phone || '').replace(/\D/g, '');
  const cleanName  = (stu.name  || '').trim();
  const cleanGrade = (stu.grade || '').trim();
  return `${cleanGrade}_${cleanName}_${cleanPhone}`;
}

// ✅ 현재 로그인한 학생 키를 공용으로 쓰는 함수 (메뉴/단원 페이지 공유)
window.getStudentKey = function () {
  const stu = getCurrentStudent();
  if (!stu) return '';
  return buildStudentKey(stu);   // "학년_이름_전화번호" 형태
};

/* 🔐 단원별 + 학생별 로컬스토리지 키 */
function getReadingStateKey(unit) {
  const stu = getCurrentStudentForReading();
  if (!stu) {
    // 로그인 안 되어 있으면 예전처럼 단원 단독 키 사용
    return `dan-reading-state:${unit}`;
  }
  const studentKey = buildStudentKeyForReading(stu);
  return `dan-reading-state:${studentKey}:${unit}`;
}

function saveReadingState() {
  try {
    const unit = window.CUR_UNIT || 'earth_01';
    const key  = getReadingStateKey(unit);   // ✅ 학생별 + 단원별 키

    const q1   = document.querySelector('input[name="q1"]:checked');
    const q2   = document.querySelector('input[name="q2"]:checked');
    const q3_1 = document.getElementById('q3-1');
    const q3_2 = document.getElementById('q3-2');
    const q4_1 = document.getElementById('q4-1');
    const q4_2 = document.getElementById('q4-2');
    const q5   = document.getElementById('q5');

    const state = {
      graded: true,
      q1:   q1   ? q1.value   : '',
      q2:   q2   ? q2.value   : '',
      q3_1: q3_1 ? q3_1.value : '',
      q3_2: q3_2 ? q3_2.value : '',
      q4_1: q4_1 ? q4_1.value : '',
      q4_2: q4_2 ? q4_2.value : '',
      q5:   q5   ? q5.value   : ''
    };

    localStorage.setItem(key, JSON.stringify(state));
  } catch (e) {
    console.warn('saveReadingState error', e);
  }
}

function loadReadingState() {
  try {
    const unit = window.CUR_UNIT || 'earth_01';
    const key  = getReadingStateKey(unit);   // ✅ 학생별 + 단원별 키
    const raw  = localStorage.getItem(key);
    if (!raw) return;

    const state = JSON.parse(raw);
    if (!state) return;

    if (state.q1) {
      const r1 = document.querySelector(`input[name="q1"][value="${state.q1}"]`);
      if (r1) r1.checked = true;
    }
    if (state.q2) {
      const r2 = document.querySelector(`input[name="q2"][value="${state.q2}"]`);
      if (r2) r2.checked = true;
    }

    const q3_1 = document.getElementById('q3-1');
    const q3_2 = document.getElementById('q3-2');
    const q4_1 = document.getElementById('q4-1');
    const q4_2 = document.getElementById('q4-2');
    const q5   = document.getElementById('q5');

    if (q3_1 && state.q3_1 !== undefined) q3_1.value = state.q3_1;
    if (q3_2 && state.q3_2 !== undefined) q3_2.value = state.q3_2;
    if (q4_1 && state.q4_1 !== undefined) q4_1.value = state.q4_1;
    if (q4_2 && state.q4_2 !== undefined) q4_2.value = state.q4_2;
    if (q5   && state.q5   !== undefined) q5.value   = state.q5;

    if (state.graded && typeof window.gradeQuiz === 'function') {
      setTimeout(() => {
        try { window.gradeQuiz(); } catch (e) {
          console.warn('auto re-grade reading error', e);
        }
      }, 0);
    }
  } catch (e) {
    console.warn('loadReadingState error', e);
  }
}

/* ===== 통합 채점기 ===== */
window.gradeQuiz = function () {
  const pack = window.CONTENTS[window.CUR_UNIT] || window.CONTENTS.earth_01;
  const A = pack.answerKey;
  const EX = pack.explain;

  const quizBlocks = document.querySelectorAll('#tab-reading .quiz-block');
  const numLabels = ["01","02","03","04","05"];
  quizBlocks.forEach((block, idx) => {
    const numEl = block.querySelector('.quiz-num');
    if (!numEl) return;
    let markEl = numEl.querySelector('.mark');
    if (!markEl) {
      markEl = document.createElement('div');
      markEl.className = 'mark';
      numEl.appendChild(markEl);
    }
    numEl.textContent = numLabels[idx];
    numEl.appendChild(markEl);
    numEl.classList.remove('correct','wrong');
    markEl.textContent = '';
  });

  let score = 0;
  const totalAuto = 4;
  const shortMsgs = [];
  const fullMsgs = [];

  function norm(s){ return (s||'').toString().replace(/\s+/g,'').toLowerCase(); }
  function mark(idx, ok, label, ex, isEssay=false){
    const num = quizBlocks[idx]?.querySelector('.quiz-num');
    const markEl = num?.querySelector('.mark');
    if (ok) {
      score++;
      num?.classList.add('correct');
      if(markEl) markEl.textContent='⭕';
      shortMsgs.push(`${label} 정답 ✅`);
      fullMsgs.push(`${label} 정답 ✅ ${ex||''}`);
    } else {
      num?.classList.add('wrong');
      if(markEl) markEl.textContent='✖';
      shortMsgs.push(`${label} ${isEssay?'서술형: ':''}오답 ❌`);
      fullMsgs.push(`${label} ${isEssay?'서술형: ':''}오답 ❌ ${ex||''}`);
    }
  }

  // 1
  const q1 = document.querySelector('input[name="q1"]:checked');
  const q1ok = (q1 && q1.value === A.q1);
  mark(0, q1ok, '①', EX.q1);

  // 2
  const q2 = document.querySelector('input[name="q2"]:checked');
  const q2ok = (q2 && q2.value === A.q2);
  mark(1, q2ok, '②', EX.q2);

  // 3
  const q3New = document.getElementById('q3');
  const q3Old1 = document.getElementById('q3-1');
  const q3Old2 = document.getElementById('q3-2');
  const q3Text1 = q3New ? q3New.value.trim() : (q3Old1?.value || '').trim();
  const q3Text2 = q3New ? '' : (q3Old2?.value || '').trim();
  const ok3_1 = A.q3_1.some(a => norm(a) === norm(q3Text1));
  const ok3_2 = A.q3_2 ? A.q3_2.some(a => norm(a) === norm(q3Text2)) : true;
  const q3ok = ok3_1 && ok3_2;
  mark(2, q3ok, '③', EX.q3);

  // 4
  const q4New = document.getElementById('q4');
  const q4Old1 = document.getElementById('q4-1');
  const q4Old2 = document.getElementById('q4-2');
  const q4Text1 = q4New ? q4New.value.trim() : (q4Old1?.value || '').trim();
  const q4Text2 = q4New ? '' : (q4Old2?.value || '').trim();
  const ok4_1 = A.q4_1.some(a => norm(a) === norm(q4Text1));
  const ok4_2 = A.q4_2 ? A.q4_2.some(a => norm(a) === norm(q4Text2)) : true;
  const q4ok = ok4_1 && ok4_2;
  mark(3, q4ok, '④', EX.q4);

  // 5 (서술형)
  const essay = (document.getElementById('q5')?.value || '').trim().toLowerCase();
  const keys = (pack.essayKeywords && Array.isArray(pack.essayKeywords) && pack.essayKeywords.length)
    ? pack.essayKeywords
    : ["등고선","간격","좁","넓","급경사","완만","경사"];
  let hit = 0;
  keys.forEach(k => { if (essay.includes(k)) hit++; });
  const q5ok = essay.length && hit >= 2;
  mark(4, q5ok, '⑤', EX.q5, true);

  const box = document.getElementById('grade-result');
  if (box) {
    box.style.display = 'block';
    box.innerHTML = `<p><strong>점수: ${score} / ${totalAuto}</strong></p>` + shortMsgs.map(m => `<p>${m}</p>`).join('');
  }
  window.fullResultHTML = `<p><strong>점수: ${score} / ${totalAuto}</strong></p>` + fullMsgs.map(m => `<p>${m}</p>`).join('');

  const g=document.getElementById('grade-btn');
  const r=document.getElementById('reset-btn');
  const s=document.getElementById('submit-btn');
  if (g) g.style.display='inline-block';
  if (r) r.style.display='inline-block';
  if (s) s.style.display='inline-block';

  window.reportState = window.reportState || {};
  window.reportState.q1ok=q1ok;
  window.reportState.q2ok=q2ok;
  window.reportState.q3ok=q3ok;
  window.reportState.q4ok=q4ok;
  window.reportState.q5ok=q5ok;

  if (typeof updateReportPanel==='function') {
    const lexicalRatio = (typeof window.reportState.vocabScoreRatio==='number') ? window.reportState.vocabScoreRatio : 0;
    const lexicalOk = lexicalRatio >= 0.7;
    updateReportPanel({
      q1ok,q2ok,q3ok,q4ok,q5ok,
      messages:[
        "① 핵심 이해력: " + (q1ok?"좋아요! ✅":"보완 필요 ❗"),
        "② 구조 파악력: " + (q2ok?"좋아요! ✅":"보완 필요 ❗"),
        "③ 어휘 맥락력: " + (lexicalOk?"좋아요! ✅":"어휘 복습 필요 ❗"),
        "④ 추론·통합력: " + (q4ok?"좋아요! ✅":"보완 필요 ❗"),
        "⑤ 비판·적용력: " + (q5ok?"좋아요! ✅":"보완 필요 ❗")
      ]
    });
  }

  // ✅ 레이더 점수 객체로 빼두기
  const radarScores = {
    literal:     q1ok ? 10 : 6,
    structural:  q2ok ? 10 : 6,
    lexical:     q3ok ? 10 : 6,
    inferential: q4ok ? 10 : 6,
    critical:    q5ok ? 10 : 6
  };

  // ✅ 서버로 보낼 마지막 레이더 점수 기억해 두기 (전역)
  window._lastRadar = radarScores;

  // ✅ 화면 레이더 차트 그리기
  if (typeof updateRadarChart === 'function') {
    updateRadarChart(radarScores);
  }
  if (typeof drawRadarChart === 'function') {
    drawRadarChart(radarScores);
  }

  // ✅ 서버 로그용으로도 보관 (옵션)
  window.reportState = window.reportState || {};
  window.reportState.radarScores = radarScores;

  if (typeof saveReadingState === 'function') {
    saveReadingState();
  }
};

/* === 정답·해설 패널 렌더러 === */
function renderSolutions(pack) {
  const A = pack.answerKey, EX = pack.explain;
  const q1Text = pack.quiz.q1_opts[Number(A.q1) - 1] || '';
  const q2Text = pack.quiz.q2_opts[Number(A.q2) - 1] || '';

  const gradeResultBox = document.getElementById('grade-result');
  if (!gradeResultBox) return;

  // 기존 solutions-box가 있으면 제거
  const existingBox = document.getElementById('solutions-box');
  if (existingBox) existingBox.remove();

  // grade-result 박스 안에 정답·해설 추가
  const solutionsHTML = `
    <div id="solutions-box" style="margin-top:16px; padding-top:16px; border-top:1px dashed #e5d4c1;">
      <h3 style="margin:0 0 10px; font-size:16px; color:#8b2f2f;">정답 · 해설</h3>
      <ol style="margin:0; padding-left:18px;">
        <li style="margin-bottom:8px;">
          <b>① 정답:</b> ${A.q1} — ${q1Text}<br>
          <span style="color:#6b5a48;">${EX.q1 || ''}</span>
        </li>
        <li style="margin-bottom:8px;">
          <b>② 정답:</b> ${A.q2} — ${q2Text}<br>
          <span style="color:#6b5a48;">${EX.q2 || ''}</span>
        </li>
        <li style="margin-bottom:8px;">
          <b>③ 정답(두 칸):</b> ${Array.isArray(A.q3_1)?A.q3_1[0]:A.q3_1} / ${Array.isArray(A.q3_2)?A.q3_2[0]:A.q3_2}<br>
          <span style="color:#6b5a48;">${EX.q3 || ''}</span>
        </li>
        <li style="margin-bottom:8px;">
          <b>④ 정답(두 칸):</b> ${Array.isArray(A.q4_1)?A.q4_1[0]:A.q4_1} / ${Array.isArray(A.q4_2)?A.q4_2[0]:A.q4_2}<br>
          <span style="color:#6b5a48;">${EX.q4 || ''}</span>
        </li>
        <li>
          <b>⑤ 서술형 예시:</b> <span style="color:#6b5a48;">${EX.q5 || '핵심어 2개 이상 포함 시 정답 처리'}</span>
        </li>
      </ol>
    </div>
  `;

  gradeResultBox.insertAdjacentHTML('beforeend', solutionsHTML);
}

/* ========== 공통 진행도 매니저 (단일화 호환) ========== */
window.DanDan = window.DanDan || {};

(function () {
  // 이미 정의돼 있으면 다시 만들지 않기
  if (window.DanDan.ProgressManager) return;

  /* ✅ 단원 감지: earth_01, earth_02 ... */
  function detectUnit() {
    let unitParam = new URLSearchParams(location.search).get('unit');
    if (!unitParam) {
      const m = location.pathname.match(/earth_(\d+)\.html/i);
      if (m) unitParam = `earth_${m[1].padStart(2, '0')}`;
    }
    return (unitParam || (window.CUR_UNIT || 'earth_01')).toLowerCase();
  }

  /* ✅ 학생키: 학년_이름_전화숫자 */
  function buildStudentKey(stu) {
    const cleanPhone = (stu.phone || '').replace(/\D/g, '');
    const cleanName  = (stu.name  || '').trim();
    const cleanGrade = (stu.grade || '').trim();
    return `${cleanGrade}_${cleanName}_${cleanPhone}`;
  }

  /* ✅ 현재 로그인 학생 */
  function getCurrentStudent() {
    const saved = localStorage.getItem('currentStudent');
    if (!saved) return null;
    try { return JSON.parse(saved); } catch { return null; }
  }

  /* ✅ 특정 학생 + 단원 기준 진행도 key 만들기
     → dan-progress:학년_이름_전화:earth_04 */
  function buildProgressKey(stu, unit) {
    const studentKey = buildStudentKey(stu);
    return `dan-progress:${studentKey}:${unit}`;
  }

  /* ✅ 현재 학생의 완료된 단원 목록 읽기 */
  function readDoneList() {
    const stu = getCurrentStudent();
    if (!stu) return { keyPrefix: null, list: [] };

    const unitList = [];
    const studentKey = buildStudentKey(stu);
    const prefix = `dan-progress:${studentKey}:`; // 단원별 prefix

    for (let i = 0; i < localStorage.length; i++) {
      const k = localStorage.key(i);
      if (!k || !k.startsWith(prefix)) continue;
      const unit = k.slice(prefix.length);  // earth_01, earth_02 ...
      const val  = localStorage.getItem(k);
      if (val) unitList.push(unit);
    }
    return { keyPrefix: prefix, list: unitList };
  }

  const ProgressManager = {
    /* 현재 단원 unit (earth_01 등) */
    getUnit: detectUnit,

    /* ✅ 이 단원을 "학습완료"로 표시 */
    markComplete() {
      const stu  = getCurrentStudent();
      if (!stu) return null;

      const unit = detectUnit();                  // earth_04
      const key  = buildProgressKey(stu, unit);   // dan-progress:학생키:earth_04

      localStorage.setItem(key, '1');             // 값은 그냥 '1'로 저장
      return key;
    },

    /* ✅ 이 단원이 완료됐는지 확인 */
    isCompleted(unitOptional) {
      const stu = getCurrentStudent();
      if (!stu) return false;
      const unit = (unitOptional || detectUnit());
      const key  = buildProgressKey(stu, unit);
      return !!localStorage.getItem(key);
    },

    /* ✅ 현재 학생의 완료 단원 리스트 얻기 (earth_01, earth_03 ...) */
    getStudentProgress() {
      return readDoneList();   // { keyPrefix, list }
    }
  };

  window.DanDan.ProgressManager = ProgressManager;

  /* ✅ 제출하기 훅: 완료처리 + 로그 전송 */
  (function hookSubmitReport() {
    const original = window.submitReport;

    window.submitReport = async function (...args) {
      const stu = getCurrentStudent();
      if (!stu) {
        alert('로그인한 학생 정보가 없습니다. 먼저 로그인 해주세요.');
        return;
      }

      // 1) 기존 제출 로직(PDF 등) 실행
      if (typeof original === 'function') {
        await original.apply(this, args);
      } else if (typeof window.captureElementToPDF === 'function') {
        await captureElementToPDF(
          'capture-report',
          '단단국어_분석리포트.pdf',
          { withStudentInfo: true }
        );
      }

      // 2) ✅ 진행도: 학생 + 단원 기준으로 학습완료 저장
      const key = ProgressManager.markComplete();

      if (typeof window.showSubmitSuccess === 'function') {
        showSubmitSuccess('분석리포트');
      } else {
        console.log(`학습완료 처리됨: ${key}`);
      }

      // 3) 서버 학습 이력 로그
      if (typeof window.sendLearningLog === 'function') {
        try {
          await window.sendLearningLog();
        } catch (e) {
          console.warn('[submitReport] sendLearningLog 실패', e);
        }
      }
    };
  })();
})();

/* ===========================
 * ✅ 창의활동 제출 → PDF 내보내기
 *   textarea 전체 내용을 div로 복사해서 캡처
 * =========================== */
window.submitCreative = async function () {
  const textarea   = document.getElementById('creative-input');
  const renderBox  = document.getElementById('creative-render');
  const captureBox = document.getElementById('capture-creative');

  if (!textarea || !renderBox || !captureBox) {
    console.warn('[submitCreative] 요소를 찾을 수 없음', {
      textarea: !!textarea,
      renderBox: !!renderBox,
      captureBox: !!captureBox,
    });
    alert('창의활동 영역을 찾을 수 없습니다.');
    return;
  }

  try {
    // 1) textarea 내용 → 렌더 박스로 복사
    renderBox.textContent = textarea.value || '';

    // 2) 캡처할 동안 textarea 숨기고 렌더 박스만 보이게
    textarea.style.display  = 'none';
    renderBox.style.display = 'block';

    // 3) 공통 함수가 있으면 그걸 사용 (captureElementToPDF)
    if (typeof window.captureElementToPDF === 'function') {
      await window.captureElementToPDF(
        'capture-creative',
        '단단국어_창의활동.pdf',
        { withStudentInfo: true }
      );
    }
    // 4) 없으면 html2canvas + jsPDF 직접 사용 (백업)
    else if (window.html2canvas && window.jsPDF) {
      const canvas = await html2canvas(captureBox);
      const imgData = canvas.toDataURL('image/png');

      const pdf = new jsPDF('p', 'mm', 'a4');
      const pageW = pdf.internal.pageSize.getWidth();
      const pageH = (canvas.height * pageW) / canvas.width;

      pdf.addImage(imgData, 'PNG', 0, 0, pageW, pageH);
      pdf.save('단단국어_창의활동.pdf');
    } else {
      alert('PDF 모듈을 찾을 수 없습니다. (html2canvas / jsPDF 확인)');
    }

    // (원하면 여기에서 창의활동도 showSubmitSuccess 호출 가능)
    if (typeof window.showSubmitSuccess === 'function') {
      window.showSubmitSuccess('창의활동');
    }
  } catch (e) {
    console.warn('submitCreative error', e);
    alert('창의활동 PDF 생성 중 오류가 발생했습니다.');
  } finally {
    // 5) 화면 복구: textarea 다시 보이게, 렌더 박스 숨김
    if (textarea)   textarea.style.display  = 'block';
    if (renderBox)  renderBox.style.display = 'none';
  }
};

/* ===========================
 * ✅ 학습 이력 서버로 보내기 (테스트 버전)
 * =========================== */
/* ===== 🔄 서버에서 완료 상태 가져오기 ===== */
window.loadCompletionStatus = async function () {
  try {
    let stu = null;
    try {
      const raw = localStorage.getItem('currentStudent');
      if (raw) stu = JSON.parse(raw);
    } catch (e) {
      console.warn('[loadCompletionStatus] currentStudent 파싱 실패', e);
    }

    if (!stu) {
      console.warn('[loadCompletionStatus] 학생 정보 없음 → 스킵');
      return;
    }

    const params = new URLSearchParams({
      grade: stu.grade || '',
      name: stu.name || '',
      series: 'BRAIN업'
    });

    const res = await fetch(`/api/completion-status?${params}`, {
      method: 'GET',
      headers: { 'Content-Type': 'application/json' }
    });

    if (!res.ok) {
      console.warn('[loadCompletionStatus] 서버 응답 오류:', res.status);
      return;
    }

    const data = await res.json();
    console.log('[loadCompletionStatus] 서버 응답:', data);

    if (data.ok && Array.isArray(data.completedUnits)) {
      // 학생 키 생성 (buildProgressKey 함수와 동일한 로직)
      const cleanPhone = (stu.phone || '').replace(/\D/g, '');
      const cleanName  = (stu.name  || '').trim();
      const cleanGrade = (stu.grade || '').trim();
      const studentKey = `${cleanGrade}_${cleanName}_${cleanPhone}`;
      const keyPrefix = `dan-progress:${studentKey}:`;

      console.log('[loadCompletionStatus] studentKey:', studentKey);
      console.log('[loadCompletionStatus] keyPrefix:', keyPrefix);

      data.completedUnits.forEach(unit => {
        const key = keyPrefix + unit;  // "dan-progress:학생키:earth_01"
        localStorage.setItem(key, '1');
        console.log('[loadCompletionStatus] 저장:', key);
      });

      console.log('[loadCompletionStatus] 완료 상태 동기화 완료:', data.completedUnits);
    }
  } catch (e) {
    console.warn('[loadCompletionStatus] 오류', e);
  }
};

window.sendLearningLog = async function () {
  try {
    const unit = window.CUR_UNIT || 'earth_02';

    // 1) localStorage 에서 현재 로그인 학생 가져오기
    let stu = null;
    try {
      const raw = localStorage.getItem('currentStudent');
      if (raw) stu = JSON.parse(raw);
    } catch (e) {
      console.warn('[sendLearningLog] currentStudent 파싱 실패', e);
    }

    if (!stu) {
      console.warn('[sendLearningLog] 학생 정보 없음 → 로그 전송 스킵');
      return;
    }

    // ✅ gradeQuiz 에서 저장해 둔 레이더 점수 꺼내기
    const radar =
      (window.reportState && window.reportState.radarScores)
      ? window.reportState.radarScores
      : null;

    const payload = {
      grade:  stu.grade  || '',
      name:   stu.name   || '',
      school: stu.school || '',
      series: 'BRAIN업',      // 필요하면 '정조편' 등으로 바꿔도 됨
      unit:   unit,
      radar:  radar,       // ✅ 여기 추가!
      completed: true      // ✅ 학습 완료 표시
    };

    console.log('[sendLearningLog] payload =', payload);

    const res = await fetch('/api/log', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload),
    });

    let data = {};
    try {
      data = await res.json();
    } catch (_) {
      data = {};
    }
    console.log('[sendLearningLog] result =', data);
  } catch (e) {
    console.warn('sendLearningLog outer error', e);
  }
};




/* ===== 로드 시 실행 + 버튼 타입 안전패치 ===== */
document.addEventListener('DOMContentLoaded', async () => {
  // 0) 🔄 서버에서 학습 완료 상태 동기화
  if (typeof window.loadCompletionStatus === 'function') {
    await loadCompletionStatus();
  }

  // 1) 본문 내용 채우기
  applyContentPack(window.CUR_UNIT);

  // 2) 탭 이벤트 + 어휘 자동 렌더
  _bindTabEvents();
  if (location.hash.includes('어휘학습') || document.querySelector('#vocab-fill')) {
    renderVocabFill();
  }

  // 3) 버튼 type=button 통일
  ['grade-btn','reset-btn','submit-btn'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.type = 'button';
  });

  // 4) 제출하기 = 채점 + 해설 표시 (한 번만 등록)
  const submitBtn = document.getElementById('submit-btn');
  if (submitBtn) {
    submitBtn.addEventListener('click', () => {
      try {
        if (typeof window.gradeQuiz === 'function') {
          gradeQuiz();
        }
        const pack = window.CONTENTS[window.CUR_UNIT] || window.CONTENTS.earth_01;
        renderSolutions(pack);
      } catch (e) {
        console.warn('submit-btn handler error', e);
      }
    });
  }

    // 🔶 창의활동 제출 버튼 → submitCreative 연결
  const creativeBtn = document.getElementById('creative-submit-btn');
  if (creativeBtn && typeof window.submitCreative === 'function') {
    creativeBtn.type = 'button';
    creativeBtn.addEventListener('click', () => {
      submitCreative();
    });
  }


  // 5) 지난번 채점/입력 상태 복원 (✅ 학생별로 분리된 키 기준)
  if (typeof loadReadingState === 'function') {
    loadReadingState();
  }

});