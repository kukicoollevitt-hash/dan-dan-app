/**
 * ✅ 단원 자동 인식 (강화)
 * 우선순위: ?unit=pol_XX → 파일명 pol_XX.html → 제목 숫자
 * ⚠️ HTML에서 이미 CUR_UNIT 설정했으면 덮어쓰지 않음
 */
(function () {
  // 이미 설정된 CUR_UNIT이 있고, pol_로 시작하면 덮어쓰지 않음
  if (window.CUR_UNIT && window.CUR_UNIT.startsWith('pol_')) {
    console.log('[pol_content.js] CUR_UNIT 이미 설정됨:', window.CUR_UNIT);
    return;
  }

  const qs = new URLSearchParams(location.search).get('unit');
  let unit = null;

  if (qs) {
    const m = qs.toLowerCase().match(/pol[_-]?(\d{1,2})/);
    if (m) unit = `pol_${m[1].padStart(2, '0')}`;
  }

  if (!unit) {
    const m2 = location.pathname.toLowerCase().match(/pol[_-]?(\d{1,2})\.html/);
    if (m2) unit = `pol_${m2[1].padStart(2, '0')}`;
  }

  if (!unit && document.title) {
    const m3 = document.title.match(/(\d{1,2})/);
    if (m3) unit = `pol_${m3[1].padStart(2, '0')}`;
  }

  window.CUR_UNIT = unit || 'pol_01';
  console.log('[pol_content.js] CUR_UNIT 설정:', window.CUR_UNIT);
})();

/* ===============================
   ✅ 전역 CONTENTS 준비 (단일화)
   =============================== */
window.CONTENTS = window.CONTENTS || {};

/* ===== 콘텐츠 팩: 단원별 지문/어휘/문제/정답 =====
   ✅ 기존 const CONTENTS = {...} → window.CONTENTS 에 합치기
*/
window.CONTENTS = Object.assign(window.CONTENTS, {
  /* ===== pol_01 : "정치는 왜 필요할까?" ===== */
  pol_01: {
    labelNo: '01',
    title: '🏛️ 정치는 왜 필요할까?',
    passage: [
      '우리는 대한민국이라는 나라에 살며, 국가의 한 구성원으로서 여러 <b>의무</b>와 책임을 가지고 있어요. 국가는 우리가 안전하고 평화롭게 생활할 수 있도록 도와주지만, 많은 사람들이 함께 생활하다 보면 서로의 생각이 달라 <b>갈등</b>이 생기곤 합니다. 작은 다툼은 대화를 하거나 규칙을 지키면서 해결할 수 있지만, 나라 전체에 영향을 주는 큰 문제는 더 복잡해서 쉽게 해결되지 않아요. 이럴 때 중요한 역할을 하는 것이 바로 <b>정치</b>입니다.',
      '정치를 좁은 의미로 보면, 나라를 이끌기 위해 <b>권한</b>을 가진 사람들이 하는 활동을 말해요. 예를 들어, 국회의원이 법을 만들고, 대통령이 중요한 나라의 일을 결정하는 것이 이에 포함되지요. 하지만 넓은 의미로 보면, 정치란 사람들 사이에 생긴 의견 차이와 <b>이해관계</b>를 <b>조정</b>하고 모두가 더 나은 방향으로 살아갈 수 있도록 돕는 활동을 뜻해요.',
      '그래서 우리 주변에서도 정치와 비슷한 일들을 쉽게 볼 수 있어요. 학급에서 규칙을 정하는 학급회의, 집안 문제를 이야기하는 가족회의, 마을의 문제를 함께 <b>논의</b>하는 주민 회의 같은 것들도 넓은 의미의 정치 활동이에요. 정치는 몇몇 사람들만 하는 특별한 일이 아니라, 우리 모두의 삶에 영향을 주는 중요한 과정이에요. 더 좋은 사회를 만들기 위해서는, 우리가 정치에 관심을 가지고 올바르게 <b>참여</b>하려는 태도가 필요하답니다.'
    ],
    vocab: [
      ['의무','꼭 해야 하는 일, 책임지고 지켜야 하는 행동.'],
      ['갈등','의견이나 생각이 달라서 생기는 다툼 또는 문제.'],
      ['정치','사회나 나라의 문제를 해결하고 더 나은 방향으로 이끄는 활동.'],
      ['권한','어떤 일을 할 수 있는 힘이나 자격.'],
      ['이해관계','서로 얽힌 이익이나 손해와 관련된 관계.'],
      ['조정하다','서로 다른 의견이나 상황을 맞추어 조화롭게 만드는 것.'],
      ['논의하다','어떤 문제에 대해 함께 의견을 나누며 이야기하는 것.'],
      ['참여하다','직접 나서서 어떤 활동에 함께하는 것.']
    ],
    vocabFill: {
      instructions: '',
      items: [
        { no: 1, text: '국가의 한 구성원으로서 여러 (      )와 책임을 가지고 있어요.', answer: '의무', initials: 'ㅇㅁ', aliases: ['의무'] },
        { no: 2, text: '많은 사람들이 함께 생활하다 보면 서로의 생각이 달라 (      )이 생기곤 합니다.', answer: '갈등', initials: 'ㄱㄷ', aliases: ['갈등'] },
        { no: 3, text: '나라 전체에 영향을 주는 큰 문제를 해결할 때 중요한 역할을 하는 것이 (      )입니다.', answer: '정치', initials: 'ㅈㅊ', aliases: ['정치'] },
        { no: 4, text: '정치를 좁은 의미로 보면, 나라를 이끌기 위해 (      )을 가진 사람들이 하는 활동을 말해요.', answer: '권한', initials: 'ㄱㅎ', aliases: ['권한'] },
        { no: 5, text: '정치란 사람들 사이에 생긴 의견 차이와 (        )를 조정하는 활동이에요.', answer: '이해관계', initials: 'ㅇㅎㄱㄱ', aliases: ['이해관계'] },
        { no: 6, text: '서로 다른 의견이나 상황을 맞추어 조화롭게 만드는 것을 (      )한다고 해요.', answer: '조정', initials: 'ㅈㅈ', aliases: ['조정'] },
        { no: 7, text: '마을의 문제를 함께 (      )하는 주민 회의도 넓은 의미의 정치 활동이에요.', answer: '논의', initials: 'ㄴㅇ', aliases: ['논의'] },
        { no: 8, text: '더 좋은 사회를 만들기 위해서는 정치에 올바르게 (      )하려는 태도가 필요해요.', answer: '참여', initials: 'ㅊㅇ', aliases: ['참여'] }
      ]
    },
    quiz: {
      q1_text: '이 글에서 말하는 \'정치\'의 뜻으로 가장 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 국회의원이나 대통령만 하는 특별한 일이다.',
        '② 사람들 사이의 의견 차이와 이해관계를 조정하여 더 나은 방향으로 이끄는 활동이다.',
        '③ 나라의 법을 만들고 지키게 하는 것만을 말한다.',
        '④ 선거 때만 필요한 일시적인 활동이다.'
      ],
      q2_text: '이 글의 구조를 바르게 설명한 것은 무엇인가요?',
      q2_opts: [
        '① 정치가 필요한 이유 → 정치의 좁은/넓은 의미 → 일상 속 정치 활동의 예시 순서로 설명하고 있다.',
        '② 시간 순서대로 정치의 역사를 설명하고 있다.',
        '③ 여러 나라의 정치 제도를 비교하고 있다.',
        '④ 정치의 문제점을 나열한 후 해결 방법을 제시하고 있다.'
      ],
      q3_1_ph: 'ㄱㄷ', q3_2_ph: 'ㅈㅊ',
      q4_1_ph: 'ㅈㅈ', q4_2_ph: 'ㅊㅇ',
      q5_text: '본문에서 "정치는 몇몇 사람들만 하는 특별한 일이 아니라, 우리 모두의 삶에 영향을 주는 중요한 과정"이라고 했습니다. 학교나 가정에서 경험할 수 있는 넓은 의미의 정치 활동 예시를 두 가지 이상 써 보세요.'
    },
    answerKey: { q1:'2', q2:'1', q3_1:['갈등'], q3_2:['정치'], q4_1:['조정'], q4_2:['참여'] },
    essayKeywords: ['학급회의','가족회의','규칙','의견','논의','조정','참여','투표'],
    explain: {
      q1:'해설: 정치는 사람들 사이의 의견 차이와 이해관계를 조정하여 더 나은 방향으로 이끄는 활동이다.',
      q2:'해설: 이 글은 정치가 필요한 이유(갈등 해결) → 정치의 좁은/넓은 의미 → 일상 속 정치 활동의 예시(학급회의, 가족회의 등) 순서로 설명하고 있다.',
      q3:'해설: 많은 사람들이 함께 생활하면 갈등이 생기고, 이를 해결하는 것이 정치이다.',
      q4:'해설: 정치는 의견을 조정하는 활동이며, 우리가 올바르게 참여해야 한다.',
      q5:'예시: 학급에서 규칙을 정하는 학급회의, 집안 문제를 이야기하는 가족회의, 청소 당번 정하기, 여행지 투표하기, 동아리 활동 논의하기 등'
    }
  },

  /* ===== pol_02 : "국민이 주인이 되는 나라, 민주주의" ===== */
  pol_02: {
    labelNo: '02',
    title: '🗳️ 국민이 주인이 되는 나라, 민주주의',
    passage: [
      '우리나라는 <b>민주주의</b>를 바탕으로 운영되는 나라예요. 민주주의 사회에서는 나라의 실제 주인이 국민이며, 가장 존중받아야 할 존재 또한 국민이지요. 국민은 누구라도 정치에 관심을 가지고 참여할 수 있고, 정부가 하는 일을 살펴보고 잘못된 점이 있다면 비판도 할 수 있어요. 이런 특징은 국민이 스스로 나라를 이끌어 간다는 민주주의의 중요한 정신을 보여줍니다.',
      '민주주의는 정치에 참여하는 방식에 따라 두 가지로 나눌 수 있어요. 첫 번째는 <b>직접 민주주의</b>로, 나라의 중요한 일을 국민이 직접 모여 결정하는 방식이에요. 두 번째는 <b>대의 민주주의</b>로, 국민이 대표를 뽑아 그 대표들이 정책을 정하고 나라 일을 처리하는 방식이죠. 우리나라처럼 국회 의원이나 대통령을 선거로 뽑아 국가 운영을 맡기는 제도는 대의 민주주의의 대표적인 사례예요. 많은 사람이 함께 사는 현대 사회에서는 대의 민주주의가 더 널리 사용되고 있어요.',
      '민주주의의 핵심 가치는 <b>자유</b>와 <b>평등</b>, 그리고 인간의 <b>존엄성</b>을 지키는 데 있어요. 사람은 누구나 태어날 때부터 소중하며, 존중받아야 할 권리를 가지고 있어요. 그래서 민주주의 사회에서는 다른 사람에게 해를 끼치지 않는 범위 안에서 자신의 생각과 생활을 자유롭게 선택할 수 있어요. 또한 모든 사람은 권리와 <b>의무</b>, 자격 면에서 평등하게 대우받아야 하지요. 다만 결과가 모두 같은 것은 아니에요. 평등은 \'<b>기회</b>\'를 똑같이 주는 것을 의미하고, 노력과 능력에 따른 차이는 자연스럽게 나타날 수 있답니다.'
    ],
    vocab: [
      ['민주주의','국민이 정치의 주인이 되는 정치 형태'],
      ['직접 민주주의','국민이 스스로 나라 일을 결정하는 방식'],
      ['대의 민주주의','국민이 대표를 뽑아 나라 일을 맡기는 방식'],
      ['자유','하고 싶은 일을 스스로 선택할 수 있는 권리'],
      ['평등','차별 없이 같은 기준으로 대우받는 상태'],
      ['존엄성','인간이 본래적으로 가지는 소중함과 가치'],
      ['의무','마땅히 해야 하는 일이나 책임'],
      ['기회 평등','누구에게나 도전할 수 있는 기회를 같은 조건으로 주는 것']
    ],
    /* ✅ 어휘학습(빈칸) */
    vocabFill: {
      instructions: '',
      items: [
        { no: 1, text: '국민이 정치의 주인이 되는 정치 형태를 (        )라고 해요.', answer: '민주주의', initials: 'ㅁㅈㅈㅇ', aliases: ['민주주의'] },
        { no: 2, text: '국민이 스스로 나라 일을 결정하는 방식을 (          )라고 해요.', answer: '직접 민주주의', initials: 'ㅈㅈ ㅁㅈㅈㅇ', aliases: ['직접민주주의','직접 민주주의'] },
        { no: 3, text: '국민이 대표를 뽑아 나라 일을 맡기는 방식을 (          )라고 해요.', answer: '대의 민주주의', initials: 'ㄷㅇ ㅁㅈㅈㅇ', aliases: ['대의민주주의','대의 민주주의'] },
        { no: 4, text: '하고 싶은 일을 스스로 선택할 수 있는 권리를 (      )라고 해요.', answer: '자유', initials: 'ㅈㅇ', aliases: ['자유'] },
        { no: 5, text: '차별 없이 같은 기준으로 대우받는 상태를 (      )이라고 해요.', answer: '평등', initials: 'ㅍㄷ', aliases: ['평등'] },
        { no: 6, text: '인간이 본래적으로 가지는 소중함과 가치를 (        )이라고 해요.', answer: '존엄성', initials: 'ㅈㅇㅅ', aliases: ['존엄성'] },
        { no: 7, text: '마땅히 해야 하는 일이나 책임을 (      )라고 해요.', answer: '의무', initials: 'ㅇㅁ', aliases: ['의무'] },
        { no: 8, text: '누구에게나 도전할 기회를 같은 조건으로 주는 것을 (        )이라고 해요.', answer: '기회 평등', initials: 'ㄱㅎ ㅍㄷ', aliases: ['기회평등','기회 평등'] }
      ]
    },
    quiz: {
      q1_text: '이 글에서 말하는 \'민주주의\'에 대한 설명으로 가장 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 왕이나 귀족이 나라를 다스리는 정치 형태이다.',
        '② 국민이 정치의 주인이 되어 나라를 이끌어 가는 정치 형태이다.',
        '③ 정부가 모든 것을 결정하고 국민은 따르기만 하는 형태이다.',
        '④ 돈이 많은 사람만 정치에 참여할 수 있는 형태이다.'
      ],
      q2_text: '이 글의 전개 순서를 바르게 정리한 것은 무엇인가요?',
      q2_opts: [
        '① 민주주의의 정의와 특징 → 민주주의의 두 가지 방식 → 민주주의의 핵심 가치',
        '② 민주주의의 핵심 가치 → 직접 민주주의 설명 → 대의 민주주의 비판',
        '③ 대의 민주주의의 문제점 → 직접 민주주의의 장점 → 국민의 의무',
        '④ 선거의 중요성 → 국회의원의 역할 → 평등의 의미'
      ],
      q3_1_ph: 'ㅈㅈ', q3_2_ph: 'ㄷㅇ',
      q4_1_ph: 'ㄱㅎ', q4_2_ph: 'ㅍㄷ',
      q5_text: '민주주의에서 말하는 \'평등\'이 결과의 평등이 아니라 기회의 평등을 의미하는 이유를 본문 내용을 바탕으로 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'1', q3_1:['직접','직접 민주주의'], q3_2:['대의','대의 민주주의'], q4_1:['기회'], q4_2:['평등'] },
    essayKeywords: ['기회','노력','능력','차이','결과','똑같이','조건','도전','자연스럽게'],
    explain: {
      q1:'해설: 민주주의는 국민이 정치의 주인이 되어 나라를 이끌어 가는 정치 형태이다.',
      q2:'해설: 이 글은 민주주의의 정의와 특징 → 직접/대의 민주주의 두 방식 → 자유, 평등, 존엄성 등 핵심 가치 순서로 전개된다.',
      q3:'해설: 국민이 직접 결정하면 직접 민주주의, 대표를 뽑아 맡기면 대의 민주주의이다.',
      q4:'해설: 평등은 기회를 똑같이 주는 것을 의미한다.',
      q5:'예시: 평등은 누구에게나 똑같이 기회를 주는 것이고, 노력과 능력에 따른 결과의 차이는 자연스럽게 나타날 수 있기 때문이다.'
    }
  },

  /* ===== pol_03 : "4·19에서 6월 항쟁까지, 민주주의의 성장" ===== */
  pol_03: {
    labelNo: '03',
    title: '✊ 4·19에서 6월 항쟁까지, 민주주의의 성장',
    passage: [
      '우리나라의 <b>민주주의</b>는 하루아침에 만들어진 것이 아니라, 많은 시민의 용기와 희생을 바탕으로 조금씩 자리를 잡아 왔습니다. 1960년, 당시 정권이 부정한 방식으로 선거를 치르자 학생과 시민들이 이에 강하게 반발하며 거리로 나섰습니다. 이 시위는 전국으로 퍼졌고, 결국 부정 선거에 항의하는 거대한 민주화 운동, 즉 <b>4·19 혁명</b>으로 이어졌어요. 국민들은 정당한 절차와 자유로운 선거를 요구했고, 그 결과 당시 대통령이 자리에서 물러나게 되면서 민주주의의 문을 열기 시작했습니다.',
      '그러나 민주주의의 길은 순탄하지 않았어요. 1980년, 새로운 권력이 군사력을 이용해 정권을 차지하자 광주 시민들은 이를 받아들이지 않고 민주화를 요구하며 일어섰습니다. 이것이 <b>5·18 민주화 운동</b>입니다. 시민들은 목숨을 걸고 자유와 정의를 외쳤지만, 많은 희생이 뒤따랐습니다. 그럼에도 국민들의 민주주의에 대한 열망은 사라지지 않았고, 1987년에는 전국적으로 시민들이 참여한 <b>6월 민주항쟁</b>이 일어났습니다. 이 운동을 통해 대통령을 국민이 직접 뽑는 <b>직선제</b>가 도입되고, <b>표현·언론의 자유</b>도 크게 확장되었어요.',
      '민주주의의 발전은 이후에도 계속되었습니다. 1990년대에 들어서면서 <b>지방자치제</b>가 본격적으로 실시되어, 지역 주민들이 스스로 지역을 이끌 단체장을 투표로 뽑을 수 있게 되었지요. 또한 민주적 분위기가 사회 전반에 퍼지면서 시민들은 다양한 분야에서 활동하는 <b>시민 단체</b>를 만들어 목소리를 내기 시작했습니다. 2000년대 이후에는 인터넷과 모바일 기술이 확산되며 시민 참여가 더욱 활발해졌고, 정치와 사회 문제에 대한 개개인의 의견이 더욱 빠르고 넓게 전달될 수 있게 되었습니다. 이처럼 우리나라의 민주주의는 시대마다 시민들이 직접 행동하고 참여해 만들어 낸 소중한 결과입니다.'
    ],
    vocab: [
      ['민주주의', '국민이 정치 과정에 참여하고 권리를 보장받는 정치 체제'],
      ['4·19 혁명', '1960년 부정 선거에 항의해 일어난 민주화 운동'],
      ['5·18 민주화 운동', '1980년 광주에서 민주화를 요구하며 일어난 시민 항쟁'],
      ['6월 민주항쟁', '1987년 직선제 도입을 이끈 전국적 민주화 운동'],
      ['직선제', '국민이 직접 대통령을 뽑는 선거 방식'],
      ['지방자치제', '지역 주민이 지역 행정을 스스로 결정하는 제도'],
      ['시민 단체', '사회 문제 해결을 위해 시민들이 자발적으로 만든 단체'],
      ['표현·언론의 자유', '개인이 의견을 자유롭게 말하고 전달할 권리']
    ],
    /* ✅ 어휘학습(빈칸) */
    vocabFill: {
      instructions: '',
      items: [
        { no: 1, text: '국민이 정치 과정에 참여하고 권리를 보장받는 정치 체제를 (        )라고 해요.', answer: '민주주의', initials: 'ㅁㅈㅈㅇ', aliases: ['민주주의'] },
        { no: 2, text: '1960년 부정 선거에 항의해 일어난 민주화 운동을 (        )이라고 해요.', answer: '4·19 혁명', initials: 'ㅅㅇㄱ ㅎㅁ', aliases: ['4·19혁명','4·19 혁명','사일구 혁명','4.19혁명'] },
        { no: 3, text: '1980년 광주에서 민주화를 요구하며 일어난 시민 항쟁을 (            )이라고 해요.', answer: '5·18 민주화 운동', initials: 'ㅇㅇㅍ ㅁㅈㅎ ㅇㄷ', aliases: ['5·18민주화운동','5·18 민주화 운동','오일팔 민주화 운동'] },
        { no: 4, text: '1987년 직선제 도입을 이끈 전국적 민주화 운동을 (          )이라고 해요.', answer: '6월 민주항쟁', initials: 'ㅇㅇ ㅁㅈㅎㅈ', aliases: ['6월민주항쟁','6월 민주항쟁','유월 민주항쟁'] },
        { no: 5, text: '국민이 직접 대통령을 뽑는 선거 방식을 (        )라고 해요.', answer: '직선제', initials: 'ㅈㅅㅈ', aliases: ['직선제'] },
        { no: 6, text: '지역 주민이 지역 행정을 스스로 결정하는 제도를 (          )라고 해요.', answer: '지방자치제', initials: 'ㅈㅂㅈㅊㅈ', aliases: ['지방자치제'] },
        { no: 7, text: '사회 문제 해결을 위해 시민들이 자발적으로 만든 단체를 (        )라고 해요.', answer: '시민 단체', initials: 'ㅅㅁ ㄷㅊ', aliases: ['시민단체','시민 단체'] },
        { no: 8, text: '개인이 의견을 자유롭게 말하고 전달할 권리를 (            )라고 해요.', answer: '표현·언론의 자유', initials: 'ㅍㅎ ㅇㄹㅇ ㅈㅇ', aliases: ['표현의 자유','언론의 자유','표현·언론의 자유'] }
      ]
    },
    quiz: {
      /* 01. 핵심 이해력 (객관식 4지선) */
      q1_text: '4·19 혁명이 일어난 까닭으로 가장 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 경제 위기로 국민들이 힘들어했기 때문에',
        '② 당시 정권이 부정한 방식으로 선거를 치렀기 때문에',
        '③ 외국 군대가 우리나라를 침략했기 때문에',
        '④ 지방자치제가 실시되지 않았기 때문에'
      ],
      /* 02. 구조 파악력 (객관식 4지선) */
      q2_text: '이 글의 전개 순서를 바르게 정리한 것은 무엇인가요?',
      q2_opts: [
        '① 4·19 혁명 → 5·18 민주화 운동과 6월 민주항쟁 → 지방자치제와 시민 참여 확대',
        '② 6월 민주항쟁 → 4·19 혁명 → 5·18 민주화 운동',
        '③ 지방자치제 실시 → 민주화 운동의 시작 → 직선제 도입',
        '④ 시민 단체 활동 → 인터넷 확산 → 4·19 혁명'
      ],
      /* 03. 어휘 맥락력 (빈칸 2개) */
      q3_1_ph: 'ㅈㅅㅈ', q3_2_ph: 'ㅈㅂㅈㅊㅈ',
      /* 04. 추론·통합력 (빈칸 2개) */
      q4_1_ph: 'ㅎㅅ', q4_2_ph: 'ㅊㅇ',
      /* 05. 비판·적용력 (서술형) */
      q5_text: '본문에서 "우리나라의 민주주의는 시대마다 시민들이 직접 행동하고 참여해 만들어 낸 소중한 결과"라고 했습니다. 이를 뒷받침하는 역사적 사건을 두 가지 이상 들어 설명해 보세요.'
    },
    answerKey: {
      q1:'2',
      q2:'1',
      q3_1:['직선제'],
      q3_2:['지방자치제'],
      q4_1:['희생'],
      q4_2:['참여']
    },
    essayKeywords: ['4·19','5·18','6월','민주화','직선제','시민','학생','광주','항쟁','혁명','참여','투표'],
    explain: {
      q1:'해설: 1960년 당시 정권이 부정한 방식으로 선거를 치르자 학생과 시민들이 이에 항의하며 4·19 혁명이 일어났다.',
      q2:'해설: 이 글은 ①4·19 혁명(1960년) → ②5·18 민주화 운동(1980년)과 6월 민주항쟁(1987년) → ③지방자치제 실시와 시민 참여 확대(1990년대~현재) 순서로 전개된다.',
      q3:'해설: 6월 민주항쟁을 통해 국민이 직접 대통령을 뽑는 직선제가 도입되었고, 1990년대에는 지방자치제가 실시되었다.',
      q4:'해설: 민주주의는 많은 시민의 희생을 바탕으로 만들어졌으며, 시민들이 직접 참여해 발전시켰다.',
      q5:'예시 답안: 4·19 혁명에서 학생과 시민들이 부정 선거에 항의하며 거리로 나서 민주주의의 문을 열었고, 5·18 민주화 운동에서 광주 시민들이 목숨을 걸고 민주화를 요구했으며, 6월 민주항쟁에서 전국적으로 시민들이 참여해 직선제 도입을 이끌어냈습니다.'
    },
    /* 창의활동 */
    creative: {
      title: '📜 민주주의 발전 연표 만들기',
      instruction: '본문에 나온 민주화 운동들을 시간 순서대로 정리하고, 각 사건의 의미를 적어 봅시다.',
      prompts: [
        { label: '1960년에 일어난 사건과 그 의미', placeholder: '예: 4·19 혁명 - 부정 선거에 항의, 민주주의의 문을 열다' },
        { label: '1980년에 일어난 사건과 그 의미', placeholder: '예: 5·18 민주화 운동 - 광주에서 민주화를 요구' },
        { label: '1987년에 일어난 사건과 그 의미', placeholder: '예: 6월 민주항쟁 - 직선제 도입' },
        { label: '민주주의 발전을 위해 내가 할 수 있는 일', placeholder: '예: 선거에 관심 갖기, 사회 문제에 의견 표현하기' }
      ]
    }
  },

  /* ===== pol_04 : "다수결만으로 충분할까? 민주주의의 진짜 원리" ===== */
  pol_04: {
    labelNo: '04',
    title: '⚖️ 다수결만으로 충분할까? 민주주의의 진짜 원리',
    passage: [
      '학교에서 학급 회장을 뽑을 때를 떠올려 보세요. 후보들이 자신의 생각과 <b>공약</b>을 발표하면, 학생들은 그중 가장 마음에 드는 후보의 이름을 종이에 써서 투표함에 넣지요. 이렇게 모인 표를 세어 가장 많은 표를 받은 사람이 회장이 됩니다. 이처럼 <b>민주주의</b> 사회에서는 여러 사람의 의견을 정리하고 결정을 내릴 때 <b>다수결</b>의 원칙을 자주 사용해요. 사람마다 생각이 다르기 때문에, 더 많은 사람이 지지하는 의견을 공동의 <b>의사</b>로 삼는 방식이지요. 복잡한 문제를 빠르게 정리하고 결론을 낼 수 있다는 장점이 있습니다.',
      '하지만 다수결이 항상 완벽한 것은 아니에요. 예를 들어 15명 중 8명만 찬성하고 7명이 반대한다면, 과연 이 결정이 모두의 뜻을 제대로 반영한 걸까요? 찬성과 반대가 큰 차이를 보이지 않을 경우, <b>소수 의견</b>을 가진 사람들의 불만이 커질 수 있어요. 심하면 공동체가 갈등을 겪거나 협력이 어려워질 수도 있습니다. 그래서 단순히 숫자가 많다는 이유만으로 무조건 옳다고 여겨서는 안 돼요. 다수의 의견도 충분한 근거와 설명을 갖춰야 하며, 소수 의견을 가볍게 무시해서는 안 됩니다.',
      '민주적인 결정을 위해서는 먼저 서로의 이야기를 듣고 <b>토론</b>하는 과정이 필요합니다. 논리적으로 따져 보고 비판적으로 사고하며, 때로는 한발 물러서 양보하거나 <b>타협</b>하는 태도도 중요해요. 무엇보다 소수 의견을 존중하는 <b>관용</b>의 자세가 민주주의의 핵심이에요. 서로 다른 생각을 가진 구성원들이 서로를 인정하고 존중할 때, 공동체는 더욱 건강하고 안정된 방향으로 나아갈 수 있습니다.'
    ],
    vocab: [
      ['공약', '후보자가 선거에서 약속하는 내용'],
      ['의사(意思)', '생각이나 의견'],
      ['다수결', '더 많은 사람의 의견을 따라 결정하는 방식'],
      ['소수 의견', '전체 중 적은 사람이 가진 의견'],
      ['타협', '서로 양보하여 중간 지점을 찾는 것'],
      ['관용', '다른 사람의 의견과 차이를 존중하는 태도'],
      ['민주주의', '국민이 주인이 되어 의사결정에 참여하는 정치 방식'],
      ['토론', '서로의 생각을 말하고 듣는 과정']
    ],
    /* ✅ 어휘학습(빈칸) */
    vocabFill: {
      instructions: '[민주주의 원리 관련 어휘]',
      items: [
        { no: 1, text: '후보자가 선거에서 약속하는 내용을 (      )이라고 한다.', answer: '공약', initials: 'ㄱㅇ', aliases: ['공약'] },
        { no: 2, text: '생각이나 의견을 한자어로 (      )라고 한다.', answer: '의사', initials: 'ㅇㅅ', aliases: ['의사'] },
        { no: 3, text: '더 많은 사람의 의견을 따라 결정하는 방식을 (      )이라 한다.', answer: '다수결', initials: 'ㄷㅅㄱ', aliases: ['다수결'] },
        { no: 4, text: '전체 중 적은 사람이 가진 의견을 (        )이라 한다.', answer: '소수 의견', initials: 'ㅅㅅ ㅇㄱ', aliases: ['소수의견'] },
        { no: 5, text: '서로 양보하여 중간 지점을 찾는 것을 (      )라고 한다.', answer: '타협', initials: 'ㅌㅎ', aliases: ['타협'] },
        { no: 6, text: '다른 사람의 의견과 차이를 존중하는 태도를 (      )이라고 한다.', answer: '관용', initials: 'ㄱㅇ', aliases: ['관용'] },
        { no: 7, text: '국민이 주인이 되어 의사결정에 참여하는 정치 방식을 (      )라 한다.', answer: '민주주의', initials: 'ㅁㅈㅈㅇ', aliases: ['민주주의'] },
        { no: 8, text: '서로의 생각을 말하고 듣는 과정을 (      )이라 한다.', answer: '토론', initials: 'ㅌㄹ', aliases: ['토론'] }
      ]
    },
    quiz: {
      q1_text: '본문에서 설명하는 다수결의 장점으로 알맞은 것은 무엇인가요?',
      q1_opts: [
        '① 모든 사람의 의견을 완벽하게 반영할 수 있다.',
        '② 소수 의견을 가진 사람들도 만족할 수 있다.',
        '③ 복잡한 문제를 빠르게 정리하고 결론을 낼 수 있다.',
        '④ 공동체의 갈등을 완전히 없앨 수 있다.'
      ],
      q2_text: '본문의 구조를 가장 바르게 설명한 것은 무엇인가요?',
      q2_opts: [
        '① 다수결의 역사 → 다수결의 유래 → 외국의 사례',
        '② 다수결의 장점 → 다수결의 한계 → 민주적 결정의 조건',
        '③ 선거 방법 → 투표 절차 → 개표 과정',
        '④ 학급 회장 선거 → 대통령 선거 → 국회의원 선거'
      ],
      q3_html: `더 많은 사람의 의견을 따라 결정하는 방식을
                <input class="inline-input" id="q3-1" type="text" placeholder="ㄷㅅㄱ">이라 하고,
                서로 양보하여 중간 지점을 찾는 것을 <input class="inline-input" id="q3-2" type="text" placeholder="ㅌㅎ">이라 한다.`,
      q4_html: `다수결에서 적은 사람이 가진 의견을
                <input class="inline-input" id="q4-1" type="text" placeholder="ㅅㅅ ㅇㄱ">이라 하고,
                다른 사람의 차이를 존중하는 태도를 <input class="inline-input" id="q4-2" type="text" placeholder="ㄱㅇ">이라 한다.`,
      q3_1_ph: 'ㄷㅅㄱ', q3_2_ph: 'ㅌㅎ', q4_1_ph: 'ㅅㅅ ㅇㄱ', q4_2_ph: 'ㄱㅇ',
      q5_text: '다수결로 결정할 때 소수 의견을 존중해야 하는 이유를 본문을 바탕으로 설명해 보세요.'
    },
    answerKey: { q1:'3', q2:'2', q3_1:['다수결'], q3_2:['타협'], q4_1:['소수 의견','소수의견'], q4_2:['관용'] },
    essayKeywords: ['소수','존중','갈등','협력','불만','관용','토론','양보','타협','민주'],
    explain: {
      q1:'해설: 다수결은 복잡한 문제를 빠르게 정리하고 결론을 낼 수 있다는 장점이 있습니다.',
      q2:'해설: 본문은 다수결의 장점 → 다수결의 한계 → 민주적 결정의 조건 순서로 설명합니다.',
      q3:'해설: 다수결은 다수의 의견을 따르는 방식, 타협은 서로 양보하여 합의점을 찾는 것입니다.',
      q4:'해설: 소수 의견은 적은 사람의 의견, 관용은 다른 사람의 차이를 존중하는 태도입니다.',
      q5:'예시: 소수 의견을 무시하면 불만이 커지고 공동체가 갈등을 겪을 수 있기 때문입니다.'
    },
    creative: {
      title: '우리 반 회의 규칙 만들기',
      topic: '다수결로 결정하되 소수 의견도 존중하는 우리 반만의 회의 규칙을 만들어 보세요.',
      hint: '토론 시간, 발언 기회, 반대 의견 청취, 타협 방법 등을 생각해 보세요.',
      examples: [
        '예시 1) 결정 전에 반대 의견을 가진 친구에게 먼저 발언 기회를 준다.',
        '예시 2) 찬성과 반대가 비슷할 때는 토론 시간을 10분 더 갖는다.',
        '예시 3) 다수결로 결정된 후에도 소수 의견을 회의록에 기록해 둔다.'
      ]
    }
  },

  /* ===== pol_05 : "한 표의 힘이 모여 만드는 민주주의" ===== */
  pol_05: {
    labelNo: '05',
    title: '🗳️ 한 표의 힘이 모여 만드는 민주주의',
    passage: [
      '민주 국가에서 가장 중요한 원리는 \'국민이 나라의 주인\'이라는 사실이에요. 국민이 국가 운영의 방향을 결정할 힘을 가지고 있다는 것을 <b>주권</b>이라고 하지요. 하지만 현대 사회는 규모도 크고 처리해야 할 일도 많아서 모든 국민이 직접 정치에 참여하는 것은 쉽지 않아요. 그래서 대부분의 민주 국가는 국민이 자신의 뜻을 대신할 사람을 선거로 뽑아 중요한 일을 맡기는 <b>대표 민주주의</b> 방식을 사용하고 있어요.',
      '국가가 정한 기준을 충족하면 누구나 투표를 할 수 있는데, 우리나라에서는 만 18세 이상이면 선거에 참여할 자격이 주어져요. 이처럼 신분이나 재산, 학력과 관계없이 \'모든 국민에게 투표권을 보장하는 것\'을 <b>보통 선거</b> 원칙이라고 해요. 또 투표는 반드시 본인이 직접 해야 해요. 다른 사람이 대신 투표할 수 없기 때문에 이를 <b>직접 선거</b>라고 부르지요. 그리고 <b>평등 선거</b>는 모든 사람이 똑같이 \'한 표씩\' 행사하는 것을 뜻해요. 돈이 많거나 권력이 있다고 해서 표가 더 많아지는 일은 없어요.',
      '마지막으로 민주 선거에서 빠질 수 없는 것이 <b>비밀 선거</b>의 원칙이에요. 누가 어떤 후보를 선택했는지 다른 사람이 알 수 없어야 눈치를 보거나 <b>불이익</b>을 걱정하지 않고 자신의 의사를 자유롭게 표현할 수 있기 때문이에요. 만약 투표 내용이 공개된다면, 사람들은 압력을 느끼거나 자신의 의견을 숨기게 되겠지요. 그래서 선거에서는 개인의 선택을 철저히 비밀로 지켜 모든 국민이 안전하게 자신의 한 표를 행사하도록 보장하고 있어요.'
    ],
    vocab: [
      ['주권','국가의 주인이 가지는 권리와 힘'],
      ['대표 민주주의','국민이 대표자를 뽑아 나라를 운영하는 제도'],
      ['보통 선거','신분·재산과 상관없이 대부분의 국민에게 선거권을 주는 원칙'],
      ['직접 선거','다른 사람을 통하지 않고 유권자가 스스로 투표하는 방식'],
      ['평등 선거','모든 사람이 똑같이 1표씩 가지는 선거 원칙'],
      ['비밀 선거','누구를 선택했는지 타인이 알 수 없도록 보호하는 선거 방식'],
      ['유권자','선거에서 투표할 수 있는 자격을 가진 사람'],
      ['불이익','불편하거나 손해가 되는 일']
    ],
    vocabFill: {
      instructions: '[민주 선거 어휘]',
      items: [
        { no: 1, text: '국가의 주인이 가지는 권리와 힘을 (      )이라고 한다.', answer: '주권', initials: 'ㅈㄱ', aliases: ['주권'] },
        { no: 2, text: '국민이 대표자를 뽑아 나라를 운영하는 제도를 (         )라고 한다.', answer: '대표 민주주의', initials: 'ㄷㅍㅁㅈㅈㅇ', aliases: ['대표 민주주의','대표민주주의'] },
        { no: 3, text: '신분·재산과 상관없이 대부분의 국민에게 선거권을 주는 원칙을 (      )라 한다.', answer: '보통 선거', initials: 'ㅂㅌㅅㄱ', aliases: ['보통 선거','보통선거'] },
        { no: 4, text: '다른 사람을 통하지 않고 유권자가 스스로 투표하는 방식을 (      )라 한다.', answer: '직접 선거', initials: 'ㅈㅈㅅㄱ', aliases: ['직접 선거','직접선거'] },
        { no: 5, text: '모든 사람이 똑같이 1표씩 가지는 선거 원칙을 (      )라고 한다.', answer: '평등 선거', initials: 'ㅍㄷㅅㄱ', aliases: ['평등 선거','평등선거'] },
        { no: 6, text: '누구를 선택했는지 타인이 알 수 없도록 보호하는 선거 방식을 (      )라고 한다.', answer: '비밀 선거', initials: 'ㅂㅁㅅㄱ', aliases: ['비밀 선거','비밀선거'] },
        { no: 7, text: '선거에서 투표할 수 있는 자격을 가진 사람을 (      )라고 한다.', answer: '유권자', initials: 'ㅇㄱㅈ', aliases: ['유권자'] },
        { no: 8, text: '불편하거나 손해가 되는 일을 (      )이라고 한다.', answer: '불이익', initials: 'ㅂㅇㅇ', aliases: ['불이익'] }
      ]
    },
    quiz: {
      q1_text: '대부분의 민주 국가에서 대표 민주주의 방식을 사용하는 이유로 가장 알맞은 것은?',
      q1_opts: [
        '① 국민이 정치에 관심이 없어서',
        '② 직접 민주주의가 법으로 금지되어서',
        '③ 현대 사회는 규모가 크고 처리할 일이 많아 모든 국민이 직접 참여하기 어렵기 때문에',
        '④ 대표자가 국민보다 더 많은 권리를 가지기 때문에'
      ],
      q2_text: '다음 중 민주 선거의 4대 원칙을 바르게 나열한 것은?',
      q2_opts: [
        '① 보통 선거, 직접 선거, 평등 선거, 비밀 선거',
        '② 보통 선거, 간접 선거, 평등 선거, 공개 선거',
        '③ 제한 선거, 직접 선거, 차등 선거, 비밀 선거',
        '④ 보통 선거, 직접 선거, 차등 선거, 공개 선거'
      ],
      q3_1_ph: 'ㅈㄱ', q3_2_ph: 'ㄷㅍㅁㅈㅈㅇ',
      q4_1_ph: 'ㅂㅁㅅㄱ', q4_2_ph: 'ㅂㅇㅇ',
      q5_text: '비밀 선거가 민주주의에서 중요한 이유를 본문 내용을 바탕으로 설명해 보세요.'
    },
    answerKey: { q1:'3', q2:'1', q3_1:['주권'], q3_2:['대표 민주주의','대표민주주의'], q4_1:['비밀 선거','비밀선거'], q4_2:['불이익'] },
    essayKeywords: ['비밀','눈치','압력','자유','불이익','의사','표현','보호','선택'],
    explain: {
      q1:'해설: 현대 사회는 규모가 크고 처리할 일이 많아서 모든 국민이 직접 정치에 참여하기 어렵기 때문에 대표 민주주의 방식을 사용한다.',
      q2:'해설: 민주 선거의 4대 원칙은 보통 선거, 직접 선거, 평등 선거, 비밀 선거이다.',
      q3:'해설: 국민이 국가 운영의 방향을 결정할 힘을 주권이라 하고, 대표자를 뽑아 나라를 운영하는 제도를 대표 민주주의라 한다.',
      q4:'해설: 누구를 선택했는지 알 수 없도록 보호하는 비밀 선거가 있어야 불이익을 걱정하지 않고 자유롭게 투표할 수 있다.',
      q5:'예시: 비밀 선거가 보장되어야 눈치를 보거나 압력을 느끼지 않고 자신의 의사를 자유롭게 표현할 수 있기 때문이다.'
    },
    creative: {
      title: '🗳️ 우리 반 선거 규칙 만들기',
      topic: '우리 반에서 반장 선거를 한다면, 민주 선거의 4대 원칙(보통 선거, 직접 선거, 평등 선거, 비밀 선거)을 어떻게 적용할 수 있을지 구체적인 규칙을 만들어 보세요.',
      hint: '💡 힌트) 누가 투표할 수 있는지, 어떻게 투표하는지, 투표 내용을 어떻게 비밀로 지킬지 등을 생각해 보세요.',
      examples: [
        '예시 1) 보통 선거: 우리 반 학생이라면 누구나 한 표를 행사할 수 있다. 성적이나 출석 여부와 상관없이 모두 투표권을 가진다.',
        '예시 2) 비밀 선거: 투표용지를 접어서 투표함에 넣고, 개표는 선생님과 두 명의 학생이 함께 한다. 누가 누구를 찍었는지 알 수 없게 한다.',
        '예시 3) 직접 선거: 친구에게 대신 투표를 부탁할 수 없고, 반드시 본인이 직접 투표용지에 기표해야 한다.'
      ]
    }
  },

  /* ===== pol_06 : "지도를 보고 길을 찾아가다" (샘플 데이터) ===== */
  pol_06: {
    labelNo: '06',
    title: '🗺️ 지도를 보고 길을 찾아가다',
    passage: [
      '낯선 장소에 갔을 때 가장 먼저 하는 일은 지도를 확인하는 것입니다. 지도는 <b>방향</b>과 <b>거리</b>를 알려주어 목적지까지 안전하게 도달할 수 있게 합니다.',
      '지도를 읽을 때는 <b>축척</b>, <b>방위표</b>, <b>범례</b> 등을 이해해야 합니다. 이러한 정보를 활용하면 실제 공간에서 길을 찾는 데 큰 도움이 됩니다.',
      '요즘은 스마트폰의 <b>GPS</b> 기능으로 실시간 위치를 확인하며 길을 찾을 수 있지만, 종이 지도를 읽는 능력도 여전히 중요합니다.'
    ],
    vocab: [
      ['방향','동서남북 등 나아가는 쪽'],
      ['거리','두 지점 사이의 길이'],
      ['축척','실제와 지도의 크기 비율'],
      ['방위표','지도에서 방향을 나타내는 표시'],
      ['범례','지도 기호의 의미를 설명한 것'],
      ['GPS','위성을 이용한 위치 확인 시스템'],
      ['실시간','바로 지금 이 순간'],
      ['목적지','가고자 하는 곳'],
      ['경로','출발지에서 목적지까지의 길']
    ],
    vocabFill: {
      instructions: '[지도 읽기 어휘]',
      items: [
        { no: 1, text: '동서남북 등 나아가는 쪽을 (      )이라고 한다.', answer: '방향', initials: 'ㅂㅎ', aliases: ['방향'] },
        { no: 2, text: '두 지점 사이의 길이를 (      )라고 한다.', answer: '거리', initials: 'ㄱㄹ', aliases: ['거리'] },
        { no: 3, text: '실제와 지도의 크기 비율을 (      )이라 한다.', answer: '축척', initials: 'ㅊㅊ', aliases: ['축척'] },
        { no: 4, text: '지도에서 방향을 나타내는 표시를 (      )라 한다.', answer: '방위표', initials: 'ㅂㅇㅍ', aliases: ['방위표'] },
        { no: 5, text: '지도 기호의 의미를 설명한 것을 (      )라 한다.', answer: '범례', initials: 'ㅂㄹ', aliases: ['범례'] },
        { no: 6, text: '위성을 이용한 위치 확인 시스템을 (   )라 한다.', answer: 'GPS', initials: 'ㅈㅍㅅ', aliases: ['GPS','지피에스'] },
        { no: 7, text: '바로 지금 이 순간을 (      )이라고 한다.', answer: '실시간', initials: 'ㅅㅅㄱ', aliases: ['실시간'] },
        { no: 8, text: '가고자 하는 곳을 (      )라고 한다.', answer: '목적지', initials: 'ㅁㅈㅈ', aliases: ['목적지'] },
        { no: 9, text: '출발지에서 목적지까지의 길을 (      )라고 한다.', answer: '경로', initials: 'ㄱㄹ', aliases: ['경로'] }
      ]
    },
    quiz: {
      q1_text: '지도를 읽을 때 가장 중요한 요소는 무엇인가요?',
      q1_opts: ['① 지도의 색깔', '② 축척, 방위표, 범례', '③ 지도의 크기', '④ 지도를 만든 사람'],
      q2_text: 'GPS의 장점은 무엇인가요?',
      q2_opts: ['① 종이가 필요 없다', '② 실시간으로 위치를 확인할 수 있다', '③ 배터리가 필요 없다', '④ 항상 정확하다'],
      q3_1_ph: 'ㅊㅊ', q3_2_ph: 'ㅂㅇㅍ',
      q4_1_ph: 'ㅈㅍㅅ', q4_2_ph: 'ㅅㅅㄱ',
      q5_text: '종이 지도와 디지털 지도의 장단점을 비교하여 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'2', q3_1:['축척'], q3_2:['방위표'], q4_1:['GPS','지피에스'], q4_2:['실시간'] },
    essayKeywords: ['지도','종이','디지털','GPS','장점','단점'],
    explain: {
      q1:'해설: 축척, 방위표, 범례는 지도 읽기의 핵심 요소.',
      q2:'해설: GPS는 실시간 위치 확인이 가능함.',
      q3:'해설: 축척으로 거리를, 방위표로 방향을 알 수 있음.',
      q4:'해설: GPS는 실시간 위치 추적 가능.',
      q5:'예시: 종이 지도는 배터리 불필요, 디지털은 실시간 업데이트 가능.'
    }
  },

  /* ===== pol_07 : "세계 여러 나라의 위치와 특징" (샘플 데이터) ===== */
  pol_07: {
    labelNo: '07',
    title: '🌍 세계 여러 나라의 위치와 특징',
    passage: [
      '지구에는 약 200개가 넘는 나라가 있으며, 각 나라는 고유한 <b>지리적 위치</b>와 <b>문화</b>를 가지고 있습니다.',
      '나라의 위치는 그 나라의 <b>기후</b>, <b>산업</b>, <b>생활 방식</b>에 큰 영향을 미칩니다. 예를 들어 적도 근처 나라는 더운 날씨, 북극 근처 나라는 추운 날씨를 보입니다.',
      '세계 지도를 통해 각 나라의 위치를 파악하고, 그 특징을 이해하는 것은 <b>국제 이해</b>의 첫걸음입니다.'
    ],
    vocab: [
      ['지리적 위치','지구상에서 특정 지점이 있는 자리'],
      ['문화','한 사회의 생활 양식과 전통'],
      ['기후','어떤 지역의 평균적인 날씨'],
      ['산업','물건을 만들거나 서비스를 제공하는 일'],
      ['생활 방식','사람들이 살아가는 방법'],
      ['적도','지구의 중심을 가로지르는 가상의 선'],
      ['국제 이해','여러 나라를 이해하고 존중하는 태도'],
      ['대륙','지구를 이루는 큰 땅덩어리'],
      ['해양','지구를 둘러싼 넓은 바다']
    ],
    vocabFill: {
      instructions: '[세계 지리 어휘]',
      items: [
        { no: 1, text: '지구상에서 특정 지점이 있는 자리를 (        )라고 한다.', answer: '지리적 위치', initials: 'ㅈㄹㅈ ㅇㅊ', aliases: ['지리적위치'] },
        { no: 2, text: '한 사회의 생활 양식과 전통을 (      )라고 한다.', answer: '문화', initials: 'ㅁㅎ', aliases: ['문화'] },
        { no: 3, text: '어떤 지역의 평균적인 날씨를 (      )라고 한다.', answer: '기후', initials: 'ㄱㅎ', aliases: ['기후'] },
        { no: 4, text: '물건을 만들거나 서비스를 제공하는 일을 (      )이라 한다.', answer: '산업', initials: 'ㅅㅇ', aliases: ['산업'] },
        { no: 5, text: '사람들이 살아가는 방법을 (        )이라 한다.', answer: '생활 방식', initials: 'ㅅㅎ ㅂㅅ', aliases: ['생활방식'] },
        { no: 6, text: '지구의 중심을 가로지르는 가상의 선을 (      )라 한다.', answer: '적도', initials: 'ㅈㄷ', aliases: ['적도'] },
        { no: 7, text: '여러 나라를 이해하고 존중하는 태도를 (        )라 한다.', answer: '국제 이해', initials: 'ㄱㅈ ㅇㅎ', aliases: ['국제이해'] },
        { no: 8, text: '지구를 이루는 큰 땅덩어리를 (      )라고 한다.', answer: '대륙', initials: 'ㄷㄹ', aliases: ['대륙'] },
        { no: 9, text: '지구를 둘러싼 넓은 바다를 (      )라고 한다.', answer: '해양', initials: 'ㅎㅇ', aliases: ['해양'] }
      ]
    },
    quiz: {
      q1_text: '나라의 위치가 그 나라에 미치는 영향으로 가장 알맞은 것은?',
      q1_opts: ['① 위치는 기후와 산업에 영향을 준다', '② 위치는 아무 영향이 없다', '③ 위치는 문화와 무관하다', '④ 모든 나라의 위치는 같다'],
      q2_text: '국제 이해가 중요한 이유는 무엇인가요?',
      q2_opts: ['① 다른 나라를 비판하기 위해', '② 여러 나라를 이해하고 존중하기 위해', '③ 우리나라만 발전시키기 위해', '④ 세계 지도를 외우기 위해'],
      q3_1_ph: 'ㄱㅎ', q3_2_ph: 'ㅅㅇ',
      q4_1_ph: 'ㅈㄷ', q4_2_ph: 'ㄷㄹ',
      q5_text: '세계 여러 나라의 위치를 아는 것이 왜 중요한지 설명해 보세요.'
    },
    answerKey: { q1:'1', q2:'2', q3_1:['기후'], q3_2:['산업'], q4_1:['적도'], q4_2:['대륙'] },
    essayKeywords: ['세계','나라','위치','이해','기후','문화'],
    explain: {
      q1:'해설: 위치는 기후, 산업, 생활 방식에 영향을 미침.',
      q2:'해설: 국제 이해는 다양성 존중의 기초.',
      q3:'해설: 위치에 따라 기후와 산업이 달라짐.',
      q4:'해설: 적도 근처는 더운 기후, 대륙별로 특징 다름.',
      q5:'예시: 각 나라의 문화와 생활을 이해하고 존중하기 위해 필요함.'
    }
  },

  /* ===== pol_08 : "우리나라의 지리적 특성 이해하기" (샘플 데이터) ===== */
  pol_08: {
    labelNo: '08',
    title: '🇰🇷 우리나라의 지리적 특성 이해하기',
    passage: [
      '우리나라는 <b>한반도</b>에 위치하며, 삼면이 바다로 둘러싸여 있습니다. <b>동해</b>, <b>서해</b>, <b>남해</b>가 각각 다른 특징을 가지고 있습니다.',
      '국토의 약 70%가 산지로 이루어져 있어 <b>산악 지형</b>이 발달했습니다. 이로 인해 계곡과 분지가 많으며, 평야는 주로 서해안에 분포합니다.',
      '우리나라는 <b>사계절</b>이 뚜렷하여 계절마다 다른 풍경과 생활 모습을 보입니다.'
    ],
    vocab: [
      ['한반도','우리나라가 위치한 반도'],
      ['동해','한반도 동쪽의 바다'],
      ['서해','한반도 서쪽의 바다'],
      ['남해','한반도 남쪽의 바다'],
      ['산악 지형','산이 많은 땅의 모양'],
      ['평야','넓고 평평한 땅'],
      ['사계절','봄, 여름, 가을, 겨울'],
      ['계곡','산과 산 사이의 골짜기'],
      ['분지','주위가 산으로 둘러싸인 평지']
    ],
    vocabFill: {
      instructions: '[우리나라 지리 어휘]',
      items: [
        { no: 1, text: '우리나라가 위치한 반도를 (      )라고 한다.', answer: '한반도', initials: 'ㅎㅂㄷ', aliases: ['한반도'] },
        { no: 2, text: '한반도 동쪽의 바다를 (      )라고 한다.', answer: '동해', initials: 'ㄷㅎ', aliases: ['동해'] },
        { no: 3, text: '한반도 서쪽의 바다를 (      )라고 한다.', answer: '서해', initials: 'ㅅㅎ', aliases: ['서해'] },
        { no: 4, text: '한반도 남쪽의 바다를 (      )라고 한다.', answer: '남해', initials: 'ㄴㅎ', aliases: ['남해'] },
        { no: 5, text: '산이 많은 땅의 모양을 (        )이라 한다.', answer: '산악 지형', initials: 'ㅅㅇ ㅈㅎ', aliases: ['산악지형'] },
        { no: 6, text: '넓고 평평한 땅을 (      )라고 한다.', answer: '평야', initials: 'ㅍㅇ', aliases: ['평야'] },
        { no: 7, text: '봄, 여름, 가을, 겨울을 (      )이라 한다.', answer: '사계절', initials: 'ㅅㄱㅈ', aliases: ['사계절'] },
        { no: 8, text: '산과 산 사이의 골짜기를 (      )라고 한다.', answer: '계곡', initials: 'ㄱㄱ', aliases: ['계곡'] },
        { no: 9, text: '주위가 산으로 둘러싸인 평지를 (      )라고 한다.', answer: '분지', initials: 'ㅂㅈ', aliases: ['분지'] }
      ]
    },
    quiz: {
      q1_text: '우리나라의 지리적 특징으로 가장 알맞은 것은?',
      q1_opts: ['① 사면이 바다로 둘러싸임', '② 삼면이 바다, 산지 많음', '③ 평야만 있음', '④ 사막이 많음'],
      q2_text: '사계절이 뚜렷한 이유는 무엇인가요?',
      q2_opts: ['① 위도와 기후의 영향', '② 바다가 많아서', '③ 산이 많아서', '④ 인구가 많아서'],
      q3_1_ph: 'ㅎㅂㄷ', q3_2_ph: 'ㅅㅇ ㅈㅎ',
      q4_1_ph: 'ㅅㄱㅈ', q4_2_ph: 'ㅍㅇ',
      q5_text: '우리나라의 지리적 특징이 우리 생활에 미치는 영향을 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'1', q3_1:['한반도'], q3_2:['산악지형','산악 지형'], q4_1:['사계절'], q4_2:['평야'] },
    essayKeywords: ['한반도','산','바다','사계절','평야','생활'],
    explain: {
      q1:'해설: 삼면이 바다, 국토의 70%가 산지.',
      q2:'해설: 위도와 기후의 영향으로 사계절 뚜렷.',
      q3:'해설: 한반도는 산악 지형이 발달.',
      q4:'해설: 사계절과 평야가 농업에 영향.',
      q5:'예시: 산지는 등산 문화, 바다는 어업, 사계절은 다양한 계절 행사.'
    }
  },

  /* ===== pol_09 : "자연재해와 인간의 대응" (샘플 데이터) ===== */
  pol_09: {
    labelNo: '09',
    title: '⚠️ 자연재해와 인간의 대응',
    passage: [
      '자연재해는 <b>지진</b>, <b>태풍</b>, <b>홍수</b>, <b>가뭄</b> 등 자연 현상으로 인해 발생하는 피해를 말합니다.',
      '이러한 재해는 인간의 생명과 재산에 큰 피해를 주지만, 사전에 철저히 <b>대비</b>하고 <b>대응</b>하면 피해를 줄일 수 있습니다.',
      '최근에는 <b>재해 예측 시스템</b>과 <b>대피 훈련</b>을 통해 피해를 최소화하려는 노력이 이루어지고 있습니다.'
    ],
    vocab: [
      ['자연재해','자연 현상으로 인한 큰 피해'],
      ['지진','땅이 흔들리는 현상'],
      ['태풍','강한 바람과 비를 동반하는 열대 저기압'],
      ['홍수','물이 넘쳐 피해를 주는 현상'],
      ['가뭄','오랫동안 비가 오지 않는 현상'],
      ['대비','미리 준비하는 것'],
      ['대응','상황에 맞게 행동하는 것'],
      ['재해 예측 시스템','재해를 미리 알려주는 기술'],
      ['대피 훈련','위험 상황에서 안전하게 피하는 연습']
    ],
    vocabFill: {
      instructions: '[자연재해 어휘]',
      items: [
        { no: 1, text: '자연 현상으로 인한 큰 피해를 (        )라고 한다.', answer: '자연재해', initials: 'ㅈㅇ ㅈㅎ', aliases: ['자연재해'] },
        { no: 2, text: '땅이 흔들리는 현상을 (      )이라고 한다.', answer: '지진', initials: 'ㅈㅈ', aliases: ['지진'] },
        { no: 3, text: '강한 바람과 비를 동반하는 열대 저기압을 (      )이라 한다.', answer: '태풍', initials: 'ㅌㅍ', aliases: ['태풍'] },
        { no: 4, text: '물이 넘쳐 피해를 주는 현상을 (      )라고 한다.', answer: '홍수', initials: 'ㅎㅅ', aliases: ['홍수'] },
        { no: 5, text: '오랫동안 비가 오지 않는 현상을 (      )이라 한다.', answer: '가뭄', initials: 'ㄱㅁ', aliases: ['가뭄'] },
        { no: 6, text: '미리 준비하는 것을 (      )라고 한다.', answer: '대비', initials: 'ㄷㅂ', aliases: ['대비'] },
        { no: 7, text: '상황에 맞게 행동하는 것을 (      )라고 한다.', answer: '대응', initials: 'ㄷㅇ', aliases: ['대응'] },
        { no: 8, text: '재해를 미리 알려주는 기술을 (            )이라 한다.', answer: '재해 예측 시스템', initials: 'ㅈㅎ ㅇㅊ ㅅㅅㅌ', aliases: ['재해예측시스템'] },
        { no: 9, text: '위험 상황에서 안전하게 피하는 연습을 (        )이라 한다.', answer: '대피 훈련', initials: 'ㄷㅍ ㅎㄹ', aliases: ['대피훈련'] }
      ]
    },
    quiz: {
      q1_text: '자연재해 피해를 줄이는 방법으로 가장 알맞은 것은?',
      q1_opts: ['① 아무것도 하지 않기', '② 사전 대비와 대응', '③ 재해 후에만 행동', '④ 무조건 피하기'],
      q2_text: '대피 훈련이 중요한 이유는 무엇인가요?',
      q2_opts: ['① 재미있어서', '② 위험 상황에서 빠르게 대응하기 위해', '③ 시간을 보내기 위해', '④ 법으로 정해져서'],
      q3_1_ph: 'ㅈㅈ', q3_2_ph: 'ㅌㅍ',
      q4_1_ph: 'ㄷㅂ', q4_2_ph: 'ㄷㅇ',
      q5_text: '자연재해가 발생했을 때 우리가 해야 할 행동을 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'2', q3_1:['지진'], q3_2:['태풍'], q4_1:['대비'], q4_2:['대응'] },
    essayKeywords: ['재해','대비','대응','안전','대피','예방'],
    explain: {
      q1:'해설: 사전 대비와 신속한 대응이 피해를 줄임.',
      q2:'해설: 대피 훈련은 실제 상황에서 생명을 구함.',
      q3:'해설: 지진, 태풍 등 다양한 자연재해 존재.',
      q4:'해설: 미리 대비하고 상황에 맞게 대응해야 함.',
      q5:'예시: 안전한 곳으로 대피하고, 긴급 연락망을 확인하며, 침착하게 행동.'
    }
  },

  /* ===== pol_10 : "환경 문제와 지속 가능한 발전" (샘플 데이터) ===== */
  pol_10: {
    labelNo: '10',
    title: '🌱 환경 문제와 지속 가능한 발전',
    passage: [
      '현대 사회는 <b>환경 오염</b>, <b>지구 온난화</b>, <b>생물 다양성 감소</b> 등 심각한 환경 문제에 직면해 있습니다.',
      '이러한 문제를 해결하기 위해서는 <b>재생 에너지</b> 사용, <b>재활용</b>, <b>탄소 배출 감소</b> 등의 노력이 필요합니다.',
      '<b>지속 가능한 발전</b>은 현재 세대의 필요를 충족하면서도 미래 세대의 환경을 보호하는 것을 의미합니다.'
    ],
    vocab: [
      ['환경 오염','공기, 물, 토양이 더러워지는 것'],
      ['지구 온난화','지구의 평균 기온이 높아지는 현상'],
      ['생물 다양성','여러 종류의 생물이 존재하는 것'],
      ['재생 에너지','다시 만들어 쓸 수 있는 에너지'],
      ['재활용','쓴 물건을 다시 사용하는 것'],
      ['탄소 배출','이산화탄소를 내보내는 것'],
      ['지속 가능한 발전','미래를 위한 균형 잡힌 발전'],
      ['온실가스','지구를 덥게 만드는 기체'],
      ['친환경','환경을 보호하는']
    ],
    vocabFill: {
      instructions: '[환경과 발전 어휘]',
      items: [
        { no: 1, text: '공기, 물, 토양이 더러워지는 것을 (        )이라 한다.', answer: '환경 오염', initials: 'ㅎㄱ ㅇㅇ', aliases: ['환경오염'] },
        { no: 2, text: '지구의 평균 기온이 높아지는 현상을 (          )이라 한다.', answer: '지구 온난화', initials: 'ㅈㄱ ㅇㄴㅎ', aliases: ['지구온난화'] },
        { no: 3, text: '여러 종류의 생물이 존재하는 것을 (          )이라 한다.', answer: '생물 다양성', initials: 'ㅅㅁ ㄷㅇㅅ', aliases: ['생물다양성'] },
        { no: 4, text: '다시 만들어 쓸 수 있는 에너지를 (        )라 한다.', answer: '재생 에너지', initials: 'ㅈㅅ ㅇㄴㅈ', aliases: ['재생에너지'] },
        { no: 5, text: '쓴 물건을 다시 사용하는 것을 (      )이라 한다.', answer: '재활용', initials: 'ㅈㅎㅇ', aliases: ['재활용'] },
        { no: 6, text: '이산화탄소를 내보내는 것을 (        )이라 한다.', answer: '탄소 배출', initials: 'ㅌㅅ ㅂㅊ', aliases: ['탄소배출'] },
        { no: 7, text: '미래를 위한 균형 잡힌 발전을 (            )이라 한다.', answer: '지속 가능한 발전', initials: 'ㅈㅅ ㄱㄴㅎ ㅂㅈ', aliases: ['지속가능한발전'] },
        { no: 8, text: '지구를 덥게 만드는 기체를 (      )라고 한다.', answer: '온실가스', initials: 'ㅇㅅㄱㅅ', aliases: ['온실가스'] },
        { no: 9, text: '환경을 보호하는 것을 (      )이라고 한다.', answer: '친환경', initials: 'ㅊㅎㄱ', aliases: ['친환경'] }
      ]
    },
    quiz: {
      q1_text: '지속 가능한 발전의 의미로 가장 알맞은 것은?',
      q1_opts: ['① 현재만 생각', '② 미래 세대도 고려', '③ 개발 중단', '④ 환경 파괴'],
      q2_text: '환경 보호를 위해 우리가 할 수 있는 일은?',
      q2_opts: ['① 일회용품 많이 쓰기', '② 재활용하기', '③ 에너지 낭비', '④ 쓰레기 버리기'],
      q3_1_ph: 'ㅎㄱ ㅇㅇ', q3_2_ph: 'ㅈㄱ ㅇㄴㅎ',
      q4_1_ph: 'ㅈㅎㅇ', q4_2_ph: 'ㅈㅅ ㅇㄴㅈ',
      q5_text: '지속 가능한 발전을 위해 개인이 실천할 수 있는 방법을 설명해 보세요.'
    },
    answerKey: { q1:'2', q2:'2', q3_1:['환경오염','환경 오염'], q3_2:['지구온난화','지구 온난화'], q4_1:['재활용'], q4_2:['재생에너지','재생 에너지'] },
    essayKeywords: ['환경','재활용','에너지','탄소','지속','실천'],
    explain: {
      q1:'해설: 지속 가능한 발전은 미래 세대를 고려한 균형 발전.',
      q2:'해설: 재활용은 환경 보호의 기본 실천.',
      q3:'해설: 환경 오염과 지구 온난화는 현대의 주요 문제.',
      q4:'해설: 재활용과 재생 에너지가 핵심 해결책.',
      q5:'예시: 일회용품 줄이기, 분리수거, 대중교통 이용, 에너지 절약.'
    }
  },

  /* ===== pol_11 ~ pol_20 샘플 데이터 (더 간략하게) ===== */

  pol_11: {
    labelNo: '11',
    title: '🏙️ 도시와 농촌의 차이',
    passage: ['도시는 인구가 많고 다양한 산업이 발달한 곳입니다.','농촌은 자연과 가까우며 농업이 중심입니다.','각각의 특징을 이해하고 조화롭게 발전해야 합니다.'],
    vocab: [['도시','인구와 시설이 밀집한 곳'],['농촌','농업 중심의 시골 지역'],['인구 밀집','사람이 많이 모여 사는 것'],['산업','생산과 서비스 활동'],['농업','농사를 짓는 일'],['교통','이동 수단과 시스템'],['인프라','기반 시설'],['생활 환경','사람들이 사는 조건'],['조화','균형 있게 어울림']],
    vocabFill: { instructions: '[도시와 농촌]', items: [
      {no:1,text:'인구와 시설이 밀집한 곳을 (   )라고 한다.',answer:'도시',initials:'ㄷㅅ',aliases:['도시']},
      {no:2,text:'농업 중심의 시골 지역을 (   )이라 한다.',answer:'농촌',initials:'ㄴㅊ',aliases:['농촌']},
      {no:3,text:'사람이 많이 모여 사는 것을 (      )이라 한다.',answer:'인구 밀집',initials:'ㅇㄱ ㅁㅈ',aliases:['인구밀집']},
      {no:4,text:'생산과 서비스 활동을 (   )이라 한다.',answer:'산업',initials:'ㅅㅇ',aliases:['산업']},
      {no:5,text:'농사를 짓는 일을 (   )이라 한다.',answer:'농업',initials:'ㄴㅇ',aliases:['농업']},
      {no:6,text:'이동 수단과 시스템을 (   )이라 한다.',answer:'교통',initials:'ㄱㅌ',aliases:['교통']},
      {no:7,text:'기반 시설을 (     )라고 한다.',answer:'인프라',initials:'ㅇㅍㄹ',aliases:['인프라']},
      {no:8,text:'사람들이 사는 조건을 (      )이라 한다.',answer:'생활 환경',initials:'ㅅㅎ ㅎㄱ',aliases:['생활환경']},
      {no:9,text:'균형 있게 어울림을 (   )라고 한다.',answer:'조화',initials:'ㅈㅎ',aliases:['조화']}
    ]},
    quiz: {q1_text:'도시의 특징은?',q1_opts:['① 인구 많음','② 인구 적음','③ 농업만','④ 시설 없음'],q2_text:'농촌의 장점은?',q2_opts:['① 자연과 가까움','② 시설 많음','③ 인구 많음','④ 공기 나쁨'],q3_1_ph:'ㄷㅅ',q3_2_ph:'ㄴㅊ',q4_1_ph:'ㅅㅇ',q4_2_ph:'ㄴㅇ',q5_text:'도시와 농촌이 조화롭게 발전하려면 어떻게 해야 할까요?'},
    answerKey: {q1:'1',q2:'1',q3_1:['도시'],q3_2:['농촌'],q4_1:['산업'],q4_2:['농업']},
    essayKeywords: ['도시','농촌','조화','발전','균형'],
    explain: {q1:'해설: 도시는 인구와 시설이 밀집.',q2:'해설: 농촌은 자연환경이 좋음.',q3:'해설: 도시와 농촌 각각의 특징.',q4:'해설: 도시=산업, 농촌=농업.',q5:'예시: 상호 교류와 균형 발전 필요.'}
  },

  pol_12: {
    labelNo: '12',
    title: '🚄 교통과 통신의 발달',
    passage: ['교통은 사람과 물건을 옮기는 수단입니다.','통신은 정보를 주고받는 방법입니다.','둘 다 현대 사회를 연결하는 중요한 역할을 합니다.'],
    vocab: [['교통','이동 수단'],['통신','정보 전달'],['발달','발전하여 나아감'],['연결','이어 붙임'],['정보','알아야 할 내용'],['수단','방법이나 도구'],['네트워크','연결망'],['기술','과학적 방법'],['현대','지금의 시대']],
    vocabFill: { instructions: '[교통과 통신]', items: [
      {no:1,text:'이동 수단을 (   )이라 한다.',answer:'교통',initials:'ㄱㅌ',aliases:['교통']},
      {no:2,text:'정보 전달을 (   )이라 한다.',answer:'통신',initials:'ㅌㅅ',aliases:['통신']},
      {no:3,text:'발전하여 나아감을 (   )이라 한다.',answer:'발달',initials:'ㅂㄷ',aliases:['발달']},
      {no:4,text:'이어 붙임을 (   )이라 한다.',answer:'연결',initials:'ㅇㄱ',aliases:['연결']},
      {no:5,text:'알아야 할 내용을 (   )이라 한다.',answer:'정보',initials:'ㅈㅂ',aliases:['정보']},
      {no:6,text:'방법이나 도구를 (   )이라 한다.',answer:'수단',initials:'ㅅㄷ',aliases:['수단']},
      {no:7,text:'연결망을 (     )라고 한다.',answer:'네트워크',initials:'ㄴㅌㅇㅋ',aliases:['네트워크']},
      {no:8,text:'과학적 방법을 (   )이라 한다.',answer:'기술',initials:'ㄱㅅ',aliases:['기술']},
      {no:9,text:'지금의 시대를 (   )라고 한다.',answer:'현대',initials:'ㅎㄷ',aliases:['현대']}
    ]},
    quiz: {q1_text:'교통 발달의 영향은?',q1_opts:['① 이동 빨라짐','② 느려짐','③ 정보만 전달','④ 변화 없음'],q2_text:'통신의 중요성은?',q2_opts:['① 정보 빠르게 전달','② 필요 없음','③ 이동만 가능','④ 느림'],q3_1_ph:'ㄱㅌ',q3_2_ph:'ㅌㅅ',q4_1_ph:'ㅂㄷ',q4_2_ph:'ㄱㅅ',q5_text:'교통과 통신의 발달이 우리 생활에 미친 영향을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['교통'],q3_2:['통신'],q4_1:['발달'],q4_2:['기술']},
    essayKeywords: ['교통','통신','발달','연결','편리','생활'],
    explain: {q1:'해설: 교통 발달로 이동 시간 단축.',q2:'해설: 통신으로 정보 신속 전달.',q3:'해설: 교통과 통신의 정의.',q4:'해설: 기술 발달이 핵심.',q5:'예시: 빠른 이동, 즉각적 정보 교환, 세계화 촉진.'}
  },

  pol_13: {
    labelNo: '13',
    title: '👨‍👩‍👧‍👦 인구 분포와 이동',
    passage: ['인구는 사람들이 사는 지역에 따라 분포가 다릅니다.','일자리와 생활 환경을 찾아 사람들이 이동합니다.','인구 분포와 이동은 지역 발전에 영향을 줍니다.'],
    vocab: [['인구','사람의 수'],['분포','퍼져 있는 상태'],['이동','장소를 옮김'],['도시화','도시로 인구 집중'],['일자리','직업과 고용'],['환경','주변 조건'],['밀도','단위 면적당 수'],['이촌향도','농촌→도시'],['정주','한곳에 머무름']],
    vocabFill: { instructions: '[인구 분포와 이동]', items: [
      {no:1,text:'사람의 수를 (   )라고 한다.',answer:'인구',initials:'ㅇㄱ',aliases:['인구']},
      {no:2,text:'퍼져 있는 상태를 (   )라 한다.',answer:'분포',initials:'ㅂㅍ',aliases:['분포']},
      {no:3,text:'장소를 옮김을 (   )이라 한다.',answer:'이동',initials:'ㅇㄷ',aliases:['이동']},
      {no:4,text:'도시로 인구가 집중되는 것을 (    )라고 한다.',answer:'도시화',initials:'ㄷㅅㅎ',aliases:['도시화']},
      {no:5,text:'직업과 고용을 (    )라고 한다.',answer:'일자리',initials:'ㅇㅈㄹ',aliases:['일자리']},
      {no:6,text:'주변 조건을 (   )이라 한다.',answer:'환경',initials:'ㅎㄱ',aliases:['환경']},
      {no:7,text:'단위 면적당 수를 (   )라고 한다.',answer:'밀도',initials:'ㅁㄷ',aliases:['밀도']},
      {no:8,text:'농촌에서 도시로 이동을 (      )라고 한다.',answer:'이촌향도',initials:'ㅇㅊㅎㄷ',aliases:['이촌향도']},
      {no:9,text:'한곳에 머무름을 (   )라고 한다.',answer:'정주',initials:'ㅈㅈ',aliases:['정주']}
    ]},
    quiz: {q1_text:'인구 이동의 주요 원인은?',q1_opts:['① 일자리','② 무관심','③ 강제','④ 여행'],q2_text:'도시화의 문제점은?',q2_opts:['① 인구 집중','② 인구 감소','③ 발전 없음','④ 농업 증가'],q3_1_ph:'ㅇㄱ',q3_2_ph:'ㅂㅍ',q4_1_ph:'ㅇㄷ',q4_2_ph:'ㄷㅅㅎ',q5_text:'인구 이동이 지역에 미치는 영향을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['인구'],q3_2:['분포'],q4_1:['이동'],q4_2:['도시화']},
    essayKeywords: ['인구','이동','분포','도시','일자리','영향'],
    explain: {q1:'해설: 일자리를 찾아 이동.',q2:'해설: 도시 인구 집중 문제.',q3:'해설: 인구와 분포 정의.',q4:'해설: 이동과 도시화.',q5:'예시: 도시는 과밀, 농촌은 과소화.'}
  },

  pol_14: {
    labelNo: '14',
    title: '🏭 산업의 발달과 지역 변화',
    passage: ['산업이 발달하면서 지역의 모습이 크게 변했습니다.','공업 지역과 상업 지역이 생겨났습니다.','산업 발달은 경제 성장을 가져오지만 환경 문제도 발생합니다.'],
    vocab: [['산업','생산 활동'],['공업','제품 제조'],['상업','물건 사고파는 일'],['발달','성장하여 발전'],['경제','재화와 서비스'],['지역','특정한 장소'],['성장','커지고 발전'],['환경 문제','자연 훼손'],['균형 발전','골고루 발전']],
    vocabFill: { instructions: '[산업과 지역]', items: [
      {no:1,text:'생산 활동을 (   )이라 한다.',answer:'산업',initials:'ㅅㅇ',aliases:['산업']},
      {no:2,text:'제품 제조를 (   )이라 한다.',answer:'공업',initials:'ㄱㅇ',aliases:['공업']},
      {no:3,text:'물건 사고파는 일을 (   )이라 한다.',answer:'상업',initials:'ㅅㅇ',aliases:['상업']},
      {no:4,text:'성장하여 발전함을 (   )이라 한다.',answer:'발달',initials:'ㅂㄷ',aliases:['발달']},
      {no:5,text:'재화와 서비스를 (   )라고 한다.',answer:'경제',initials:'ㄱㅈ',aliases:['경제']},
      {no:6,text:'특정한 장소를 (   )라고 한다.',answer:'지역',initials:'ㅈㅇ',aliases:['지역']},
      {no:7,text:'커지고 발전함을 (   )이라 한다.',answer:'성장',initials:'ㅅㅈ',aliases:['성장']},
      {no:8,text:'자연 훼손을 (      )이라 한다.',answer:'환경 문제',initials:'ㅎㄱ ㅁㅈ',aliases:['환경문제']},
      {no:9,text:'골고루 발전을 (      )이라 한다.',answer:'균형 발전',initials:'ㄱㅎ ㅂㅈ',aliases:['균형발전']}
    ]},
    quiz: {q1_text:'산업 발달의 긍정적 영향은?',q1_opts:['① 경제 성장','② 환경 파괴','③ 인구 감소','④ 후퇴'],q2_text:'산업 발달의 문제점은?',q2_opts:['① 환경 오염','② 발전 없음','③ 인구 증가','④ 기술 퇴보'],q3_1_ph:'ㅅㅇ',q3_2_ph:'ㄱㅇ',q4_1_ph:'ㄱㅈ',q4_2_ph:'ㅎㄱ',q5_text:'산업 발달이 지역에 미친 변화를 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['산업'],q3_2:['공업'],q4_1:['경제'],q4_2:['환경']},
    essayKeywords: ['산업','발달','지역','경제','환경','변화'],
    explain: {q1:'해설: 산업 발달로 경제 성장.',q2:'해설: 환경 오염 발생.',q3:'해설: 산업과 공업.',q4:'해설: 경제와 환경.',q5:'예시: 도시 형성, 일자리 증가, 환경 오염.'}
  },

  pol_15: {
    labelNo: '15',
    title: '🌦️ 세계의 다양한 기후',
    passage: ['세계 각지는 다양한 기후를 가지고 있습니다.','기후는 그 지역의 생활과 문화에 영향을 줍니다.','열대, 온대, 한대 등 기후대가 있습니다.'],
    vocab: [['기후','평균 날씨'],['열대','매우 더운 지역'],['온대','따뜻한 지역'],['한대','매우 추운 지역'],['기후대','기후 구분 영역'],['강수량','비 오는 양'],['기온','공기의 온도'],['계절','시간에 따른 날씨 변화'],['영향','결과에 미치는 힘']],
    vocabFill: { instructions: '[세계 기후]', items: [
      {no:1,text:'평균 날씨를 (   )라고 한다.',answer:'기후',initials:'ㄱㅎ',aliases:['기후']},
      {no:2,text:'매우 더운 지역을 (   )라고 한다.',answer:'열대',initials:'ㅇㄷ',aliases:['열대']},
      {no:3,text:'따뜻한 지역을 (   )라고 한다.',answer:'온대',initials:'ㅇㄷ',aliases:['온대']},
      {no:4,text:'매우 추운 지역을 (   )라고 한다.',answer:'한대',initials:'ㅎㄷ',aliases:['한대']},
      {no:5,text:'기후 구분 영역을 (    )라고 한다.',answer:'기후대',initials:'ㄱㅎㄷ',aliases:['기후대']},
      {no:6,text:'비 오는 양을 (    )라고 한다.',answer:'강수량',initials:'ㄱㅅㄹ',aliases:['강수량']},
      {no:7,text:'공기의 온도를 (   )이라 한다.',answer:'기온',initials:'ㄱㅇ',aliases:['기온']},
      {no:8,text:'시간에 따른 날씨 변화를 (   )이라 한다.',answer:'계절',initials:'ㄱㅈ',aliases:['계절']},
      {no:9,text:'결과에 미치는 힘을 (   )이라 한다.',answer:'영향',initials:'ㅇㅎ',aliases:['영향']}
    ]},
    quiz: {q1_text:'기후가 생활에 미치는 영향은?',q1_opts:['① 의식주 결정','② 영향 없음','③ 언어만 결정','④ 색깔만 결정'],q2_text:'열대 기후의 특징은?',q2_opts:['① 매우 더움','② 매우 추움','③ 사계절 뚜렷','④ 비 안 옴'],q3_1_ph:'ㄱㅎ',q3_2_ph:'ㅇㄷ',q4_1_ph:'ㄱㅎㄷ',q4_2_ph:'ㄱㅅㄹ',q5_text:'기후가 지역 문화에 미치는 영향을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['기후'],q3_2:['열대'],q4_1:['기후대'],q4_2:['강수량']},
    essayKeywords: ['기후','열대','온대','한대','생활','문화'],
    explain: {q1:'해설: 기후가 의식주 결정.',q2:'해설: 열대는 매우 더움.',q3:'해설: 기후와 열대.',q4:'해설: 기후대와 강수량.',q5:'예시: 더운 지역은 가벼운 옷, 추운 지역은 두꺼운 옷.'}
  },

  pol_16: {
    labelNo: '16',
    title: '⛏️ 자원의 분포와 이용',
    passage: ['자원은 인간에게 필요한 물질입니다.','석유, 석탄, 광물 등이 있습니다.','자원은 지역마다 분포가 다르며 한정적입니다.'],
    vocab: [['자원','필요한 물질'],['석유','연료 원료'],['석탄','연료 광물'],['광물','땅속 자원'],['분포','퍼진 상태'],['한정적','제한된'],['이용','사용함'],['채굴','캐냄'],['보존','아껴 지킴']],
    vocabFill: { instructions: '[자원 분포와 이용]', items: [
      {no:1,text:'필요한 물질을 (   )이라 한다.',answer:'자원',initials:'ㅈㅇ',aliases:['자원']},
      {no:2,text:'연료 원료를 (   )라고 한다.',answer:'석유',initials:'ㅅㅇ',aliases:['석유']},
      {no:3,text:'연료 광물을 (   )이라 한다.',answer:'석탄',initials:'ㅅㅌ',aliases:['석탄']},
      {no:4,text:'땅속 자원을 (   )이라 한다.',answer:'광물',initials:'ㄱㅁ',aliases:['광물']},
      {no:5,text:'퍼진 상태를 (   )라고 한다.',answer:'분포',initials:'ㅂㅍ',aliases:['분포']},
      {no:6,text:'제한된 것을 (    )이라고 한다.',answer:'한정적',initials:'ㅎㅈㅈ',aliases:['한정적']},
      {no:7,text:'사용함을 (   )이라 한다.',answer:'이용',initials:'ㅇㅇ',aliases:['이용']},
      {no:8,text:'캐냄을 (   )이라 한다.',answer:'채굴',initials:'ㅊㄱ',aliases:['채굴']},
      {no:9,text:'아껴 지킴을 (   )이라 한다.',answer:'보존',initials:'ㅂㅈ',aliases:['보존']}
    ]},
    quiz: {q1_text:'자원이 한정적인 이유는?',q1_opts:['① 다시 안 만들어짐','② 무한함','③ 필요 없음','④ 항상 생김'],q2_text:'자원 보존 방법은?',q2_opts:['① 아껴 쓰기','② 많이 쓰기','③ 버리기','④ 무시하기'],q3_1_ph:'ㅈㅇ',q3_2_ph:'ㅂㅍ',q4_1_ph:'ㅎㅈㅈ',q4_2_ph:'ㅂㅈ',q5_text:'자원을 아껴 써야 하는 이유를 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['자원'],q3_2:['분포'],q4_1:['한정적'],q4_2:['보존']},
    essayKeywords: ['자원','한정','보존','이용','미래'],
    explain: {q1:'해설: 자원은 다시 안 만들어짐.',q2:'해설: 아껴 쓰는 것이 보존.',q3:'해설: 자원과 분포.',q4:'해설: 한정적이므로 보존 필요.',q5:'예시: 미래 세대를 위해 자원 절약 필요.'}
  },

  pol_17: {
    labelNo: '17',
    title: '🎭 문화와 지리적 특성',
    passage: ['지리적 환경은 문화 형성에 영향을 줍니다.','산지, 해안, 평야 등에 따라 다른 문화가 발달합니다.','문화는 지역의 정체성을 만듭니다.'],
    vocab: [['문화','생활 양식'],['지리적','땅과 관련된'],['환경','주변 조건'],['정체성','고유한 특성'],['전통','옛것을 이어옴'],['풍습','관습과 습관'],['의식주','옷,음식,집'],['다양성','여러 가지'],['공존','함께 존재']],
    vocabFill: { instructions: '[문화와 지리]', items: [
      {no:1,text:'생활 양식을 (   )이라 한다.',answer:'문화',initials:'ㅁㅎ',aliases:['문화']},
      {no:2,text:'땅과 관련된 것을 (    )이라고 한다.',answer:'지리적',initials:'ㅈㄹㅈ',aliases:['지리적']},
      {no:3,text:'주변 조건을 (   )이라 한다.',answer:'환경',initials:'ㅎㄱ',aliases:['환경']},
      {no:4,text:'고유한 특성을 (    )이라 한다.',answer:'정체성',initials:'ㅈㅊㅅ',aliases:['정체성']},
      {no:5,text:'옛것을 이어옴을 (   )이라 한다.',answer:'전통',initials:'ㅈㅌ',aliases:['전통']},
      {no:6,text:'관습과 습관을 (   )이라 한다.',answer:'풍습',initials:'ㅍㅅ',aliases:['풍습']},
      {no:7,text:'옷,음식,집을 (    )라고 한다.',answer:'의식주',initials:'ㅇㅅㅈ',aliases:['의식주']},
      {no:8,text:'여러 가지를 (    )라고 한다.',answer:'다양성',initials:'ㄷㅇㅅ',aliases:['다양성']},
      {no:9,text:'함께 존재함을 (   )이라 한다.',answer:'공존',initials:'ㄱㅈ',aliases:['공존']}
    ]},
    quiz: {q1_text:'지리적 환경이 문화에 미치는 영향은?',q1_opts:['① 생활 방식 결정','② 영향 없음','③ 언어만 결정','④ 색깔만 결정'],q2_text:'문화 다양성의 의미는?',q2_opts:['① 여러 문화 존중','② 한 가지만','③ 무시함','④ 통일'],q3_1_ph:'ㅁㅎ',q3_2_ph:'ㅈㄹㅈ',q4_1_ph:'ㅈㅊㅅ',q4_2_ph:'ㄷㅇㅅ',q5_text:'지리적 환경이 문화 형성에 어떤 영향을 주는지 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['문화'],q3_2:['지리적'],q4_1:['정체성'],q4_2:['다양성']},
    essayKeywords: ['문화','지리','환경','다양성','정체성'],
    explain: {q1:'해설: 환경이 생활 방식 결정.',q2:'해설: 다양성은 여러 문화 존중.',q3:'해설: 문화와 지리적.',q4:'해설: 정체성과 다양성.',q5:'예시: 산지는 산림 문화, 해안은 어업 문화 발달.'}
  },

  pol_18: {
    labelNo: '18',
    title: '🌐 국제 무역과 경제 협력',
    passage: ['국가 간 물건을 사고파는 것을 무역이라 합니다.','무역은 경제 발전에 도움을 줍니다.','국제 협력으로 함께 발전할 수 있습니다.'],
    vocab: [['무역','국가 간 거래'],['수출','물건 팔기'],['수입','물건 사기'],['경제','재화와 서비스'],['협력','함께 도움'],['국제','나라 사이'],['발전','성장함'],['교류','주고받음'],['상호 의존','서로 의지']],
    vocabFill: { instructions: '[국제 무역]', items: [
      {no:1,text:'국가 간 거래를 (   )라고 한다.',answer:'무역',initials:'ㅁㅇ',aliases:['무역']},
      {no:2,text:'물건 팔기를 (   )라고 한다.',answer:'수출',initials:'ㅅㅊ',aliases:['수출']},
      {no:3,text:'물건 사기를 (   )라고 한다.',answer:'수입',initials:'ㅅㅇ',aliases:['수입']},
      {no:4,text:'재화와 서비스를 (   )라고 한다.',answer:'경제',initials:'ㄱㅈ',aliases:['경제']},
      {no:5,text:'함께 도움을 (   )이라 한다.',answer:'협력',initials:'ㅎㄹ',aliases:['협력']},
      {no:6,text:'나라 사이를 (   )라고 한다.',answer:'국제',initials:'ㄱㅈ',aliases:['국제']},
      {no:7,text:'성장함을 (   )이라 한다.',answer:'발전',initials:'ㅂㅈ',aliases:['발전']},
      {no:8,text:'주고받음을 (   )이라 한다.',answer:'교류',initials:'ㄱㄹ',aliases:['교류']},
      {no:9,text:'서로 의지함을 (      )라고 한다.',answer:'상호 의존',initials:'ㅅㅎ ㅇㅈ',aliases:['상호의존']}
    ]},
    quiz: {q1_text:'무역의 장점은?',q1_opts:['① 경제 성장','② 고립','③ 감소','④ 중단'],q2_text:'국제 협력이 중요한 이유는?',q2_opts:['① 함께 발전','② 경쟁만','③ 단절','④ 무시'],q3_1_ph:'ㅁㅇ',q3_2_ph:'ㅅㅊ',q4_1_ph:'ㅎㄹ',q4_2_ph:'ㄱㅈ',q5_text:'국제 무역이 경제에 미치는 영향을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['무역'],q3_2:['수출'],q4_1:['협력'],q4_2:['국제']},
    essayKeywords: ['무역','수출','수입','협력','발전'],
    explain: {q1:'해설: 무역으로 경제 성장.',q2:'해설: 협력으로 함께 발전.',q3:'해설: 무역과 수출.',q4:'해설: 협력과 국제.',q5:'예시: 필요한 물건 교환, 경제 활성화, 상호 발전.'}
  },

  pol_19: {
    labelNo: '19',
    title: '🌏 지구촌 문제와 해결 방안',
    passage: ['지구촌은 전 세계가 하나로 연결된 것입니다.','환경, 빈곤, 전쟁 등 공동 문제가 있습니다.','협력하여 함께 해결해야 합니다.'],
    vocab: [['지구촌','세계가 하나로'],['환경 문제','자연 훼손'],['빈곤','가난한 상태'],['전쟁','무력 충돌'],['해결','문제 풀기'],['협력','함께 도움'],['공동','함께 하는'],['지속 가능','미래도 유지'],['연대','함께 뭉침']],
    vocabFill: { instructions: '[지구촌 문제]', items: [
      {no:1,text:'세계가 하나로 연결된 것을 (    )라고 한다.',answer:'지구촌',initials:'ㅈㄱㅊ',aliases:['지구촌']},
      {no:2,text:'자연 훼손을 (      )이라 한다.',answer:'환경 문제',initials:'ㅎㄱ ㅁㅈ',aliases:['환경문제']},
      {no:3,text:'가난한 상태를 (   )이라 한다.',answer:'빈곤',initials:'ㅂㄱ',aliases:['빈곤']},
      {no:4,text:'무력 충돌을 (   )이라 한다.',answer:'전쟁',initials:'ㅈㅈ',aliases:['전쟁']},
      {no:5,text:'문제 풀기를 (   )이라 한다.',answer:'해결',initials:'ㅎㄱ',aliases:['해결']},
      {no:6,text:'함께 도움을 (   )이라 한다.',answer:'협력',initials:'ㅎㄹ',aliases:['협력']},
      {no:7,text:'함께 하는 것을 (   )이라 한다.',answer:'공동',initials:'ㄱㄷ',aliases:['공동']},
      {no:8,text:'미래도 유지를 (        )이라 한다.',answer:'지속 가능',initials:'ㅈㅅ ㄱㄴ',aliases:['지속가능']},
      {no:9,text:'함께 뭉침을 (   )라고 한다.',answer:'연대',initials:'ㅇㄷ',aliases:['연대']}
    ]},
    quiz: {q1_text:'지구촌 문제 해결 방법은?',q1_opts:['① 국제 협력','② 무시','③ 방치','④ 혼자 해결'],q2_text:'지속 가능 발전이 중요한 이유는?',q2_opts:['① 미래 세대 위해','② 현재만','③ 개발만','④ 파괴'],q3_1_ph:'ㅈㄱㅊ',q3_2_ph:'ㅎㄱ ㅁㅈ',q4_1_ph:'ㅎㄹ',q4_2_ph:'ㅎㄱ',q5_text:'지구촌 문제를 해결하기 위해 우리가 할 수 있는 일을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['지구촌'],q3_2:['환경문제','환경 문제'],q4_1:['협력'],q4_2:['해결']},
    essayKeywords: ['지구촌','협력','환경','해결','지속'],
    explain: {q1:'해설: 국제 협력으로 해결.',q2:'해설: 미래 세대를 위해.',q3:'해설: 지구촌과 환경 문제.',q4:'해설: 협력과 해결.',q5:'예시: 환경 보호, 기부, 봉사, 평화 노력.'}
  },

  pol_20: {
    labelNo: '20',
    title: '🔮 미래의 지리적 변화와 전망',
    passage: ['미래에는 기후 변화와 기술 발전이 지리를 바꿀 것입니다.','새로운 도시와 교통 수단이 생길 것입니다.','우리는 미래를 준비하고 대비해야 합니다.'],
    vocab: [['미래','앞으로의 시간'],['전망','예상과 예측'],['변화','달라짐'],['기술 발전','과학 진보'],['기후 변화','날씨 변동'],['대비','준비함'],['예측','미리 짐작'],['지속 가능','미래 유지'],['혁신','새로운 변화']],
    vocabFill: { instructions: '[미래 전망]', items: [
      {no:1,text:'앞으로의 시간을 (   )라고 한다.',answer:'미래',initials:'ㅁㄹ',aliases:['미래']},
      {no:2,text:'예상과 예측을 (   )이라 한다.',answer:'전망',initials:'ㅈㅁ',aliases:['전망']},
      {no:3,text:'달라짐을 (   )이라 한다.',answer:'변화',initials:'ㅂㅎ',aliases:['변화']},
      {no:4,text:'과학 진보를 (      )이라 한다.',answer:'기술 발전',initials:'ㄱㅅ ㅂㅈ',aliases:['기술발전']},
      {no:5,text:'날씨 변동을 (      )이라 한다.',answer:'기후 변화',initials:'ㄱㅎ ㅂㅎ',aliases:['기후변화']},
      {no:6,text:'준비함을 (   )라고 한다.',answer:'대비',initials:'ㄷㅂ',aliases:['대비']},
      {no:7,text:'미리 짐작함을 (   )이라 한다.',answer:'예측',initials:'ㅇㅊ',aliases:['예측']},
      {no:8,text:'미래 유지를 (        )이라 한다.',answer:'지속 가능',initials:'ㅈㅅ ㄱㄴ',aliases:['지속가능']},
      {no:9,text:'새로운 변화를 (   )이라 한다.',answer:'혁신',initials:'ㅎㅅ',aliases:['혁신']}
    ]},
    quiz: {q1_text:'미래 지리 변화의 주요 요인은?',q1_opts:['① 기후·기술','② 변화 없음','③ 과거만','④ 무관심'],q2_text:'미래를 준비하는 방법은?',q2_opts:['① 지속 가능 발전','② 방치','③ 무시','④ 파괴'],q3_1_ph:'ㅁㄹ',q3_2_ph:'ㅂㅎ',q4_1_ph:'ㄱㅅ ㅂㅈ',q4_2_ph:'ㄷㅂ',q5_text:'미래의 지리적 변화를 예측하고 우리가 준비해야 할 것을 설명해 보세요.'},
    answerKey: {q1:'1',q2:'1',q3_1:['미래'],q3_2:['변화'],q4_1:['기술발전','기술 발전'],q4_2:['대비']},
    essayKeywords: ['미래','변화','기술','기후','준비','지속'],
    explain: {q1:'해설: 기후 변화와 기술 발전이 주요 요인.',q2:'해설: 지속 가능한 발전으로 준비.',q3:'해설: 미래와 변화.',q4:'해설: 기술 발전에 대비.',q5:'예시: 환경 보호, 새 기술 학습, 적응력 키우기.'}
  }
});

/* ===============================
   ★ 어휘 빈칸 렌더러 & 탭 이벤트
=================================*/
function getCurrentUnit() {
  return (window.CUR_UNIT || 'pol_01');
}

window.renderVocabFill = function () {
  const unit = window.CUR_UNIT || 'pol_01';
  const pack = window.CONTENTS?.[unit];
  const root = document.getElementById('vocab-fill') 
            || document.querySelector('.vocab-fill-text');

  if (!root || !pack?.vocabFill?.items?.length) {
    console.warn('[vocab] root or items missing:', { root: !!root, unit, items: pack?.vocabFill?.items?.length });
    return;
  }

  const html = (pack.vocabFill.items || []).map(({ no, text, answer, initials }) => {
    const slot = `
      <span class="blank-wrap" data-answer="${answer}">
        <span class="blank-icon">${no}</span>
        <span class="blank-mark"></span>
        <input type="text" class="blank-input" placeholder="${initials || ''}">
      </span>
    `;
    const p = text.replace(/\(\s*[-＿—\u00A0]*\s*\)/, slot);
    return `<p>${p}</p>`;
  }).join('');

  root.innerHTML = `
    <div class="vocab-instruction">${pack.vocabFill.instructions || ''}</div>
    <div class="vocab-inline">${html}</div>
  `;

  (function ensureVocabInlineStyle(){
    if (document.getElementById('vocab-inline-style')) return;
    const st = document.createElement('style');
    st.id = 'vocab-inline-style';
    st.textContent = `
      /* vocab 영역에서만 줄글 처리 */
      .vocab-box .vocab-inline > p { display:inline !important; margin:0 !important; }
      .vocab-box .vocab-inline > p + p::before { content:" "; }

      #vocab-fill .vocab-inline > p,
      .vocab-fill-text .vocab-inline > p { display:inline !important; margin:0 !important; }
      #vocab-fill .vocab-inline > p + p::before,
      .vocab-fill-text .vocab-inline > p + p::before { content:" "; }

      /* 🔶 줄 간격 조정 */
      .vocab-inline { line-height: 5.0 !important; }
    `;
    document.head.appendChild(st);
  })();

  window.reportState = window.reportState || {};
  window.reportState.vocabTotal = pack.vocabFill.items.length;

  // ✅ 어휘 렌더링 직후 상태 복원
  setTimeout(() => {
    // 1. localStorage에서 복원
    if (typeof window.loadVocabState === 'function') {
      window.loadVocabState();
    }
    // 2. 서버 데이터가 있으면 서버 데이터로 복원 (우선순위 높음)
    if (typeof window.restoreVocabFromServerData === 'function') {
      window.restoreVocabFromServerData();
    }
  }, 100);
};

// ✅ 이벤트 리스너 중복 방지를 위한 플래그
let _tabEventsInitialized = false;

function _bindTabEvents() {
  // 이미 초기화되었으면 건너뛰기
  if (_tabEventsInitialized) return;
  _tabEventsInitialized = true;

  document.addEventListener('click', (e)=>{
    const btn = e.target.closest('[data-tab]');
    if (!btn) return;
    const tab = btn.getAttribute('data-tab');
    if (tab === 'vocab') renderVocabFill();
  });
}

/* ===== 텍스트 주입 (HTML 구조/ids 유지) ===== */
function applyContentPack(unitKey) {
  console.log('[applyContentPack] 호출됨, unitKey:', unitKey);
  const pack = window.CONTENTS[unitKey];
  if (!pack) {
    console.error('[applyContentPack] pack이 없음! unitKey:', unitKey, 'CONTENTS:', window.CONTENTS);
    return;
  }

  const labelNoEl = document.querySelector('.passage-label strong');
  const titleEl   = document.querySelector('.passage-title');
  if (labelNoEl) labelNoEl.textContent = pack.labelNo;
  if (titleEl)   titleEl.innerHTML = pack.title;

  const passageBox = document.querySelector('.passage-text');
  console.log('[applyContentPack] passageBox:', passageBox, 'pack.passage:', pack.passage);
  if (passageBox) {
    const html = pack.passage.map(p => `<p>${p}</p>`).join('');
    console.log('[applyContentPack] 생성된 HTML 길이:', html.length);
    passageBox.innerHTML = html;
    console.log('[applyContentPack] passageBox.innerHTML 설정 완료');
  }

  const vocabBox = document.querySelector('.passage-vocab ol');
  if (vocabBox)  vocabBox.innerHTML = pack.vocab.map(([w,d]) => `<li><b>${w}</b>: ${d}</li>`).join('');

  const blocks = Array.from(document.querySelectorAll('#tab-reading .quiz-block'));

  // Q1
  if (blocks[0]) {
    const q1Text = blocks[0].querySelector('.quiz-q');
    const q1Lis  = blocks[0].querySelectorAll('.quiz-options li');
    if (q1Text) q1Text.textContent = pack.quiz.q1_text;
    if (q1Lis.length === 4) {
      q1Lis.forEach((li,i)=> li.innerHTML = `<label><input type="radio" name="q1" value="${i+1}"><span>${pack.quiz.q1_opts[i]}</span></label>`);
    }
  }

  // Q2
  if (blocks[1]) {
    const q2Text = blocks[1].querySelector('.quiz-q');
    const q2Lis  = blocks[1].querySelectorAll('.quiz-options li');
    if (q2Text) q2Text.textContent = pack.quiz.q2_text;
    if (q2Lis.length === 4) {
      q2Lis.forEach((li,i)=> li.innerHTML = `<label><input type="radio" name="q2" value="${i+1}"><span>${pack.quiz.q2_opts[i]}</span></label>`);
    }
  }

  // Q3
  if (blocks[2]) {
    const q3P = blocks[2].querySelector('.quiz-q');
    if (q3P && pack.quiz.q3_html) q3P.innerHTML = pack.quiz.q3_html;
    const q3_1 = document.getElementById('q3-1');
    const q3_2 = document.getElementById('q3-2');
    if (q3_1 && pack.quiz.q3_1_ph) q3_1.placeholder = pack.quiz.q3_1_ph;
    if (q3_2 && pack.quiz.q3_2_ph) q3_2.placeholder = pack.quiz.q3_2_ph;
  }

  // Q4
  if (blocks[3]) {
    const q4P = blocks[3].querySelector('.quiz-q');
    if (q4P && pack.quiz.q4_html) q4P.innerHTML = pack.quiz.q4_html;
    const q4_1 = document.getElementById('q4-1');
    const q4_2 = document.getElementById('q4-2');
    if (q4_1 && pack.quiz.q4_1_ph) q4_1.placeholder = pack.quiz.q4_1_ph;
    if (q4_2 && pack.quiz.q4_2_ph) q4_2.placeholder = pack.quiz.q4_2_ph;
  }

  // Q5
  if (blocks[4]) {
    const q5Text = blocks[4].querySelector('.quiz-q');
    if (q5Text && pack.quiz.q5_text) q5Text.textContent = pack.quiz.q5_text;
  }

  // ✅ 모든 콘텐츠 로드 완료 후 로딩 오버레이 숨기기
  requestAnimationFrame(() => {
    const loadingOverlay = document.getElementById('loadingOverlay');
    if (loadingOverlay) {
      // 분석리포트 탭일 경우 1.3초 후에 숨기기
      const unit = window.CUR_UNIT || 'pol_01';
      const savedTab = localStorage.getItem(`current-geo-tab:${unit}`);
      const delay = (savedTab === 'report') ? 1300 : 0;

      setTimeout(() => {
        loadingOverlay.classList.remove('show');
        console.log('[applyContentPack] 로딩 오버레이 숨김 완료');
      }, delay);
    }
  });
}

/* ==== 본문학습 상태 저장/복원 (✅ 학생별 분리 저장) ==== */

/* 🔐 현재 로그인 학생 정보 가져오기 */
function getCurrentStudentForReading() {
  const saved = localStorage.getItem('currentStudent');
  if (!saved) return null;
  try { return JSON.parse(saved); } catch (e) { return null; }
}

/* 🔐 학생키 만들기: 학년_이름_전화숫자 */
function buildStudentKeyForReading(stu) {
  const cleanPhone = (stu.phone || '').replace(/\D/g, '');
  const cleanName  = (stu.name  || '').trim();
  const cleanGrade = (stu.grade || '').trim();
  return `${cleanGrade}_${cleanName}_${cleanPhone}`;
}

// ✅ 현재 로그인한 학생 키를 공용으로 쓰는 함수 (메뉴/단원 페이지 공유)
window.getStudentKey = function () {
  const stu = getCurrentStudent();
  if (!stu) return '';
  return buildStudentKey(stu);   // "학년_이름_전화번호" 형태
};

/* 🔐 단원별 + 학생별 로컬스토리지 키 */
function getReadingStateKey(unit) {
  const stu = getCurrentStudentForReading();
  if (!stu) {
    // 로그인 안 되어 있으면 예전처럼 단원 단독 키 사용
    return `dan-reading-state:${unit}`;
  }
  const studentKey = buildStudentKeyForReading(stu);
  return `dan-reading-state:${studentKey}:${unit}`;
}

function saveReadingState() {
  try {
    const unit = window.CUR_UNIT || 'pol_01';
    const key  = getReadingStateKey(unit);   // ✅ 학생별 + 단원별 키

    const q1   = document.querySelector('input[name="q1"]:checked');
    const q2   = document.querySelector('input[name="q2"]:checked');
    const q3_1 = document.getElementById('q3-1');
    const q3_2 = document.getElementById('q3-2');
    const q4_1 = document.getElementById('q4-1');
    const q4_2 = document.getElementById('q4-2');
    const q5   = document.getElementById('q5');

    const state = {
      graded: true,
      q1:   q1   ? q1.value   : '',
      q2:   q2   ? q2.value   : '',
      q3_1: q3_1 ? q3_1.value : '',
      q3_2: q3_2 ? q3_2.value : '',
      q4_1: q4_1 ? q4_1.value : '',
      q4_2: q4_2 ? q4_2.value : '',
      q5:   q5   ? q5.value   : ''
    };

    localStorage.setItem(key, JSON.stringify(state));
  } catch (e) {
    console.warn('saveReadingState error', e);
  }
}

function loadReadingState() {
  try {
    const unit = window.CUR_UNIT || 'pol_01';
    const key  = getReadingStateKey(unit);   // ✅ 학생별 + 단원별 키
    const raw  = localStorage.getItem(key);
    if (!raw) return;

    const state = JSON.parse(raw);
    if (!state) return;

    if (state.q1) {
      const r1 = document.querySelector(`input[name="q1"][value="${state.q1}"]`);
      if (r1) r1.checked = true;
    }
    if (state.q2) {
      const r2 = document.querySelector(`input[name="q2"][value="${state.q2}"]`);
      if (r2) r2.checked = true;
    }

    const q3_1 = document.getElementById('q3-1');
    const q3_2 = document.getElementById('q3-2');
    const q4_1 = document.getElementById('q4-1');
    const q4_2 = document.getElementById('q4-2');
    const q5   = document.getElementById('q5');

    if (q3_1 && state.q3_1 !== undefined) q3_1.value = state.q3_1;
    if (q3_2 && state.q3_2 !== undefined) q3_2.value = state.q3_2;
    if (q4_1 && state.q4_1 !== undefined) q4_1.value = state.q4_1;
    if (q4_2 && state.q4_2 !== undefined) q4_2.value = state.q4_2;
    if (q5   && state.q5   !== undefined) q5.value   = state.q5;

    if (state.graded && typeof window.gradeQuiz === 'function') {
      setTimeout(() => {
        try { window.gradeQuiz(); } catch (e) {
          console.warn('auto re-grade reading error', e);
        }
      }, 0);
    }
  } catch (e) {
    console.warn('loadReadingState error', e);
  }
}

/* ===== 통합 채점기 ===== */
window.gradeQuiz = function () {
  const pack = window.CONTENTS[window.CUR_UNIT] || window.CONTENTS.pol_01;
  const A = pack.answerKey;
  const EX = pack.explain;

  const quizBlocks = document.querySelectorAll('#tab-reading .quiz-block');
  const numLabels = ["01","02","03","04","05"];
  quizBlocks.forEach((block, idx) => {
    const numEl = block.querySelector('.quiz-num');
    if (!numEl) return;
    let markEl = numEl.querySelector('.mark');
    if (!markEl) {
      markEl = document.createElement('div');
      markEl.className = 'mark';
      numEl.appendChild(markEl);
    }
    numEl.textContent = numLabels[idx];
    numEl.appendChild(markEl);
    numEl.classList.remove('correct','wrong');
    markEl.textContent = '';
  });

  let score = 0;
  const totalAuto = 4;
  const shortMsgs = [];
  const fullMsgs = [];

  function norm(s){ return (s||'').toString().replace(/\s+/g,'').toLowerCase(); }
  function mark(idx, ok, label, ex, isEssay=false){
    const num = quizBlocks[idx]?.querySelector('.quiz-num');
    const markEl = num?.querySelector('.mark');
    if (ok) {
      score++;
      num?.classList.add('correct');
      if(markEl) markEl.textContent='⭕';
      shortMsgs.push(`${label} 정답 ✅`);
      fullMsgs.push(`${label} 정답 ✅ ${ex||''}`);
    } else {
      num?.classList.add('wrong');
      if(markEl) markEl.textContent='✖';
      shortMsgs.push(`${label} ${isEssay?'서술형: ':''}오답 ❌`);
      fullMsgs.push(`${label} ${isEssay?'서술형: ':''}오답 ❌ ${ex||''}`);
    }
  }

  // 1
  const q1 = document.querySelector('input[name="q1"]:checked');
  const q1ok = (q1 && q1.value === A.q1);
  mark(0, q1ok, '①', EX.q1);

  // 2
  const q2 = document.querySelector('input[name="q2"]:checked');
  const q2ok = (q2 && q2.value === A.q2);
  mark(1, q2ok, '②', EX.q2);

  // 3
  const q3New = document.getElementById('q3');
  const q3Old1 = document.getElementById('q3-1');
  const q3Old2 = document.getElementById('q3-2');
  const q3Text1 = q3New ? q3New.value.trim() : (q3Old1?.value || '').trim();
  const q3Text2 = q3New ? '' : (q3Old2?.value || '').trim();
  const ok3_1 = A.q3_1.some(a => norm(a) === norm(q3Text1));
  const ok3_2 = A.q3_2 ? A.q3_2.some(a => norm(a) === norm(q3Text2)) : true;
  const q3ok = ok3_1 && ok3_2;
  mark(2, q3ok, '③', EX.q3);

  // 4
  const q4New = document.getElementById('q4');
  const q4Old1 = document.getElementById('q4-1');
  const q4Old2 = document.getElementById('q4-2');
  const q4Text1 = q4New ? q4New.value.trim() : (q4Old1?.value || '').trim();
  const q4Text2 = q4New ? '' : (q4Old2?.value || '').trim();
  const ok4_1 = A.q4_1.some(a => norm(a) === norm(q4Text1));
  const ok4_2 = A.q4_2 ? A.q4_2.some(a => norm(a) === norm(q4Text2)) : true;
  const q4ok = ok4_1 && ok4_2;
  mark(3, q4ok, '④', EX.q4);

  // 5 (서술형)
  const essay = (document.getElementById('q5')?.value || '').trim().toLowerCase();
  const keys = (pack.essayKeywords && Array.isArray(pack.essayKeywords) && pack.essayKeywords.length)
    ? pack.essayKeywords
    : ["등고선","간격","좁","넓","급경사","완만","경사"];
  let hit = 0;
  keys.forEach(k => { if (essay.includes(k)) hit++; });
  const q5ok = essay.length && hit >= 2;
  mark(4, q5ok, '⑤', EX.q5, true);

  const box = document.getElementById('grade-result');
  if (box) {
    box.style.display = 'block';
    box.innerHTML = `<p><strong>점수: ${score} / ${totalAuto}</strong></p>` + shortMsgs.map(m => `<p>${m}</p>`).join('');
  }
  window.fullResultHTML = `<p><strong>점수: ${score} / ${totalAuto}</strong></p>` + fullMsgs.map(m => `<p>${m}</p>`).join('');

  const g=document.getElementById('grade-btn');
  const r=document.getElementById('reset-btn');
  const s=document.getElementById('submit-btn');
  if (g) g.style.display='inline-block';
  if (r) r.style.display='inline-block';
  if (s) s.style.display='inline-block';

  window.reportState = window.reportState || {};
  window.reportState.q1ok=q1ok;
  window.reportState.q2ok=q2ok;
  window.reportState.q3ok=q3ok;
  window.reportState.q4ok=q4ok;
  window.reportState.q5ok=q5ok;

  if (typeof updateReportPanel==='function') {
    const lexicalRatio = (typeof window.reportState.vocabScoreRatio==='number') ? window.reportState.vocabScoreRatio : 0;
    const lexicalOk = lexicalRatio >= 0.7;
    updateReportPanel({
      q1ok,q2ok,q3ok,q4ok,q5ok,
      messages:[
        "① 핵심 이해력: " + (q1ok?"좋아요! ✅":"보완 필요 ❗"),
        "② 구조 파악력: " + (q2ok?"좋아요! ✅":"보완 필요 ❗"),
        "③ 어휘 맥락력: " + (lexicalOk?"좋아요! ✅":"어휘 복습 필요 ❗"),
        "④ 추론·통합력: " + (q4ok?"좋아요! ✅":"보완 필요 ❗"),
        "⑤ 비판·적용력: " + (q5ok?"좋아요! ✅":"보완 필요 ❗")
      ]
    });
  }

  // ✅ 레이더 점수 객체로 빼두기
  const radarScores = {
    literal:     q1ok ? 10 : 6,
    structural:  q2ok ? 10 : 6,
    lexical:     q3ok ? 10 : 6,
    inferential: q4ok ? 10 : 6,
    critical:    q5ok ? 10 : 6
  };

  // ✅ 서버로 보낼 마지막 레이더 점수 기억해 두기 (전역)
  window._lastRadar = radarScores;

  // ✅ 화면 레이더 차트 그리기
  if (typeof updateRadarChart === 'function') {
    updateRadarChart(radarScores);
  }
  if (typeof drawRadarChart === 'function') {
    drawRadarChart(radarScores);
  }

  // ✅ 서버 로그용으로도 보관 (옵션)
  window.reportState = window.reportState || {};
  window.reportState.radarScores = radarScores;

  if (typeof saveReadingState === 'function') {
    saveReadingState();
  }
};

/* === 정답·해설 패널 렌더러 === */
function renderSolutions(pack) {
  const A = pack.answerKey, EX = pack.explain;
  const q1Text = pack.quiz.q1_opts[Number(A.q1) - 1] || '';
  const q2Text = pack.quiz.q2_opts[Number(A.q2) - 1] || '';

  // grade-result (점수 박스) 안의 하단에 해설 추가
  const gradeResult = document.getElementById('grade-result');
  if (!gradeResult) return;

  // 기존 solutions-box가 있으면 제거
  let box = document.getElementById('solutions-box');
  if (box) box.remove();

  // 새로운 solutions-box를 grade-result 내부 하단에 추가
  box = document.createElement('div');
  box.id = 'solutions-box';
  box.style.marginTop = '16px';
  box.style.paddingTop = '12px';
  box.style.borderTop = '1px dashed #e5d4c1';
  box.style.lineHeight = '1.6';

  box.innerHTML = `
    <h3 style="margin:0 0 10px; font-size:16px; color:#8b2f2f;">정답 · 해설</h3>
    <ol style="margin:0; padding-left:18px;">
      <li style="margin-bottom:8px;">
        <b>① 정답:</b> ${A.q1} — ${q1Text}<br>
        <span style="color:#6b5a48;">${EX.q1 || ''}</span>
      </li>
      <li style="margin-bottom:8px;">
        <b>② 정답:</b> ${A.q2} — ${q2Text}<br>
        <span style="color:#6b5a48;">${EX.q2 || ''}</span>
      </li>
      <li style="margin-bottom:8px;">
        <b>③ 정답(두 칸):</b> ${Array.isArray(A.q3_1)?A.q3_1[0]:A.q3_1} / ${Array.isArray(A.q3_2)?A.q3_2[0]:A.q3_2}<br>
        <span style="color:#6b5a48;">${EX.q3 || ''}</span>
      </li>
      <li style="margin-bottom:8px;">
        <b>④ 정답(두 칸):</b> ${Array.isArray(A.q4_1)?A.q4_1[0]:A.q4_1} / ${Array.isArray(A.q4_2)?A.q4_2[0]:A.q4_2}<br>
        <span style="color:#6b5a48;">${EX.q4 || ''}</span>
      </li>
      <li>
        <b>⑤ 서술형 예시:</b> <span style="color:#6b5a48;">${EX.q5 || '핵심어 2개 이상 포함 시 정답 처리'}</span>
      </li>
    </ol>
  `;

  // grade-result 내부 하단에 추가
  gradeResult.appendChild(box);
}

/* ========== 공통 진행도 매니저 (단일화 호환) ========== */
window.DanDan = window.DanDan || {};

(function () {
  // 이미 정의돼 있으면 다시 만들지 않기
  if (window.DanDan.ProgressManager) return;

  /* ✅ 단원 감지: pol_01, pol_02 ... */
  function detectUnit() {
    let unitParam = new URLSearchParams(location.search).get('unit');
    if (!unitParam) {
      const m = location.pathname.match(/pol_(\d+)\.html/i);
      if (m) unitParam = `pol_${m[1].padStart(2, '0')}`;
    }
    return (unitParam || (window.CUR_UNIT || 'pol_01')).toLowerCase();
  }

  /* ✅ 학생키: 학년_이름_전화숫자 */
  function buildStudentKey(stu) {
    const cleanPhone = (stu.phone || '').replace(/\D/g, '');
    const cleanName  = (stu.name  || '').trim();
    const cleanGrade = (stu.grade || '').trim();
    return `${cleanGrade}_${cleanName}_${cleanPhone}`;
  }

  /* ✅ 현재 로그인 학생 */
  function getCurrentStudent() {
    const saved = localStorage.getItem('currentStudent');
    if (!saved) return null;
    try { return JSON.parse(saved); } catch { return null; }
  }

  /* ✅ 특정 학생 + 단원 기준 진행도 key 만들기
     → dan-progress:학년_이름_전화:pol_04 */
  function buildProgressKey(stu, unit) {
    const studentKey = buildStudentKey(stu);
    return `dan-progress:${studentKey}:${unit}`;
  }

  /* ✅ 현재 학생의 완료된 단원 목록 읽기 */
  function readDoneList() {
    const stu = getCurrentStudent();
    if (!stu) return { keyPrefix: null, list: [] };

    const unitList = [];
    const studentKey = buildStudentKey(stu);
    const prefix = `dan-progress:${studentKey}:`; // 단원별 prefix

    for (let i = 0; i < localStorage.length; i++) {
      const k = localStorage.key(i);
      if (!k || !k.startsWith(prefix)) continue;
      const unit = k.slice(prefix.length);  // pol_01, pol_02 ...
      const val  = localStorage.getItem(k);
      if (val) unitList.push(unit);
    }
    return { keyPrefix: prefix, list: unitList };
  }

  const ProgressManager = {
    /* 현재 단원 unit (pol_01 등) */
    getUnit: detectUnit,

    /* ✅ 이 단원을 "학습완료"로 표시 */
    markComplete() {
      const stu  = getCurrentStudent();
      if (!stu) return null;

      const unit = detectUnit();                  // pol_04
      const key  = buildProgressKey(stu, unit);   // dan-progress:학생키:pol_04

      localStorage.setItem(key, '1');             // 값은 그냥 '1'로 저장
      return key;
    },

    /* ✅ 이 단원이 완료됐는지 확인 */
    isCompleted(unitOptional) {
      const stu = getCurrentStudent();
      if (!stu) return false;
      const unit = (unitOptional || detectUnit());
      const key  = buildProgressKey(stu, unit);
      return !!localStorage.getItem(key);
    },

    /* ✅ 현재 학생의 완료 단원 리스트 얻기 (pol_01, pol_03 ...) */
    getStudentProgress() {
      return readDoneList();   // { keyPrefix, list }
    }
  };

  window.DanDan.ProgressManager = ProgressManager;

  /* ✅ 제출하기 훅: 완료처리 + 로그 전송 */
  (function hookSubmitReport() {
    const original = window.submitReport;

    window.submitReport = async function (...args) {
      const stu = getCurrentStudent();
      if (!stu) {
        alert('로그인한 학생 정보가 없습니다. 먼저 로그인 해주세요.');
        return;
      }

      // 1) 기존 제출 로직(PDF 등) 실행
      if (typeof original === 'function') {
        await original.apply(this, args);
      } else if (typeof window.captureElementToPDF === 'function') {
        await captureElementToPDF(
          'capture-report',
          '단단국어_분석리포트.pdf',
          { withStudentInfo: true }
        );
      }

      // 2) ✅ 진행도: 학생 + 단원 기준으로 학습완료 저장
      const key = ProgressManager.markComplete();

      if (typeof window.showSubmitSuccess === 'function') {
        showSubmitSuccess('분석리포트');
      } else {
        console.log(`학습완료 처리됨: ${key}`);
      }

      // 3) 서버 학습 이력 로그
      if (typeof window.sendLearningLog === 'function') {
        try {
          await window.sendLearningLog();
        } catch (e) {
          console.warn('[submitReport] sendLearningLog 실패', e);
        }
      }
    };
  })();
})();

/* ===========================
 * ✅ 창의활동 제출 → PDF 내보내기
 *   textarea 전체 내용을 div로 복사해서 캡처
 * =========================== */
window.submitCreative = async function () {
  const textarea   = document.getElementById('creative-input');
  const renderBox  = document.getElementById('creative-render');
  const captureBox = document.getElementById('capture-creative');

  if (!textarea || !renderBox || !captureBox) {
    console.warn('[submitCreative] 요소를 찾을 수 없음', {
      textarea: !!textarea,
      renderBox: !!renderBox,
      captureBox: !!captureBox,
    });
    alert('창의활동 영역을 찾을 수 없습니다.');
    return;
  }

  try {
    // 1) textarea 내용 → 렌더 박스로 복사
    renderBox.textContent = textarea.value || '';

    // 2) 캡처할 동안 textarea 숨기고 렌더 박스만 보이게
    textarea.style.display  = 'none';
    renderBox.style.display = 'block';

    // 3) 공통 함수가 있으면 그걸 사용 (captureElementToPDF)
    if (typeof window.captureElementToPDF === 'function') {
      await window.captureElementToPDF(
        'capture-creative',
        '단단국어_창의활동.pdf',
        { withStudentInfo: true }
      );
    }
    // 4) 없으면 html2canvas + jsPDF 직접 사용 (백업)
    else if (window.html2canvas && window.jsPDF) {
      const canvas = await html2canvas(captureBox);
      const imgData = canvas.toDataURL('image/png');

      const pdf = new jsPDF('p', 'mm', 'a4');
      const pageW = pdf.internal.pageSize.getWidth();
      const pageH = (canvas.height * pageW) / canvas.width;

      pdf.addImage(imgData, 'PNG', 0, 0, pageW, pageH);
      pdf.save('단단국어_창의활동.pdf');
    } else {
      alert('PDF 모듈을 찾을 수 없습니다. (html2canvas / jsPDF 확인)');
    }

    // (원하면 여기에서 창의활동도 showSubmitSuccess 호출 가능)
    if (typeof window.showSubmitSuccess === 'function') {
      window.showSubmitSuccess('창의활동');
    }
  } catch (e) {
    console.warn('submitCreative error', e);
    alert('창의활동 PDF 생성 중 오류가 발생했습니다.');
  } finally {
    // 5) 화면 복구: textarea 다시 보이게, 렌더 박스 숨김
    if (textarea)   textarea.style.display  = 'block';
    if (renderBox)  renderBox.style.display = 'none';
  }
};

/* ===========================
 * ✅ 학습 이력 서버로 보내기 (테스트 버전)
 * =========================== */
/* ===== 🔄 서버에서 완료 상태 가져오기 ===== */
window.loadCompletionStatus = async function () {
  try {
    let stu = null;
    try {
      const raw = localStorage.getItem('currentStudent');
      if (raw) stu = JSON.parse(raw);
    } catch (e) {
      console.warn('[loadCompletionStatus] currentStudent 파싱 실패', e);
    }

    if (!stu) {
      console.warn('[loadCompletionStatus] 학생 정보 없음 → 스킵');
      return;
    }

    const params = new URLSearchParams({
      grade: stu.grade || '',
      name: stu.name || '',
      series: 'BRAIN업'
    });

    const res = await fetch(`/api/completion-status?${params}`, {
      method: 'GET',
      headers: { 'Content-Type': 'application/json' }
    });

    if (!res.ok) {
      console.warn('[loadCompletionStatus] 서버 응답 오류:', res.status);
      return;
    }

    const data = await res.json();
    console.log('[loadCompletionStatus] 서버 응답:', data);

    if (data.ok && Array.isArray(data.completedUnits)) {
      // 학생 키 생성 (buildProgressKey 함수와 동일한 로직)
      const cleanPhone = (stu.phone || '').replace(/\D/g, '');
      const cleanName  = (stu.name  || '').trim();
      const cleanGrade = (stu.grade || '').trim();
      const studentKey = `${cleanGrade}_${cleanName}_${cleanPhone}`;
      const keyPrefix = `dan-progress:${studentKey}:`;

      console.log('[loadCompletionStatus] studentKey:', studentKey);
      console.log('[loadCompletionStatus] keyPrefix:', keyPrefix);

      data.completedUnits.forEach(unit => {
        const key = keyPrefix + unit;  // "dan-progress:학생키:pol_01"
        localStorage.setItem(key, '1');
        console.log('[loadCompletionStatus] 저장:', key);
      });

      console.log('[loadCompletionStatus] 완료 상태 동기화 완료:', data.completedUnits);
    }
  } catch (e) {
    console.warn('[loadCompletionStatus] 오류', e);
  }
};

window.sendLearningLog = async function () {
  try {
    const unit = window.CUR_UNIT || 'pol_02';

    // 1) localStorage 에서 현재 로그인 학생 가져오기
    let stu = null;
    try {
      const raw = localStorage.getItem('currentStudent');
      if (raw) stu = JSON.parse(raw);
    } catch (e) {
      console.warn('[sendLearningLog] currentStudent 파싱 실패', e);
    }

    if (!stu) {
      console.warn('[sendLearningLog] 학생 정보 없음 → 로그 전송 스킵');
      return;
    }

    // ✅ gradeQuiz 에서 저장해 둔 레이더 점수 꺼내기
    const radar =
      (window.reportState && window.reportState.radarScores)
      ? window.reportState.radarScores
      : null;

    const payload = {
      grade:  stu.grade  || '',
      name:   stu.name   || '',
      school: stu.school || '',
      series: 'BRAIN업',      // 필요하면 '정조편' 등으로 바꿔도 됨
      unit:   unit,
      radar:  radar,       // ✅ 여기 추가!
      completed: true      // ✅ 학습 완료 표시
    };

    console.log('[sendLearningLog] payload =', payload);

    const res = await fetch('/api/log', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(payload),
    });

    let data = {};
    try {
      data = await res.json();
    } catch (_) {
      data = {};
    }
    console.log('[sendLearningLog] result =', data);
  } catch (e) {
    console.warn('sendLearningLog outer error', e);
  }
};




/* ===== 로드 시 실행 + 버튼 타입 안전패치 ===== */
document.addEventListener('DOMContentLoaded', async () => {
  // 0) 🔄 서버에서 학습 완료 상태 동기화
  if (typeof window.loadCompletionStatus === 'function') {
    await loadCompletionStatus();
  }

  // 1) 본문 내용 채우기
  applyContentPack(window.CUR_UNIT);

  // 2) 탭 이벤트 + 어휘 자동 렌더
  _bindTabEvents();
  if (location.hash.includes('어휘학습') || document.querySelector('#vocab-fill')) {
    renderVocabFill();
  }

  // 3) 버튼 type=button 통일
  ['grade-btn','reset-btn','submit-btn'].forEach(id => {
    const el = document.getElementById(id);
    if (el) el.type = 'button';
  });

  // 4) 제출하기 = 채점 + 해설 표시 (한 번만 등록)
  const submitBtn = document.getElementById('submit-btn');
  if (submitBtn) {
    submitBtn.addEventListener('click', () => {
      try {
        if (typeof window.gradeQuiz === 'function') {
          gradeQuiz();
        }
        const pack = window.CONTENTS[window.CUR_UNIT] || window.CONTENTS.pol_01;
        renderSolutions(pack);
      } catch (e) {
        console.warn('submit-btn handler error', e);
      }
    });
  }

    // 🔶 창의활동 제출 버튼 → submitCreative 연결
  const creativeBtn = document.getElementById('creative-submit-btn');
  if (creativeBtn && typeof window.submitCreative === 'function') {
    creativeBtn.type = 'button';
    creativeBtn.addEventListener('click', () => {
      submitCreative();
    });
  }


  // 5) 지난번 채점/입력 상태 복원 (✅ 학생별로 분리된 키 기준)
  if (typeof loadReadingState === 'function') {
    loadReadingState();
  }

});