<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë‹¨ë‹¨êµ­ì–´ ë„ì„œ ì—¬í–‰ ì§€ë„ (Leaflet)</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Gmarket Sans", "Noto Sans KR", sans-serif;
      overflow: hidden;
    }

    /* ì „ì²´ í™”ë©´ ë§µ */
    #map {
      width: 100vw;
      height: 100vh;
    }

    /* ìƒë‹¨ í—¤ë” */
    .header {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      background: rgba(255, 255, 255, 0.95);
      padding: 15px 40px;
      border-radius: 20px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.2);
      text-align: center;
      backdrop-filter: blur(10px);
    }

    .header h1 {
      font-size: 28px;
      color: #2c3e50;
      margin-bottom: 5px;
      font-weight: 700;
    }

    .header p {
      font-size: 14px;
      color: #7f8c8d;
    }

    /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
    .back-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background: white;
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .back-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.3);
      background: #f8f9fa;
    }

    /* ì¤Œ ì»¨íŠ¸ë¡¤ ìŠ¤íƒ€ì¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• */
    .leaflet-control-zoom {
      border: none !important;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2) !important;
    }

    .leaflet-control-zoom a {
      background: white !important;
      border: none !important;
      font-size: 20px !important;
      font-weight: bold !important;
      border-radius: 8px !important;
      margin: 4px !important;
    }

    /* íŒì—… ìŠ¤íƒ€ì¼ */
    .leaflet-popup-content-wrapper {
      border-radius: 16px !important;
      padding: 0 !important;
      box-shadow: 0 8px 30px rgba(0,0,0,0.2) !important;
    }

    .leaflet-popup-content {
      margin: 0 !important;
      min-width: 280px !important;
    }

    .popup-card {
      padding: 20px;
      text-align: center;
    }

    .popup-card h3 {
      color: #2c3e50;
      font-size: 20px;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .popup-card p {
      color: #7f8c8d;
      font-size: 14px;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .popup-card .badge {
      display: inline-block;
      padding: 4px 12px;
      background: #e8f4f8;
      color: #3498db;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .popup-card button {
      width: 100%;
      padding: 12px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 10px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .popup-card button:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
    }

    /* ì±… ë§ˆì»¤ ìŠ¤íƒ€ì¼ */
    .book-marker {
      background: none;
      border: none;
      cursor: pointer;
    }

    .book-marker-content {
      position: relative;
      display: flex;
      flex-direction: column;
      align-items: center;
      animation: float 3s ease-in-out infinite;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
    }

    .book-icon-marker {
      font-size: 48px;
      filter: drop-shadow(0 4px 8px rgba(0,0,0,0.2));
      transition: all 0.3s ease;
    }

    .book-marker:hover .book-icon-marker {
      transform: scale(1.2);
      filter: drop-shadow(0 6px 12px rgba(0,0,0,0.3));
    }

    .book-label {
      background: white;
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 600;
      color: #2c3e50;
      margin-top: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      white-space: nowrap;
    }

    /* ì•ˆë‚´ íŒ¨ë„ */
    .info-panel {
      position: absolute;
      bottom: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      padding: 15px 20px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      z-index: 1000;
      backdrop-filter: blur(10px);
    }

    .info-panel p {
      font-size: 13px;
      color: #7f8c8d;
      margin: 3px 0;
    }

    .info-panel strong {
      color: #2c3e50;
    }

    /* ë°˜ì‘í˜• */
    @media (max-width: 768px) {
      .header {
        padding: 12px 20px;
      }
      .header h1 {
        font-size: 20px;
      }
      .header p {
        font-size: 12px;
      }
      .info-panel {
        bottom: 10px;
        right: 10px;
        font-size: 11px;
      }
    }
  </style>
</head>
<body>
  <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
  <button class="back-btn" onclick="goBack()">â† ëŒì•„ê°€ê¸°</button>

  <!-- í—¤ë” -->
  <div class="header">
    <h1>ğŸ³ ë‹¨ë‹¨êµ­ì–´ ë„ì„œ ì—¬í–‰ ì§€ë„</h1>
    <p>ë§ˆì»¤ë¥¼ í´ë¦­í•˜ê³  ì¤Œ/ë“œë˜ê·¸ë¡œ ì§€ë„ë¥¼ íƒí—˜í•˜ì„¸ìš”!</p>
  </div>

  <!-- ì•ˆë‚´ íŒ¨ë„ -->
  <div class="info-panel">
    <p><strong>ğŸ’¡ ì‚¬ìš©ë²•</strong></p>
    <p>ğŸ–±ï¸ ë“œë˜ê·¸: ì§€ë„ ì´ë™</p>
    <p>ğŸ” ìŠ¤í¬ë¡¤: ì¤Œ ì¸/ì•„ì›ƒ</p>
    <p>ğŸ“ ë§ˆì»¤ í´ë¦­: ìƒì„¸ ì •ë³´</p>
  </div>

  <!-- ì§€ë„ ì»¨í…Œì´ë„ˆ -->
  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <script>
    // ì§€ë„ ì´ˆê¸°í™” (ì¤‘ì‹¬ ì¢Œí‘œëŠ” ì„ì˜ì˜ ê°’, boundsë¡œ ì œí•œí•  ì˜ˆì •)
    const map = L.map('map', {
      center: [0, 0],
      zoom: 2,
      minZoom: 1,
      maxZoom: 4,
      zoomControl: true,
      attributionControl: false
    });

    // ì»¤ìŠ¤í…€ ë°°ê²½ íƒ€ì¼ (ë‹¨ìƒ‰ ê·¸ë¼ë°ì´ì…˜)
    const customTileLayer = L.tileLayer('', {
      attribution: ''
    });

    // ë°°ê²½ì„ CSSë¡œ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ë¹ˆ íƒ€ì¼ ë ˆì´ì–´
    map.getContainer().style.background = 'linear-gradient(180deg, #87CEEB 0%, #B0E0E6 30%, #F0E68C 70%, #DEB887 100%)';

    // ì§€ë„ ì´ë™ ë²”ìœ„ ì œí•œ
    const bounds = L.latLngBounds([[-60, -120], [60, 120]]);
    map.setMaxBounds(bounds);

    // ì±… ì¹´í…Œê³ ë¦¬ ë°ì´í„°
    const bookCategories = [
      {
        name: 'ê³ ì „ë¬¸í•™',
        icon: 'ğŸ“•',
        position: [30, -50],
        color: '#E74C3C',
        count: '40ê°œ ì‘í’ˆ',
        desc: 'ì‹œëŒ€ë¥¼ ì´ˆì›”í•œ ëª…ì‘ë“¤ì´ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”. ì¶˜í–¥ì „, ì‹¬ì²­ì „ ë“± ìš°ë¦¬ ê³ ì „ì„ ë§Œë‚˜ë³´ì„¸ìš”!',
        url: '/BRAINUP/korlit/classic_list.html'
      },
      {
        name: 'í˜„ëŒ€ë¬¸í•™',
        icon: 'ğŸ“˜',
        position: [0, 0],
        color: '#3498DB',
        count: '40ê°œ ì‘í’ˆ',
        desc: 'í˜„ëŒ€ì˜ ê°ì„±ì´ ë‹´ê¸´ ì‘í’ˆë“¤. ì†Œë…„ì´ ì˜¨ë‹¤, 82ë…„ìƒ ê¹€ì§€ì˜ ë“± í˜„ëŒ€ ë¬¸í•™ì„ íƒí—˜í•´ë³´ì„¸ìš”!',
        url: '/BRAINUP/korlit/modern_list.html'
      },
      {
        name: 'ì¸ë¬¼ì „ê¸°',
        icon: 'ğŸ“™',
        position: [30, 50],
        color: '#9B59B6',
        count: '40ëª…ì˜ ì¸ë¬¼',
        desc: 'ì—­ì‚¬ë¥¼ ë§Œë“  ìœ„ì¸ë“¤ì˜ ì´ì•¼ê¸°. ì„¸ì¢…ëŒ€ì™•, ì‹ ì‚¬ì„ë‹¹ ë“± 40ëª…ì˜ ì¸ë¬¼ì„ ë§Œë‚˜ë³´ì„¸ìš”!',
        url: '/BRAINUP/person/people_list.html'
      },
      {
        name: 'ì‚¬íšŒë¶„ì•¼',
        icon: 'ğŸ“’',
        position: [-25, -40],
        color: '#F39C12',
        count: 'ì§€ë¦¬Â·ì—­ì‚¬Â·ë„ë•',
        desc: 'ì„¸ìƒì„ ì´í•´í•˜ëŠ” ì§€í˜œ. ì§€ë¦¬, ì—­ì‚¬, ë„ë• ì˜ì—­ì˜ ë‹¤ì–‘í•œ ì§€ì‹ì´ ê¸°ë‹¤ë ¤ìš”!',
        url: '/BRAINUP/social/geo_list.html'
      },
      {
        name: 'ê³¼í•™ë¶„ì•¼',
        icon: 'ğŸ“—',
        position: [-25, 40],
        color: '#27AE60',
        count: 'ìƒë¬¼Â·ë¬¼ë¦¬Â·í™”í•™',
        desc: 'ìì—°ì˜ ì‹ ë¹„ë¥¼ íƒêµ¬í•´ìš”. ìƒë¬¼, ë¬¼ë¦¬, í™”í•™ì˜ í¥ë¯¸ë¡œìš´ ì„¸ê³„ë¡œ ë– ë‚˜ë³¼ê¹Œìš”?',
        url: '/BRAINUP/science/bio_list.html'
      }
    ];

    // ì»¤ìŠ¤í…€ ë§ˆì»¤ ìƒì„±
    bookCategories.forEach(category => {
      // ì»¤ìŠ¤í…€ ì•„ì´ì½˜ HTML
      const iconHtml = `
        <div class="book-marker-content">
          <div class="book-icon-marker">${category.icon}</div>
          <div class="book-label">${category.name}</div>
        </div>
      `;

      // ì»¤ìŠ¤í…€ ì•„ì´ì½˜ ìƒì„±
      const customIcon = L.divIcon({
        html: iconHtml,
        className: 'book-marker',
        iconSize: [80, 80],
        iconAnchor: [40, 80],
        popupAnchor: [0, -80]
      });

      // ë§ˆì»¤ ìƒì„±
      const marker = L.marker(category.position, { icon: customIcon })
        .addTo(map);

      // íŒì—… ë‚´ìš©
      const popupContent = `
        <div class="popup-card">
          <div style="font-size: 40px; margin-bottom: 10px;">${category.icon}</div>
          <h3>${category.name}</h3>
          <div class="badge">${category.count}</div>
          <p>${category.desc}</p>
          <button onclick="navigateTo('${category.url}')">
            ğŸš€ ì—¬í–‰ ë– ë‚˜ê¸°
          </button>
        </div>
      `;

      // íŒì—… ë°”ì¸ë”©
      marker.bindPopup(popupContent, {
        maxWidth: 300,
        className: 'custom-popup'
      });

      // í˜¸ë²„ íš¨ê³¼
      marker.on('mouseover', function() {
        this.openPopup();
      });
    });

    // ê³ ë˜ ë§ˆì»¤ ì¶”ê°€ (ì¤‘ì•™ ìƒë‹¨)
    const whaleIcon = L.divIcon({
      html: `
        <div class="book-marker-content" style="animation-delay: 0.5s;">
          <div class="book-icon-marker" style="font-size: 60px;">ğŸ³</div>
          <div class="book-label" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">ì—¬í–‰ ì‹œì‘!</div>
        </div>
      `,
      className: 'book-marker',
      iconSize: [100, 100],
      iconAnchor: [50, 100],
      popupAnchor: [0, -100]
    });

    const whaleMarker = L.marker([45, 0], { icon: whaleIcon }).addTo(map);
    whaleMarker.bindPopup(`
      <div class="popup-card">
        <div style="font-size: 50px; margin-bottom: 10px;">ğŸ³</div>
        <h3>ë‹¨ë‹¨êµ­ì–´ ë„ì„œ ì—¬í–‰</h3>
        <p>ì•„ë˜ 5ê°œì˜ ì„¬ì„ ì—¬í–‰í•˜ë©° ë‹¤ì–‘í•œ ì±…ì„ ë§Œë‚˜ë³´ì„¸ìš”! ê° ë§ˆì»¤ë¥¼ í´ë¦­í•˜ë©´ ìƒì„¸ ì •ë³´ë¥¼ ë³¼ ìˆ˜ ìˆì–´ìš”.</p>
      </div>
    `);

    // ë„¤ë¹„ê²Œì´ì…˜ í•¨ìˆ˜
    function navigateTo(url) {
      window.location.href = url;
    }

    // ë’¤ë¡œê°€ê¸°
    function goBack() {
      window.history.back();
    }

    // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape') {
        goBack();
      }
    });

    // ì§€ë„ ì´ˆê¸° ì• ë‹ˆë©”ì´ì…˜ (ì¤Œ ì¸)
    setTimeout(() => {
      map.setView([0, 0], 2, { animate: true, duration: 1.5 });
    }, 500);
  </script>
</body>
</html>
