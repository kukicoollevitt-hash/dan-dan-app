<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🐱 미지의 고양이 섬 표류기 — 시즌 3</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Gmarket Sans", "Noto Sans KR", sans-serif;
      overflow-x: hidden;
      background: #1a1a1a;
    }

    /* 고정 지도 캔버스 */
    #map-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/cat-island-story/cat_part3_main.jpg);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 1s ease-in-out;
      z-index: 1;
    }

    #map-canvas {
      display: none;
    }

    /* 스크롤 가능한 콘텐츠 */
    #content {
      position: relative;
      z-index: 2;
      pointer-events: none;
    }

    .story-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 60px 120px;
      pointer-events: none;
    }

    /* 홀수 섹션은 왼쪽 */
    .story-section:nth-child(odd) {
      justify-content: flex-start;
    }

    /* 짝수 섹션은 오른쪽 */
    .story-section:nth-child(even) {
      justify-content: flex-end;
    }

    .story-card {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(15px);
      padding: 40px;
      border-radius: 24px;
      max-width: 550px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transform: translateX(100px);
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
      pointer-events: auto;
    }

    /* 왼쪽에서 나오는 카드 */
    .story-section:nth-child(odd) .story-card {
      transform: translateX(-100px);
    }

    /* 오른쪽에서 나오는 카드 */
    .story-section:nth-child(even) .story-card {
      transform: translateX(100px);
    }

    .story-card.active {
      transform: translateX(0);
      opacity: 1;
    }

    .story-card .chapter {
      display: inline-block;
      padding: 8px 20px;
      background: linear-gradient(135deg, #FF8FAB 0%, #FFB347 100%);
      color: white;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 20px;
      letter-spacing: 0.5px;
    }

    .story-card h2 {
      font-size: 28px;
      color: #2c3e50;
      margin-bottom: 20px;
      line-height: 1.4;
      font-weight: 700;
    }

    .story-card p {
      font-size: 18px;
      line-height: 1.8;
      color: #34495e;
      margin-bottom: 15px;
      font-weight: 400;
    }

    .story-card p:last-child {
      margin-bottom: 0;
    }

    /* 인트로 섹션 */
    .intro-section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 60px;
    }

    .intro-content {
      background: transparent;
      padding: 60px 80px;
      border-radius: 30px;
      max-width: 800px;
      animation: fadeInUp 1s ease-out;
    }

    .intro-content h1 {
      font-size: 48px;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 20px;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
    }

    .intro-content .subtitle {
      font-size: 20px;
      line-height: 1.8;
      color: #ffffff;
      margin-bottom: 40px;
      font-weight: 500;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }

    .intro-content .scroll-hint {
      font-size: 16px;
      color: #ffffff;
      font-weight: 600;
      animation: pulse 2s infinite;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }

    /* 네비게이션 바 */
    .nav-bar {
      position: fixed;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(15px);
      padding: 15px 30px;
      border-radius: 50px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
      z-index: 100;
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .nav-bar .title {
      font-size: 18px;
      font-weight: 700;
      color: #2c3e50;
      margin-right: 10px;
    }

    .nav-bar .progress {
      font-size: 14px;
      color: #7f8c8d;
      font-weight: 500;
    }

    .nav-bar .home-btn {
      padding: 8px 20px;
      background: linear-gradient(135deg, #FF8FAB 0%, #FFB347 100%);
      color: white;
      border: none;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .nav-bar .home-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(255, 143, 171, 0.4);
    }

    /* 프로그레스 바 */
    .progress-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 4px;
      background: rgba(255, 255, 255, 0.2);
      z-index: 101;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #FF8FAB 0%, #FFB347 100%);
      width: 0%;
      transition: width 0.3s ease;
    }

    /* 반응형 */
    @media (max-width: 768px) {
      .story-section {
        padding: 40px 20px;
      }

      .story-card {
        max-width: 100%;
        padding: 30px;
      }

      .story-card h2 {
        font-size: 24px;
      }

      .story-card p {
        font-size: 16px;
      }

      .nav-bar {
        padding: 12px 20px;
        gap: 10px;
      }

      .nav-bar .title {
        font-size: 14px;
      }

      .nav-bar .progress {
        display: none;
      }
    }

    /* 마지막 섹션 여유 공간 */
    .story-section:last-child {
      margin-bottom: 100vh;
    }
  </style>
</head>
<body>
  <!-- 프로그레스 바 -->
  <div class="progress-container">
    <div class="progress-bar" id="progressBar"></div>
  </div>

  <!-- 네비게이션 바 -->
  <div class="nav-bar">
    <span class="title">🐱 미지의 고양이 섬 표류기 - 시즌 3</span>
    <span class="progress" id="navProgress">PART 1 / 10</span>
    <button class="home-btn" onclick="goHome()">← 메인으로</button>
  </div>

  <!-- 고정 배경 -->
  <div id="map-container">
    <canvas id="map-canvas"></canvas>
  </div>

  <!-- 스크롤 콘텐츠 -->
  <div id="content">
    <!-- 인트로 -->
    <section class="intro-section">
      <div class="intro-content">
        <h1>🐱 미지의 고양이 섬 표류기</h1>
        <p class="subtitle">
          시즌 3 - 마음의 왕국과 감정의 불꽃<br>
          잠든 왕국을 깨우는 마지막 여정
        </p>
        <p class="scroll-hint">↓ 아래로 스크롤 해주세요 ↓</p>
      </div>
    </section>

    <!-- PART 1 -->
    <section class="story-section" data-bg="cat_part3_01.jpg">
      <div class="story-card">
        <span class="chapter">🚪 PART 1</span>
        <h2>마음의 문이 다시 열리다</h2>
        <p>평화로운 일상이 돌아온 지 얼마 되지 않아,</p>
        <p>하늘과 세나는 다시 고양이 발자국 문양이 새겨진 편지를 받았다.</p>
        <p><em>"긴급! 마음의 세계가 다시 흔들리고 있어. 카일이 너희를 찾고 있어. —루모"</em></p>
        <p>두 아이는 서로를 바라보며 고개를 끄덕였다.</p>
        <p>"다시 갈 시간이구나."</p>
        <p>창문을 여니 은빛 바람이 아이들을 감싸며</p>
        <p><strong>순식간에 고양이 섬으로 이동했다.</strong></p>
      </div>
    </section>

    <!-- PART 2 -->
    <section class="story-section" data-bg="cat_part3_02.jpg">
      <div class="story-card">
        <span class="chapter">😰 PART 2</span>
        <h2>감정이 폭주하기 시작하다</h2>
        <p>섬에 도착하니 상황은 심각했다.</p>
        <p>고양이 왕국은 깨어났지만, 너무 많은 감정이 한 번에 터져 나오며</p>
        <p><strong>감정 폭주 현상이 시작된 것이다.</strong></p>
        <p>기쁨이 너무 강해진 고양이는 웃다가 쓰러지고,</p>
        <p>슬픔이 깊어진 고양이는 눈물이 멈추지 않았다.</p>
        <p>분노가 터진 고양이는 주변을 공격했고,</p>
        <p>두려움에 빠진 고양이는 움츠러들어 움직이지 못했다.</p>
        <p>카일 왕자가 절박한 표정으로 말했다.</p>
        <p><em>"마음의 균형이 무너지고 있어… 이대로면 왕국이 다시 잠들 거야!"</em></p>
      </div>
    </section>

    <!-- PART 3 -->
    <section class="story-section" data-bg="cat_part3_03.jpg">
      <div class="story-card">
        <span class="chapter">🌳 PART 3</span>
        <h2>마음의 숲, 첫 번째 시련</h2>
        <p>문을 넘어서자 아이들은 부드러운 초록빛의 세계에 떨어졌다.</p>
        <p>이곳은 고양이의 감정이 나무와 꽃으로 바뀌어 자라는 숲.</p>
        <p><strong>행복은 노란빛 꽃송이</strong></p>
        <p><strong>슬픔은 파란잎</strong></p>
        <p><strong>용기는 붉은 열매</strong></p>
        <p><strong>놀람은 퍼덕이는 분홍빛 잎</strong></p>
        <p><strong>걱정은 잿빛 풀</strong></p>
        <p><strong>사랑은 복숭아색 꽃잎</strong></p>
        <p>하지만 숲은 너무 조용했다. 꽃들의 색이 모두 반쯤 빠져 있었다.</p>
        <p>루모는 손을 떨며 말했다. <em>"섬의 감정이 빠져나와… 이 숲에도 반영된 거야."</em></p>
        <p>나뭇잎 사이에서 <strong>고양이 모양의 작은 정령(마음씨들)</strong>이 나타났다.</p>
        <p>그들은 <strong>'자기 마음을 인정하는 시련'</strong>을 제시했다.</p>
        <p>하늘은 조용히 말했다. "내 마음이 어디를 향하고 있는지… 나도 지금은 잘 모르겠어."</p>
        <p>세나는 손을 꼭 잡고 말했다. "괜찮아, 천천히 찾으면 돼."</p>
        <p>그 순간 길이 서서히 밝아졌다. <strong>첫 번째 시련을 통과했다.</strong></p>
      </div>
    </section>

    <!-- PART 4 -->
    <section class="story-section" data-bg="cat_part3_04.jpg">
      <div class="story-card">
        <span class="chapter">📚 PART 4</span>
        <h2>'감정 도서관'과 기억을 잃은 고양이 사서</h2>
        <p>숲을 지나 오랜 길을 걸어가자 커다란 도서관이 나타났다.</p>
        <p>건물 전체가 거대한 고양이 얼굴 모양이며</p>
        <p>책 대신 <strong>빛나는 감정 구슬들이 서가에 꽉 채워져 있었다.</strong></p>
        <p>고양이 사서 '리나'가 나타났지만 그녀는 어딘가 이상했다.</p>
        <p><em>"어서 와… 어떤 감정을 찾는 거였지… 기억이 잘 안 나는군…"</em></p>
        <p>그녀는 감정의 반 이상을 잃은 상태였다.</p>
        <p>루모가 사서에게 손을 맞잡았다. <em>"리나 누나… 기억 못 하겠어도 괜찮아. 우리가 도와줄게."</em></p>
        <p>감정 도서관 곳곳에서는 감정 구슬들이 천천히 색을 잃고 있었다.</p>
        <p>리나는 흐린 목소리로 말했다.</p>
        <p><em>"왕국을 깨우려면… 가장 깊은 곳의 '마음의 불꽃'을 얻어야 해…"</em></p>
      </div>
    </section>

    <!-- PART 5 -->
    <section class="story-section" data-bg="cat_part3_05.jpg">
      <div class="story-card">
        <span class="chapter">🌀 PART 5</span>
        <h2>감정 미로, 사라져가는 길</h2>
        <p>도서관 뒤편의 비밀문을 열자 <strong>감정 미로가 펼쳐졌다.</strong></p>
        <p>이 미로는 걸을 때마다 아이들과 고양이들의 감정이 반영되어 길이 움직이는 구조.</p>
        <p>하늘이 불안해하면 길이 갈라지고,</p>
        <p>세나가 용기를 보여주면 붉은 등불이 켜졌다.</p>
        <p>루모가 무서워하면 그림자가 생겼고,</p>
        <p>미엘이 차분히 마음을 다스리면 미로가 안정됐다.</p>
        <p>하지만 가장 위험한 건… <strong>감정을 억지로 숨기면 길이 사라진다는 것.</strong></p>
        <p>한 번은 하늘이 "난 괜찮아!"라고 억지로 웃으려 하자</p>
        <p>발 밑의 바닥이 통째로 꺼져 버릴 뻔했다.</p>
        <p>세나가 그의 손을 잡아 끌어올리며 외쳤다. "하늘아! 진짜 마음 말해! 억지로 참지 마!"</p>
        <p>하늘은 떨리는 목소리로 고백했다. "…사실, 여기가 무서워…"</p>
        <p>그 순간 <strong>붉고 따뜻한 길이 새로 열렸다.</strong></p>
      </div>
    </section>

    <!-- PART 6 -->
    <section class="story-section" data-bg="cat_part3_06.jpg">
      <div class="story-card">
        <span class="chapter">💎 PART 6</span>
        <h2>마음의 호수와 반짝이는 고양이 왕자</h2>
        <p>미로를 빠져나오자 달빛처럼 고요한 호수가 나타났다.</p>
        <p>호수 물은 감정을 반사해 보는 사람의 속마음을 보여 주었다.</p>
        <p>그때 물속에서 빛나는 형체가 올라왔다.</p>
        <p>고양이 왕자 '카일'. 잠든 고양이 왕국의 후손이었다.</p>
        <p>하지만 카일은 몸이 투명했으며 감정이 거의 사라져 있었다.</p>
        <p><em>"…너희가… 나를 깨웠구나… 하지만 나는 아직 완전하지 않아…"</em></p>
        <p>그는 불완전한 몸으로 섬의 위기를 설명했다.</p>
        <p><em>"고양이 왕국은 오래전 감정 폭주로 무너졌어.</em></p>
        <p><em>그 이후 섬도 서서히 감정을 잃기 시작했지…"</em></p>
        <p>카일은 호수를 가리켰다. <em>"가장 깊은 곳… 고양이들의 '잠든 마음'이 모여 있는 곳이야."</em></p>
      </div>
    </section>

    <!-- PART 7 -->
    <section class="story-section" data-bg="cat_part3_07.jpg">
      <div class="story-card">
        <span class="chapter">🏰 PART 7</span>
        <h2>호수 아래의 잠든 고양이 왕국</h2>
        <p>잠수한 아이들과 고양이들은 호수 아래 거대한 도시를 발견했다.</p>
        <p>건물들은 고양이 발바닥 문양과 하트 모양 창문으로 꾸며져 있었고,</p>
        <p>거리 곳곳에 감정의 빛이 흐르고 있었다.</p>
        <p>그러나… <strong>모든 고양이가 잠든 듯 누워 있었고</strong></p>
        <p>그들의 가슴에서는 작게 깜빡이는 파란빛이 희미하게 남아 있었다.</p>
        <p>카일은 말했다.</p>
        <p><em>"그들은 감정 폭주를 막기 위해 스스로 잠들었다.</em></p>
        <p><em>그래서 이 왕국은 지금까지 조용했지."</em></p>
        <p>하늘은 조용히 말했다. "우리가… 이들을 깨울 수 있을까?"</p>
      </div>
    </section>

    <!-- PART 8 -->
    <section class="story-section" data-bg="cat_part3_08.jpg">
      <div class="story-card">
        <span class="chapter">🔥 PART 8</span>
        <h2>마음의 불꽃을 찾는 마지막 시련</h2>
        <p>왕국 중심부에 도착하자 다섯 개의 문이 아이들 앞에 놓였다.</p>
        <p>각 문에는 감정의 상징이 새겨져 있었다.</p>
        <p><strong>용기 / 슬픔 / 기쁨 / 사랑 / 두려움</strong></p>
        <p>하늘은 '두려움의 문'을 선택했다. 그곳에서 그는 자신이 실패할까 두려워했던 장면들을 마주했다.</p>
        <p>세나는 '사랑의 문'을 지나며 가족을 잃을까 걱정했던 감정을 마주했다.</p>
        <p>루모는 '슬픔의 문'에서 예전에 잃어버린 친구를 떠올리며 울었다.</p>
        <p>미엘은 '용기의 문'을 지나 과거 자신이 잃어버린 일족을 생각하며 다시 일어섰다.</p>
        <p>각자 자신의 감정을 정직하게 인정하고 받아들이자 문이 동시에 열렸다.</p>
        <p>그리고 중앙에서 드디어 <strong>마음의 불꽃이 떠올랐다.</strong></p>
        <p>불꽃은 작고 따뜻한 빛— 마치 고양이가 몸을 부비듯 온화한 감정을 담고 있었다.</p>
      </div>
    </section>

    <!-- PART 9 -->
    <section class="story-section" data-bg="cat_part3_09.jpg">
      <div class="story-card">
        <span class="chapter">✨ PART 9</span>
        <h2>고양이 왕국의 부활</h2>
        <p>마음의 불꽃을 왕국 중심에 꽂자 잠든 고양이들이 하나둘 눈을 떴다.</p>
        <p><strong>기쁨을 찾은 고양이는 환하게 웃으며 꼬리를 흔들고</strong></p>
        <p><strong>슬픔을 품은 고양이는 서로 끌어안으며 위로하고</strong></p>
        <p><strong>두려움을 정면으로 본 고양이는 다시 일어나 걸었다</strong></p>
        <p><strong>용기를 얻은 고양이는 날개 문양이 빛났다</strong></p>
        <p>왕국 전체에 수천 개의 감정빛이 하늘로 떠올라</p>
        <p>마음 숲과 섬 전체로 퍼져 나갔다.</p>
        <p>카일 왕자는 완전한 모습으로 아이들 앞에 나타나 말했다.</p>
        <p><em>"고맙다, 친구들. 너희 덕분에 우리 왕국은 다시 숨을 쉬게 되었어."</em></p>
      </div>
    </section>

    <!-- PART 10 -->
    <section class="story-section" data-bg="cat_part3_10.jpg">
      <div class="story-card">
        <span class="chapter">🌈 PART 10</span>
        <h2>섬으로 돌아가는 길, 그리고 새로운 약속</h2>
        <p>섬으로 돌아오니 모든 고양이들의 눈빛이 생기를 되찾았다.</p>
        <p>나무마을의 아이 고양이들은 뛰어다녔고</p>
        <p>바람 절벽의 고양이들은 다시 날개를 펼쳤다.</p>
        <p>루모는 눈물을 글썽이며 말했다.</p>
        <p><em>"정말… 고마워. 너희 덕분에 섬이 살아났어!"</em></p>
        <p>카일 왕자가 마지막으로 하늘과 세나에게 말했다.</p>
        <p><em>"언젠가 또 마음의 세계가 흔들릴 때… 너희를 다시 부를지도 모른다."</em></p>
        <p>그리고 아이들은 찬란한 감정빛 속에서 집으로 돌아가는 바람길을 건넜다.</p>
        <p>집 창문을 열자 부드럽고 따뜻한 바람이</p>
        <p><strong>고양이들의 인사처럼 살짝 불어왔다.</strong></p>
        <p style="text-align: center; margin-top: 30px; font-size: 20px; color: #FF8FAB;">
          <strong>— 시즌 3 완결 —</strong>
        </p>
        <p style="text-align: center; margin-top: 20px; font-size: 16px; color: #7f8c8d;">
          <em>미지의 고양이 섬 표류기 3부작 완성</em>
        </p>
      </div>
    </section>
  </div>

  <script>
    const sections = document.querySelectorAll('.story-section');
    const mapContainer = document.getElementById('map-container');
    const progressBar = document.getElementById('progressBar');
    const navProgress = document.getElementById('navProgress');
    const totalSections = sections.length;

    // 스크롤 이벤트로 배경 이미지 및 카드 애니메이션
    window.addEventListener('scroll', () => {
      const scrollY = window.scrollY;
      const windowHeight = window.innerHeight;
      const documentHeight = document.documentElement.scrollHeight;

      // 프로그레스 바 업데이트
      const scrollPercent = (scrollY / (documentHeight - windowHeight)) * 100;
      progressBar.style.width = scrollPercent + '%';

      sections.forEach((section, index) => {
        const rect = section.getBoundingClientRect();
        const sectionTop = rect.top;
        const sectionHeight = rect.height;

        // 카드 애니메이션
        const card = section.querySelector('.story-card');
        if (sectionTop < windowHeight * 0.75 && sectionTop > -sectionHeight * 0.5) {
          card.classList.add('active');
        }

        // 배경 이미지 전환
        if (sectionTop < windowHeight * 0.5 && sectionTop > -sectionHeight * 0.5) {
          const bgImage = section.getAttribute('data-bg');
          if (bgImage) {
            mapContainer.style.backgroundImage = `url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/cat-island-story/${bgImage})`;
          }

          // 네비게이션 업데이트
          navProgress.textContent = `PART ${index + 1} / ${totalSections}`;
        }
      });
    });

    // 페이지 로드 시 첫 섹션 활성화
    window.addEventListener('load', () => {
      const firstCard = sections[0].querySelector('.story-card');
      firstCard.classList.add('active');
    });

    // 홈 버튼
    function goHome() {
      window.location.href = '/menu.html';
    }

    // 키보드 네비게이션 (ESC로 나가기)
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        goHome();
      }
    });
  </script>
</body>
</html>
