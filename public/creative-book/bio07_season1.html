<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>☀️ 빛의 소녀 솔라와 초록 심장의 전쟁</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Gmarket Sans", "Noto Sans KR", sans-serif;
      overflow-x: hidden;
      background: #1a1a1a;
    }

    /* 고정 지도 캔버스 */
    #map-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: url('/images/창작도서/창작생물07/00.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 1s ease-in-out;
      z-index: 1;
    }

    #map-canvas {
      display: none;
    }

    /* 스크롤 가능한 콘텐츠 */
    #content {
      position: relative;
      z-index: 2;
      pointer-events: none;
    }

    .story-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 60px 120px;
      pointer-events: none;
    }

    /* 홀수 섹션은 왼쪽 */
    .story-section:nth-child(odd) {
      justify-content: flex-start;
    }

    /* 짝수 섹션은 오른쪽 */
    .story-section:nth-child(even) {
      justify-content: flex-end;
    }

    .story-card {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(15px);
      padding: 40px;
      border-radius: 24px;
      max-width: 600px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transform: translateX(100px);
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
      pointer-events: auto;
    }

    /* 왼쪽에서 나오는 카드 */
    .story-section:nth-child(odd) .story-card {
      transform: translateX(-100px);
    }

    /* 오른쪽에서 나오는 카드 */
    .story-section:nth-child(even) .story-card {
      transform: translateX(100px);
    }

    .story-card.active {
      transform: translateX(0);
      opacity: 1;
    }

    .story-card .chapter {
      display: inline-block;
      padding: 8px 20px;
      background: linear-gradient(135deg, #2E7D32 0%, #1B5E20 100%);
      color: white;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 15px;
    }

    .story-card .theme {
      display: block;
      color: #2E7D32;
      font-size: 14px;
      font-weight: 500;
      margin-bottom: 10px;
      letter-spacing: 2px;
    }

    .story-card h2 {
      font-size: 28px;
      font-weight: 800;
      color: #2d2d2d;
      margin-bottom: 20px;
      line-height: 1.4;
    }

    .story-card p {
      font-size: 17px;
      line-height: 2;
      color: #444;
      margin-bottom: 15px;
      text-align: justify;
      word-break: keep-all;
    }

    .story-card .highlight {
      background: linear-gradient(180deg, transparent 60%, rgba(46, 125, 50, 0.2) 60%);
      font-weight: 600;
    }

    .story-card .dialogue {
      color: #2E7D32;
      font-weight: 500;
    }

    /* 인트로 섹션 */
    .intro-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 60px;
      pointer-events: none;
    }

    .intro-content {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      padding: 60px 80px;
      border-radius: 30px;
      max-width: 850px;
      pointer-events: auto;
      animation: fadeInUp 1s ease-out;
    }

    .intro-content h1 {
      font-size: 44px;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 20px;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    }

    .intro-content .subtitle {
      font-size: 20px;
      line-height: 1.8;
      color: #e0e0e0;
      margin-bottom: 30px;
      font-weight: 400;
    }

    .intro-content .characters {
      text-align: center;
      background: rgba(255, 255, 255, 0.1);
      padding: 25px;
      border-radius: 16px;
      margin-bottom: 30px;
    }

    .intro-content .characters h3 {
      color: #FFD700;
      font-size: 16px;
      margin-bottom: 15px;
    }

    .intro-content .characters p {
      color: #d0d0d0;
      font-size: 14px;
      line-height: 1.7;
      margin-bottom: 8px;
    }

    .intro-content .scroll-hint {
      font-size: 16px;
      color: #ffffff;
      font-weight: 600;
      animation: pulse 2s infinite;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }

    /* 닫기 버튼 */
    .close-btn {
      position: fixed;
      top: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.9);
      border: none;
      border-radius: 50%;
      font-size: 28px;
      cursor: pointer;
      z-index: 100;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      pointer-events: auto;
    }

    .close-btn:hover {
      transform: scale(1.1);
      background: #fff;
    }

    /* 반응형 */
    @media (max-width: 768px) {
      .intro-section {
        padding: 30px 20px;
      }

      .intro-content {
        padding: 40px 25px;
      }

      .intro-content h1 {
        font-size: 28px;
      }

      .intro-content .subtitle {
        font-size: 15px;
      }

      .story-section {
        padding: 30px 20px;
        justify-content: center !important;
      }

      .story-card {
        max-width: 100%;
        padding: 30px;
      }

      .story-section:nth-child(odd) .story-card,
      .story-section:nth-child(even) .story-card {
        transform: translateY(50px);
      }

      .story-card.active {
        transform: translateY(0);
      }

      .story-card h2 {
        font-size: 22px;
      }

      .story-card p {
        font-size: 15px;
        line-height: 1.9;
      }

      .close-btn {
        top: 15px;
        right: 15px;
        width: 40px;
        height: 40px;
        font-size: 22px;
      }
    }
  </style>
</head>
<body>

  <button class="close-btn" onclick="closeStory()">×</button>

  <div id="map-container">
    <canvas id="map-canvas"></canvas>
  </div>

  <div id="content">
    <!-- 인트로 -->
    <section class="intro-section">
      <div class="intro-content">
        <h1>☀️ 빛의 소녀 솔라와 초록 심장의 전쟁</h1>
        <p class="subtitle">
          — 광합성이 멈춘 날, 지구는 숨을 쉴 수 없었다 —<br>
          태양의 마지막 딸과 엽록체 수호자들의 위대한 전투
        </p>
        <div class="characters">
          <h3>📋 등장인물 소개</h3>
          <p><strong>▸ 솔라:</strong> 태양의 마지막 딸, 빛 에너지를 다루는 빛의 소녀</p>
          <p><strong>▸ 초록이 할아버지:</strong> 가장 오래된 엽록체 수호자, 숲의 현자</p>
          <p><strong>▸ 탄소:</strong> 이산화탄소 소년, 겁많지만 용감한 작은 분자</p>
          <p><strong>▸ 물방울:</strong> 뿌리에서 온 물 소녀, 시원하고 상냥한 존재</p>
          <p><strong>▸ 산소:</strong> 광합성으로 새로 태어난 소년, 지구의 숨결</p>
          <p><strong>▸ 어둠왕 그림자:</strong> 빛을 삼키려는 악당, 광합성을 멈추게 하려는 적</p>
        </div>
        <p class="scroll-hint">↓ 아래로 스크롤하여 이야기를 시작하세요 ↓</p>
      </div>
    </section>

    <!-- Part 1 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/01.jpg">
      <div class="story-card">
        <span class="chapter">제1화</span>
        <span class="theme">빛이 사라진 날</span>
        <h2>어둠왕의 공격</h2>
        <p>아주 오랜 옛날, 지구가 아직 젊고 생명이 막 피어나던 시절, 하늘에서 가장 빛나는 존재가 있었습니다. 바로 태양이었지요. 태양에게는 수많은 빛의 자녀들이 있었는데, 그중 막내딸의 이름은 <span class="highlight">'솔라'</span>였습니다.</p>
        <p>솔라는 매일 아침 지구로 내려와 식물들에게 빛을 선물했어요. 그녀의 빛을 받은 나뭇잎들은 반짝반짝 빛나며 신비로운 마법을 부렸습니다. 그것은 바로 <span class="highlight">광합성</span>이라는 마법이었지요.</p>
        <p>그런데 어느 날, 하늘 저편에서 거대한 검은 그림자가 다가왔습니다. <span class="dialogue">"크크크, 저 빛나는 것들이 눈이 부시군. 모든 빛을 삼켜버리겠다!"</span> 그것은 바로 <span class="highlight">어둠왕 그림자</span>였습니다.</p>
        <p>어둠왕은 거대한 검은 망토로 하늘을 덮기 시작했어요. 태양빛이 점점 희미해지자, 나뭇잎들의 빛이 꺼지기 시작했습니다. <span class="dialogue">"이제 광합성은 끝이다! 이 세상은 영원한 어둠에 잠기게 될 것이다!"</span></p>
      </div>
    </section>

    <!-- Part 2 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/02.jpg">
      <div class="story-card">
        <span class="chapter">제2화</span>
        <span class="theme">잎 속 초록 마을</span>
        <h2>엽록체의 비밀</h2>
        <p>솔라는 서둘러 가장 큰 떡갈나무의 잎 속으로 들어갔습니다. 그곳에는 <span class="highlight">엽록체</span>라는 작은 초록색 마을이 있었어요. 마을에서 가장 나이 많은 <span class="highlight">초록이 할아버지</span>가 솔라를 맞이했습니다.</p>
        <p><span class="dialogue">"솔라야, 잘 왔구나. 빛이 없으면 우리는 일을 할 수 없단다."</span> 초록이 할아버지의 목소리는 걱정으로 떨리고 있었어요.</p>
        <p>솔라가 주위를 둘러보니, 엽록체 마을 안에는 납작한 초록색 주머니들이 켜켜이 쌓여 있었습니다. <span class="dialogue">"저것이 뭐예요, 할아버지?"</span></p>
        <p><span class="dialogue">"저것은 <span class="highlight">틸라코이드</span>라고 한단다. 우리의 요리 주방이지. 네가 가져다주는 빛 에너지를 저 안에서 화학 에너지로 바꾸는 거야. 마치 햇살을 요리해서 당분으로 만드는 것처럼 말이야."</span></p>
        <p>그런데 지금 틸라코이드들은 모두 멈춰 있었습니다. 빛이 없으니 요리를 할 수가 없었던 거예요. 솔라는 결심했습니다. <span class="dialogue">"제가 어둠왕을 물리치고 빛을 되찾아 올게요!"</span></p>
      </div>
    </section>

    <!-- Part 3 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/03.jpg">
      <div class="story-card">
        <span class="chapter">제3화</span>
        <span class="theme">겁쟁이 탄소의 용기</span>
        <h2>이산화탄소의 역할</h2>
        <p>솔라가 마을을 나서려는 순간, 작고 동그란 분자 하나가 쫓아왔습니다. 온몸이 투명하고 그 안에 검은 점 하나와 빨간 점 두 개가 보였어요.</p>
        <p><span class="dialogue">"저, 저도 함께 가도 될까요?"</span> 떨리는 목소리로 말하는 그 분자는 바로 <span class="highlight">탄소</span>, 이산화탄소 소년이었습니다.</p>
        <p><span class="dialogue">"저는 나쁜 애라고 불려요. 공기를 더럽히는 존재라고요. 하지만 저도 도움이 되고 싶어요!"</span> 탄소의 눈에 눈물이 글썽였습니다.</p>
        <p>초록이 할아버지가 부드럽게 말했어요. <span class="dialogue">"탄소야, 너는 나쁜 존재가 아니란다. <span class="highlight">광합성의 가장 중요한 재료</span>가 바로 너야. 우리가 포도당을 만들려면 빛 에너지도 필요하지만, 네 몸 안에 있는 탄소 원자가 반드시 필요하거든."</span></p>
        <p>솔라가 탄소의 손을 잡았습니다. <span class="dialogue">"함께 가자, 탄소! 너와 내가 힘을 합치면 분명 어둠왕을 물리칠 수 있을 거야."</span></p>
      </div>
    </section>

    <!-- Part 4 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/04.jpg">
      <div class="story-card">
        <span class="chapter">제4화</span>
        <span class="theme">뿌리에서 온 전령</span>
        <h2>물의 역할</h2>
        <p>솔라와 탄소가 길을 떠나려는 순간, 땅속에서 시원한 기운이 솟아올랐습니다. 파란 눈동자에 투명한 몸을 가진 소녀가 나타났어요.</p>
        <p><span class="dialogue">"안녕! 나는 <span class="highlight">물방울</span>이야. 뿌리에서 왔어. 너희가 모험을 떠난다는 소식을 듣고 급히 올라왔어!"</span></p>
        <p>물방울은 뿌리에서 물관을 타고 잎까지 긴 여행을 해 온 것이었습니다. 물방울이 설명했어요. <span class="dialogue">"광합성이 일어나려면 빛과 이산화탄소만으로는 부족해. <span class="highlight">물도 꼭 필요하거든!</span> 물이 분해되면서 산소가 만들어지고, 수소는 포도당을 만드는 데 쓰여."</span></p>
        <p>초록이 할아버지가 고개를 끄덕였습니다. <span class="dialogue">"그렇단다. 광합성의 비밀 공식을 기억해 두렴. <span class="highlight">빛 에너지 + 물 + 이산화탄소 = 포도당 + 산소</span>. 이 세 가지가 모두 모여야 마법이 완성되는 거야."</span></p>
        <p>이제 솔라, 탄소, 물방울. 세 친구가 모였습니다. <span class="dialogue">"자, 이제 어둠왕을 만나러 가자!"</span></p>
      </div>
    </section>

    <!-- Part 5 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/05.jpg">
      <div class="story-card">
        <span class="chapter">제5화</span>
        <span class="theme">어둠의 성을 향하여</span>
        <h2>그림자 성의 비밀</h2>
        <p>세 친구는 점점 어두워지는 하늘을 향해 나아갔습니다. 어둠왕의 성은 하늘 높이 검은 구름 위에 떠 있었어요. 가까이 갈수록 추위가 느껴졌습니다.</p>
        <p><span class="dialogue">"빛이 없으니까 이렇게 추운 거야."</span> 솔라가 설명했어요. <span class="dialogue">"<span class="highlight">태양 에너지는 지구를 따뜻하게 해 주거든.</span> 광합성만이 아니라 지구의 모든 생명이 태양에 의지하고 있어."</span></p>
        <p>탄소가 걱정스럽게 물었어요. <span class="dialogue">"광합성이 멈추면 어떻게 되는 거야?"</span></p>
        <p>물방울이 심각한 표정으로 대답했습니다. <span class="dialogue">"식물이 포도당을 만들지 못하면 식물은 죽어. 식물을 먹는 동물도 굶주리게 되고, 그 동물을 먹는 동물도 굶주리지. <span class="highlight">결국 지구의 모든 생명이 사라질 거야.</span>"</span></p>
        <p><span class="dialogue">"그리고 산소도!"</span> 솔라가 덧붙였어요. <span class="dialogue">"광합성이 멈추면 새로운 산소가 만들어지지 않아. 지구의 모든 생물이 숨을 쉴 수 없게 되는 거야."</span></p>
        <p>세 친구는 더욱 굳은 결심으로 어둠의 성을 향해 날아올랐습니다.</p>
      </div>
    </section>

    <!-- Part 6 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/06.jpg">
      <div class="story-card">
        <span class="chapter">제6화</span>
        <span class="theme">어둠왕과의 대결</span>
        <h2>빛과 어둠의 전쟁</h2>
        <p>드디어 어둠왕의 성에 도착했습니다. 거대한 검은 왕좌에 어둠왕 그림자가 앉아 있었어요. 그의 망토는 하늘 전체를 뒤덮고 있었습니다.</p>
        <p><span class="dialogue">"크하하하! 작은 빛 조각이 감히 나를 찾아오다니!"</span> 어둠왕이 비웃었습니다. <span class="dialogue">"빛 따위는 어둠 앞에 무릎 꿇을 운명이다!"</span></p>
        <p>솔라가 앞으로 나섰습니다. <span class="dialogue">"어둠왕, 너는 왜 빛을 미워하는 거야?"</span></p>
        <p>어둠왕의 눈이 슬프게 흔들렸습니다. <span class="dialogue">"빛이 있으면 나는 사라지거든. <span class="highlight">빛이 있는 곳에 그림자는 존재할 수 없어.</span> 그래서 모든 빛을 없애면 나는 영원히 살 수 있을 거라고 생각했어."</span></p>
        <p>솔라가 부드럽게 말했어요. <span class="dialogue">"하지만 빛이 없으면 그림자도 없어. 그림자는 빛이 있어야만 존재할 수 있잖아. <span class="highlight">빛과 그림자는 적이 아니라 서로를 만들어 주는 짝꿍</span>이야."</span></p>
      </div>
    </section>

    <!-- Part 7 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/07.jpg">
      <div class="story-card">
        <span class="chapter">제7화</span>
        <span class="theme">세 가지 재료의 힘</span>
        <h2>광합성의 마법</h2>
        <p>어둠왕이 잠시 망설이는 사이, 솔라가 외쳤습니다. <span class="dialogue">"친구들, 지금이야! 광합성의 마법을 보여주자!"</span></p>
        <p>솔라가 온 힘을 다해 빛을 내뿜었습니다. 황금빛 에너지가 사방으로 퍼져나갔어요. 탄소가 솔라의 빛 속으로 뛰어들었고, 물방울도 그 뒤를 따랐습니다.</p>
        <p><span class="highlight">빛 에너지가 물을 분해했습니다.</span> 물방울의 몸에서 산소 거품이 피어올랐어요. 그리고 남은 수소와 탄소의 몸이 합쳐지기 시작했습니다.</p>
        <p><span class="dialogue">"이것이 바로 <span class="highlight">광합성</span>이야!"</span> 초록이 할아버지의 목소리가 어디선가 들려왔습니다. <span class="dialogue">"빛이 물을 깨고, 그 조각들이 이산화탄소와 만나 포도당이라는 생명의 에너지를 만들어 내는 거란다!"</span></p>
        <p>눈부신 빛 속에서 새로운 존재가 태어났습니다. 투명하고 활기찬 소년, 바로 <span class="highlight">산소</span>였어요!</p>
      </div>
    </section>

    <!-- Part 8 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/08.jpg">
      <div class="story-card">
        <span class="chapter">제8화</span>
        <span class="theme">지구의 숨결</span>
        <h2>산소의 탄생</h2>
        <p><span class="dialogue">"와아, 내가 태어났어!"</span> 새로 태어난 산소가 기쁨에 겨워 외쳤습니다. <span class="dialogue">"나는 산소야! <span class="highlight">모든 생물이 숨 쉴 수 있게 해 주는 존재</span>라고!"</span></p>
        <p>산소는 빠르게 늘어났습니다. 수천, 수만 개의 산소 분자들이 탄생하며 어둠왕의 성 주변을 밝은 기운으로 채웠어요.</p>
        <p>어둠왕이 비명을 질렀습니다. <span class="dialogue">"으악! 이 빛과 생명의 기운! 나를 밀어내고 있어!"</span></p>
        <p>솔라가 말했어요. <span class="dialogue">"어둠왕, 이제 알겠니? 광합성은 단순한 요리가 아니야. <span class="highlight">태양의 에너지를 생명의 에너지로 바꾸는 마법</span>이야. 이 마법이 있기에 지구의 모든 생물이 살아갈 수 있는 거야."</span></p>
        <p>새로 만들어진 포도당은 황금빛으로 빛나며 모든 식물에게 에너지를 보내기 시작했습니다. 시들어가던 나뭇잎들이 다시 초록빛을 되찾았어요.</p>
      </div>
    </section>

    <!-- Part 9 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/09.jpg">
      <div class="story-card">
        <span class="chapter">제9화</span>
        <span class="theme">밤의 새로운 의미</span>
        <h2>어둠과의 화해</h2>
        <p>놀라운 일이 일어났습니다. 어둠왕의 몸이 작아지기 시작했어요. 하지만 완전히 사라지지는 않았습니다.</p>
        <p>솔라가 어둠왕에게 다가갔습니다. <span class="dialogue">"어둠왕, 너도 이 세상에 필요한 존재야. 모든 것이 빛으로만 이루어지면 생물들은 쉴 수가 없어. <span class="highlight">밤이 있어야 낮의 소중함을 알고, 쉼이 있어야 다시 일할 힘이 생기거든.</span>"</span></p>
        <p>어둠왕의 눈에서 눈물이 흘렀습니다. <span class="dialogue">"정말? 나도 필요한 존재야?"</span></p>
        <p>초록이 할아버지의 목소리가 들려왔어요. <span class="dialogue">"그럼, 당연하지. 식물도 밤에는 광합성 대신 <span class="highlight">호흡</span>을 하며 쉰단다. 낮에 만든 포도당을 사용해서 에너지를 얻고, 다음 날 더 열심히 일할 준비를 하는 거야."</span></p>
        <p>어둠왕이 천천히 고개를 끄덕였습니다. <span class="dialogue">"알겠어. 나는 더 이상 빛을 삼키지 않을게. 대신 밤을 지키며 모든 생물에게 편안한 쉼을 선물할게."</span></p>
      </div>
    </section>

    <!-- Part 10 -->
    <section class="story-section" data-bg="/images/창작도서/창작생물07/10.jpg">
      <div class="story-card">
        <span class="chapter">제10화</span>
        <span class="theme">영원히 반복되는 생명의 노래</span>
        <h2>빛과 생명의 순환</h2>
        <p>다음 날 아침, 태양이 다시 떠올랐습니다. 솔라는 평소처럼 빛을 가지고 지구로 내려왔어요. 모든 나뭇잎이 그녀를 반갑게 맞이했습니다.</p>
        <p>엽록체 마을에서 초록이 할아버지가 만족스럽게 웃었습니다. <span class="dialogue">"자, 다들 일할 준비됐지? <span class="highlight">오늘도 빛을 받아 생명을 만들자!</span>"</span></p>
        <p>틸라코이드 요리사들이 분주하게 움직이기 시작했습니다. 물방울이 도착하고, 탄소가 날아들고, 솔라의 빛이 모든 것을 가동시켰어요. 산소 거품이 피어오르고, 황금빛 포도당이 만들어졌습니다.</p>
        <p>이제 탄소는 더 이상 나쁜 존재로 불리지 않았습니다. 물방울은 땅과 하늘을 오가며 메신저 역할을 했고, 산소는 모든 생물에게 숨결을 선물했습니다.</p>
        <p>밤이 되면 어둠왕이 찾아와 부드러운 어둠으로 세상을 감싸 주었고, 모든 생물은 평화롭게 잠들었습니다.</p>
        <p><span class="highlight">빛과 어둠, 낮과 밤, 광합성과 호흡.</span> 모든 것이 조화롭게 어우러져 지구는 영원히 숨 쉬는 아름다운 별로 남게 되었습니다.</p>
        <p style="text-align: center; margin-top: 30px; font-weight: 700; color: #2E7D32;">— ☀️ 끝 ☀️ —</p>
      </div>
    </section>

  </div>

  <script>
    // 스토리 닫기
    function closeStory() {
      if (window.parent && window.parent !== window) {
        window.parent.postMessage({ type: 'closeStory' }, '*');
      } else {
        window.history.back();
      }
    }

    // IntersectionObserver로 스크롤 기반 배경 변경 및 카드 애니메이션
    const sections = document.querySelectorAll('.story-section');
    const mapContainer = document.getElementById('map-container');

    const observerOptions = {
      root: null,
      rootMargin: '-20% 0px -20% 0px',
      threshold: 0.3
    };

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const card = entry.target.querySelector('.story-card');

        if (entry.isIntersecting) {
          // 카드 활성화
          if (card) card.classList.add('active');

          // 배경 변경
          const bg = entry.target.dataset.bg;
          if (bg) {
            mapContainer.style.backgroundImage = `url('${bg}')`;
          }
        } else {
          // 카드 비활성화
          if (card) card.classList.remove('active');
        }
      });
    }, observerOptions);

    sections.forEach(section => {
      observer.observe(section);
    });

    // 첫 번째 섹션 즉시 활성화
    window.addEventListener('load', () => {
      const firstCard = document.querySelector('.story-section .story-card');
      if (firstCard) {
        setTimeout(() => {
          firstCard.classList.add('active');
        }, 500);
      }
    });
  </script>

</body>
</html>
