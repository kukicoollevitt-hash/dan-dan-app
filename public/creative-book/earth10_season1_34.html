<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🧭 나침반 소녀 나나</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Gmarket Sans", "Noto Sans KR", sans-serif;
      overflow-x: hidden;
      background: #1a1a1a;
    }

    /* 고정 지도 캔버스 */
    #map-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: url('/images/창작도서/창작지구과학10/00.jpg');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 1s ease-in-out;
      z-index: 1;
    }

    #map-canvas {
      display: none;
    }

    /* 스크롤 가능한 콘텐츠 */
    #content {
      position: relative;
      z-index: 2;
      pointer-events: none;
    }

    .story-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 60px 120px;
      pointer-events: none;
    }

    /* 홀수 섹션은 왼쪽 */
    .story-section:nth-child(odd) {
      justify-content: flex-start;
    }

    /* 짝수 섹션은 오른쪽 */
    .story-section:nth-child(even) {
      justify-content: flex-end;
    }

    .story-card {
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(15px);
      padding: 40px;
      border-radius: 24px;
      max-width: 600px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transform: translateX(100px);
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
      pointer-events: auto;
    }

    /* 왼쪽에서 나오는 카드 */
    .story-section:nth-child(odd) .story-card {
      transform: translateX(-100px);
    }

    /* 오른쪽에서 나오는 카드 */
    .story-section:nth-child(even) .story-card {
      transform: translateX(100px);
    }

    .story-card.active {
      transform: translateX(0);
      opacity: 1;
    }

    .story-card .chapter {
      display: inline-block;
      padding: 8px 20px;
      background: linear-gradient(135deg, #4ECDC4 0%, #2E8B84 100%);
      color: white;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 15px;
      box-shadow: 0 4px 15px rgba(78, 205, 196, 0.3);
    }

    .story-card .theme {
      display: inline-block;
      padding: 4px 12px;
      background: rgba(78, 205, 196, 0.15);
      color: #2E8B84;
      border-radius: 12px;
      font-size: 12px;
      font-weight: 600;
      margin-left: 8px;
    }

    .story-card h2 {
      font-size: 26px;
      color: #2c3e50;
      margin-bottom: 20px;
      line-height: 1.4;
    }

    .story-card p {
      font-size: 15px;
      line-height: 1.9;
      color: #34495e;
      margin-bottom: 14px;
      text-align: justify;
    }

    .story-card p:last-child {
      margin-bottom: 0;
    }

    .story-card .highlight {
      color: #2E8B84;
      font-weight: 600;
    }

    .story-card .dialogue {
      color: #1a5f59;
      font-weight: 600;
    }

    /* 인트로 섹션 */
    .intro-section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 60px;
    }

    .intro-content {
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(10px);
      padding: 60px 80px;
      border-radius: 30px;
      max-width: 850px;
      animation: fadeInUp 1s ease-out;
    }

    .intro-content h1 {
      font-size: 44px;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 20px;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
    }

    .intro-content .subtitle {
      font-size: 20px;
      line-height: 1.8;
      color: #e0e0e0;
      margin-bottom: 30px;
      font-weight: 400;
    }

    .intro-content .characters {
      text-align: left;
      background: rgba(255, 255, 255, 0.1);
      padding: 25px;
      border-radius: 16px;
      margin-bottom: 30px;
    }

    .intro-content .characters h3 {
      color: #4ECDC4;
      font-size: 16px;
      margin-bottom: 15px;
    }

    .intro-content .characters p {
      color: #d0d0d0;
      font-size: 14px;
      line-height: 1.7;
      margin-bottom: 8px;
    }

    .intro-content .scroll-hint {
      font-size: 16px;
      color: #ffffff;
      font-weight: 600;
      animation: pulse 2s infinite;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }

    /* 스크롤 인디케이터 */
    .scroll-indicator {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      animation: bounce 2s infinite;
      pointer-events: none;
    }

    .scroll-indicator svg {
      width: 40px;
      height: 40px;
      opacity: 0.7;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
      }
      40% {
        transform: translateX(-50%) translateY(-20px);
      }
      60% {
        transform: translateX(-50%) translateY(-10px);
      }
    }

    /* 반응형 디자인 */
    @media (max-width: 768px) {
      .story-section {
        padding: 40px 20px;
      }

      .story-card {
        max-width: 100%;
        padding: 30px;
      }

      .story-card h2 {
        font-size: 22px;
      }

      .story-card p {
        font-size: 14px;
      }

      .intro-content {
        padding: 40px 30px;
      }

      .intro-content h1 {
        font-size: 28px;
      }

      .intro-content .subtitle {
        font-size: 15px;
      }
    }

    /* 네비게이션 버튼 */
    .nav-buttons {
      position: fixed;
      bottom: 40px;
      left: 50%; transform: translateX(-50%);
      z-index: 1000;
      display: flex;
      gap: 15px;
      pointer-events: auto;
    }

    .nav-btn {
      padding: 15px 30px;
      background: rgba(78, 205, 196, 0.9);
      backdrop-filter: blur(10px);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(78, 205, 196, 0.3);
    }

    .nav-btn:hover {
      background: rgba(46, 139, 132, 0.9);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(78, 205, 196, 0.4);
    }

    @media (max-width: 768px) {
      .nav-buttons {
        bottom: 20px;
        right: 20px;
        flex-direction: column;
      }

      .nav-btn {
        padding: 12px 24px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <!-- 고정된 배경 컨테이너 -->
  <div id="map-container">
    <canvas id="map-canvas"></canvas>
  </div>

  <!-- 스크롤 가능한 스토리 콘텐츠 -->
  <div id="content">
    <!-- 인트로 -->
    <section class="intro-section">
      <div class="intro-content">
        <h1>🧭 나침반 소녀 나나</h1>
        <p class="subtitle">
          — 지구의 심장이 만드는 보이지 않는 방패 —<br>
          교과기반 창작도서 · 지구과학 10 (3·4학년)
        </p>
        <div class="characters">
          <h3>🌟 등장인물 소개</h3>
          <p><strong>▸ 나나:</strong> 나침반을 사랑하는 호기심 많은 소녀</p>
          <p><strong>▸ 자기 할아버지:</strong> 지구의 비밀을 알려주는 과학자</p>
          <p><strong>▸ 극이:</strong> 모든 것을 의심하는 나나의 친구</p>
        </div>
        <p class="scroll-hint">↓ 아래로 스크롤하여 이야기를 시작하세요 ↓</p>
      </div>
    </section>

    <!-- Part 1 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/01.jpg">
      <div class="story-card">
        <span class="chapter">제1장</span>
        <span class="theme">나침반의 원리</span>
        <h2>빨간 바늘이 북쪽을 가리키는 이유</h2>
        <p>열두 살 소녀 <span class="highlight">나나</span><br><br>는 나침반을 가장 좋아해요. 아빠가 돌아가시기 전 선물해 주신 황동 나침반을 항상 주머니에 넣고 다녔어요.</p>
        <p>어느 날 과학 시간에 선생님이 물었어요. <br><br><span class="dialogue">"나침반이 왜 북쪽을 가리킬까요?"</span><br><br>나나가 손을 들었어요. <br><br><span class="dialogue">"북쪽에 큰 자석이 있어서요!"</span></p>
        <p>선생님이 웃으며 말했어요. <span class="dialogue">"절반은 맞았어. 그 거대한 자석은 바로 지구란다. <span class="highlight">지구 자체가 거대한 자석</span><br><br>이야."</span></p>
        <p>나나는 깜짝 놀랐어요. <br><br><span class="dialogue">"지구가요?"</span><br><br>나침반의 바늘은 자석으로 만들어져 있어서, 지구의 자기력에 반응해요. 그래서 항상 북쪽을 가리키는 거예요.</p>
        <p>나나의 눈이 반짝였어요. <br><br><span class="dialogue">"지구의 심장이 만드는 힘이 이 작은 바늘을 움직이는 거구나!"</span></p>
      </div>
    </section>

    <!-- Part 2 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/02.jpg">
      <div class="story-card">
        <span class="chapter">제2장</span>
        <span class="theme">지구 자기장</span>
        <h2>지구를 감싸는 보이지 않는 거품</h2>
        <p>나나는 마을의 지구물리학자 <span class="highlight">자기 할아버지</span><br><br>를 찾아갔어요. 할아버지가 마당에 큰 원을 그리며 설명했어요.</p>
        <p><span class="dialogue">"지구 자기장은 지구 주변을 감싸고 있단다. 마치 거대한 비눗방울처럼 지구를 둘러싸고 있지."</span></p>
        <p>할아버지가 종이 위에 막대자석을 놓고 철가루를 뿌렸어요. 철가루가 아름다운 곡선을 그렸어요. <span class="dialogue">"이것이 <span class="highlight">자기력선</span><br><br>이야. 지구도 이런 자기력선을 가지고 있단다."</span></p>
        <p>나나가 물었어요. <br><br><span class="dialogue">"이 큰 힘이 어디서 나오는 거예요?"</span></p>
        <p>할아버지 눈이 빛났어요. <br><br><span class="dialogue">"지구의 심장, 즉 핵에서 일어나는 놀라운 현상이 만들어내는 거야."</span></p>
      </div>
    </section>

    <!-- Part 3 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/03.jpg">
      <div class="story-card">
        <span class="chapter">제3장</span>
        <span class="theme">외핵의 움직임</span>
        <h2>지구 속 뜨거운 쇠물 바다</h2>
        <p>할아버지가 지구 단면도를 보여주었어요. <br><br><span class="dialogue">"지구를 삶은 달걀이라고 생각해봐. 껍데기가 지각, 흰자가 맨틀, 노른자가 핵이야."</span></p>
        <p><span class="dialogue">"핵은 두 부분이야. 바깥쪽 '외핵'과 안쪽 '내핵'. <span class="highlight">외핵이 자기장을 만든단다.</span>"</span></p>
        <p>나나가 물었어요. <br><br><span class="dialogue">"어떻게요?"</span></p>
        <p><span class="dialogue">"외핵은 철과 니켈로 된 액체 금속이야. 온도가 4,000도가 넘어! 이 뜨거운 쇠물이 엄청난 속도로 소용돌이치고 있어."</span></p>
        <p>나나의 눈이 동그래졌어요. <br><br><span class="dialogue">"지금도요?"</span><br><br><span class="dialogue">"그럼! 네 발밑 2,900킬로미터 아래에서 말이야."</span></p>
        <p>이것이 바로 <span class="highlight">'지구 다이나모'</span><br><br>예요. 액체 금속이 움직이면 전류가 생기고, 전류가 자기장을 만들어요!</p>
      </div>
    </section>

    <!-- Part 4 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/04.jpg">
      <div class="story-card">
        <span class="chapter">제4장</span>
        <span class="theme">극의 변화</span>
        <h2>북극이 남극이 되는 날?</h2>
        <p>나나의 친구 <span class="highlight">극이</span><br><br>가 충격적인 이야기를 했어요. <br><br><span class="dialogue">"나나, 북극이 매년 움직이고 있다는 거 알아?"</span></p>
        <p><span class="dialogue">"말도 안 돼!"</span><br><br>나나가 반박했어요.</p>
        <p>하지만 할아버지가 확인해주었어요. <br><br><span class="dialogue">"자북극은 매년 약 55킬로미터씩 이동하고 있어. 게다가 지구 역사에서 북극과 남극이 완전히 뒤바뀐 적도 있단다!"</span></p>
        <p>나나가 놀랐어요. <br><br><span class="dialogue">"그러면 빨간 바늘이 남쪽을 가리키게 돼요?"</span></p>
        <p>할아버지가 말했어요. <br><br><span class="dialogue">"걱정 마. 아주 천천히 일어나니까. 마지막으로 극이 뒤바뀐 건 78만 년 전이야."</span></p>
        <p><span class="dialogue">"<span class="highlight">자기장은 변하지만, 지구는 늘 새로운 균형을 찾아왔단다.</span><br><br>변한다고 사라지는 건 아니야."</span></p>
      </div>
    </section>

    <!-- Part 5 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/05.jpg">
      <div class="story-card">
        <span class="chapter">제5장</span>
        <span class="theme">태양풍 차단</span>
        <h2>우주에서 날아오는 불의 화살</h2>
        <p>할아버지가 아이들을 천문대로 데려갔어요. 특수 망원경으로 본 태양은 폭발이 끊임없이 일어나고 있었어요!</p>
        <p><span class="dialogue">"태양은 고에너지 입자를 쏟아내고 있어. 이것을 <span class="highlight">'태양풍'</span><br><br>이라고 해."</span></p>
        <p>나나가 걱정했어요. <br><br><span class="dialogue">"그 입자들이 지구로 와요?"</span></p>
        <p><span class="dialogue">"무시무시한 속도로 날아와. 만약 지구에 직접 닿으면 생물의 DNA를 파괴할 수 있어."</span></p>
        <p>극이가 얼굴이 하얘졌어요. <br><br><span class="dialogue">"그러면 우리..."</span></p>
        <p>할아버지가 웃었어요. <br><br><span class="dialogue">"걱정 마! 지구에는 자기장이라는 방패가 있으니까!"</span></p>
        <p>자기장은 태양풍을 지구 양옆으로 휘어지게 해요. <span class="dialogue">"<span class="highlight">보이지 않는 방패가 매 순간 우리를 지키고 있는 거야.</span>"</span></p>
      </div>
    </section>

    <!-- Part 6 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/06.jpg">
      <div class="story-card">
        <span class="chapter">제6장</span>
        <span class="theme">오로라 형성</span>
        <h2>하늘에 펼쳐진 빛의 커튼</h2>
        <p>나나가 물었어요. <br><br><span class="dialogue">"자기장이 태양풍을 완전히 막아요?"</span></p>
        <p><span class="dialogue">"일부 입자는 극지방으로 들어와. 그런데 아주 아름다운 일이 벌어지지."</span></p>
        <p>할아버지가 영상을 보여주었어요. 밤하늘에 초록색, 보라색, 붉은색 빛이 커튼처럼 춤추고 있었어요!</p>
        <p><span class="dialogue">"이것이 <span class="highlight">오로라</span><br><br>란다!"</span></p>
        <p>태양풍 입자가 지구 대기의 산소, 질소와 충돌하면 빛을 내요. 산소는 초록색과 붉은색을, 질소는 보라색과 푸른색을 만들어요.</p>
        <p>나나는 눈물이 핑 돌았어요. <br><br><span class="dialogue">"보이지 않는 방패가 만들어낸 빛이잖아요!"</span></p>
        <p>극이도 감동했어요. <br><br><span class="dialogue">"보이지 않는 힘이라고 없는 게 아니었어."</span></p>
      </div>
    </section>

    <!-- Part 7 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/07.jpg">
      <div class="story-card">
        <span class="chapter">제7장</span>
        <span class="theme">생명 보호</span>
        <h2>화성이 보내는 경고</h2>
        <p>할아버지가 화성 사진을 보여주었어요. 붉고 황량한 사막, 물 한 방울 없는 메마른 땅.</p>
        <p><span class="dialogue">"40억 년 전, 화성에도 자기장이 있었단다. 물이 흐르고 대기도 있었을 거야. 하지만 화성의 핵이 식으면서 자기장이 사라졌어."</span></p>
        <p><span class="dialogue">"자기장이 사라지자, 태양풍이 화성의 대기를 벗겨냈어. 물도 모두 증발하거나 얼어버렸지."</span></p>
        <p>극이가 물었어요. <br><br><span class="dialogue">"지구도 그렇게 될 수 있어요?"</span></p>
        <p><span class="dialogue">"지구의 외핵은 아직 뜨겁게 움직이고 있어. 하지만 우리가 숨 쉬는 공기, 마시는 물이 존재하는 이유가 바로 자기장 덕분이라는 걸 알아야 해."</span></p>
        <p>나나가 말했어요. <span class="dialogue">"<span class="highlight">자기장은 생명 그 자체를 지키고 있는 거</span><br><br>잖아요."</span></p>
      </div>
    </section>

    <!-- Part 8 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/08.jpg">
      <div class="story-card">
        <span class="chapter">제8장</span>
        <span class="theme">자기 역전</span>
        <h2>바위에 새겨진 과거의 기록</h2>
        <p>할아버지가 해변의 현무암 바위를 보여주었어요. <br><br><span class="dialogue">"이 바위 속에 과거의 자기장 방향이 기록되어 있단다."</span></p>
        <p><span class="dialogue">"바위 속에요?"</span><br><br>나나와 극이가 놀랐어요.</p>
        <p><span class="dialogue">"용암이 식을 때, 안의 자성 광물이 그 당시 자기장 방향으로 정렬돼. 나침반처럼 말이야."</span></p>
        <p>과학자들은 바위를 조사해서 지구 자기장이 여러 번 뒤집혔다는 걸 발견했어요!</p>
        <p>극이가 물었어요. <br><br><span class="dialogue">"뒤집히는 동안 자기장이 없어져요?"</span></p>
        <p><span class="dialogue">"약해지지만 완전히 사라지지는 않아. 대기와 오존층이 추가로 보호해주거든."</span></p>
        <p>나나가 나침반을 들며 말했어요. <br><br><span class="dialogue">"이 바늘이 반대로 도는 날이 올 수도 있다니 신기해요."</span></p>
      </div>
    </section>

    <!-- Part 9 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/09.jpg">
      <div class="story-card">
        <span class="chapter">제9장</span>
        <span class="theme">과학의 발견</span>
        <h2>보이지 않는 것을 보는 사람들</h2>
        <p>나나가 궁금했어요. <br><br><span class="dialogue">"보이지도, 만질 수도 없는 자기장을 어떻게 알아낸 거예요?"</span></p>
        <p>할아버지가 설명했어요. <br><br><span class="dialogue">"모든 것은 관찰에서 시작됐어. 아주 오래전 사람들이 자석이 철을 끌어당기는 걸 발견했지."</span></p>
        <p><span class="dialogue">"400년 전, 윌리엄 길버트라는 과학자가 둥근 자석 모형으로 실험해서 지구가 자석이라는 걸 증명했어."</span></p>
        <p><span class="dialogue">"지금은 인공위성이 우주에서 자기장을 측정하고, 슈퍼컴퓨터가 지구 내부를 연구하지."</span></p>
        <p>나나가 외쳤어요. <span class="dialogue">"<span class="highlight">과학은 보이지 않는 것을 보는 눈</span><br><br>이에요!"</span></p>
        <p>할아버지가 끄덕였어요. <br><br><span class="dialogue">"맞아. 과학은 눈이 아니라 마음으로 보는 거란다. 궁금해하는 마음이 과학의 시작이야."</span></p>
      </div>
    </section>

    <!-- Part 10 -->
    <section class="story-section" data-bg="/images/창작도서/창작지구과학10/10.jpg">
      <div class="story-card">
        <span class="chapter">제10장</span>
        <span class="theme">보이지 않는 사랑</span>
        <h2>나나의 나침반이 가리키는 곳</h2>
        <p>봄날, 나나는 학교 발표회에서 자기장에 대해 발표했어요. 아빠의 나침반을 손에 쥐고요.</p>
        <p><span class="dialogue">"지금 이 순간에도 우리 발밑에서는 뜨거운 쇠물이 소용돌이치고 있어요. 그 움직임이 만드는 자기장이 태양풍으로부터 우리를 지키고 있지요."</span></p>
        <p>극이도 말했어요. <br><br><span class="dialogue">"저는 처음에 보이지 않는 힘을 믿을 수 없었어요. 하지만 알게 되었습니다. 보이지 않아도 존재한다는 것을요."</span></p>
        <p>나나가 마지막으로 나침반을 들었어요. <br><br><span class="dialogue">"이 나침반은 아빠가 주신 거예요. 보이지 않는 곳에 계시지만, 아빠의 사랑은 이 나침반처럼 항상 저를 이끌어요. 지구의 자기장도 마찬가지예요."</span></p>
        <p>박수가 터져 나왔어요. 나나는 나침반을 가슴에 꼭 안았어요. 바늘은 오늘도 변함없이 북쪽을 가리키고 있었습니다.</p>
        <p style="text-align: center; margin-top: 25px; padding: 20px; background: rgba(78, 205, 196, 0.15); border-radius: 16px;">
          <strong style="color: #2E8B84; font-size: 20px;">🧭 「보이지 않는 힘이 우리를 지킵니다.」</strong>
        </p>
      </div>
    </section>
  </div>

  <!-- 네비게이션 버튼 -->
  <div class="nav-buttons">
    <button class="nav-btn" onclick="goBack()">← 목록으로</button>
    <button class="nav-btn" style="background: linear-gradient(135deg, #f39c12 0%, #e74c3c 100%);" onclick="goToQuiz()">📝 관문평가</button>
  </div>

  <!-- 스크롤 인디케이터 -->
  <div class="scroll-indicator" id="scrollIndicator">
    <svg viewBox="0 0 24 24" fill="white">
      <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/>
    </svg>
  </div>

  <script>
    const mapContainer = document.getElementById('map-container');
    const sections = document.querySelectorAll('.story-section');
    const scrollIndicator = document.getElementById('scrollIndicator');
    let currentBg = '';
    let ticking = false;

    function updateBackground() {
      const scrollPos = window.scrollY + window.innerHeight / 2;

      // 스크롤 인디케이터 숨기기/보이기
      if (window.scrollY > 100) {
        scrollIndicator.style.opacity = '0';
      } else {
        scrollIndicator.style.opacity = '1';
      }

      sections.forEach((section, index) => {
        const rect = section.getBoundingClientRect();
        const sectionTop = window.scrollY + rect.top;
        const sectionBottom = sectionTop + rect.height;

        if (scrollPos >= sectionTop && scrollPos < sectionBottom) {
          // 배경 업데이트
          const bgImage = section.dataset.bg;
          if (bgImage && bgImage !== currentBg) {
            currentBg = bgImage;
            mapContainer.style.backgroundImage = `url(${bgImage})`;
          }

          // 카드 활성화
          const card = section.querySelector('.story-card');
          if (card && !card.classList.contains('active')) {
            card.classList.add('active');
          }
        }
      });
    }

    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          updateBackground();
          ticking = false;
        });
        ticking = true;
      }
    });

    // 초기 실행
    updateBackground();

    function goBack() {
      // 부모 창이 있으면 부모에게 메시지 전송
      if (window.parent !== window) {
        window.parent.postMessage({ action: 'closeStory' }, '*');
      } else {
        window.history.back();
      }
    }

    function goToQuiz() {
      window.location.href = '/creative-book/earth10_season1_quiz.html?season=season1';
    }
  </script>
</body>
</html>
