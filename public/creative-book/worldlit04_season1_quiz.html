<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ë§ˆìˆ í”¼ë¦¬ - ë…í•´ë ¥ í€´ì¦ˆ</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: linear-gradient(135deg, #1a1a2e 0%, #4a148c 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .quiz-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 40px;
      max-width: 800px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .quiz-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .quiz-header h1 {
      color: #7b1fa2;
      font-size: 28px;
      margin-bottom: 10px;
    }

    .quiz-header p {
      color: #666;
      font-size: 14px;
    }

    /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
    .input-form {
      background: linear-gradient(135deg, #f3e5f5, #e1bee7);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
    }

    .input-form h2 {
      color: #7b1fa2;
      margin-bottom: 20px;
      font-size: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      color: #4a148c;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .form-group select,
    .form-group input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #ce93d8;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s;
    }

    .form-group select:focus,
    .form-group input:focus {
      outline: none;
      border-color: #7b1fa2;
      box-shadow: 0 0 10px rgba(123, 31, 162, 0.2);
    }

    .start-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #7b1fa2, #4a148c);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
    }

    .start-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(123, 31, 162, 0.4);
    }

    /* í€´ì¦ˆ ì˜ì—­ */
    .quiz-content {
      display: none;
    }

    .category-section {
      margin-bottom: 30px;
      background: #fafafa;
      border-radius: 16px;
      padding: 25px;
      border-left: 4px solid #7b1fa2;
    }

    .category-title {
      color: #7b1fa2;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .question-box {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .question-text {
      color: #333;
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .option {
      padding: 12px 16px;
      background: #f5f5f5;
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 15px;
    }

    .option:hover {
      background: #f3e5f5;
      border-color: #ce93d8;
    }

    .option.selected {
      background: #e1bee7;
      border-color: #7b1fa2;
      color: #4a148c;
      font-weight: 600;
    }

    .submit-btn {
      width: 100%;
      padding: 18px;
      background: linear-gradient(135deg, #7b1fa2, #4a148c);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 20px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 20px;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(123, 31, 162, 0.4);
    }

    /* ê²°ê³¼ ì˜ì—­ */
    .result-section {
      display: none;
      text-align: center;
    }

    .result-title {
      font-size: 28px;
      color: #7b1fa2;
      margin-bottom: 30px;
    }

    .score-display {
      font-size: 72px;
      font-weight: 700;
      color: #4a148c;
      margin-bottom: 20px;
    }

    .score-display span {
      font-size: 24px;
      color: #999;
    }

    .radar-container {
      width: 100%;
      max-width: 400px;
      margin: 30px auto;
    }

    .category-scores {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }

    .category-score-item {
      background: linear-gradient(135deg, #f3e5f5, #e1bee7);
      padding: 15px;
      border-radius: 12px;
      text-align: center;
    }

    .category-score-item .label {
      font-size: 14px;
      color: #7b1fa2;
      margin-bottom: 5px;
    }

    .category-score-item .score {
      font-size: 24px;
      font-weight: 700;
      color: #4a148c;
    }

    .back-btn {
      padding: 15px 40px;
      background: #9e9e9e;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 20px;
    }

    .back-btn:hover {
      background: #757575;
    }

    @media (max-width: 600px) {
      .quiz-container {
        padding: 20px;
      }

      .quiz-header h1 {
        font-size: 22px;
      }

      .score-display {
        font-size: 48px;
      }
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <div class="quiz-header">
      <h1>ğŸ­ ë§ˆìˆ í”¼ë¦¬ - ë…í•´ë ¥ í€´ì¦ˆ</h1>
      <p>ë¹›ê³¼ ì–´ë‘  ì‚¬ì´, ì¹¨ë¬µìœ¼ë¡œ ì‹¸ìš´ ì™•ìì™€ ê²ìŸì´ ìƒˆì¡ì´</p>
    </div>

    <!-- ì…ë ¥ í¼ -->
    <div class="input-form" id="inputForm">
      <h2>ğŸ“ ì •ë³´ ì…ë ¥</h2>
      <div class="form-group">
        <label for="grade">í•™ë…„ ì„ íƒ</label>
        <select id="grade">
          <option value="">í•™ë…„ì„ ì„ íƒí•˜ì„¸ìš”</option>
          <option value="ì´ˆ3">ì´ˆë“± 3í•™ë…„</option>
          <option value="ì´ˆ4">ì´ˆë“± 4í•™ë…„</option>
          <option value="ì´ˆ5">ì´ˆë“± 5í•™ë…„</option>
          <option value="ì´ˆ6">ì´ˆë“± 6í•™ë…„</option>
          <option value="ì¤‘1">ì¤‘ë“± 1í•™ë…„</option>
          <option value="ì¤‘2">ì¤‘ë“± 2í•™ë…„</option>
          <option value="ì¤‘3">ì¤‘ë“± 3í•™ë…„</option>
        </select>
      </div>
      <div class="form-group">
        <label for="name">ì´ë¦„</label>
        <input type="text" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
      </div>
      <button class="start-btn" onclick="startQuiz()">í€´ì¦ˆ ì‹œì‘í•˜ê¸°</button>
    </div>

    <!-- í€´ì¦ˆ ì½˜í…ì¸  -->
    <div class="quiz-content" id="quizContent">
      <!-- ì¸ë¬¼íŒŒì•… -->
      <div class="category-section">
        <div class="category-title">ğŸ‘¤ ì¸ë¬¼íŒŒì•…</div>
        <div class="question-box">
          <div class="question-text">1. íƒ€ë¯¸ë…¸ê°€ ì²˜ìŒ ìœ„í—˜ì— ì²˜í–ˆì„ ë•Œ ê·¸ë¥¼ êµ¬í•´ì¤€ ê²ƒì€ ëˆ„êµ¬ì¸ê°€ìš”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q1')">â‘  ìë¼ìŠ¤íŠ¸ë¡œì˜ ì‚¬ì œë“¤</div>
            <div class="option" onclick="selectOption(this, 'q1')">â‘¡ ë°¤ì˜ ì—¬ì™•ì˜ ì‹œë…€ë“¤</div>
            <div class="option" onclick="selectOption(this, 'q1')">â‘¢ íŒŒíŒŒê²Œë…¸</div>
            <div class="option" onclick="selectOption(this, 'q1')">â‘£ ì†Œë…„ ì •ë ¹ë“¤</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">2. íŒŒíŒŒê²Œë…¸ëŠ” ì–´ë–¤ ì„±ê²©ì˜ ì¸ë¬¼ì¸ê°€ìš”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q2')">â‘  ìš©ê°í•˜ê³  ê³¼ë¬µí•œ ì„±ê²©</div>
            <div class="option" onclick="selectOption(this, 'q2')">â‘¡ ê²ì´ ë§ì§€ë§Œ ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì§„ ì„±ê²©</div>
            <div class="option" onclick="selectOption(this, 'q2')">â‘¢ ëƒ‰ì •í•˜ê³  ê³„ì‚°ì ì¸ ì„±ê²©</div>
            <div class="option" onclick="selectOption(this, 'q2')">â‘£ êµí™œí•˜ê³  ì´ê¸°ì ì¸ ì„±ê²©</div>
          </div>
        </div>
      </div>

      <!-- ë‚´ìš©ì¼ì¹˜ -->
      <div class="category-section">
        <div class="category-title">ğŸ“– ë‚´ìš©ì¼ì¹˜</div>
        <div class="question-box">
          <div class="question-text">3. ë°¤ì˜ ì—¬ì™•ì´ íƒ€ë¯¸ë…¸ì—ê²Œ íŒŒë¯¸ë‚˜ë¥¼ êµ¬í•´ë‹¬ë¼ê³  í•œ ì§„ì§œ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q3')">â‘  ë”¸ì˜ ì•ˆì „ì´ ê±±ì •ë˜ì–´ì„œ</div>
            <div class="option" onclick="selectOption(this, 'q3')">â‘¡ ìë¼ìŠ¤íŠ¸ë¡œì˜ íƒœì–‘ì˜ í˜ì„ ì†ì— ë„£ìœ¼ë ¤ê³ </div>
            <div class="option" onclick="selectOption(this, 'q3')">â‘¢ íŒŒë¯¸ë‚˜ê°€ ê²°í˜¼í•˜ê¸°ë¥¼ ì›í•´ì„œ</div>
            <div class="option" onclick="selectOption(this, 'q3')">â‘£ íƒ€ë¯¸ë…¸ë¥¼ ì‹œí—˜í•˜ë ¤ê³ </div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">4. ì¹¨ë¬µì˜ ì‹œí—˜ì—ì„œ íŒŒíŒŒê²Œë…¸ê°€ ì‹¤íŒ¨í•œ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q4')">â‘  ì‹œë…€ì˜ ìœ í˜¹ì— ë„˜ì–´ê°€ ë§ì„ í–ˆê¸° ë•Œë¬¸ì—</div>
            <div class="option" onclick="selectOption(this, 'q4')">â‘¡ ì‹œí—˜ì¥ì—ì„œ ë„ë§ì³¤ê¸° ë•Œë¬¸ì—</div>
            <div class="option" onclick="selectOption(this, 'q4')">â‘¢ ë§ˆìˆ í”¼ë¦¬ë¥¼ ìƒì–´ë²„ë ¸ê¸° ë•Œë¬¸ì—</div>
            <div class="option" onclick="selectOption(this, 'q4')">â‘£ íŒŒë¯¸ë‚˜ë¥¼ ë§Œë‚˜ ëŒ€í™”í–ˆê¸° ë•Œë¬¸ì—</div>
          </div>
        </div>
      </div>

      <!-- ë‚´ìš©êµ¬ì¡° -->
      <div class="category-section">
        <div class="category-title">ğŸ”— ë‚´ìš©êµ¬ì¡°</div>
        <div class="question-box">
          <div class="question-text">5. ì´ ì´ì•¼ê¸°ì˜ ê°ˆë“± êµ¬ì¡°ì—ì„œ "ë¹› vs ì–´ë‘ "ì˜ ëŒ€ë¦½ì€ ëˆ„êµ¬ë¥¼ ìƒì§•í•˜ë‚˜ìš”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q5')">â‘  íƒ€ë¯¸ë…¸ vs íŒŒíŒŒê²Œë…¸</div>
            <div class="option" onclick="selectOption(this, 'q5')">â‘¡ ìë¼ìŠ¤íŠ¸ë¡œ vs ë°¤ì˜ ì—¬ì™•</div>
            <div class="option" onclick="selectOption(this, 'q5')">â‘¢ íŒŒë¯¸ë‚˜ vs ëª¨ë…¸ìŠ¤íƒ€í† ìŠ¤</div>
            <div class="option" onclick="selectOption(this, 'q5')">â‘£ ì‹œë…€ë“¤ vs ì‚¬ì œë“¤</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">6. ì´ ì´ì•¼ê¸°ì˜ ì „ê°œ êµ¬ì¡°ë¥¼ ì˜¬ë°”ë¥´ê²Œ ì„¤ëª…í•œ ê²ƒì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q6')">â‘  ì‹œí—˜ â†’ ëª¨í—˜ ì‹œì‘ â†’ ì§„ì‹¤ ë°œê²¬ â†’ ê²°ë§</div>
            <div class="option" onclick="selectOption(this, 'q6')">â‘¡ ëª¨í—˜ ì‹œì‘ â†’ ê±°ì§“ì— ì†ìŒ â†’ ì§„ì‹¤ ë°œê²¬ â†’ ì‹œí—˜ â†’ ìŠ¹ë¦¬</div>
            <div class="option" onclick="selectOption(this, 'q6')">â‘¢ ì§„ì‹¤ ë°œê²¬ â†’ ëª¨í—˜ ì‹œì‘ â†’ ì‹œí—˜ â†’ ê²°ë§</div>
            <div class="option" onclick="selectOption(this, 'q6')">â‘£ ìŠ¹ë¦¬ â†’ ì‹œí—˜ â†’ ëª¨í—˜ â†’ ì§„ì‹¤ ë°œê²¬</div>
          </div>
        </div>
      </div>

      <!-- ë‚´ìš©ì–´íœ˜ -->
      <div class="category-section">
        <div class="category-title">ğŸ“š ë‚´ìš©ì–´íœ˜</div>
        <div class="question-box">
          <div class="question-text">7. "ì˜ì‹(å„€å¼)"ì´ ì´ì•¼ê¸°ì—ì„œ ê°€ì§€ëŠ” ì˜ë¯¸ë¡œ ì ì ˆí•œ ê²ƒì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q7')">â‘  ë§¤ì¼ ê°™ì€ ì‹œê°„ì— í–‰ë™í•˜ì—¬ íŠ¹ë³„í•œ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒ</div>
            <div class="option" onclick="selectOption(this, 'q7')">â‘¡ ë§ˆë²•ì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì£¼ë¬¸</div>
            <div class="option" onclick="selectOption(this, 'q7')">â‘¢ ì‹œí—˜ì„ í†µê³¼í•˜ê¸° ìœ„í•œ ê·œì¹™</div>
            <div class="option" onclick="selectOption(this, 'q7')">â‘£ ì™•ì¡±ë“¤ë§Œì˜ íŠ¹ë³„í•œ í–‰ì‚¬</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">8. "ì¹¨ë¬µ"ì´ ì´ ì´ì•¼ê¸°ì—ì„œ ìƒì§•í•˜ëŠ” ê²ƒì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q8')">â‘  ë¹„ë°€ì„ ì§€í‚¤ëŠ” ëŠ¥ë ¥</div>
            <div class="option" onclick="selectOption(this, 'q8')">â‘¡ ì¸ë‚´ì™€ ìê¸° í†µì œì˜ ì‹œí—˜</div>
            <div class="option" onclick="selectOption(this, 'q8')">â‘¢ ìƒëŒ€ë°©ì— ëŒ€í•œ ë¬´ê´€ì‹¬</div>
            <div class="option" onclick="selectOption(this, 'q8')">â‘£ ë‘ë ¤ì›€ì„ ìˆ¨ê¸°ëŠ” ë°©ë²•</div>
          </div>
        </div>
      </div>

      <!-- ë‚´ìš©ì¶”ë¡  -->
      <div class="category-section">
        <div class="category-title">ğŸ” ë‚´ìš©ì¶”ë¡ </div>
        <div class="question-box">
          <div class="question-text">9. íŒŒíŒŒê²Œë…¸ê°€ ì‹œí—˜ì— ì‹¤íŒ¨í–ˆì§€ë§Œ íŒŒíŒŒê²Œë‚˜ë¥¼ ë§Œë‚˜ í–‰ë³µí•´ì§„ ê²ƒì´ ì£¼ëŠ” êµí›ˆì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q9')">â‘  ì‹¤íŒ¨í•´ë„ ìš´ì´ ì¢‹ìœ¼ë©´ ë³´ìƒì„ ë°›ëŠ”ë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q9')">â‘¡ ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ìê¸°ë§Œì˜ ë°©ì‹ìœ¼ë¡œ í–‰ë³µì„ ì°¾ì„ ìˆ˜ ìˆë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q9')">â‘¢ ì‹œí—˜ì€ ì¤‘ìš”í•˜ì§€ ì•Šë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q9')">â‘£ ì¹œêµ¬ì˜ ë„ì›€ì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">10. íƒ€ë¯¸ë…¸ê°€ íŒŒë¯¸ë‚˜ì˜ ëˆˆë¬¼ ì•ì—ì„œë„ ì¹¨ë¬µì„ ì§€í‚¨ ê²ƒì€ ì–´ë–¤ ê°€ì¹˜ë¥¼ ë³´ì—¬ì£¼ë‚˜ìš”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q10')">â‘  ê°ì •ë³´ë‹¤ ê·œì¹™ì´ ì¤‘ìš”í•˜ë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q10')">â‘¡ ìˆœê°„ì˜ ê°ì •ë³´ë‹¤ ì˜³ì€ ì¼ì„ ëê¹Œì§€ í•´ë‚´ëŠ” ê²ƒì´ ì§„ì§œ ì‚¬ë‘ì´ë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q10')">â‘¢ ë‹¤ë¥¸ ì‚¬ëŒì˜ ìŠ¬í””ì€ ë¬´ì‹œí•´ë„ ëœë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q10')">â‘£ ì‹œí—˜ í†µê³¼ê°€ ì‚¬ë‘ë³´ë‹¤ ì¤‘ìš”í•˜ë‹¤</div>
          </div>
        </div>
      </div>

      <button class="submit-btn" onclick="submitQuiz()">ê²°ê³¼ í™•ì¸í•˜ê¸°</button>
    </div>

    <!-- ê²°ê³¼ ì„¹ì…˜ -->
    <div class="result-section" id="resultSection">
      <h2 class="result-title">ğŸ­ í€´ì¦ˆ ê²°ê³¼</h2>
      <div class="score-display"><span id="totalScore">0</span><span>/50ì </span></div>

      <div class="radar-container">
        <canvas id="radarChart" width="400" height="400"></canvas>
      </div>

      <div class="category-scores">
        <div class="category-score-item">
          <div class="label">ì¸ë¬¼íŒŒì•…</div>
          <div class="score" id="score1">0</div>
        </div>
        <div class="category-score-item">
          <div class="label">ë‚´ìš©ì¼ì¹˜</div>
          <div class="score" id="score2">0</div>
        </div>
        <div class="category-score-item">
          <div class="label">ë‚´ìš©êµ¬ì¡°</div>
          <div class="score" id="score3">0</div>
        </div>
        <div class="category-score-item">
          <div class="label">ë‚´ìš©ì–´íœ˜</div>
          <div class="score" id="score4">0</div>
        </div>
        <div class="category-score-item">
          <div class="label">ë‚´ìš©ì¶”ë¡ </div>
          <div class="score" id="score5">0</div>
        </div>
      </div>

      <button class="back-btn" onclick="goBack()">ëŒì•„ê°€ê¸°</button>
    </div>
  </div>

  <script>
    const answers = {
      q1: 'â‘¡ ë°¤ì˜ ì—¬ì™•ì˜ ì‹œë…€ë“¤',
      q2: 'â‘¡ ê²ì´ ë§ì§€ë§Œ ë”°ëœ»í•œ ë§ˆìŒì„ ê°€ì§„ ì„±ê²©',
      q3: 'â‘¡ ìë¼ìŠ¤íŠ¸ë¡œì˜ íƒœì–‘ì˜ í˜ì„ ì†ì— ë„£ìœ¼ë ¤ê³ ',
      q4: 'â‘  ì‹œë…€ì˜ ìœ í˜¹ì— ë„˜ì–´ê°€ ë§ì„ í–ˆê¸° ë•Œë¬¸ì—',
      q5: 'â‘¡ ìë¼ìŠ¤íŠ¸ë¡œ vs ë°¤ì˜ ì—¬ì™•',
      q6: 'â‘¡ ëª¨í—˜ ì‹œì‘ â†’ ê±°ì§“ì— ì†ìŒ â†’ ì§„ì‹¤ ë°œê²¬ â†’ ì‹œí—˜ â†’ ìŠ¹ë¦¬',
      q7: 'â‘  ë§¤ì¼ ê°™ì€ ì‹œê°„ì— í–‰ë™í•˜ì—¬ íŠ¹ë³„í•œ ì˜ë¯¸ë¥¼ ë¶€ì—¬í•˜ëŠ” ê²ƒ',
      q8: 'â‘¡ ì¸ë‚´ì™€ ìê¸° í†µì œì˜ ì‹œí—˜',
      q9: 'â‘¡ ì™„ë²½í•˜ì§€ ì•Šì•„ë„ ìê¸°ë§Œì˜ ë°©ì‹ìœ¼ë¡œ í–‰ë³µì„ ì°¾ì„ ìˆ˜ ìˆë‹¤',
      q10: 'â‘¡ ìˆœê°„ì˜ ê°ì •ë³´ë‹¤ ì˜³ì€ ì¼ì„ ëê¹Œì§€ í•´ë‚´ëŠ” ê²ƒì´ ì§„ì§œ ì‚¬ë‘ì´ë‹¤'
    };

    const userAnswers = {};
    let userName = '';
    let userGrade = '';

    function selectOption(element, questionId) {
      const options = element.parentElement.querySelectorAll('.option');
      options.forEach(opt => opt.classList.remove('selected'));
      element.classList.add('selected');
      userAnswers[questionId] = element.textContent;
    }

    function startQuiz() {
      const grade = document.getElementById('grade').value;
      const name = document.getElementById('name').value.trim();

      if (!grade) {
        alert('í•™ë…„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      if (!name) {
        alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      userName = name;
      userGrade = grade;

      document.getElementById('inputForm').style.display = 'none';
      document.getElementById('quizContent').style.display = 'block';
    }

    function submitQuiz() {
      const totalQuestions = Object.keys(answers).length;
      const answeredQuestions = Object.keys(userAnswers).length;

      if (answeredQuestions < totalQuestions) {
        alert('ëª¨ë“  ë¬¸ì œì— ë‹µí•´ì£¼ì„¸ìš”.');
        return;
      }

      // ì¹´í…Œê³ ë¦¬ë³„ ì ìˆ˜ ê³„ì‚°
      const categoryScores = [0, 0, 0, 0, 0];

      // ì¸ë¬¼íŒŒì•… (q1, q2)
      if (userAnswers.q1 === answers.q1) categoryScores[0]++;
      if (userAnswers.q2 === answers.q2) categoryScores[0]++;

      // ë‚´ìš©ì¼ì¹˜ (q3, q4)
      if (userAnswers.q3 === answers.q3) categoryScores[1]++;
      if (userAnswers.q4 === answers.q4) categoryScores[1]++;

      // ë‚´ìš©êµ¬ì¡° (q5, q6)
      if (userAnswers.q5 === answers.q5) categoryScores[2]++;
      if (userAnswers.q6 === answers.q6) categoryScores[2]++;

      // ë‚´ìš©ì–´íœ˜ (q7, q8)
      if (userAnswers.q7 === answers.q7) categoryScores[3]++;
      if (userAnswers.q8 === answers.q8) categoryScores[3]++;

      // ë‚´ìš©ì¶”ë¡  (q9, q10)
      if (userAnswers.q9 === answers.q9) categoryScores[4]++;
      if (userAnswers.q10 === answers.q10) categoryScores[4]++;

      // ì ìˆ˜ ë³€í™˜ (2ê°œ ë§ìŒ=10ì , 1ê°œ ë§ìŒ=5ì , 0ê°œ ë§ìŒ=1ì )
      const convertedScores = categoryScores.map(score => {
        if (score === 2) return 10;
        if (score === 1) return 5;
        return 1;
      });

      const totalScore = convertedScores.reduce((a, b) => a + b, 0);

      // ê²°ê³¼ í‘œì‹œ
      document.getElementById('quizContent').style.display = 'none';
      document.getElementById('resultSection').style.display = 'block';

      document.getElementById('totalScore').textContent = totalScore;
      document.getElementById('score1').textContent = convertedScores[0] + 'ì ';
      document.getElementById('score2').textContent = convertedScores[1] + 'ì ';
      document.getElementById('score3').textContent = convertedScores[2] + 'ì ';
      document.getElementById('score4').textContent = convertedScores[3] + 'ì ';
      document.getElementById('score5').textContent = convertedScores[4] + 'ì ';

      // ë ˆì´ë” ì°¨íŠ¸ ê·¸ë¦¬ê¸°
      drawRadarChart(convertedScores);

      // ê²°ê³¼ ì €ì¥
      saveResult(convertedScores, totalScore);
    }

    function drawRadarChart(scores) {
      const canvas = document.getElementById('radarChart');
      const ctx = canvas.getContext('2d');
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const maxRadius = 150;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const categories = ['ì¸ë¬¼íŒŒì•…', 'ë‚´ìš©ì¼ì¹˜', 'ë‚´ìš©êµ¬ì¡°', 'ë‚´ìš©ì–´íœ˜', 'ë‚´ìš©ì¶”ë¡ '];
      const numCategories = categories.length;
      const angleStep = (2 * Math.PI) / numCategories;
      const startAngle = -Math.PI / 2;

      // ë°°ê²½ ê·¸ë¦¬ë“œ
      for (let level = 1; level <= 5; level++) {
        const radius = (maxRadius / 5) * level;
        ctx.beginPath();
        for (let i = 0; i <= numCategories; i++) {
          const angle = startAngle + i * angleStep;
          const x = centerX + radius * Math.cos(angle);
          const y = centerY + radius * Math.sin(angle);
          if (i === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        ctx.closePath();
        ctx.strokeStyle = '#e0e0e0';
        ctx.stroke();
      }

      // ì¶• ê·¸ë¦¬ê¸°
      for (let i = 0; i < numCategories; i++) {
        const angle = startAngle + i * angleStep;
        const x = centerX + maxRadius * Math.cos(angle);
        const y = centerY + maxRadius * Math.sin(angle);
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(x, y);
        ctx.strokeStyle = '#ccc';
        ctx.stroke();

        // ì¹´í…Œê³ ë¦¬ ë¼ë²¨
        const labelRadius = maxRadius + 25;
        const labelX = centerX + labelRadius * Math.cos(angle);
        const labelY = centerY + labelRadius * Math.sin(angle);
        ctx.fillStyle = '#7b1fa2';
        ctx.font = 'bold 14px Noto Sans KR';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(categories[i], labelX, labelY);
      }

      // ë°ì´í„° ì˜ì—­
      ctx.beginPath();
      for (let i = 0; i <= numCategories; i++) {
        const idx = i % numCategories;
        const angle = startAngle + idx * angleStep;
        const radius = (scores[idx] / 10) * maxRadius;
        const x = centerX + radius * Math.cos(angle);
        const y = centerY + radius * Math.sin(angle);
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.closePath();
      ctx.fillStyle = 'rgba(123, 31, 162, 0.3)';
      ctx.fill();
      ctx.strokeStyle = '#7b1fa2';
      ctx.lineWidth = 2;
      ctx.stroke();

      // ë°ì´í„° í¬ì¸íŠ¸
      for (let i = 0; i < numCategories; i++) {
        const angle = startAngle + i * angleStep;
        const radius = (scores[i] / 10) * maxRadius;
        const x = centerX + radius * Math.cos(angle);
        const y = centerY + radius * Math.sin(angle);
        ctx.beginPath();
        ctx.arc(x, y, 6, 0, 2 * Math.PI);
        ctx.fillStyle = '#7b1fa2';
        ctx.fill();
      }
    }

    async function saveResult(scores, totalScore) {
      try {
        const response = await fetch('/api/creative-quiz/save', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            grade: userGrade,
            name: userName,
            storyId: 'worldlit04',
            season: 'season1',
            scores: scores,
            totalScore: totalScore
          })
        });
        const data = await response.json();
        console.log('ì €ì¥ ì™„ë£Œ:', data);
      } catch (error) {
        console.error('ì €ì¥ ì‹¤íŒ¨:', error);
      }
    }

    function goBack() {
      window.location.href = 'worldlit04_season1.html';
    }
  </script>
</body>
</html>
