<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì•Œë² ë¥´íŠ¸ ì•„ì¸ìŠˆíƒ€ì¸ - ë…í•´ë ¥ í€´ì¦ˆ</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Noto Sans KR', sans-serif;
      background: linear-gradient(135deg, #1a237e 0%, #3f51b5 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .quiz-container {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      padding: 40px;
      max-width: 800px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    .quiz-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .quiz-header h1 {
      color: #3f51b5;
      font-size: 28px;
      margin-bottom: 10px;
    }

    .quiz-header p {
      color: #666;
      font-size: 14px;
    }

    /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
    .input-form {
      background: linear-gradient(135deg, #e8eaf6, #c5cae9);
      border-radius: 16px;
      padding: 30px;
      margin-bottom: 30px;
    }

    .input-form h2 {
      color: #3f51b5;
      margin-bottom: 20px;
      font-size: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      color: #1a237e;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .form-group select,
    .form-group input {
      width: 100%;
      padding: 12px 16px;
      border: 2px solid #7986cb;
      border-radius: 10px;
      font-size: 16px;
      transition: all 0.3s;
    }

    .form-group select:focus,
    .form-group input:focus {
      outline: none;
      border-color: #3f51b5;
      box-shadow: 0 0 10px rgba(63, 81, 181, 0.3);
    }

    .start-btn {
      width: 100%;
      padding: 15px;
      background: linear-gradient(135deg, #3f51b5, #1a237e);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 18px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
    }

    .start-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(63, 81, 181, 0.4);
    }

    /* í€´ì¦ˆ ì˜ì—­ */
    .quiz-content {
      display: none;
    }

    .category-section {
      margin-bottom: 30px;
      background: #fafafa;
      border-radius: 16px;
      padding: 25px;
      border-left: 4px solid #3f51b5;
    }

    .category-title {
      color: #3f51b5;
      font-size: 18px;
      font-weight: 700;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .question-box {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 15px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .question-text {
      color: #333;
      font-size: 16px;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .options {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .option {
      padding: 12px 16px;
      background: #f5f5f5;
      border: 2px solid transparent;
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 15px;
    }

    .option:hover {
      background: #e8eaf6;
      border-color: #7986cb;
    }

    .option.selected {
      background: #c5cae9;
      border-color: #3f51b5;
      color: #1a237e;
      font-weight: 600;
    }

    .submit-btn {
      width: 100%;
      padding: 18px;
      background: linear-gradient(135deg, #3f51b5, #1a237e);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 20px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 20px;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 30px rgba(63, 81, 181, 0.4);
    }

    /* ê²°ê³¼ ì˜ì—­ */
    .result-section {
      display: none;
      text-align: center;
    }

    .result-title {
      font-size: 28px;
      color: #3f51b5;
      margin-bottom: 30px;
    }

    .score-display {
      font-size: 72px;
      font-weight: 700;
      color: #1a237e;
      margin-bottom: 20px;
    }

    .score-display span {
      font-size: 24px;
      color: #999;
    }

    .radar-container {
      width: 100%;
      max-width: 400px;
      margin: 30px auto;
    }

    .category-scores {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 15px;
      margin: 30px 0;
    }

    .category-score-item {
      background: linear-gradient(135deg, #e8eaf6, #c5cae9);
      padding: 15px;
      border-radius: 12px;
      text-align: center;
    }

    .category-score-item .label {
      font-size: 14px;
      color: #3f51b5;
      margin-bottom: 5px;
    }

    .category-score-item .score {
      font-size: 24px;
      font-weight: 700;
      color: #1a237e;
    }

    .back-btn {
      padding: 15px 40px;
      background: #9e9e9e;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      margin-top: 20px;
    }

    .back-btn:hover {
      background: #757575;
    }

    @media (max-width: 600px) {
      .quiz-container {
        padding: 20px;
      }

      .quiz-header h1 {
        font-size: 22px;
      }

      .score-display {
        font-size: 48px;
      }
    }
  </style>
</head>
<body>
  <div class="quiz-container">
    <div class="quiz-header">
      <h1>ğŸ”¬ ì•Œë² ë¥´íŠ¸ ì•„ì¸ìŠˆíƒ€ì¸ - ë…í•´ë ¥ í€´ì¦ˆ</h1>
      <p>ë¹›ì„ í›”ì¹˜ë ¤ í•œ ì†Œë…„, ëŠë¦¼ë³´ê°€ ìš°ì£¼ì˜ ë¹„ë°€ì„ í’€ê¸°ê¹Œì§€</p>
    </div>

    <!-- ì…ë ¥ í¼ -->
    <div class="input-form" id="inputForm">
      <h2>ğŸ“ ì •ë³´ ì…ë ¥</h2>
      <div class="form-group">
        <label for="grade">í•™ë…„ ì„ íƒ</label>
        <select id="grade">
          <option value="">í•™ë…„ì„ ì„ íƒí•˜ì„¸ìš”</option>
          <option value="ì´ˆ3">ì´ˆë“± 3í•™ë…„</option>
          <option value="ì´ˆ4">ì´ˆë“± 4í•™ë…„</option>
          <option value="ì´ˆ5">ì´ˆë“± 5í•™ë…„</option>
          <option value="ì´ˆ6">ì´ˆë“± 6í•™ë…„</option>
          <option value="ì¤‘1">ì¤‘ë“± 1í•™ë…„</option>
          <option value="ì¤‘2">ì¤‘ë“± 2í•™ë…„</option>
          <option value="ì¤‘3">ì¤‘ë“± 3í•™ë…„</option>
        </select>
      </div>
      <div class="form-group">
        <label for="name">ì´ë¦„</label>
        <input type="text" id="name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”">
      </div>
      <button class="start-btn" onclick="startQuiz()">í€´ì¦ˆ ì‹œì‘í•˜ê¸°</button>
    </div>

    <!-- í€´ì¦ˆ ì½˜í…ì¸  -->
    <div class="quiz-content" id="quizContent">
      <!-- ì¸ë¬¼íŒŒì•… -->
      <div class="category-section">
        <div class="category-title">ğŸ‘¤ ì¸ë¬¼íŒŒì•…</div>
        <div class="question-box">
          <div class="question-text">1. ì–´ë¦° ì•Œë² ë¥´íŠ¸ì˜ í˜¸ê¸°ì‹¬ì— ë¶ˆì„ ì§€í•€ ë¬¼ê±´ì€ ë¬´ì—‡ì¸ê°€ìš”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q1')">â‘  ë§ì›ê²½</div>
            <div class="option" onclick="selectOption(this, 'q1')">â‘¡ ë‚˜ì¹¨ë°˜</div>
            <div class="option" onclick="selectOption(this, 'q1')">â‘¢ ì‹œê³„</div>
            <div class="option" onclick="selectOption(this, 'q1')">â‘£ ë‹ë³´ê¸°</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">2. ì•Œë² ë¥´íŠ¸ê°€ ëŒ€í•™ ì¡¸ì—… í›„ ì²˜ìŒ ì–»ì€ ì§ì—…ì€ ë¬´ì—‡ì¸ê°€ìš”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q2')">â‘  ëŒ€í•™ êµìˆ˜</div>
            <div class="option" onclick="selectOption(this, 'q2')">â‘¡ íŠ¹í—ˆì²­ 3ë“±ê¸‰ ì‹¬ì‚¬ê´€</div>
            <div class="option" onclick="selectOption(this, 'q2')">â‘¢ ì—°êµ¬ì†Œ ê³¼í•™ì</div>
            <div class="option" onclick="selectOption(this, 'q2')">â‘£ ê³ ë“±í•™êµ êµì‚¬</div>
          </div>
        </div>
      </div>

      <!-- ë‚´ìš©ì¼ì¹˜ -->
      <div class="category-section">
        <div class="category-title">ğŸ“– ë‚´ìš©ì¼ì¹˜</div>
        <div class="question-box">
          <div class="question-text">3. íŠ¹ìˆ˜ ìƒëŒ€ì„± ì´ë¡ ì˜ í•µì‹¬ ë‚´ìš©ìœ¼ë¡œ ë§ëŠ” ê²ƒì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q3')">â‘  ì‹œê°„ì€ ëª¨ë“  ì‚¬ëŒì—ê²Œ ë˜‘ê°™ì´ íë¥¸ë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q3')">â‘¡ ë¹ ë¥´ê²Œ ì›€ì§ì´ëŠ” ì‚¬ëŒì—ê²ŒëŠ” ì‹œê°„ì´ ëŠë¦¬ê²Œ íë¥¸ë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q3')">â‘¢ ë¹›ì˜ ì†ë„ëŠ” ë³€í•  ìˆ˜ ìˆë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q3')">â‘£ ê³µê°„ì€ ì ˆëŒ€ì ì´ë‹¤</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">4. E=mcÂ² ê³µì‹ì´ ì˜ë¯¸í•˜ëŠ” ê²ƒì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q4')">â‘  ë¬¼ì§ˆê³¼ ì—ë„ˆì§€ëŠ” ì™„ì „íˆ ë‹¤ë¥´ë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q4')">â‘¡ ë¬¼ì§ˆì€ ê³§ ì—ë„ˆì§€ì´ê³ , ì—ë„ˆì§€ëŠ” ê³§ ë¬¼ì§ˆì´ë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q4')">â‘¢ ë¹›ì˜ ì†ë„ëŠ” ë¬´í•œí•˜ë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q4')">â‘£ ì§ˆëŸ‰ì€ ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤</div>
          </div>
        </div>
      </div>

      <!-- ë‚´ìš©êµ¬ì¡° -->
      <div class="category-section">
        <div class="category-title">ğŸ”— ë‚´ìš©êµ¬ì¡°</div>
        <div class="question-box">
          <div class="question-text">5. ì´ ì´ì•¼ê¸°ì˜ ì„¸ ê°€ì§€ ê°ˆë“± ì¤‘ 'ìœ¤ë¦¬ì  ê°ˆë“±'ì— í•´ë‹¹í•˜ëŠ” ê²ƒì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q5')">â‘  ëŠë¦° ì•„ì´ë¼ëŠ” í¸ê²¬ê³¼ ìì‹ ë§Œì˜ ë°©ì‹</div>
            <div class="option" onclick="selectOption(this, 'q5')">â‘¡ ê¸°ì¡´ ë¬¼ë¦¬í•™ê³¼ í˜ëª…ì  ì´ë¡  ì‚¬ì´ì˜ ëŒ€ë¦½</div>
            <div class="option" onclick="selectOption(this, 'q5')">â‘¢ í•µë¬´ê¸°ì˜ íŒŒê´´ì  ê²°ê³¼ì™€ í‰í™”ë¥¼ í–¥í•œ ì–‘ì‹¬ ì‚¬ì´</div>
            <div class="option" onclick="selectOption(this, 'q5')">â‘£ í•™êµ ì„±ì ê³¼ ì¬ëŠ¥ ì‚¬ì´ì˜ ê°ˆë“±</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">6. 1905ë…„ì´ 'ê¸°ì ì˜ í•´'ë¼ ë¶ˆë¦¬ëŠ” ì´ìœ ëŠ”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q6')">â‘  ì•„ì¸ìŠˆíƒ€ì¸ì´ íƒœì–´ë‚œ í•´</div>
            <div class="option" onclick="selectOption(this, 'q6')">â‘¡ ë…¸ë²¨ìƒì„ ë°›ì€ í•´</div>
            <div class="option" onclick="selectOption(this, 'q6')">â‘¢ ë„¤ í¸ì˜ í˜ëª…ì  ë…¼ë¬¸ì„ ë°œí‘œí•œ í•´</div>
            <div class="option" onclick="selectOption(this, 'q6')">â‘£ íŠ¹í—ˆì²­ì— ì·¨ì§í•œ í•´</div>
          </div>
        </div>
      </div>

      <!-- ë‚´ìš©ì–´íœ˜ -->
      <div class="category-section">
        <div class="category-title">ğŸ“š ë‚´ìš©ì–´íœ˜</div>
        <div class="question-box">
          <div class="question-text">7. "ìƒìƒë ¥ì€ ì§€ì‹ë³´ë‹¤ ì¤‘ìš”í•˜ë‹¤"ë¼ëŠ” ë§ì˜ ì˜ë¯¸ë¡œ ì ì ˆí•œ ê²ƒì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q7')">â‘  ê³µë¶€ë¥¼ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q7')">â‘¡ ì§€ì‹ì€ í•œê³„ê°€ ìˆì§€ë§Œ ìƒìƒë ¥ì€ ì„¸ìƒì˜ ëª¨ë“  ê²ƒì„ í’ˆì„ ìˆ˜ ìˆë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q7')">â‘¢ ìƒìƒë§Œ í•˜ë©´ ëª¨ë“  ê²ƒì„ ì´ë£° ìˆ˜ ìˆë‹¤</div>
            <div class="option" onclick="selectOption(this, 'q7')">â‘£ ê³¼í•™ìì—ê²Œ ìƒìƒë ¥ì€ í•„ìš” ì—†ë‹¤</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">8. "ì‹ ì€ ì£¼ì‚¬ìœ„ë¥¼ ë˜ì§€ì§€ ì•ŠëŠ”ë‹¤"ë¼ëŠ” ì•„ì¸ìŠˆíƒ€ì¸ì˜ ë§ì´ ë°˜ëŒ€í•œ ê²ƒì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q8')">â‘  ìƒëŒ€ì„± ì´ë¡ </div>
            <div class="option" onclick="selectOption(this, 'q8')">â‘¡ ì–‘ìì—­í•™ì˜ ë¶ˆí™•ì •ì„± ì›ë¦¬</div>
            <div class="option" onclick="selectOption(this, 'q8')">â‘¢ ë‰´í„´ì˜ ì—­í•™</div>
            <div class="option" onclick="selectOption(this, 'q8')">â‘£ ì¤‘ë ¥ì˜ ì¡´ì¬</div>
          </div>
        </div>
      </div>

      <!-- ë‚´ìš©ì¶”ë¡  -->
      <div class="category-section">
        <div class="category-title">ğŸ” ë‚´ìš©ì¶”ë¡ </div>
        <div class="question-box">
          <div class="question-text">9. ì•„ì¸ìŠˆíƒ€ì¸ì´ ë£¨ìŠ¤ë²¨íŠ¸ ëŒ€í†µë ¹ì—ê²Œ í¸ì§€ë¥¼ ì“´ ì´ìœ ì™€ ê·¸ ê²°ê³¼ëŠ”?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q9')">â‘  í‰í™”ë¥¼ ìœ„í•´ â†’ ë…¸ë²¨ í‰í™”ìƒ ìˆ˜ìƒ</div>
            <div class="option" onclick="selectOption(this, 'q9')">â‘¡ ë‚˜ì¹˜ê°€ ë¨¼ì € í•µë¬´ê¸°ë¥¼ ê°–ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ â†’ ë§¨í•´íŠ¼ í”„ë¡œì íŠ¸ì˜ ì‹œë°œì </div>
            <div class="option" onclick="selectOption(this, 'q9')">â‘¢ ì—°êµ¬ ìê¸ˆì„ ìš”ì²­í•˜ê¸° ìœ„í•´ â†’ í”„ë¦°ìŠ¤í„´ ì—°êµ¬ì†Œ ì„¤ë¦½</div>
            <div class="option" onclick="selectOption(this, 'q9')">â‘£ ë¯¸êµ­ ì‹œë¯¼ê¶Œì„ ì–»ê¸° ìœ„í•´ â†’ ì‹œë¯¼ê¶Œ ì·¨ë“</div>
          </div>
        </div>
        <div class="question-box">
          <div class="question-text">10. ì•„ì¸ìŠˆíƒ€ì¸ì´ ì¸ë¥˜ì—ê²Œ ë‚¨ê¸´ ê°€ì¥ ìœ„ëŒ€í•œ ìœ ì‚°ì€?</div>
          <div class="options">
            <div class="option" onclick="selectOption(this, 'q10')">â‘  E=mcÂ² ê³µì‹ ìì²´</div>
            <div class="option" onclick="selectOption(this, 'q10')">â‘¡ 'ì§ˆë¬¸í•˜ëŠ” ìš©ê¸°'ì™€ í˜¸ê¸°ì‹¬</div>
            <div class="option" onclick="selectOption(this, 'q10')">â‘¢ ì›ìí­íƒ„ ê°œë°œ</div>
            <div class="option" onclick="selectOption(this, 'q10')">â‘£ ë…¸ë²¨ìƒ ìƒê¸ˆ</div>
          </div>
        </div>
      </div>

      <button class="submit-btn" onclick="submitQuiz()">ê²°ê³¼ í™•ì¸í•˜ê¸°</button>
    </div>

    <!-- ê²°ê³¼ ì„¹ì…˜ -->
    <div class="result-section" id="resultSection">
      <h2 class="result-title">ğŸ”¬ í€´ì¦ˆ ê²°ê³¼</h2>
      <div class="score-display"><span id="totalScore">0</span><span>/50ì </span></div>

      <div class="radar-container">
        <canvas id="radarChart" width="400" height="400"></canvas>
      </div>

      <div class="category-scores">
        <div class="category-score-item">
          <div class="label">ì¸ë¬¼íŒŒì•…</div>
          <div class="score" id="score1">0</div>
        </div>
        <div class="category-score-item">
          <div class="label">ë‚´ìš©ì¼ì¹˜</div>
          <div class="score" id="score2">0</div>
        </div>
        <div class="category-score-item">
          <div class="label">ë‚´ìš©êµ¬ì¡°</div>
          <div class="score" id="score3">0</div>
        </div>
        <div class="category-score-item">
          <div class="label">ë‚´ìš©ì–´íœ˜</div>
          <div class="score" id="score4">0</div>
        </div>
        <div class="category-score-item">
          <div class="label">ë‚´ìš©ì¶”ë¡ </div>
          <div class="score" id="score5">0</div>
        </div>
      </div>

      <button class="back-btn" onclick="goBack()">ëŒì•„ê°€ê¸°</button>
    </div>
  </div>

  <script>
    const answers = {
      q1: 'â‘¡ ë‚˜ì¹¨ë°˜',
      q2: 'â‘¡ íŠ¹í—ˆì²­ 3ë“±ê¸‰ ì‹¬ì‚¬ê´€',
      q3: 'â‘¡ ë¹ ë¥´ê²Œ ì›€ì§ì´ëŠ” ì‚¬ëŒì—ê²ŒëŠ” ì‹œê°„ì´ ëŠë¦¬ê²Œ íë¥¸ë‹¤',
      q4: 'â‘¡ ë¬¼ì§ˆì€ ê³§ ì—ë„ˆì§€ì´ê³ , ì—ë„ˆì§€ëŠ” ê³§ ë¬¼ì§ˆì´ë‹¤',
      q5: 'â‘¢ í•µë¬´ê¸°ì˜ íŒŒê´´ì  ê²°ê³¼ì™€ í‰í™”ë¥¼ í–¥í•œ ì–‘ì‹¬ ì‚¬ì´',
      q6: 'â‘¢ ë„¤ í¸ì˜ í˜ëª…ì  ë…¼ë¬¸ì„ ë°œí‘œí•œ í•´',
      q7: 'â‘¡ ì§€ì‹ì€ í•œê³„ê°€ ìˆì§€ë§Œ ìƒìƒë ¥ì€ ì„¸ìƒì˜ ëª¨ë“  ê²ƒì„ í’ˆì„ ìˆ˜ ìˆë‹¤',
      q8: 'â‘¡ ì–‘ìì—­í•™ì˜ ë¶ˆí™•ì •ì„± ì›ë¦¬',
      q9: 'â‘¡ ë‚˜ì¹˜ê°€ ë¨¼ì € í•µë¬´ê¸°ë¥¼ ê°–ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ â†’ ë§¨í•´íŠ¼ í”„ë¡œì íŠ¸ì˜ ì‹œë°œì ',
      q10: 'â‘¡ 'ì§ˆë¬¸í•˜ëŠ” ìš©ê¸°'ì™€ í˜¸ê¸°ì‹¬'
    };

    const userAnswers = {};
    let userName = '';
    let userGrade = '';

    function selectOption(element, questionId) {
      const options = element.parentElement.querySelectorAll('.option');
      options.forEach(opt => opt.classList.remove('selected'));
      element.classList.add('selected');
      userAnswers[questionId] = element.textContent;
    }

    function startQuiz() {
      const grade = document.getElementById('grade').value;
      const name = document.getElementById('name').value.trim();

      if (!grade) {
        alert('í•™ë…„ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
        return;
      }
      if (!name) {
        alert('ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
      }

      userName = name;
      userGrade = grade;

      document.getElementById('inputForm').style.display = 'none';
      document.getElementById('quizContent').style.display = 'block';
    }

    function submitQuiz() {
      const totalQuestions = Object.keys(answers).length;
      const answeredQuestions = Object.keys(userAnswers).length;

      if (answeredQuestions < totalQuestions) {
        alert('ëª¨ë“  ë¬¸ì œì— ë‹µí•´ì£¼ì„¸ìš”.');
        return;
      }

      const categoryScores = [0, 0, 0, 0, 0];

      if (userAnswers.q1 === answers.q1) categoryScores[0]++;
      if (userAnswers.q2 === answers.q2) categoryScores[0]++;
      if (userAnswers.q3 === answers.q3) categoryScores[1]++;
      if (userAnswers.q4 === answers.q4) categoryScores[1]++;
      if (userAnswers.q5 === answers.q5) categoryScores[2]++;
      if (userAnswers.q6 === answers.q6) categoryScores[2]++;
      if (userAnswers.q7 === answers.q7) categoryScores[3]++;
      if (userAnswers.q8 === answers.q8) categoryScores[3]++;
      if (userAnswers.q9 === answers.q9) categoryScores[4]++;
      if (userAnswers.q10 === answers.q10) categoryScores[4]++;

      const convertedScores = categoryScores.map(score => {
        if (score === 2) return 10;
        if (score === 1) return 5;
        return 1;
      });

      const totalScore = convertedScores.reduce((a, b) => a + b, 0);

      document.getElementById('quizContent').style.display = 'none';
      document.getElementById('resultSection').style.display = 'block';

      document.getElementById('totalScore').textContent = totalScore;
      document.getElementById('score1').textContent = convertedScores[0] + 'ì ';
      document.getElementById('score2').textContent = convertedScores[1] + 'ì ';
      document.getElementById('score3').textContent = convertedScores[2] + 'ì ';
      document.getElementById('score4').textContent = convertedScores[3] + 'ì ';
      document.getElementById('score5').textContent = convertedScores[4] + 'ì ';

      drawRadarChart(convertedScores);
      saveResult(convertedScores, totalScore);
    }

    function drawRadarChart(scores) {
      const canvas = document.getElementById('radarChart');
      const ctx = canvas.getContext('2d');
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const maxRadius = 150;

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const categories = ['ì¸ë¬¼íŒŒì•…', 'ë‚´ìš©ì¼ì¹˜', 'ë‚´ìš©êµ¬ì¡°', 'ë‚´ìš©ì–´íœ˜', 'ë‚´ìš©ì¶”ë¡ '];
      const numCategories = categories.length;
      const angleStep = (2 * Math.PI) / numCategories;
      const startAngle = -Math.PI / 2;

      for (let level = 1; level <= 5; level++) {
        const radius = (maxRadius / 5) * level;
        ctx.beginPath();
        for (let i = 0; i <= numCategories; i++) {
          const angle = startAngle + i * angleStep;
          const x = centerX + radius * Math.cos(angle);
          const y = centerY + radius * Math.sin(angle);
          if (i === 0) ctx.moveTo(x, y);
          else ctx.lineTo(x, y);
        }
        ctx.closePath();
        ctx.strokeStyle = '#e0e0e0';
        ctx.stroke();
      }

      for (let i = 0; i < numCategories; i++) {
        const angle = startAngle + i * angleStep;
        const x = centerX + maxRadius * Math.cos(angle);
        const y = centerY + maxRadius * Math.sin(angle);
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(x, y);
        ctx.strokeStyle = '#ccc';
        ctx.stroke();

        const labelRadius = maxRadius + 25;
        const labelX = centerX + labelRadius * Math.cos(angle);
        const labelY = centerY + labelRadius * Math.sin(angle);
        ctx.fillStyle = '#3f51b5';
        ctx.font = 'bold 14px Noto Sans KR';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(categories[i], labelX, labelY);
      }

      ctx.beginPath();
      for (let i = 0; i <= numCategories; i++) {
        const idx = i % numCategories;
        const angle = startAngle + idx * angleStep;
        const radius = (scores[idx] / 10) * maxRadius;
        const x = centerX + radius * Math.cos(angle);
        const y = centerY + radius * Math.sin(angle);
        if (i === 0) ctx.moveTo(x, y);
        else ctx.lineTo(x, y);
      }
      ctx.closePath();
      ctx.fillStyle = 'rgba(63, 81, 181, 0.3)';
      ctx.fill();
      ctx.strokeStyle = '#3f51b5';
      ctx.lineWidth = 2;
      ctx.stroke();

      for (let i = 0; i < numCategories; i++) {
        const angle = startAngle + i * angleStep;
        const radius = (scores[i] / 10) * maxRadius;
        const x = centerX + radius * Math.cos(angle);
        const y = centerY + radius * Math.sin(angle);
        ctx.beginPath();
        ctx.arc(x, y, 6, 0, 2 * Math.PI);
        ctx.fillStyle = '#1a237e';
        ctx.fill();
      }
    }

    async function saveResult(scores, totalScore) {
      try {
        const response = await fetch('/api/creative-quiz/save', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            grade: userGrade,
            name: userName,
            storyId: 'worldperson02',
            season: 'season1',
            scores: scores,
            totalScore: totalScore
          })
        });
        const data = await response.json();
        console.log('ì €ì¥ ì™„ë£Œ:', data);
      } catch (error) {
        console.error('ì €ì¥ ì‹¤íŒ¨:', error);
      }
    }

    function goBack() {
      window.location.href = 'worldperson02_season1.html';
    }
  </script>
</body>
</html>
