<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>🌴 깊은 정글 시즌3 - 암녹림의 심장</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Gmarket Sans", "Noto Sans KR", sans-serif;
      overflow-x: hidden;
      background: #1a1a1a;
    }

    /* 고정 지도 캔버스 */
    #map-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_main.jpg);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 1s ease-in-out;
      z-index: 1;
    }

    #map-canvas {
      display: none;
    }

    /* 스크롤 가능한 콘텐츠 */
    #content {
      position: relative;
      z-index: 2;
      pointer-events: none;
    }

    .story-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 60px 120px;
      pointer-events: none;
    }

    /* 홀수 섹션은 왼쪽 */
    .story-section:nth-child(odd) {
      justify-content: flex-start;
    }

    /* 짝수 섹션은 오른쪽 */
    .story-section:nth-child(even) {
      justify-content: flex-end;
    }

    .story-card {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(15px);
      padding: 40px;
      border-radius: 24px;
      max-width: 550px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transform: translateX(100px);
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
      pointer-events: auto;
    }

    /* 왼쪽에서 나오는 카드 */
    .story-section:nth-child(odd) .story-card {
      transform: translateX(-100px);
    }

    /* 오른쪽에서 나오는 카드 */
    .story-section:nth-child(even) .story-card {
      transform: translateX(100px);
    }

    .story-card.active {
      transform: translateX(0);
      opacity: 1;
    }

    .story-card .chapter {
      display: inline-block;
      padding: 8px 20px;
      background: linear-gradient(135deg, #27ae60 0%, #1e8449 100%);
      color: white;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 16px;
    }

    .story-card h2 {
      font-size: 28px;
      color: #1a1a1a;
      font-weight: 700;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      line-height: 1.4;
      text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
    }

    .story-card .emoji {
      font-size: 40px;
    }

    .story-card .story-text {
      font-size: 16px;
      line-height: 1.9;
      color: #1a1a1a;
      font-weight: 500;
      margin-bottom: 24px;
      white-space: pre-line;
      max-height: 400px;
      overflow-y: auto;
      padding-right: 10px;
    }

    .story-card .story-text::-webkit-scrollbar {
      width: 6px;
    }

    .story-card .story-text::-webkit-scrollbar-thumb {
      background: #27ae60;
      border-radius: 3px;
    }

    /* 시작 섹션 */
    .intro-section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 60px;
    }

    .intro-content {
      pointer-events: auto;
    }

    .intro-content h1 {
      font-size: 42px;
      color: #2c3e50;
      margin-bottom: 16px;
      line-height: 1.4;
    }

    .intro-content .subtitle {
      font-size: 18px;
      color: #7f8c8d;
      margin-bottom: 32px;
      line-height: 1.8;
    }

    .intro-content .scroll-hint {
      font-size: 24px;
      color: #ffffff;
      font-weight: 700;
      text-shadow:
        0 0 10px rgba(0, 0, 0, 0.8),
        0 0 20px rgba(0, 0, 0, 0.6),
        2px 2px 4px rgba(0, 0, 0, 0.9);
      animation: bounce 2s infinite;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* 뒤로가기 버튼 */
    .back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border: none;
      padding: 12px 20px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      z-index: 1000;
      pointer-events: auto;
    }

    .back-btn:hover {
      background: #27ae60;
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(39, 174, 96, 0.4);
    }

    /* 챕터 인디케이터 */
    .chapter-indicator {
      position: fixed;
      top: 20px;
      right: 20px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      padding: 12px 24px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      color: #27ae60;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
      z-index: 1000;
      pointer-events: none;
    }

    /* 프로그레스 바 */
    .progress-bar-container {
      position: fixed;
      top: 70px;
      right: 20px;
      width: 200px;
      height: 8px;
      background: rgba(255, 255, 255, 0.3);
      border-radius: 10px;
      overflow: hidden;
      z-index: 1000;
      pointer-events: none;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(90deg, #27ae60 0%, #1e8449 100%);
      border-radius: 10px;
      width: 0%;
      transition: width 0.3s ease;
    }

    /* 반응형 */
    @media (max-width: 768px) {
      .story-section {
        padding: 40px 20px;
      }
      .story-card {
        max-width: 100%;
        padding: 30px 24px;
      }
      .story-card h2 {
        font-size: 24px;
      }
      .story-card .story-text {
        font-size: 15px;
      }
      .intro-content h1 {
        font-size: 32px;
      }
      .chapter-indicator,
      .progress-bar-container {
        display: none;
      }
    }
  </style>
</head>
<body>
  <button class="back-btn" onclick="window.history.back()">← 돌아가기</button>
  <div class="chapter-indicator" id="chapter-indicator">🌴 시즌3 시작</div>
  <div class="progress-bar-container">
    <div class="progress-bar" id="progress-bar"></div>
  </div>

  <div id="map-container">
    <canvas id="map-canvas"></canvas>
  </div>

  <div id="content">
    <!-- 시작 화면 -->
    <section class="intro-section">
      <div class="intro-content">
        <h1>🌴 시즌3<br>암녹림의 심장<br>잊힌 균형의 마지막 수호자</h1>
        <p class="subtitle">
          정글 최심부에서 봉인된 존재가 깨어나고 있다.<br>
          마지막 수호자를 구해야만 진정한 균형이 완성된다...<br><br>
          <strong>아래로 스크롤하여 이야기를 시작하세요</strong>
        </p>
        <p class="scroll-hint">↓ 스크롤 ↓</p>
      </div>
    </section>

    <!-- PART 1 -->
    <section class="story-section" data-chapter="Part 1">
      <div class="story-card">
        <div class="chapter">PART 1</div>
        <h2><span class="emoji">⚡</span> 깊어지는 균열, 정글의 '두 번째 흔들림'</h2>
        <div class="story-text">도시의 균형이 회복된 지 일주일도 지나지 않은 어느 날,
라온은 새벽녘에 갑작스러운 진동으로 눈을 떴다.
땅이 단순히 흔들리는 것이 아니라, 정글의 심장 깊은 곳에서 일정한 규칙을 갖고 울리는 맥박처럼 느껴졌다.

처음에는 기분 탓이라고 생각했다.
하지만 아이들이 도시의 동쪽에 있는 전망대로 올라가자,
정글 전체가 보이지 않는 거대한 심장에 의해 미세하게 뒤틀리는 모습이 선명하게 보였다.

정령 지도자는 평소보다 훨씬 더 날카로운 눈빛으로 숲을 바라보았다.
그의 목소리는 흔들림 속에서도 단단했다.

"이건 도시가 깨어날 때 나타나는 자연스러운 진동이 아니다.
정글의 깊은 곳, 우리가 손대지 못했던 구역… '암녹림'이 움직이기 시작했다."

하리는 숨을 삼키며 물었다.
"거기… 그 존재가 있었던 곳이죠? 도시가 봉인된 이유였던…"

정령은 천천히 고개를 끄덕였다.
"그 존재는 정글의 수호자였으나, 동시에 정글 자체를 무너뜨릴 수도 있는 힘을 지닌 존재였다.
오랫동안 잠들어 있었지만… 봉인이 약해지고 있다.
이렇게 규칙적인 '맥동'은 깨어남을 의미한다."

라온은 묘한 죄책감과 두려움을 동시에 느꼈다.
자신들이 도시를 되살렸다는 사실이 오히려 더 큰 존재를 자극한 건 아닐까.
아이들은 서로의 얼굴을 보며 다짐했다.
이제는 되돌릴 수 없는 길에 들어섰다는 걸 알고 있었다.</div>
      </div>
    </section>

    <!-- PART 2 -->
    <section class="story-section" data-chapter="Part 2">
      <div class="story-card">
        <div class="chapter">PART 2</div>
        <h2><span class="emoji">🗿</span> 암녹림으로 향하는 길, 사라진 문명의 잔해</h2>
        <div class="story-text">정령의 안내를 따라 도착한 정글 북부 고원 지대는
시즌 1과 2에서 거쳐온 어떤 구역보다도 분위기가 달랐다.

공기가 무거웠다.
정글을 이루는 식물들은 과도하게 단단해져,
줄기는 돌처럼 굳어 있었고 잎사귀는 마치 얇은 금속을 단단히 구부린 것 같은 질감을 띠고 있었다.
아이들이 발을 디딜 때마다 금속 같은 울림이 '짤그랑' 하고 울렸다.

준오가 주변을 살피며 말했다.
"여긴… 생물이 아니라 기계 같아. 자연인데 자연이 아닌…"

정령은 작은 숨을 내쉬었다.
"암녹림은 오래전 인간들이 정글의 힘을 빼앗아
'자연을 조종하는 구조물'을 만들던 실험 기지였다.
그 구조물이 폭주하면서 정글은 스스로를 지키기 위해 모든 것을 삼켜버렸고,
그 잔해가 이 세계의 일부가 되었지."

길을 따라 내려가자 바닥에 묻힌 기계 잔해들이 모습을 드러내기 시작했다.
고대의 돌탑은 이끼에 뒤덮여 있었지만,
그 사이사이에서 기묘한 초록빛이 새어 나왔다.

하리는 그 빛을 손전등으로 비추며 중얼거렸다.
"아직도 작동한다는 거야…?"

정령은 무겁게 대답했다.
"정글이 삼켜버렸기에 지금까지 유지된 것이다.
지금 흔들리는 건… 그 내부에 있는 '그 존재'가 완전히 깨어나기 직전이라는 증거다."

라온의 등줄기엔 차가운 한기가 스쳐 지나갔다.</div>
      </div>
    </section>

    <!-- PART 3 -->
    <section class="story-section" data-chapter="Part 3">
      <div class="story-card">
        <div class="chapter">PART 3</div>
        <h2><span class="emoji">💎</span> '암록수정'의 폭주, 정글을 집어삼키는 빛</h2>
        <div class="story-text">길이 깊어질수록 땅 위로 솟아오른 초록빛 수정덩어리들이 곳곳에서 나타났다.
처음엔 조용히 빛나고 있었지만 얼마 지나지 않아
규칙적인 박동을 내며 주변 공기를 진동시키기 시작했다.

하리가 손전등을 비추자 수정 내부에서
그림자 같은 생명체가 꿈틀거리는 모습이 보였다.
눈을 가진 것도 아닌데 살아 움직이는 감각이 뚜렷했다.

"저기… 안에 뭐가 있어."
하리의 목소리는 떨리고 있었다.

갑작스레 수정이 폭발하듯 '쨍' 하고 깨지더니
빛의 파편이 주변 식물들을 휘감기 시작했다.

나무는 초 단위로 자라나 천장을 찌르는 듯하고,
옆의 수풀은 녹아내리며 검은 액체로 변했다.
정글이 단숨에 생명력과 죽음 모두를 흡수하는 모습은
아이들이 상상하던 그 어떤 것도 아니었다.

정령은 떨리는 목소리로 말했다.
"…이건 단순한 흔들림이 아니다.
봉인이 거의 풀렸다.
'그 존재'의 힘이 정글로 흘러나오기 시작하고 있다."

아이들은 서로를 붙잡았다.
정글은 더 이상 그들이 알고 있던 생명력 넘치는 공간이 아니었다.
이제 정글은 경고하고 있었다.</div>
      </div>
    </section>

    <!-- PART 4 -->
    <section class="story-section" data-chapter="Part 4">
      <div class="story-card">
        <div class="chapter">PART 4</div>
        <h2><span class="emoji">🚪</span> 암녹림의 관문, 빛과 그림자가 뒤얽힌 문</h2>
        <div class="story-text">정글의 최심부에 다다른 순간,
그들은 거대한 관문을 마주했다.

그 문은 자연, 돌, 금속이 서로 얽혀
마치 살아 있는 생물처럼 움직이고 있었다.
문 가장자리의 덩굴은 금속처럼 반짝이며,
돌 표면에는 기계 설계도 같은 문양이 새겨져 있었다.

문 중앙에는 두 개의 문양이 있었다.

하나는 생명·성장의 문양 — 부드러운 곡선, 초록빛

다른 하나는 멸망·소멸의 문양 — 날카로운 각, 검은 그림자빛

라온은 손끝을 올리며 말했다.
"둘 중 하나를 선택하는 게 아니야?"

정령은 고개를 저었다.
"균형은 어느 한 편이 선택될 때 무너진다.
정글은 생명과 죽음이 함께 있어야 비로소 유지된다.
이 문은 그 진실을 시험하는 문이지."

세 친구가 문양의 순서를 맞추자,
문은 천천히 열렸고 내부에서
짙은 암녹색의 기운이 천천히 흘러나왔다.</div>
      </div>
    </section>

    <!-- PART 5 -->
    <section class="story-section" data-chapter="Part 5">
      <div class="story-card">
        <div class="chapter">PART 5</div>
        <h2><span class="emoji">👥</span> 기억의 숲, 과거를 되풀이하는 '환영 시험'</h2>
        <div class="story-text">문 안쪽은 기괴한 숲이었다.
나무들은 모두 검은빛과 초록빛이 뒤섞인 색으로 비틀려 있었고,
가지가 마치 살아 움직이는 듯
땅을 긁으며 낮은 울음소리를 냈다.

발을 내딛자,
아이들은 먼 과거의 목소리들을 듣기 시작했다.

"더 많은 힘을 가져와라."
"정령 따위 우리 손에 맡기면 된다."
"정글의 기운을 무기로 만들 수 있다!"

눈앞이 갑자기 밝아지며
과거 인간들의 환영이 나타났다.
그들은 정령들을 붙잡아 실험실로 끌고 가고,
정글의 생명력을 강제로 채취하고 있었다.

준오는 주먹을 꽉 쥐었다.
"정말… 이런 짓을 했던 거야?"

하리는 고개를 끄덕였다.
"도시가 스스로 봉인된 이유… 바로 이거였어."

그 순간 환영 속 인간들이
아이들을 향해 돌진했다.

라온은 심장이 터질 듯했지만
두 친구의 손을 꽉 잡고 외쳤다.

"우리는 그 사람들과 달라!
우리는 정글을 되살리기 위해 왔어!"

그 외침과 함께
환영은 바람처럼 사라졌다.
그리고 어둠 속에서 한 줄기 초록빛 길이 열렸다.</div>
      </div>
    </section>

    <!-- PART 6 -->
    <section class="story-section" data-chapter="Part 6">
      <div class="story-card">
        <div class="chapter">PART 6</div>
        <h2><span class="emoji">🐉</span> 녹암룡의 속박, 고대 수호자의 진정한 모습</h2>
        <div class="story-text">기억의 숲을 빠져나오자
거대한 동굴이 입을 벌리고 있었다.

동굴 중앙에는,
정글의 전설 속 존재— 녹암룡(綠岩龍)—이
고통스러운 자세로 몸을 웅크리고 있었다.

그의 몸은
돌과 식물, 금속의 성질이 모두 뒤섞인 형태였다.
비늘 대신 두꺼운 이끼가 자라 있었고,
심장 부분에서는 불규칙한 초록빛이 미친 듯이 튀어 나왔다.

라온은 그 거대한 존재의 울부짖음을 들으며
단순한 분노가 아니라
오랫동안 억눌린 고통이라는 걸 느꼈다.

정령이 낮게 말했다.
"녹암룡은 정글을 지키던 마지막 수호자였다.
하지만 인간들의 실험으로 그의 정신은 분리되고,
힘은 뒤틀렸다.
그 봉인이 무너지며… 지금의 고통이 되어 나타나는 거다."

아이들은 두려움과 슬픔을 동시에 느꼈다.
그들은 괴물이 아니라
구조해야 할 존재를 보고 있었다.</div>
      </div>
    </section>

    <!-- PART 7 -->
    <section class="story-section" data-chapter="Part 7">
      <div class="story-card">
        <div class="chapter">PART 7</div>
        <h2><span class="emoji">🔮</span> '균형의 파편'을 모으는 세 갈래의 길</h2>
        <div class="story-text">정령은 녹암룡을 구하려면
세 가지 파편이 필요하다고 말했다.

생명의 파편

조화의 파편

그림자의 파편

이 파편들은 각각 암녹림 깊숙한 세 구역에 존재했다.

🔸 생명의 숲

모든 식물이 폭주해
한순간에도 덩굴이 수 미터씩 자라고
통로를 막아버리는 미친 성장의 공간.

라온은 이런 폭주 속에서
식물의 본래 리듬을 찾는 퍼즐을 풀어야 했다.

🔸 조화의 지역

모든 것이 완벽해 보이지만,
한 걸음 움직일 때마다 풍경의 위치가 미묘하게 바뀌는
'균형 속의 불균형'이 숨어있는 공간.

하리는 정글의 숨결을 맞추는 법을 배우며 균형 퍼즐을 해결했다.

🔸 그림자의 골짜기

빛이 거의 없는 곳에서
자신의 그림자가 독립적인 존재처럼 행동하는
공포의 공간.

준오는 자신의 그림자가 나타내는 두려움과 마주해야 했다.

세 친구는 각각의 시련을 통과하며
마침내 세 파편을 손에 넣었다.</div>
      </div>
    </section>

    <!-- PART 8 -->
    <section class="story-section" data-chapter="Part 8">
      <div class="story-card">
        <div class="chapter">PART 8</div>
        <h2><span class="emoji">💥</span> 복귀, 그리고 녹암룡의 폭주</h2>
        <div class="story-text">세 파편을 모두 모아 돌아온 순간,
녹암룡은 이미 한계에 다다라 있었다.

심장 부근의 초록빛이 폭주해
동굴 전체에 강력한 진동을 내뿜었다.

천장이 흔들리며 돌이 떨어지고
바닥에서는 균열이 거미줄처럼 퍼졌다.

라온이 외쳤다.
"지금 바로 파편을 사용해야 해!"

하지만 녹암룡은 아이들을 적으로 착각한 듯
입에서 거대한 초록빛 파동을 내뿜었다.
세 친구는 가까스로 몸을 피했다.

하리는 비명을 질렀다.
"우리가 함께하면 돼!
우린 이미 도시를 되살렸잖아! 포기하지 마!"

세 아이는 서로를 부축하며
마지막 힘을 끌어올렸다.</div>
      </div>
    </section>

    <!-- PART 9 -->
    <section class="story-section" data-chapter="Part 9">
      <div class="story-card">
        <div class="chapter">PART 9</div>
        <h2><span class="emoji">✨</span> '균형의 의식' 발동, 녹암룡을 구하다</h2>
        <div class="story-text">세 친구는 녹암룡 주변의 거대한 문양 위에
각자의 파편을 올려놓았다.

파편에서 나온 빛이 서로 얽히며
하나의 강력한 에메랄드빛 기둥이 형성되었다.

빛은 녹암룡의 몸 전체로 퍼져나갔고
그가 오랫동안 짊어지고 있던
뒤틀린 생명력, 억눌린 그림자, 잃어버린 조화가
서서히 분리되기 시작했다.

폭주하던 빛이 가라앉으며
녹암룡의 눈빛이 고요히 변화했다.

그의 목소리는 깊고 낮았지만,
확실히 슬픔과 감사가 섞여 있었다.

"…오랜 시간… 나는 혼자였다.
너희가… 날 다시 깨어나게 해주었다."

정글 전체가 마치 숨을 내쉬는 듯
안정된 초록빛으로 바뀌었다.</div>
      </div>
    </section>

    <!-- PART 10 -->
    <section class="story-section" data-chapter="Part 10">
      <div class="story-card">
        <div class="chapter">PART 10</div>
        <h2><span class="emoji">🌟</span> 정글의 진정한 마음, 새로운 수호자의 탄생</h2>
        <div class="story-text">정글은 완전히 회복되었다.
도시의 문양도, 정글 깊은 곳의 생명력도
모든 흐름이 처음으로 '조화'를 이루는 듯했다.

영혼들은 아이들 주위를 천천히 맴돌았고
녹암룡은 아이들을 향해 고개를 숙였다.

"정글은 이제 스스로 설 수 있다.
하지만 균형은 때때로 시험받게 된다.
너희는 이 정글을 지키는
새로운 수호자가 되어줄 수 있겠느냐?"

라온은 잠시 숨을 들이켰다가,
확신에 찬 미소를 지었다.

"우리가 배운 건 하나예요.
정글이 살아 있으면… 우리도 살아 있다는 거예요.
우린 도울 준비가 됐어요."

하리와 준오도 고개를 끄덕였다.

그 순간,
정글 전체가 부드러운 초록빛으로 물들었고
하늘까지 이어지는 거대한 녹색 파동이
새로운 시대의 시작을 알렸다.

정글은
다시 한 번 꿈에서 깨어났다.
그리고 이번에는, 그 꿈을 지켜줄 이들이 있었다.</div>
      </div>
    </section>

    <!-- 엔딩 -->
    <section class="intro-section">
      <div class="intro-content">
        <h1>🎉 깊은 정글 이야기 완결!</h1>
        <p class="subtitle">
          정글의 균형이 완전히 회복되었습니다.<br>
          라온, 하리, 준오는 정글의 새로운 수호자가 되었습니다.<br><br>
          <strong>모든 이야기가 완성되었습니다</strong>
        </p>
        <button class="back-btn" onclick="goToMain()" style="position: static; margin-top: 20px; background: linear-gradient(135deg, #27ae60 0%, #1e8449 100%); color: white;">
          🏠 시즌1로 돌아가기
        </button>
      </div>
    </section>
  </div>

  <script>
    console.log('🚀 정글 시즌3 스크립트 시작');

    // 스크롤 핸들러
    function handleScroll() {
      // 인트로 섹션 처리
      const introSection = document.querySelector('.intro-section');
      if (introSection) {
        const introRect = introSection.getBoundingClientRect();
        if (introRect.top > 0) {
          document.getElementById('chapter-indicator').textContent = '🌴 시즌3 시작';
          const mapContainer = document.getElementById('map-container');
          mapContainer.style.backgroundImage = 'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_main.jpg)';
          document.getElementById('progress-bar').style.width = '0%';
          return;
        }
      }

      const sections = document.querySelectorAll('.story-section');
      const backgroundImages = [
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part1.jpg)',   // Part 1
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part2.jpg)',   // Part 2
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part3.jpg)',   // Part 3
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part4.jpg)',   // Part 4
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part5.jpg)',   // Part 5
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part6.jpg)',   // Part 6
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part7.jpg)',   // Part 7
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part8.jpg)',   // Part 8
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part9.jpg)',   // Part 9
        'url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s3_part10.jpg)'   // Part 10
      ];

      // 화면 중앙에 가장 가까운 섹션 찾기
      let closestSection = null;
      let closestDistance = Infinity;
      let closestIndex = -1;

      sections.forEach((section, index) => {
        const rect = section.getBoundingClientRect();
        const card = section.querySelector('.story-card');

        // 화면 중앙까지의 거리 계산
        const sectionCenter = rect.top + rect.height / 2;
        const screenCenter = window.innerHeight / 2;
        const distance = Math.abs(sectionCenter - screenCenter);

        // 가장 가까운 섹션 찾기
        if (distance < closestDistance) {
          closestDistance = distance;
          closestSection = section;
          closestIndex = index;
        }

        // 활성화 상태 업데이트
        if (rect.top < window.innerHeight * 0.6 && rect.bottom > window.innerHeight * 0.4) {
          card.classList.add('active');
        } else {
          card.classList.remove('active');
        }
      });

      // 가장 가까운 섹션의 배경 이미지 적용
      if (closestSection && closestIndex >= 0) {
        const chapterName = closestSection.dataset.chapter;
        document.getElementById('chapter-indicator').textContent = `🌴 ${chapterName}`;

        const currentBg = backgroundImages[closestIndex];
        const mapContainer = document.getElementById('map-container');

        // 현재 배경과 다르면 변경
        if (mapContainer.style.backgroundImage !== currentBg) {
          mapContainer.style.backgroundImage = currentBg;
        }

        // 프로그레스 바 업데이트
        const progress = ((closestIndex + 1) / sections.length) * 100;
        document.getElementById('progress-bar').style.width = `${progress}%`;
      }
    }

    // 초기화
    window.addEventListener('scroll', handleScroll);
    handleScroll();

    // 맨위로 스크롤 (부드럽게)
    function scrollToTop() {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    }

    // 메인으로 돌아가기
    function goToMain() {
      window.location.href = '/jungle_journey_season1.html';
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') scrollToTop();
    });

    console.log('✅ 정글 시즌3 스크립트 초기화 완료');
  </script>
</body>
</html>
