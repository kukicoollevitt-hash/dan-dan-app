<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Îã®Îã®Íµ≠Ïñ¥ BRAIN Î¨∏Ìï¥Ïõê | Î©îÏù∏</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />

  <!-- Open Graph Î©îÌÉÄ ÌÉúÍ∑∏ (Ïπ¥Ïπ¥Ïò§ÌÜ°, SNS Í≥µÏú†Ïö©) -->
  <meta property="og:title" content="Îã®Îã®Íµ≠Ïñ¥ BRAIN Î¨∏Ìï¥Ïõê" />
  <meta property="og:description" content="AI Í∏∞Î∞ò ÎßûÏ∂§Ìòï Íµ≠Ïñ¥ ÌïôÏäµ ÌîåÎû´Ìèº" />
  <meta property="og:image" content="https://dan-dan-app.onrender.com/images/brain-main-hero.jpg" />
  <meta property="og:url" content="https://dan-dan-app.onrender.com" />
  <meta property="og:type" content="website" />

  <!-- üéâ Confetti ÎùºÏù¥Î∏åÎü¨Î¶¨ -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    /* üîÑ Î°úÎî© Ïä§ÌîºÎÑà - Ïù∏ÎùºÏù∏ ÌÅ¨Î¶¨Ìã∞Ïª¨ CSS (Ï¶âÏãú Î°úÎìú) */
    #loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 99999;
      transition: opacity 0.5s ease;
      will-change: opacity;
    }

    #loading-overlay.fade-out {
      opacity: 0;
      pointer-events: none;
    }

    .spinner-container {
      background: rgba(255, 250, 243, 0.98);
      border: 2px solid rgba(139, 117, 87, 0.2);
      border-radius: 24px;
      padding: 50px 70px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
    }

    .spinner {
      width: 60px;
      height: 60px;
      border: 5px solid rgba(139, 117, 87, 0.2);
      border-top: 5px solid #8b7557;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
      will-change: transform;
      transform: translateZ(0);
    }

    .loading-text {
      color: #5a4a3a;
      font-size: 20px;
      font-weight: 700;
      font-family: "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    :root {
      --bg: #f2ede5;
      --panel: #fffaf3;
      --accent: #8b2f2f;
      --line: #e5d4c1;
      --text: #3b2a1a;
    }
    * { box-sizing: border-box; }

    /* üî• ÏïÑÏù¥Ìå®Îìú ÌÑ∞Ïπò ÎîúÎ†àÏù¥ Ï†úÍ±∞ */
    button, a, [onclick], .clickable, .tab, .menu-item, .study-room-item {
      touch-action: manipulation;
      -webkit-tap-highlight-color: transparent;
    }

body {
  margin: 0;
  min-height: 100vh;
  font-family: "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
  background: #f2ede5;   /* Í∏∞Î≥∏ Î∞∞Í≤ΩÏÉâÎßå ÎÇ®Í∏∞Í∏∞ (ÎπÑÎîîÏò§ Î°úÎî© Ïã§Ìå® ÏãúÏö©) */
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  position: relative;
  overflow-x: hidden;
  opacity: 1;
  transition: opacity 0.5s ease, background-image 0.8s ease;
}


/* üî• Î©îÎâ¥ Ï†ÑÏ≤¥Ïóê ÍπåÎäî MP4 Î∞∞Í≤Ω ÏòÅÏÉÅ */
.menu-bg-video {
  position: fixed;
  inset: 0;              /* top:0; right:0; bottom:0; left:0; ÏôÄ Í∞ôÏùå */
  width: 100%;
  height: 100%;
  object-fit: cover;     /* ÌôîÎ©¥ Í∞ÄÎìù Ï±ÑÏö∞Í∏∞ */
  z-index: -1;           /* Î™®Îì† ÎÇ¥Ïö© Îí§Î°ú Î≥¥ÎÇ¥Í∏∞ */
  pointer-events: auto;  /* ÌÅ¥Î¶≠ Í∞ÄÎä•ÌïòÍ≤å Î≥ÄÍ≤Ω */
  cursor: pointer;       /* ÎßàÏö∞Ïä§ Ïª§ÏÑúÎ•º Ìè¨Ïù∏ÌÑ∞Î°ú Î≥ÄÍ≤Ω */
}

    header {
      background: #f7f1e5;
      border-bottom: 3px solid #c58a45;
      padding: 8px 20px 10px;
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: flex-start;
      position: relative;
      z-index: 1;
    }
    .brand-title { font-size: 22px; font-weight: 700; color: #7f2b2b; }
    .brand-sub { font-size: 12px; color: #a57145; }

    /* üîπ Ìó§Îçî Ïò§Î•∏Ï™Ω(Ïú†Ï†ÄÏ†ïÎ≥¥ + Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäº) */
    .header-right {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .layout {
      display: grid;
  grid-template-columns: 220px 210px 220px 1fr;  /* üî• Ï≤´ Ïª¨Îüº Ìè≠Îßå 220pxÎ°ú ÌôïÎåÄ */
      min-height: calc(100vh - 65px);
      position: relative;
      z-index: 1;
    }
.col {
  border-right: 1px solid #e1d3c0;
  background: rgba(255, 250, 240, 0.85);
  overflow-y: auto;
}
    .col-title {
      padding: 12px 14px 6px;
      font-weight: 700;
      font-size: 13px;
      color: #5b3a22;
    }
    .series-list, .domain-list, .subject-list, .unit-list {
      list-style: none;
      margin: 0;
      padding: 4px 8px 16px;
    }
    .series-item,
    .domain-item,
    .subject-item,
    .unit-item {
      padding: 14px 18px;
      margin-bottom: 6px;
  background: rgba(248, 238, 214, 0.9);  /* ‚úÖ Ïó¨Í∏∞Îßå ÍµêÏ≤¥ */
      border: 1px solid transparent;
      border-radius: 10px;
      font-size: 15px;
      cursor: pointer;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 6px;
      transition: all 0.2s ease;
    }
    .series-item:hover,
    .domain-item:hover,
    .subject-item:hover,
    .unit-item:hover {
      border-color: rgba(139,47,47,0.5);
      background: rgba(255,248,240,0.8);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(139,47,47,0.15);
    }
    .series-item.active,
    .domain-item.active,
    .subject-item.active,
    .unit-item.active {
      background: #af4604;
      color: #fff;
      border-color: #8b2f2f;
    }
    /* ÎπÑÌôúÏÑ±ÌôîÎêú ÏãúÎ¶¨Ï¶à */
    .series-item.disabled {
      opacity: 0.4;
      filter: grayscale(1);
      cursor: not-allowed;
      pointer-events: none;
    }
    .meta { font-size: 11px; opacity: 0.6; }
    .detail-panel {
      padding: 14px 18px 40px;
      background: #fffdf8;
      overflow-y: auto;
    }
    .detail-title { font-weight: 700; margin-bottom: 2px; }
    .detail-desc { font-size: 12px; color: #9b7a54; margin-bottom: 10px; }
    

    /* Îã®Ïõê Ïò§Î•∏Ï™Ω Î¨∂Ïùå(Î≤àÌò∏ + ÏÉÅÌÉú) */
    .unit-right {
      display: flex;
      gap: 6px;
      align-items: center;
    }

    .unit-list .unit-item { border-radius: 7px; font-size: 14px; }

    .badge {
      background: rgba(255,255,255,0.2);
      border: 1px solid rgba(255,255,255,0.4);
      border-radius: 999px;
      padding: 1px 8px 2px;
      font-size: 10px;
    }

    /* ‚úÖ ÏÉÅÌÉú Î±ÉÏßÄ */
    .status-badge {
      display: inline-block;
      border-radius: 8px;
      padding: 3px 8px 4px;
      font-size: 11px;
      font-weight: 500;
      white-space: nowrap;
    }
    /* ÏùºÎ∞ò Í≥ºÏ†ú - ‚úèÔ∏è ÎØ∏ÏôÑÎ£å */
    .status-default {
      background: #f8d4d4;
      color: #7f2525;
    }
    /* ÏùºÎ∞ò Í≥ºÏ†ú - üèÜ ÌïôÏäµÏôÑÎ£å */
    .status-done {
      background: #aef3ae;
      color: #18622e;
    }
    /* AI Í≥ºÏ†ú - üîÑ ÌïôÏäµÌïÑÏöî */
    .status-ai-pending {
      background: #e9d5ff;
      color: #6b21a8;
    }
    /* Î≥ÑÏ†ê ÌëúÏãú */
    .unit-stars {
      display: inline-block;
      margin-right: 8px;
      font-size: 14px;
      color: #fbbf24;
      text-shadow: 0 0 2px rgba(251, 191, 36, 0.3);
    }

    /* AI Í≥ºÏ†ú - üèÜ ÌïôÏäµÏôÑÎ£å */
    .status-ai-done {
      background: #d1fae5;
      color: #065f46;
    }

    /* Î™®Îã¨ (Ï§ÄÎπÑÏ§ë) */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.35);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
      backdrop-filter: blur(2px);
    }
    .overlay.show { display: flex; }
    .modal-box {
      background: #fffaf3;
      border: 1px solid rgba(139,47,47,0.08);
      border-radius: 18px;
      padding: 22px 24px 20px;
      width: 330px;
      text-align: center;
      box-shadow: 0 15px 45px rgba(0,0,0,0.12);
      animation: pop 0.25s ease;
    }
    @keyframes pop {
      from { transform: translateY(10px) scale(0.97); opacity: 0; }
      to { transform: translateY(0) scale(1); opacity: 1; }
    }
    .modal-emoji { font-size: 34px; margin-bottom: 6px; }
    .modal-title { font-weight: 700; margin-bottom: 6px; color: #6f2e2e; }
    .modal-msg { font-size: 12.5px; color: #8d6f51; line-height: 1.5; margin-bottom: 14px; }
    .modal-btn { background: #8b2f2f; color: #fff; border: none; border-radius: 999px; padding: 7px 16px 8px; font-size: 12.5px; cursor: pointer; }
    .modal-btn:hover { opacity: 0.9; }
    .modal-btn-danger {
      background: #b02a2a;
      border: 1px solid rgba(176,42,42,0.3);
    }
    .modal-btn-danger:hover {
      opacity: 0.95;
      box-shadow: 0 3px 8px rgba(0,0,0,0.15);
    }

    /* ÏÉÅÎã® ÏÇ¨Ïö©Ïûê ÌëúÏãú */
    #user-info {
      font-size: 12px;
      color: #8d6f51;
      background: rgba(255,255,255,0.3);
      padding: 6px 12px 7px;
      border-radius: 999px;
      border: 1px solid rgba(197,138,69,0.15);
      white-space: nowrap;
    }

    /* üî¥ Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäº */
    .logout-btn {
      padding: 6px 14px 7px;
      border-radius: 999px;
      border: 1px solid rgba(139,47,47,0.25);
      background: #8b2f2f;
      color: #fff;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      box-shadow: 0 2px 4px rgba(0,0,0,0.08);
      transition: transform 0.05s ease, box-shadow 0.05s ease, opacity 0.15s;
    }
    .logout-btn:hover {
      opacity: 0.95;
      box-shadow: 0 3px 8px rgba(0,0,0,0.12);
      transform: translateY(-1px);
    }
    .logout-btn:active {
      transform: translateY(0);
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .logout-btn:disabled {
      opacity: 0.6;
      cursor: default;
      box-shadow: none;
    }


    /* üîã Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥ */
    .overlay-loading {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      backdrop-filter: blur(4px);
    }
    .overlay-loading.show {
      display: flex;
    }
    .loading-box {
      background: #fffaf3;
      border: 1px solid rgba(139,47,47,0.12);
      border-radius: 18px;
      width: 320px;
      text-align: center;
      padding: 28px 30px 26px;
      box-shadow: 0 15px 45px rgba(0,0,0,0.12);
    }
    .loading-emoji {
      font-size: 56px;
      margin-bottom: 8px;
    }
    .loading-title {
      font-weight: 700;
      margin-bottom: 6px;
      color: #6f2e2e;
    }
    .loading-msg {
      font-size: 13px;
      color: #8d6f51;
      margin-bottom: 14px;
    }
    .loading-progress {
      width: 100%;
      height: 10px;
      background: #e0d2c1;
      border-radius: 999px;
      position: relative;
      overflow: hidden;
    }
    .loading-bar {
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 0;
      background: #8b2f2f;
      border-radius: 999px;
      transition: width 0.25s ease;
    }
    .loading-percent {
      margin-top: 8px;
      font-size: 12px;
      font-weight: 600;
      color: #8b2f2f;
    }

    .brand-sub-wrap {
      position: relative;      /* Î£®ÎèåÌîÑÏùò Í∏∞Ï§ÄÏ†ê */
      display: inline-block;
    }

    .brand-sub {
      white-space: nowrap;     /* Ï§ÑÎ∞îÍøà Î∞©ÏßÄ */
      line-height: 1.2;        /* ÌòÑÏû¨ Ï§Ñ ÎÜíÏù¥ Ïú†ÏßÄ */
    }

    .brand-rudolph {
      position: absolute;
      right: -60px;
      top: -35px;
      transform: translateY(-50%);
      height: 50px;
      width: auto;
      display: block;
      pointer-events: none;
    }
    .bottom-snow {
      position: fixed;
      bottom: -100px;
      left: 0;
      width: 100%;
      pointer-events: none;
      z-index: 1;
    }
    /* === Î©îÎâ¥ Ïª¨ÎüºÍ≥º ÏÉÅÏÑ∏ Ìå®ÎÑêÏùÑ Ìà¨Î™ÖÌïòÍ≤å === */
.col {
  background: transparent !important;
}

.detail-panel {
  background: transparent !important;
}
/* Î∏åÎûúÎìú ÏÑúÎ∏å + Î£®ÎèåÌîÑÎ•º Ìïú Ï§Ñ Ï†ïÎ†¨ */
.brand-sub-wrap {
  display: flex;
  align-items: center;
  justify-content: space-between;  /* ÏôºÏ™Ω ÌÖçÏä§Ìä∏, Ïò§Î•∏Ï™Ω Î£®ÎèåÌîÑ */
}

/* Î£®ÎèåÌîÑ ÏòÅÏÉÅ ÏïÑÏù¥ÏΩò Ïä§ÌÉÄÏùº */
.brand-rudolph {
  width: 100px;          /* ÏõêÌïòÎäî ÌÅ¨Í∏∞ */
  height: 100px;
  object-fit: contain;  /* ÎπÑÏú® Ïú†ÏßÄ */
  display: block;
  margin-left: auto;    /* Ïò§Î•∏Ï™ΩÏúºÎ°ú Î∞ÄÍ∏∞ */
  margin-right: -60px;  /* Îçî Ïò§Î•∏Ï™ΩÏúºÎ°ú */
  pointer-events: auto; /* ÌÅ¥Î¶≠ Í∞ÄÎä•ÌïòÎèÑÎ°ù Î≥ÄÍ≤Ω */
  border: none;
  background: none;
  animation: float-whale 3s ease-in-out infinite;
  cursor: pointer;      /* ÎßàÏö∞Ïä§ Ïª§ÏÑú Î≥ÄÍ≤Ω */
}

/* Í≥†Îûò Îë•Îë• Îñ†Îã§ÎãàÎäî Ïï†ÎãàÎ©îÏù¥ÏÖò */
@keyframes float-whale {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

/* Ïä§ÌÜ†Î¶¨ Î†àÏù¥Î∏î Ïù¥ÎØ∏ÏßÄ */
.story-label {
  width: 90px;
  height: auto;
  object-fit: contain;
  display: block;
  margin-left: -30px;
  pointer-events: none;
  animation: float-label 2.5s ease-in-out infinite;
  animation-delay: 0.3s;
}

/* Ïä§ÌÜ†Î¶¨ Î†àÏù¥Î∏î Îë•Îë• Ïï†ÎãàÎ©îÏù¥ÏÖò (Í≥†ÎûòÏôÄ ÏïΩÍ∞Ñ Îã§Î•∏ ÌÉÄÏù¥Î∞ç) */
@keyframes float-label {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-8px);
  }
}

/* Î†àÏù¥Îçî Ï∞®Ìä∏ ÏïÑÏù¥ÏΩò */
.radar-chart-icon {
  position: fixed;
  bottom: 30px;
  left: 30px;
  width: 120px;
  height: 120px;
  cursor: pointer;
  z-index: 1000;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2));
  animation: float-icon 3s ease-in-out infinite;
}

.radar-chart-icon:hover {
  animation-play-state: paused;
  transform: scale(1.1) translateY(-5px);
  filter: drop-shadow(0 8px 20px rgba(139, 47, 47, 0.4));
}

.radar-chart-icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* ÎÖ∏Ìä∏ ÏïÑÏù¥ÏΩò */
.note-icon {
  position: fixed;
  bottom: 30px;
  left: 140px;
  width: 120px;
  height: 130px;
  cursor: pointer;
  z-index: 1000;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2));
  user-select: none;
  animation: float-icon-delay 3s ease-in-out infinite;
}

.note-icon:hover {
  animation-play-state: paused;
  transform: scale(1.1);
  filter: drop-shadow(0 8px 20px rgba(139, 47, 47, 0.4));
}

.note-icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* Î†àÏù¥Îçî Îì±Í∏â Î±ÉÏßÄ */
/* ÌéÄÌïë Ïï†ÎãàÎ©îÏù¥ÏÖò */
@keyframes badgePump {
  0%, 100% {
    transform: translateX(-50%) scale(1);
  }
  50% {
    transform: translateX(-50%) scale(1.1);
  }
}

.radar-grade-badge {
  position: absolute;
  top: -15px;
  left: 50%;
  transform: translateX(-50%);
  background: #ff8c42;
  color: white;
  border-radius: 999px;
  padding: 8px 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 700;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  border: 3px solid white;
  z-index: 10;
  min-width: 70px;
  white-space: nowrap;
  animation: badgePump 2s ease-in-out infinite;
}

.radar-grade-badge.excellent {
  background: #5dade2;
  color: white;
}

.radar-grade-badge.good {
  background: #f1c40f;
  color: #333;
}

.radar-grade-badge.average {
  background: #ff8c42;
  color: white;
}

.radar-grade-badge.encourage {
  background: #e74c3c;
  color: white;
}

/* Ïñ¥ÌúòÌÄ¥Ï¶à Ïñ¥ÌúòÎ†• ÏßÄÏàò Î±ÉÏßÄ */
.vocab-avg-badge {
  position: absolute;
  top: -5px;
  left: 25px;
  background: linear-gradient(135deg, #ff1493 0%, #ff69b4 100%);
  color: white;
  border-radius: 999px;
  min-width: 35px;
  height: 35px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 700;
  box-shadow: 0 3px 8px rgba(255, 20, 147, 0.5);
  border: 2px solid white;
  animation: badge-pulse 2s ease-in-out infinite;
  padding: 0 6px;
}

/* ÌïôÏäµÏã§ ÏïÑÏù¥ÏΩò */
.study-room-icon {
  position: fixed;
  bottom: 30px;
  left: 250px;
  width: 130px;
  height: 130px;
  cursor: pointer;
  z-index: 1000;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2));
  user-select: none;
  animation: float-icon 3s ease-in-out infinite;
  animation-delay: 0.5s;
}

.study-room-icon:hover {
  animation-play-state: paused;
  transform: scale(1.1);
  filter: drop-shadow(0 8px 20px rgba(139, 47, 47, 0.4));
}

.study-room-icon img {
  width: 100%;
  height: 100%;
  object-fit: contain;
}

/* ÌïôÏäµÏã§ Í≥ºÏ†ú Í∞úÏàò Î±ÉÏßÄ */
.study-room-badge {
  position: absolute;
  top: -5px;
  left: 25px;
  background: linear-gradient(135deg, #ff6b6b 0%, #ee5a52 100%);
  color: white;
  border-radius: 999px;
  min-width: 35px;
  height: 35px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 700;
  box-shadow: 0 3px 8px rgba(238, 90, 82, 0.5);
  border: 2px solid white;
  animation: badge-pulse 2s ease-in-out infinite;
  padding: 0 6px;
}

@keyframes badge-pulse {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

/* ÏïÑÏù¥ÏΩò Îë•Îë• Îñ†Îã§ÎãàÎäî Ïï†ÎãàÎ©îÏù¥ÏÖò */
@keyframes float-icon {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-12px);
  }
}

/* ÎÖ∏Ìä∏ ÏïÑÏù¥ÏΩòÏùÄ ÏïΩÍ∞Ñ ÏãúÏ∞®Î•º Îë† */
@keyframes float-icon-delay {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

/* ÌïôÏäµ Î∂ÑÏÑù Î™®Îã¨ */
.learning-modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  backdrop-filter: blur(3px);
}

.learning-modal.show {
  display: flex;
}

.learning-modal-content {
  background: #fff;
  width: 90vw;
  height: 90vh;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  animation: modalSlideIn 0.3s ease;
}

@keyframes modalSlideIn {
  from {
    transform: translateY(20px) translateZ(0);
    opacity: 0;
  }
  to {
    transform: translateY(0) translateZ(0);
    opacity: 1;
  }
}

.learning-modal-header {
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 10;
}

.learning-modal-title {
  display: none;
}

.learning-modal-footer {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  padding: 20px;
  background: rgba(255, 255, 255, 0.95);
  border-top: 1px solid rgba(0, 0, 0, 0.1);
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.05);
}

.learning-action-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 12px 24px;
  border: none;
  border-radius: 10px;
  font-size: 15px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  white-space: nowrap;
}

.learning-action-btn svg {
  flex-shrink: 0;
}

.send-btn {
  background: linear-gradient(135deg, #4A90E2 0%, #5CB3FF 100%);
  color: white;
}

.send-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(74, 144, 226, 0.4);
}

.download-btn {
  background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
  color: white;
}

.download-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(86, 171, 47, 0.4);
}

.learning-modal-close {
  background: rgba(0, 0, 0, 0.5);
  border: none;
  color: #fff;
  font-size: 28px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.learning-modal-close:hover {
  background: rgba(0, 0, 0, 0.7);
  transform: scale(1.1);
}

.learning-modal-iframe {
  flex: 1;
  border: none;
  width: 100%;
  height: 100%;
}

/* Îã®Ïõê ÌïôÏäµ Î™®Îã¨ */
.unit-modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10001;
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

.unit-modal.show {
  display: flex;
}

.unit-modal-content {
  background: #fff;
  width: 90vw;
  height: 90vh;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  animation: modalSlideIn 0.3s ease;
  transform: translateZ(0);
  will-change: transform;
  -webkit-overflow-scrolling: touch;
}

.unit-modal-header {
  position: absolute;
  top: 16px;
  right: 16px;
  z-index: 10;
}

.unit-modal-close {
  background: rgba(0, 0, 0, 0.5);
  border: none;
  color: #fff;
  font-size: 28px;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.unit-modal-close:hover {
  background: rgba(0, 0, 0, 0.7);
  transform: scale(1.1);
}

.unit-modal-iframe {
  flex: 1;
  border: none;
  width: 100%;
  height: 100%;
  background: #f5f5f5;
  transform: translateZ(0);
  will-change: contents;
}

/* AI Ï±óÎ¥á ÌîåÎ°úÌåÖ Î≤ÑÌäº */
.ai-chatbot-floating-btn {
  position: fixed;
  bottom: 30px;
  right: 30px;
  width: 120px;
  height: 120px;
  cursor: pointer;
  z-index: 10002;
  transition: transform 0.3s ease;
  animation: floatingBounce 3s ease-in-out infinite;
}

.ai-chatbot-floating-btn:hover {
  animation: floatingHover 1s ease-in-out infinite;
}

.ai-chatbot-floating-btn img {
  width: 100%;
  height: 100%;
  object-fit: contain;
  filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2));
}

.ai-chatbot-speech-bubble {
  position: absolute;
  top: -25px;
  left: 50%;
  transform: translateX(-50%);
  background: white;
  padding: 6px 12px;
  border-radius: 12px;
  font-size: 14px;
  font-weight: bold;
  color: #333;
  white-space: nowrap;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
  animation: bubblePulse 2s ease-in-out infinite;
}

.ai-chatbot-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 8px 6px 0 6px;
  border-style: solid;
  border-color: white transparent transparent transparent;
}

@keyframes floatingBounce {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-15px);
  }
}

@keyframes floatingHover {
  0%, 100% {
    transform: translateY(-5px) scale(1.05);
  }
  50% {
    transform: translateY(-20px) scale(1.1);
  }
}

@keyframes bubblePulse {
  0%, 100% {
    opacity: 1;
    transform: translateX(-50%) scale(1);
  }
  50% {
    opacity: 0.8;
    transform: translateX(-50%) scale(1.05);
  }
}

/* AI Ï±óÎ¥á Î™®Îã¨ - Ìï∏ÎìúÌè∞ ÌòïÌÉú */
.ai-chatbot-modal {
  position: fixed;
  bottom: 160px;
  right: 30px;
  display: none;
  z-index: 10003;
}

.ai-chatbot-modal.show {
  display: block;
  animation: chatbotSlideUp 0.3s ease;
}

.ai-chatbot-modal-content {
  background: transparent;
  width: 400px;
  height: 650px;
  border-radius: 24px;
  overflow: visible;
  box-shadow: none;
  display: flex;
  flex-direction: column;
  position: relative;
  pointer-events: auto;
}

.ai-chatbot-modal-header {
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 10;
  cursor: move;
}

.ai-chatbot-modal-close {
  background: rgba(0, 0, 0, 0.5);
  border: none;
  color: #fff;
  font-size: 24px;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.ai-chatbot-modal-close:hover {
  background: rgba(0, 0, 0, 0.7);
  transform: scale(1.1);
}

.ai-chatbot-modal-iframe {
  flex: 1;
  border: none;
  width: 100%;
  height: 100%;
  border-radius: 24px;
}

@keyframes chatbotSlideUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ÏïÑÏù¥Ìå®ÎìúÏö© Í≥†Ï†ï Î∞∞Í≤Ω Î†àÏù¥Ïñ¥ */
#tablet-fixed-bg {
  display: none;
}

/* Î∞òÏùëÌòï: ÌÉúÎ∏îÎ¶ø (ÏïÑÏù¥Ìå®Îìú ÏÑ∏Î°ú/Í∞ÄÎ°ú) */
@media (max-width: 1400px) and (min-width: 769px) {
  #tablet-fixed-bg {
    display: block;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    background-color: #f5efe6;
    z-index: -1;
  }

  .ai-chatbot-modal-content {
    width: 320px;
    height: 600px;
  }

  .ai-chatbot-modal {
    right: 20px;
    bottom: 80px;
  }
}

/* Î∞òÏùëÌòï: ÏûëÏùÄ ÌôîÎ©¥ÏóêÏÑúÎäî ÌÅ¨Í∏∞ Ï°∞Ï†ï */
@media (max-width: 768px) {
  .ai-chatbot-modal-content {
    width: calc(100vw - 40px);
    height: calc(100vh - 200px);
    max-width: 400px;
  }

  .ai-chatbot-modal {
    right: 20px;
    bottom: 140px;
  }
}

/* Ïñ¥ÌúòÎ†• ÌÄ¥Ï¶àÏáº Î™®Îã¨ - Ï§ëÏïô ÌåùÏóÖ */
.vocab-quiz-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10005;
}

.vocab-quiz-modal.show {
  display: flex;
  animation: fadeIn 0.3s ease;
}

.vocab-quiz-modal-content {
  background: #fff;
  width: 1000px;
  height: 750px;
  border-radius: 16px;
  overflow: hidden;
  box-shadow: 0 12px 48px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  position: relative;
}

.vocab-quiz-modal-header {
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 10;
}

.vocab-quiz-modal-close {
  background: rgba(0, 0, 0, 0.5);
  border: none;
  color: #fff;
  font-size: 28px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
}

.vocab-quiz-modal-close:hover {
  background: rgba(0, 0, 0, 0.7);
  transform: scale(1.1);
}

.vocab-quiz-modal-iframe {
  flex: 1;
  border: none;
  width: 100%;
  height: 100%;
  border-radius: 16px;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* ÌïôÏäµÏã§ Î™®Îã¨ */
.study-room-modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10002;
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

.study-room-modal.show {
  display: flex;
}

.study-room-modal-content {
  background: linear-gradient(135deg, #fffaf3 0%, #fff5e6 100%);
  width: 700px;
  max-height: 85vh;
  border-radius: 20px;
  overflow: visible;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  display: flex;
  flex-direction: column;
  animation: modalSlideIn 0.3s ease;
}

.study-room-modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 24px;
  background: linear-gradient(135deg, #c94b4b 0%, #8b2f2f 50%, #5a1f1f 100%);
  background-size: 200% 200%;
  animation: gradientShift 8s ease infinite;
  color: white;
  border-bottom: 2px solid rgba(139, 47, 47, 0.3);
  box-shadow: 0 4px 15px rgba(139, 47, 47, 0.3);
  position: relative;
  overflow: hidden;
}

.study-room-modal-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.15), transparent);
  animation: shimmer 3s infinite;
}

@keyframes gradientShift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

@keyframes shimmer {
  0% {
    left: -100%;
  }
  100% {
    left: 100%;
  }
}

.study-room-modal-header h2 {
  margin: 0;
  font-size: 20px;
  font-weight: 700;
  position: relative;
  z-index: 1;
}

.study-room-modal-close {
  background: rgba(255, 255, 255, 0.2);
  border: none;
  color: #fff;
  font-size: 28px;
  width: 36px;
  height: 36px;
  border-radius: 50%;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  position: relative;
  z-index: 1;
}

.study-room-modal-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: scale(1.1);
}

/* ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ ÎìúÎ°≠Îã§Ïö¥ Ïä§ÌÉÄÏùº */
.auto-task-dropdown-wrapper {
  position: relative;
  display: inline-block;
  margin-left: 12px;
}

.auto-task-btn {
  background: rgba(255, 255, 255, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.3);
  color: white;
  padding: 6px 12px;
  border-radius: 8px;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 6px;
}

.auto-task-btn:hover {
  background: rgba(255, 255, 255, 0.3);
}

.auto-task-btn .arrow {
  font-size: 10px;
  transition: transform 0.2s ease;
}

.auto-task-btn.open .arrow {
  transform: rotate(180deg);
}

.auto-task-dropdown {
  position: fixed;
  width: 360px;
  background: white;
  border-radius: 16px;
  box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
  z-index: 999999;
  display: none;
  overflow: hidden;
}

.auto-task-dropdown.show {
  display: block;
  animation: dropdownSlide 0.2s ease;
}

@keyframes dropdownSlide {
  from { opacity: 0; transform: translateY(-10px); }
  to { opacity: 1; transform: translateY(0); }
}

.auto-task-dropdown-header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 16px 20px;
  font-weight: 700;
  font-size: 15px;
}

.auto-task-dropdown-body {
  padding: 20px;
  max-height: 400px;
  overflow-y: auto;
}

.auto-task-section {
  margin-bottom: 20px;
}

.auto-task-section:last-child {
  margin-bottom: 0;
}

.auto-task-section-title {
  font-size: 13px;
  font-weight: 700;
  color: #374151;
  margin-bottom: 10px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.auto-task-btn-group {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
}

.series-btn, .day-btn {
  padding: 8px 14px;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  background: white;
  font-size: 13px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  color: #374151;
}

.series-btn:hover:not(:disabled), .day-btn:hover:not(:disabled) {
  border-color: #667eea;
  color: #667eea;
}

.series-btn.selected, .day-btn.selected {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  border-color: #667eea;
  color: white;
}

.series-btn:disabled, .day-btn:disabled {
  opacity: 0.4;
  cursor: not-allowed;
  background: #f3f4f6;
}

.task-count-input {
  display: flex;
  align-items: center;
  gap: 10px;
}

.task-count-input input {
  width: 80px;
  padding: 10px 14px;
  border: 2px solid #e5e7eb;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  text-align: center;
}

.task-count-input input:focus {
  outline: none;
  border-color: #667eea;
}

.task-count-input span {
  font-size: 13px;
  color: #6b7280;
}

.auto-task-actions {
  display: flex;
  gap: 8px;
  margin-top: 20px;
  padding-top: 16px;
  border-top: 1px solid #e5e7eb;
}

.auto-task-action-btn {
  flex: 1;
  padding: 12px 16px;
  border: none;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.auto-task-action-btn.start {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%);
  color: white;
}

.auto-task-action-btn.start:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
}

.auto-task-action-btn.pause {
  background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
  color: white;
}

.auto-task-action-btn.pause:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(245, 158, 11, 0.4);
}

.auto-task-action-btn.stop {
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  color: white;
}

.auto-task-action-btn.stop:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(239, 68, 68, 0.4);
}

.auto-task-action-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
  box-shadow: none !important;
}

.auto-task-status {
  margin-top: 16px;
  padding: 12px 16px;
  border-radius: 10px;
  font-size: 13px;
  font-weight: 600;
  text-align: center;
}

.auto-task-status.running {
  background: #d1fae5;
  color: #065f46;
}

.auto-task-status.paused {
  background: #fef3c7;
  color: #92400e;
}

.auto-task-status.stopped {
  background: #f3f4f6;
  color: #6b7280;
}

.study-room-modal-body {
  flex: 1;
  overflow-y: auto;
  padding: 20px;
}

.study-room-list {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.study-room-item {
  background: white;
  border: 2px solid #e0d2c1;
  border-radius: 12px;
  padding: 16px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: all 0.2s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.study-room-item:not(.empty):hover {
  border-color: #8b2f2f;
  box-shadow: 0 4px 12px rgba(139, 47, 47, 0.15);
  transform: translateY(-2px);
}

.study-room-item.empty {
  background: repeating-linear-gradient(
    45deg,
    #fafafa,
    #fafafa 10px,
    #f0f0f0 10px,
    #f0f0f0 20px
  );
  border-style: dashed;
  border-color: #d0d0d0;
  justify-content: center;
}

.study-room-item.empty .empty-text {
  color: #999;
  font-size: 14px;
  font-weight: 500;
}

.study-room-item-left {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.study-room-item-title {
  font-size: 16px;
  font-weight: 700;
  color: #2c2c2c;
}

.study-room-item-meta {
  font-size: 13px;
  color: #888;
}

.study-room-item-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.trash-btn {
  background: transparent;
  border: none;
  padding: 8px 12px;
  cursor: pointer;
  font-size: 18px;
  transition: all 0.2s ease;
}

.trash-btn:hover {
  transform: scale(1.2);
}

/* Ïò§Î≤ÑÎ†àÏù¥ Î™®Îã¨ Í≥µÌÜµ Ïä§ÌÉÄÏùº */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10003;
  backdrop-filter: blur(3px);
}

.overlay.show {
  display: flex;
}

/* Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏ Î™®Îã¨ */
.password-modal,
.assign-modal {
  background: white;
  border-radius: 16px;
  padding: 24px;
  width: 400px;
  max-width: 90%;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
  animation: modalSlideIn 0.3s ease;
}

.password-modal-header h3,
.assign-modal-header h3 {
  margin: 0 0 16px 0;
  font-size: 18px;
  font-weight: 700;
  color: #2c2c2c;
}

.password-modal-body,
.assign-modal-body {
  margin-bottom: 20px;
}

.password-modal-body p,
.assign-modal-body p {
  margin: 0 0 16px 0;
  font-size: 14px;
  color: #666;
}

.password-modal-body input {
  width: 100%;
  padding: 12px;
  border: 2px solid #e0d2c1;
  border-radius: 8px;
  font-size: 16px;
  box-sizing: border-box;
  transition: border-color 0.2s ease;
}

.password-modal-body input:focus {
  outline: none;
  border-color: #8b2f2f;
}

.password-modal-footer,
.assign-modal-footer {
  display: flex;
  gap: 12px;
  justify-content: flex-end;
}

.btn-cancel,
.btn-confirm {
  padding: 10px 20px;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
}

.btn-cancel {
  background: #f0f0f0;
  color: #666;
}

.btn-cancel:hover {
  background: #e0e0e0;
}

.btn-confirm {
  background: linear-gradient(135deg, #8b2f2f 0%, #6f2e2e 100%);
  color: white;
}

.btn-confirm:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 47, 47, 0.3);
}

/* ÎìúÎûòÍ∑∏ Ï§ë ÏãúÍ∞Å Ìö®Í≥º */
.dragging {
  opacity: 0.5;
  transform: scale(0.98);
}

.drag-over {
  border-color: #4A90E2 !important;
  background: rgba(74, 144, 226, 0.05);
  transform: scale(1.02);
}

/* Î∞òÏùëÌòï: ÌÉúÎ∏îÎ¶ø (ÏïÑÏù¥Ìå®Îìú) */
@media (max-width: 1024px) and (min-width: 901px) {
  .vocab-quiz-modal-content {
    width: 70%;
    height: 65%;
    max-width: 650px;
    max-height: 550px;
  }
}

/* Î∞òÏùëÌòï: ÏûëÏùÄ ÌÉúÎ∏îÎ¶ø Î∞è Î™®Î∞îÏùº */
@media (max-width: 900px) {
  .vocab-quiz-modal-content {
    width: 90%;
    height: 80%;
  }
}

/* ÏïÑÏù¥Ìå®Îìú Ï†ÑÏö© - Î©îÏù∏ Î©îÎâ¥ ÌôîÎ©¥ Ï∂ïÏÜå (1024px Ïù¥Ìïò) */
@media (max-width: 1024px) and (min-width: 901px) {
  body {
    transform: scale(0.75);
    transform-origin: top center;
    min-height: 100vh;
  }

  header {
    padding: 10px 18px 8px;
  }

  .brand-title {
    font-size: 20px;
  }

  .brand-sub {
    font-size: 11px;
  }

  .layout {
    grid-template-columns: 200px 190px 200px 1fr;
  }

  .col-title {
    font-size: 12px;
    padding: 10px 12px 5px;
  }

  .series-item,
  .domain-item,
  .subject-item,
  .unit-item {
    font-size: 14px;
    padding: 12px 16px;
  }
}

/* Í≥†ÎûòÏÑ¨ Ïù¥ÏïºÍ∏∞ ÌåùÏóÖ Î™®Îã¨ */
.whale-story-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(10px);
  z-index: 9999;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease;
}

.whale-story-modal.show {
  display: flex;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.whale-story-modal-content {
  background: transparent;
  border-radius: 30px;
  padding: 50px;
  max-width: 800px;
  width: 90%;
  box-shadow: 0 30px 80px rgba(0, 0, 0, 0.5);
  animation: scaleIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  position: relative;
  overflow: hidden;
}

/* Carousel wrapper */
.story-carousel-wrapper {
  position: relative;
  overflow: hidden;
  width: 100%;
}

.story-carousel-container {
  display: flex;
  transition: transform 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.story-slide {
  min-width: 100%;
  width: 100%;
  flex-shrink: 0;
  border-radius: 30px;
  padding: 50px;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  position: relative;
}

/* Whale story background image */
.story-slide.whale-story {
  background-image: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/whale-story/main.jpg);
}

/* Semi-transparent overlay for readability */
.story-slide::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.3);
  border-radius: 30px;
  z-index: 0;
}

.story-slide > * {
  position: relative;
  z-index: 1;
}

/* Carousel navigation arrows */
.carousel-nav {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(255, 255, 255, 0.9);
  border: 3px solid rgba(255, 255, 255, 1);
  width: 60px;
  height: 60px;
  border-radius: 50%;
  font-size: 36px;
  font-weight: bold;
  color: #333;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
}

.carousel-nav:hover {
  background: white;
  transform: translateY(-50%) scale(1.15);
  box-shadow: 0 6px 30px rgba(0, 0, 0, 0.4);
}

.carousel-nav.prev {
  left: 10px;
}

.carousel-nav.next {
  right: 10px;
}

.carousel-nav:disabled {
  opacity: 0;
  cursor: default;
  pointer-events: none;
}

/* Jungle story background image */
.story-slide.jungle-story {
  background-image: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/jungle-story/jungle_s1_main.jpg);
}

.story-slide.library-story {
  background-image: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/library-story/library_part1_main.jpg);
}

/* Time Library story background image */
.story-slide.time-library-story {
  background-image: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/time-library-story/time_part1_main.jpg);
}

/* Cat Island story background image */
.story-slide.cat-island-story {
  background-image: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/cat-island-story/cat_part1_main.jpg);
}

/* Cat Transform story background image */
.story-slide.cat-transform-story {
  background-image: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/cat-transform-story/transform_part1-main.jpg);
}

.story-slide.sonagi-story {
  background-image: url('/rain/rain_01.jpg');
}

.story-slide.goodday-story {
  background-image: url('/good/good1_01.jpg');
}

.story-slide.dongbaek-story {
  background-image: url('/flower/flower01.jpg');
}

.story-slide.samdae-story {
  background-image: url('/three/three01.jpg');
}

.story-slide.chunhyang-story {
  background-image: url('/girl/girl01.jpg');
}

@keyframes scaleIn {
  0% {
    transform: scale(0.5) rotate(-5deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.05) rotate(2deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

.whale-story-modal-close {
  position: absolute;
  top: 20px;
  right: 20px;
  background: rgba(255, 255, 255, 0.2);
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  font-size: 24px;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.whale-story-modal-close:hover {
  background: rgba(255, 255, 255, 0.3);
  transform: rotate(90deg);
}

.whale-story-header {
  text-align: center;
  margin-bottom: 40px;
}

.whale-story-header h2 {
  font-size: 42px;
  color: white;
  margin-bottom: 10px;
  text-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
}

.whale-story-header p {
  font-size: 18px;
  color: rgba(255, 255, 255, 0.9);
  text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

.whale-story-seasons {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
  margin-top: 30px;
}

/* ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú Î≤ÑÌäº */
.book-report-btn-container {
  display: flex;
  justify-content: center;
  margin-top: 25px;
}

.book-report-btn {
  background: rgba(255, 255, 255, 0.25);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 2px solid rgba(255, 255, 255, 0.4);
  border-radius: 50px;
  padding: 14px 35px;
  color: white;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  display: flex;
  align-items: center;
  gap: 8px;
}

.book-report-btn:hover {
  background: rgba(255, 255, 255, 0.4);
  transform: translateY(-3px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
  border-color: rgba(255, 255, 255, 0.6);
}

.book-report-btn:active {
  transform: translateY(-1px);
}

.season-card {
  background: transparent;
  border-radius: 20px;
  padding: 30px 20px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s ease;
  border: 3px solid transparent;
  position: relative;
  overflow: hidden;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* Remove card backgrounds - using slide background instead */
.season-card {
  background: transparent !important;
  background-image: none !important;
}

.season-card::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: linear-gradient(45deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  transform: rotate(45deg);
  transition: all 0.6s ease;
  z-index: 1;
}

.season-card:hover::before {
  left: 100%;
}

.season-card:hover {
  transform: translateY(-10px) scale(1.05);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
  border-color: #ffd700;
}

.season-card.locked {
  opacity: 0.6;
  cursor: not-allowed;
  filter: grayscale(0.5);
}

.season-card.locked:hover {
  transform: none;
  box-shadow: none;
  border-color: transparent;
}

/* Îã®ÎèÖ ÏãúÏ¶å Ïπ¥Îìú Ïä§ÌÉÄÏùº */
.single-season-container {
  display: flex !important;
  justify-content: center !important;
}

.season-card.single-season {
  min-width: 200px;
  padding: 40px 30px;
}

.season-number {
  font-size: 48px;
  margin-bottom: 15px;
  animation: float 3s ease-in-out infinite;
  position: relative;
  z-index: 2;
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px);
  }
  50% {
    transform: translateY(-10px);
  }
}

.season-card:nth-child(2) .season-number {
  animation-delay: 0.3s;
}

.season-card:nth-child(3) .season-number {
  animation-delay: 0.6s;
}

.season-title {
  font-size: 20px;
  font-weight: 700;
  color: #ffffff;
  margin-bottom: 8px;
  position: relative;
  z-index: 2;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

.season-subtitle {
  font-size: 14px;
  color: #ffffff;
  font-weight: 600;
  margin-bottom: 15px;
  position: relative;
  z-index: 2;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

/* Jungle story subtitle color */
.jungle-story .season-subtitle {
  color: #ffffff;
}

.season-desc {
  font-size: 13px;
  color: #ffffff;
  line-height: 1.6;
  position: relative;
  z-index: 2;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
}

.season-lock-icon {
  font-size: 32px;
  margin-top: 10px;
  opacity: 0.5;
}

@media (max-width: 768px) {
  .whale-story-seasons {
    grid-template-columns: 1fr;
    gap: 15px;
  }

  .whale-story-modal-content {
    padding: 30px 20px;
  }

  .whale-story-header h2 {
    font-size: 32px;
  }

  .carousel-nav {
    width: 50px;
    height: 50px;
    font-size: 30px;
  }

  .carousel-nav.prev {
    left: 5px;
  }

  .carousel-nav.next {
    right: 5px;
  }
}

/* Ïä§ÌÜ†Î¶¨ ÏΩòÌÖêÏ∏† ÌåùÏóÖ Î™®Îã¨ */
.story-content-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.95);
  z-index: 10000;
  align-items: center;
  justify-content: center;
  animation: fadeIn 0.3s ease;
}

.story-content-modal.show {
  display: flex;
}

.story-content-modal-inner {
  width: 95%;
  height: 95%;
  background: white;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 30px 80px rgba(0, 0, 0, 0.8);
  animation: zoomIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  position: relative;
}

@keyframes zoomIn {
  0% {
    transform: scale(0.3);
    opacity: 0;
  }
  50% {
    transform: scale(1.03);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.story-content-close {
  position: fixed;
  top: 2.5%;
  right: 2.5%;
  background: rgba(255, 0, 0, 0.9);
  border: 3px solid white;
  width: 60px;
  height: 60px;
  border-radius: 50%;
  font-size: 32px;
  font-weight: bold;
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
  z-index: 10001;
  display: flex;
  align-items: center;
  justify-content: center;
  backdrop-filter: blur(10px);
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
  pointer-events: auto;
}

.story-content-close:hover {
  background: rgba(255, 50, 50, 1);
  transform: rotate(90deg) scale(1.2);
  box-shadow: 0 6px 30px rgba(255, 0, 0, 0.6);
}

.story-content-iframe {
  width: 100%;
  height: 100%;
  border: none;
  border-radius: 20px;
}

/* ========== ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ ÌåùÏóÖ Ïä§ÌÉÄÏùº ========== */
.reading-report-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 10004;
}

.reading-report-modal.show {
  display: flex;
}

.reading-report-container {
  position: relative;
  width: 1000px;
  max-width: 90%;
  height: 700px;
  max-height: 90%;
  background: #fff;
  border-radius: 20px;
  display: flex;
  overflow: hidden;
  box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
}

.reading-report-close {
  position: absolute;
  top: 15px;
  right: 15px;
  width: 40px;
  height: 40px;
  background: rgba(255, 50, 50, 0.8);
  color: white;
  border: none;
  border-radius: 50%;
  font-size: 24px;
  cursor: pointer;
  z-index: 10;
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.reading-report-close:hover {
  background: rgba(255, 50, 50, 1);
  transform: rotate(90deg) scale(1.2);
}

/* ÏôºÏ™Ω ÌûàÏä§ÌÜ†Î¶¨ ÏÇ¨Ïù¥ÎìúÎ∞î */
.reading-history-sidebar {
  width: 33.33%;
  background: #f8f9fa;
  border-right: 2px solid #e9ecef;
  overflow-y: auto;
  padding: 20px;
}

.history-header {
  font-size: 18px;
  font-weight: 700;
  color: #2c3e50;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.history-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

.history-item {
  background: white;
  border: 2px solid #e9ecef;
  border-radius: 12px;
  padding: 15px;
  cursor: pointer;
  transition: all 0.3s ease;
}

.history-item:hover {
  border-color: #667eea;
  box-shadow: 0 2px 10px rgba(102, 126, 234, 0.2);
}

.history-item-title {
  font-size: 14px;
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 6px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.history-item-date {
  font-size: 12px;
  color: #6b7280;
}

.history-item-month {
  font-size: 11px;
  color: #9ca3af;
  margin-top: 4px;
}

.history-item-story {
  font-size: 11px;
  color: #667eea;
  font-weight: 600;
  margin-top: 6px;
  padding: 4px 8px;
  background: rgba(102, 126, 234, 0.1);
  border-radius: 6px;
  display: inline-block;
}

.history-load-more {
  width: 100%;
  padding: 12px;
  background: #667eea;
  color: white;
  border: none;
  border-radius: 8px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  margin-top: 12px;
  transition: all 0.3s ease;
}

.history-load-more:hover {
  background: #5568d3;
}

/* Ïò§Î•∏Ï™Ω Î©îÏù∏ ÏûëÏÑ± ÏòÅÏó≠ */
.reading-report-main {
  flex: 1;
  padding: 40px;
  overflow-y: auto;
  position: relative;
  background-image: url('https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/rudolph.png');
  background-position: center center;
  background-repeat: no-repeat;
  background-size: 400px;
  background-attachment: local;
}

.reading-report-main::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.92);
  pointer-events: none;
  z-index: 0;
}

.reading-report-main > * {
  position: relative;
  z-index: 1;
}

.report-form-header {
  text-align: center;
  margin-bottom: 30px;
}

.report-form-header h2 {
  font-size: 28px;
  font-weight: 700;
  color: #2c3e50;
  margin-bottom: 10px;
}

.report-form-header p {
  font-size: 14px;
  color: #6b7280;
}

.report-form {
  display: flex;
  flex-direction: column;
  gap: 20px;
}

.form-row {
  display: flex;
  gap: 15px;
}

.form-group {
  flex: 1;
}

.form-group label {
  display: block;
  font-size: 14px;
  font-weight: 600;
  color: #2c3e50;
  margin-bottom: 8px;
}

.form-group input,
.form-group textarea,
.form-group select {
  width: 100%;
  padding: 12px 15px;
  border: 2px solid #e9ecef;
  border-radius: 10px;
  font-size: 14px;
  font-family: inherit;
  transition: all 0.3s ease;
}

.form-group select {
  cursor: pointer;
  background-color: white;
  background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 20px;
  padding-right: 40px;
  appearance: none;
}

.form-group input:focus,
.form-group textarea:focus,
.form-group select:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

.form-group input:disabled {
  background: #f8f9fa;
  color: #6b7280;
  cursor: not-allowed;
}

.form-group textarea {
  min-height: 250px;
  resize: vertical;
  line-height: 1.6;
}

.form-actions {
  display: flex;
  gap: 12px;
  justify-content: center;
  margin-top: 10px;
}

.btn-submit {
  padding: 14px 30px;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
}

.btn-submit:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
}

.btn-submit:active {
  transform: translateY(0);
}

.btn-kakao {
  padding: 14px 30px;
  background: linear-gradient(135deg, #FEE500 0%, #FFCD00 100%);
  color: #3C1E1E;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(255, 205, 0, 0.3);
}

.btn-kakao:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(255, 205, 0, 0.5);
  background: linear-gradient(135deg, #FFED4E 0%, #FFD700 100%);
}

.btn-kakao:active {
  transform: translateY(0);
}

.btn-new {
  padding: 14px 30px;
  background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
}

.btn-new:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
  background: linear-gradient(135deg, #4ade80 0%, #22c55e 100%);
}

.btn-new:active {
  transform: translateY(0);
}

.auto-save-indicator {
  text-align: center;
  font-size: 12px;
  color: #10b981;
  margin-top: 10px;
}

/* ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Í≤∞Í≥º Î™®Îã¨ */
.spell-check-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.7);
  z-index: 10005;
  align-items: center;
  justify-content: center;
}

.spell-check-modal.show {
  display: flex;
}

.spell-check-modal-content {
  background: white;
  border-radius: 20px;
  width: 90%;
  max-width: 700px;
  max-height: 80vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
}

.spell-check-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 30px;
  border-bottom: 2px solid #e9ecef;
}

.spell-check-header h3 {
  margin: 0;
  font-size: 24px;
  color: #2c3e50;
}

.spell-check-close {
  background: none;
  border: none;
  font-size: 32px;
  color: #6b7280;
  cursor: pointer;
  transition: color 0.3s;
}

.spell-check-close:hover {
  color: #ef4444;
}

.spell-check-body {
  padding: 30px;
  overflow-y: auto;
  flex: 1;
}

.error-section {
  background: #fef2f2;
  border: 2px solid #fecaca;
  border-radius: 12px;
  padding: 20px;
  margin-bottom: 20px;
}

.error-section h4 {
  color: #dc2626;
  margin: 0 0 15px 0;
  font-size: 18px;
}

.error-item {
  margin-bottom: 12px;
  font-size: 15px;
  line-height: 1.6;
}

.error-item .wrong-text {
  color: #dc2626;
  text-decoration: underline wavy #dc2626;
  font-weight: 600;
}

.correct-section {
  background: #f0fdf4;
  border: 2px solid #bbf7d0;
  border-radius: 12px;
  padding: 20px;
}

.correct-section h4 {
  color: #16a34a;
  margin: 0 0 15px 0;
  font-size: 18px;
  display: flex;
  align-items: center;
  gap: 8px;
}

.correct-text {
  font-size: 15px;
  line-height: 1.8;
  color: #2c3e50;
  white-space: pre-wrap;
}

.correct-text .highlight-correct {
  background: #bbf7d0;
  padding: 2px 6px;
  border-radius: 4px;
  font-weight: 600;
  color: #16a34a;
}

.spell-check-footer {
  display: flex;
  gap: 15px;
  padding: 20px 30px;
  border-top: 2px solid #e9ecef;
  justify-content: center;
}

.btn-recheck {
  padding: 14px 30px;
  background: linear-gradient(135deg, #34d399 0%, #10b981 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(16, 185, 129, 0.3);
}

.btn-recheck:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(16, 185, 129, 0.5);
}

.btn-submit-final {
  padding: 14px 30px;
  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
  color: white;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
}

.btn-submit-final:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(239, 68, 68, 0.5);
}

.no-error-message {
  text-align: center;
  padding: 40px 20px;
  color: #16a34a;
  font-size: 18px;
}

/* ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Î°úÎî© */
.spell-check-loading {
  margin-top: 20px;
  text-align: center;
  padding: 20px;
  animation: fadeIn 0.3s ease;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  margin: 0 auto 10px;
  border: 4px solid #f3f4f6;
  border-top: 4px solid #3b82f6;
  border-radius: 50%;
  animation: spin 1s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

.spell-check-loading p {
  color: #6b7280;
  font-size: 14px;
  margin: 0;
}

/* ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Ïù∏ÎùºÏù∏ ÌëúÏãú (Î∞ïÏä§ ÏóÜÏù¥) */
.spell-check-inline {
  margin-top: 20px;
  animation: slideDown 0.3s ease;
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Ìè≠Ï£Ω Ìö®Í≥ºÍ∞Ä Î™®Îì† ÏöîÏÜå ÏúÑÏóê ÌëúÏãúÎêòÎèÑÎ°ù z-index ÏÑ§Ï†ï */
canvas[id^="confetti-canvas"] {
  z-index: 99999 !important;
  pointer-events: none;
}

    /* üéÜ Ìè≠Ï£Ω Ïï†ÎãàÎ©îÏù¥ÏÖò */
    .fireworks-container {
      position: fixed;
      top: 20px;
      left: 20px;
      width: 80px;
      height: 80px;
      pointer-events: none;
      z-index: 9999;
    }

    .firework {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      animation: firework-animation 2s ease-out infinite;
    }

    .firework:nth-child(1) {
      background: linear-gradient(45deg, #ff6b6b, #feca57);
      animation-delay: 0s;
      left: 40%;
      top: 40%;
    }

    .firework:nth-child(2) {
      background: linear-gradient(45deg, #5f27cd, #00d2d3);
      animation-delay: 0.5s;
      left: 60%;
      top: 30%;
    }

    .firework:nth-child(3) {
      background: linear-gradient(45deg, #ff9ff3, #feca57);
      animation-delay: 1s;
      left: 30%;
      top: 50%;
    }

    .firework:nth-child(4) {
      background: linear-gradient(45deg, #48dbfb, #0abde3);
      animation-delay: 1.5s;
      left: 50%;
      top: 35%;
    }

    @keyframes firework-animation {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      25% {
        transform: translate(var(--tx), var(--ty)) scale(1.5);
        opacity: 0.8;
      }
      50% {
        transform: translate(calc(var(--tx) * 1.5), calc(var(--ty) * 1.5)) scale(2);
        opacity: 0.6;
        box-shadow: 0 0 20px currentColor;
      }
      75% {
        transform: translate(calc(var(--tx) * 2), calc(var(--ty) * 2)) scale(1.2);
        opacity: 0.3;
      }
      100% {
        transform: translate(calc(var(--tx) * 2.5), calc(var(--ty) * 2.5)) scale(0);
        opacity: 0;
      }
    }

    /* Í∞Å Ìè≠Ï£ΩÎßàÎã§ Îã§Î•∏ Î∞©Ìñ•ÏúºÎ°ú ÌÑ∞ÏßÄÎèÑÎ°ù */
    .firework:nth-child(1) { --tx: -15px; --ty: -20px; }
    .firework:nth-child(2) { --tx: 18px; --ty: -15px; }
    .firework:nth-child(3) { --tx: -20px; --ty: 10px; }
    .firework:nth-child(4) { --tx: 15px; --ty: 12px; }

    /* Î∞òÏßùÏù¥Îäî Î≥Ñ Ìö®Í≥º Ï∂îÍ∞Ä */
    .sparkle {
      position: absolute;
      width: 4px;
      height: 4px;
      background: #ffd700;
      border-radius: 50%;
      animation: sparkle-animation 1.5s ease-in-out infinite;
    }

    .sparkle:nth-child(5) {
      left: 20%;
      top: 20%;
      animation-delay: 0.2s;
    }

    .sparkle:nth-child(6) {
      left: 70%;
      top: 60%;
      animation-delay: 0.8s;
    }

    @keyframes sparkle-animation {
      0%, 100% {
        transform: scale(0);
        opacity: 0;
      }
      50% {
        transform: scale(1.5);
        opacity: 1;
        box-shadow: 0 0 10px #ffd700;
      }
    }

  </style>

  <!-- html2canvas and jsPDF for PDF generation with Korean support -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

  <!-- JS Confetti for celebration effects -->
  <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>

  <!-- Î∏åÎ†àÏù∏Îî• ÏΩòÌÖêÏ∏† Î°úÎìú -->
  <script src="./BRAINUP/science/deep_bio_content.js"></script>
  <script src="./BRAINUP/science/deep_earth_content.js"></script>
  <script src="./BRAINUP/science/deep_chem_content.js"></script>
  <script src="./BRAINUP/science/deep_physics_content.js"></script>
</head>
<body>
  <!-- üì± ÏïÑÏù¥Ìå®ÎìúÏö© Í≥†Ï†ï Î∞∞Í≤Ω Î†àÏù¥Ïñ¥ -->
  <div id="tablet-fixed-bg"></div>

  <!-- üîÑ Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥ -->
  <div id="loading-overlay">
    <div class="spinner-container">
      <div class="spinner"></div>
      <div class="loading-text">AI ÌïôÏäµ Ïù∏Ïãù Ï§ë...</div>
    </div>
  </div>

  <!-- üî• MP4 Î©îÎâ¥ Î∞∞Í≤Ω ÏòÅÏÉÅ -->
  <video class="menu-bg-video" autoplay muted loop playsinline>
    <source src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/brain-menu-bg-a.mp4" type="video/mp4" />
  </video>

  <!-- üéÜ Ìè≠Ï£Ω Ïï†ÎãàÎ©îÏù¥ÏÖò -->
  <div class="fireworks-container">
    <div class="firework"></div>
    <div class="firework"></div>
    <div class="firework"></div>
    <div class="firework"></div>
    <div class="sparkle"></div>
    <div class="sparkle"></div>
  </div>

  <header id="menuHeader">
    <div>
      <div class="brand-title">Îã®Îã®Íµ≠Ïñ¥ BRAIN Î¨∏Ìï¥Î†• ÏãúÎ¶¨Ï¶à</div>

      <div class="brand-sub-wrap">
        <div class="brand-sub">
          BRAINÏò® ‚Üí BRAINÏóÖ ‚Üí BRAINÌïè ‚Üí BRAINÎî• ‚Üí BRAINÏ§ëÎì± ‚Üí BRAINÍ≥†Îì± ‚Üí Î∂ÑÏïº ‚Üí ÏÑ∏Î∂Ä Í≥ºÎ™© ‚Üí Îã®Ïõê
        </div>

        <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/rudolph.png" class="brand-rudolph" alt="Î£®ÎèåÌîÑ" onclick="goToWhaleStory()" style="cursor: pointer;" title="Ìë∏Î•∏ Í≥†ÎûòÏÑ¨ Ïù¥ÏïºÍ∏∞ ÏãúÏûëÌïòÍ∏∞">
      </div>
    </div>

    <!-- üîπ Ïò§Î•∏Ï™Ω: ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ + Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäº -->
    <div class="header-right">
      <div id="user-info">ÏÑ±Ïù∏ ÏïàÏú†ÎπàÎãò ÌôòÏòÅÌï©ÎãàÎã§!</div>
      <button id="logoutBtn" class="logout-btn" type="button">Î°úÍ∑∏ÏïÑÏõÉ</button>
    </div>
  </header>

  <div class="layout">
    <!-- ‚ë† ÏãúÎ¶¨Ï¶à -->
    <div class="col" id="colSeries">
      <div class="col-title">‚ë† ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉù</div>
      <ul class="series-list" id="seriesList">
        <li class="series-item" data-series="BRAINON"><span>üí° BRAINÏò®</span><span class="meta">Í∞úÎÖêÏù¥Ìï¥</span></li>
        <li class="series-item active" data-series="BRAINUP"><span>üöÄ BRAINÏóÖ</span><span class="meta">ÏùëÏö©Ï†ÅÏö©</span></li>
        <li class="series-item" data-series="BRAINFIT"><span>üîó BRAINÌïè</span><span class="meta">ÎÖºÎ¶¨Ïó∞Í≤∞</span></li>
        <li class="series-item" data-series="BRAINDEEP"><span>üîé BRAINÎî•</span><span class="meta">Ïã¨ÌôîÏ∂îÎ°†</span></li>
        <li class="series-item" data-series="BRAINM"><span>üìò BRAINÏ§ëÎì±</span><span class="meta">Ï§ëÎì±ÍµêÍ≥º</span></li>
        <li class="series-item" data-series="BRAINH"><span>üìï BRAINÍ≥†Îì±</span><span class="meta">Í≥†Îì±ÍµêÍ≥º</span></li>
      </ul>
    </div>

    <!-- ‚ë° Î∂ÑÏïº -->
    <div class="col" id="colDomain">
      <div class="col-title">‚ë° Î∂ÑÏïº ÏÑ†ÌÉù</div>
      <ul class="domain-list" id="domainList"></ul>
    </div>

    <!-- ‚ë¢ ÏÑ∏Î∂Ä Í≥ºÎ™© -->
    <div class="col" id="colSubject">
      <div class="col-title">‚ë¢ ÏÑ∏Î∂Ä Í≥ºÎ™©</div>
      <ul class="subject-list" id="subjectList"></ul>
    </div>

    <!-- ‚ë£ Îã®Ïõê + Í≤ÄÏÉâ -->
    <div class="detail-panel" id="detailPanel">
      <div style="display:flex; justify-content:space-between; gap:12px; align-items:center;">
        <div>
          <div class="detail-title" id="unitTitle">Îã®Ïõê ÏÑ†ÌÉù</div>
          <div class="detail-desc" id="unitDesc">[Î≥∏Î¨∏ÌïôÏäµ] ‚Üí [Ïñ¥ÌúòÌïôÏäµ] ‚Üí [Ï∞ΩÏùòÌôúÎèô]ÏùÑ ÏôÑÎ£å ÌõÑ Ï†úÏ∂úÌï¥Ï£ºÏÑ∏Ïöî!</div>
        </div>
        <input
          type="text"
          id="unitSearch"
          placeholder="Îã®Ïõê Í≤ÄÏÉâ"
          style="padding:5px 8px; border:1px solid #e2d5c3; border-radius:6px; font-size:12px; min-width:140px; background:#ffffff;">
      </div>
      <ul class="unit-list" id="unitList"></ul>
    </div>
  </div>

  <!-- Ï§ÄÎπÑÏ§ë Î™®Îã¨ -->
  <div class="overlay" id="pendingModal">
    <div class="modal-box">
      <div class="modal-emoji">üìö‚ú®</div>
      <div class="modal-title">ÏïÑÏßÅ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.</div>
      <div class="modal-msg">Í≥ß ÏßÄÎ¨∏Ïù¥ Ïò§ÌîàÎê©ÎãàÎã§. Í∏∞ÎåÄÌï¥Ï£ºÏÑ∏Ïöî!</div>
      <button class="modal-btn" id="closeModalBtn">ÌôïÏù∏</button>
    </div>
  </div>

  <!-- ‚ö†Ô∏è Î™®Îã¨ Í¥ÄÎ†® Ìï®ÏàòÏôÄ Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑàÎäî Î©îÏù∏ Ïä§ÌÅ¨Î¶ΩÌä∏ Î∏îÎ°ùÏóêÏÑú Ï≤òÎ¶¨Îê©ÎãàÎã§ (ÎùºÏù∏ 3250+ Ï∞∏Í≥†) -->

  <!-- üî• ÏÑ∏ÏÖò Ï†ïÎ≥¥Î•º sessionStorageÏóê Ï†ÄÏû• -->
  <script>
    (async function() {
      try {
        const response = await fetch('/api/session');
        const data = await response.json();

        if (data.ok && data.user) {
          // ÏÑúÎ≤Ñ ÏÑ∏ÏÖò Ï†ïÎ≥¥Î•º sessionStorageÏóê Ï†ÄÏû•
          sessionStorage.setItem('user', JSON.stringify(data.user));
          console.log('‚úÖ Session data saved to sessionStorage:', data.user);

          // ‚úÖ ÌòÑÏû¨ ÌïôÏÉùÏù¥ ÏïÑÎãå localStorage Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú (Ïù¥Ï†Ñ ÌïôÏÉù Ïñ¥ÌúòÌÄ¥Ï¶à Î±ÉÏßÄ Îì±)
          const currentStudent = JSON.parse(localStorage.getItem('currentStudent') || '{}');
          const currentGrade = currentStudent.grade || data.user.grade;
          const currentName = currentStudent.name || data.user.name;

          // localStorageÏùò Î™®Îì† ÌÇ§Î•º ÌôïÏù∏ÌïòÏó¨ Îã§Î•∏ ÌïôÏÉù Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú
          const keysToRemove = [];
          for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);

            // vocabAvgScore_, studyRoomBadge_ Îì± ÌïôÏÉùÎ≥Ñ Îç∞Ïù¥ÌÑ∞ ÌÇ§ Ìå®ÌÑ¥
            if (key && (key.startsWith('vocabAvgScore_') || key.startsWith('studyRoomBadge_') || key.startsWith('ÌïôÏÉù_'))) {
              // ÌòÑÏû¨ ÌïôÏÉùÏùò ÌÇ§Í∞Ä ÏïÑÎãàÎ©¥ ÏÇ≠Ï†ú ÎåÄÏÉÅ
              if (!key.includes(`${currentGrade}_${currentName}`)) {
                keysToRemove.push(key);
              }
            }
          }

          // ÏÇ≠Ï†ú Ïã§Ìñâ
          keysToRemove.forEach(key => {
            console.log('üóëÔ∏è Ïù¥Ï†Ñ ÌïôÏÉù Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú:', key);
            localStorage.removeItem(key);
          });

          // ‚úÖ ÏÑ∏ÏÖò Ï†ÄÏû• ÏôÑÎ£å ÌîåÎûòÍ∑∏ ÏÑ§Ï†ï + ÏÑúÎ≤ÑÏóêÏÑú Ïñ¥ÌúòÏßÄÏàò Î∂àÎü¨ÏôÄÏÑú Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
          window.sessionReady = true;

          // ÏÑúÎ≤ÑÏóêÏÑú Ïñ¥ÌúòÌÄ¥Ï¶à Îç∞Ïù¥ÌÑ∞ Î∂àÎü¨ÏôÄÏÑú Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
          const updateVocabBadgeFromServer = async () => {
            try {
              const res = await fetch(`/api/user-progress?grade=${encodeURIComponent(data.user.grade)}&name=${encodeURIComponent(data.user.name)}`);
              const result = await res.json();

              if (result.ok && result.data?.vocabularyQuiz) {
                const vq = result.data.vocabularyQuiz;
                // Ïñ¥ÌúòÎ†• ÏßÄÏàò Í≥ÑÏÇ∞: (Ï¥ùÏ†ê / 100) * (ÌèâÍ∑†Ï†êÏàò / 10)
                const rating = (vq.totalScore / 100) * (vq.avgScore / 10);
                const ratingStr = rating.toFixed(1);

                // localStorageÏóêÎèÑ Ï†ÄÏû• (Îã§Î•∏ Í≥≥ÏóêÏÑú ÏÇ¨Ïö©)
                const ratingKey = `vocabRatingScore_${data.user.grade}_${data.user.name}`;
                localStorage.setItem(ratingKey, ratingStr);

                // Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
                const badge = document.getElementById('vocabAvgBadge');
                if (badge) {
                  badge.textContent = ratingStr;
                  console.log('‚úÖ Ïñ¥ÌúòÏßÄÏàò Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ (ÏÑúÎ≤Ñ):', ratingStr);
                }
              }
            } catch (e) {
              console.error('Ïñ¥ÌúòÏßÄÏàò Î°úÎìú Ïò§Î•ò:', e);
            }
          };

          if (document.readyState === 'complete' || document.readyState === 'interactive') {
            updateVocabBadgeFromServer();
          } else {
            document.addEventListener('DOMContentLoaded', updateVocabBadgeFromServer);
          }

        } else {
          console.log('‚ùå No session data available');
        }
      } catch (error) {
        console.error('‚ùå Error fetching session:', error);
      }
    })();
  </script>

  <!-- üöÄ API Ï∫êÏã± Î†àÏù¥Ïñ¥ (Ï§ëÎ≥µ Ìò∏Ï∂ú Î∞©ÏßÄ & Î≥ëÎ†¨ Î°úÎî© ÏµúÏ†ÅÌôî) -->
  <script>
    window.ApiCache = (function() {
      const cache = {};
      const pending = {};
      const CACHE_TTL = 30000; // 30Ï¥à Ï∫êÏãú

      return {
        // Ï∫êÏãúÎêú Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ (ÏóÜÏúºÎ©¥ fetch)
        async fetch(url, options = {}) {
          const cacheKey = url;
          const now = Date.now();

          // Ï∫êÏãúÏóê Ïú†Ìö®Ìïú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏúºÎ©¥ Î∞òÌôò
          if (cache[cacheKey] && (now - cache[cacheKey].time) < CACHE_TTL) {
            console.log('‚ö° [Cache Hit]', cacheKey);
            return cache[cacheKey].data;
          }

          // Ïù¥ÎØ∏ ÎèôÏùºÌïú ÏöîÏ≤≠Ïù¥ ÏßÑÌñâ Ï§ëÏù¥Î©¥ Í∑∏ Promise Î∞òÌôò (Ï§ëÎ≥µ Ìò∏Ï∂ú Î∞©ÏßÄ)
          if (pending[cacheKey]) {
            console.log('‚è≥ [Pending]', cacheKey);
            return pending[cacheKey];
          }

          // ÏÉà ÏöîÏ≤≠ ÏãúÏûë
          console.log('üåê [Fetch]', cacheKey);
          pending[cacheKey] = fetch(url, options)
            .then(res => res.json())
            .then(data => {
              cache[cacheKey] = { data, time: Date.now() };
              delete pending[cacheKey];
              return data;
            })
            .catch(err => {
              delete pending[cacheKey];
              throw err;
            });

          return pending[cacheKey];
        },

        // Ï∫êÏãú Î¨¥Ìö®Ìôî
        invalidate(urlPattern) {
          Object.keys(cache).forEach(key => {
            if (key.includes(urlPattern)) {
              delete cache[key];
              console.log('üóëÔ∏è [Cache Invalidated]', key);
            }
          });
        },

        // Ï†ÑÏ≤¥ Ï∫êÏãú ÌÅ¥Î¶¨Ïñ¥
        clear() {
          Object.keys(cache).forEach(key => delete cache[key]);
          console.log('üóëÔ∏è [Cache Cleared]');
        }
      };
    })();

    // üöÄ ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÌïÑÏöîÌïú APIÎì§ÏùÑ Î≥ëÎ†¨Î°ú ÎØ∏Î¶¨ Î°úÎìú
    window.preloadUserData = async function() {
      const saved = localStorage.getItem('currentStudent');
      if (!saved) return;

      try {
        const user = JSON.parse(saved);
        if (!user.grade || !user.name) return;

        const grade = encodeURIComponent(user.grade);
        const name = encodeURIComponent(user.name);

        console.log('üöÄ [Preload] ÏÇ¨Ïö©Ïûê Îç∞Ïù¥ÌÑ∞ Î≥ëÎ†¨ Î°úÎî© ÏãúÏûë...');
        const startTime = Date.now();

        // Î™®Îì† APIÎ•º Î≥ëÎ†¨Î°ú Ìò∏Ï∂ú
        await Promise.all([
          ApiCache.fetch(`/api/gate-quiz/status?grade=${grade}&name=${name}`),
          ApiCache.fetch(`/api/unit-grades?grade=${grade}&name=${name}`),
          ApiCache.fetch(`/api/ai-task/last-assigned?grade=${grade}&name=${name}`),
          ApiCache.fetch(`/api/user-progress/study-room?grade=${grade}&name=${name}`),
          ApiCache.fetch(`/api/completion-status?grade=${grade}&name=${name}&series=BRAINÏóÖ`)
        ]);

        console.log('‚úÖ [Preload] ÏôÑÎ£å! ÏÜåÏöîÏãúÍ∞Ñ:', Date.now() - startTime, 'ms');
      } catch (err) {
        console.error('‚ùå [Preload] Ïã§Ìå®:', err);
      }
    };

    // ÌéòÏù¥ÏßÄ Î°úÎìú Ï¶âÏãú preload ÏãúÏûë
    window.preloadUserData();
  </script>

  <!-- Î°úÍ∑∏ÏïÑÏõÉ ÌôïÏù∏ Î™®Îã¨ -->
  <div class="overlay" id="logoutConfirm">
    <div class="modal-box">
      <div class="modal-emoji">üö™</div>
      <div class="modal-title">Î°úÍ∑∏ÏïÑÏõÉ ÌïòÏãúÍ≤†Ïñ¥Ïöî?</div>
      <div class="modal-msg">
        Î°úÍ∑∏ÏïÑÏõÉÌïòÎ©¥ Ïù¥ ÌïôÏäµ Î©îÎâ¥Î•º Îã§Ïãú Î≥¥Î†§Î©¥<br>
        Îã§Ïãú Î°úÍ∑∏Ïù∏Ìï¥Ïïº Ìï¥Ïöî.
      </div>
      <div style="display:flex; gap:8px; justify-content:center;">
        <button type="button" class="modal-btn" id="logoutCancelBtn">Ï∑®ÏÜå</button>
        <button type="button" class="modal-btn modal-btn-danger" id="logoutOkBtn">Î°úÍ∑∏ÏïÑÏõÉ</button>
      </div>
    </div>
  </div>

    <!-- üö™ Î°úÍ∑∏ÏïÑÏõÉ ÌôïÏù∏ Î™®Îã¨ -->
  <div class="overlay" id="logoutModal">
    <div class="modal-box">
      <div style="font-size:32px; margin-bottom:8px;">üö™</div>
      <div class="modal-title">Î°úÍ∑∏ÏïÑÏõÉ ÌïòÏãúÍ≤†Ïñ¥Ïöî?</div>
      <div class="modal-msg">
        Î°úÍ∑∏ÏïÑÏõÉÌïòÎ©¥ Ïù¥ ÌïôÏäµ Î©îÎâ¥Î•º Îã§Ïãú Î≥¥Î†§Î©¥<br>
        Îã§Ïãú Î°úÍ∑∏Ïù∏Ìï¥Ïïº Ìï¥Ïöî.
      </div>
      <div style="display:flex; justify-content:center; gap:10px; margin-top:8px;">
        <button
          type="button"
          class="modal-btn"
          id="logoutCancelBtn"
          style="background:#b9a090;"
        >
          Ï∑®ÏÜå
        </button>
        <button
          type="button"
          class="modal-btn"
          id="logoutConfirmBtn"
        >
          Î°úÍ∑∏ÏïÑÏõÉ
        </button>
      </div>
    </div>
  </div>



  <!-- üîã Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥ -->
  <div class="overlay-loading" id="loadingOverlay">
    <div class="loading-box">
      <div class="loading-emoji">üêã</div>
      <div class="loading-title">Î°úÎî© Ï§ë...</div>
      <div class="loading-msg">ÌïôÏäµ ÏûêÎ£åÎ•º Ï§ÄÎπÑÌïòÍ≥† ÏûàÏñ¥Ïöî.</div>
      <div class="loading-progress">
        <div class="loading-bar" id="loadingBar"></div>
      </div>
      <div class="loading-percent" id="loadingPercent">0%</div>
    </div>
  </div>

  <!-- Ïπ¥Ïπ¥Ïò§ SDK -->
  <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"></script>
  <script>
    // Ïπ¥Ïπ¥Ïò§ SDK Ï¥àÍ∏∞Ìôî (SDK Î°úÎìú ÏßÅÌõÑ Î∞îÎ°ú Ïã§Ìñâ)
    if (!Kakao.isInitialized()) {
      Kakao.init('6ad10cc6680c7a5829a4fd7a3cbb4a7e');
      console.log('‚úÖ Kakao SDK Ï¥àÍ∏∞Ìôî ÏôÑÎ£å:', Kakao.isInitialized());
    }
  </script>

  <script>

    /* üîí Í¥ÄÎ¨∏ ÏãúÏä§ÌÖú Ï†ÑÏó≠ Î≥ÄÏàò Î∞è Ìï®Ïàò */
    let passedGates = 0;  // ÌÜµÍ≥ºÌïú Í¥ÄÎ¨∏ Ïàò (ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú APIÏóêÏÑú Í∞ÄÏ†∏Ïò¥)
    let completedUnitsCount = 0;  // ÏôÑÎ£åÌïú Îã®Ïõê Ïàò
    let completedUnitIds = [];  // ÏôÑÎ£åÌïú Îã®Ïõê ID Î™©Î°ù

    // Îã®Ïõê Ï†ëÍ∑º Í∞ÄÎä• Ïó¨Î∂Ä ÌôïÏù∏ (ÏôÑÎ£å Îã®Ïõê Ïàò Í∏∞Ï§Ä)
    function canAccessUnit(unitId) {
      // Ïù¥ÎØ∏ ÏôÑÎ£åÌïú Îã®ÏõêÏùÄ Ìï≠ÏÉÅ Ï†ëÍ∑º Í∞ÄÎä• (Î≥µÏäµ)
      if (completedUnitIds.includes(unitId)) {
        console.log(`[canAccessUnit] ${unitId} - Ïù¥ÎØ∏ ÏôÑÎ£åÌïú Îã®Ïõê, Ï†ëÍ∑º ÌóàÏö©`);
        return true;
      }

      // ÏôÑÎ£å Îã®Ïõê ÏàòÍ∞Ä Í¥ÄÎ¨∏ Í∏∞Ï§ÄÏóê ÎèÑÎã¨ÌñàÎäîÏßÄ ÌôïÏù∏
      // 10Í∞ú ÏôÑÎ£å + Í¥ÄÎ¨∏ 1 ÎØ∏ÌÜµÍ≥º ‚Üí ÏÉà Îã®Ïõê Ïû†Í∏à
      // 20Í∞ú ÏôÑÎ£å + Í¥ÄÎ¨∏ 2 ÎØ∏ÌÜµÍ≥º ‚Üí ÏÉà Îã®Ïõê Ïû†Í∏à
      const requiredGate = Math.floor(completedUnitsCount / 10);

      const canAccess = passedGates >= requiredGate;
      console.log(`[canAccessUnit] ${unitId} - ÏôÑÎ£å:${completedUnitsCount}, ÌÜµÍ≥ºÍ¥ÄÎ¨∏:${passedGates}, ÌïÑÏöîÍ¥ÄÎ¨∏:${requiredGate}, Ï†ëÍ∑º:${canAccess}`);

      // ÌïÑÏöîÌïú Í¥ÄÎ¨∏ÏùÑ Î™®Îëê ÌÜµÍ≥ºÌñàÏúºÎ©¥ Ï†ëÍ∑º Í∞ÄÎä•
      return canAccess;
    }

    // ÌïÑÏöîÌïú Í¥ÄÎ¨∏ Î≤àÌò∏ Í≥ÑÏÇ∞ (ÏôÑÎ£å Îã®Ïõê Ïàò Í∏∞Ï§Ä)
    function getRequiredGate() {
      // ÏôÑÎ£å 10Í∞ú ‚Üí Í¥ÄÎ¨∏ 1 ÌïÑÏöî
      // ÏôÑÎ£å 20Í∞ú ‚Üí Í¥ÄÎ¨∏ 2 ÌïÑÏöî
      return Math.floor(completedUnitsCount / 10);
    }

    // Ïû†Í∏à Î™®Îã¨ ÌëúÏãú
    function showLockModal(requiredGate) {
      document.getElementById('lockGateLevel').textContent = requiredGate;
      document.getElementById('lockModal').classList.add('active');
    }

    // Ïû†Í∏à Î™®Îã¨ Îã´Í∏∞
    function closeLockModal() {
      const modal = document.getElementById('lockModal');
      if (modal) modal.classList.remove('active');
    }

    // Ïû†Í∏à Î™®Îã¨ÏóêÏÑú Í¥ÄÎ¨∏ ÏãúÌóòÏúºÎ°ú Ïù¥Îèô (Î™®Îã¨ ÌòïÌÉú)
    function goToGateFromLock() {
      const gateLevel = parseInt(document.getElementById('lockGateLevel').textContent);
      closeLockModal();
      // ÏïΩÍ∞ÑÏùò ÎîúÎ†àÏù¥ ÌõÑ ÌòïÏÑ±ÌèâÍ∞Ä Î™®Îã¨ Ïó¥Í∏∞
      setTimeout(() => openGateQuizModal(gateLevel), 300);
    }

    /* 0. ÏãúÎ¶¨Ï¶à Ï†ïÎ≥¥ */
    const seriesInfo = {
      BRAINON: { name: "BRAINÏò®", desc: "Í∞úÎÖê Ïù¥Ìï¥" },
      BRAINUP: { name: "BRAINÏóÖ", desc: "ÏùëÏö© Ï†ÅÏö©" },
      BRAINFIT: { name: "BRAINÌïè", desc: "ÎÖºÎ¶¨ Ïó∞Í≤∞" },
      BRAINDEEP: { name: "BRAINÎî•", desc: "Ïã¨Ìôî Ï∂îÎ°†" },
      BRAINM: { name: "BRAINÏ§ëÎì±", desc: "Ï§ëÎì± ÍµêÍ≥º" },
      BRAINH: { name: "BRAINÍ≥†Îì±", desc: "Í≥†Îì± ÍµêÍ≥º" }
    };

    /* 1. ÏãúÎ¶¨Ï¶àÎ≥Ñ Î∂ÑÏïº/Í≥ºÎ™© */
    const domainsBySeries = {
      BRAINON: [
        {
          id: "science",
          label: "Í≥ºÌïôÎ∂ÑÏïº",
          subs: [
            { id: "bio", label: "ÏÉùÎ¨º", count: 20 },
            { id: "earth", label: "ÏßÄÍµ¨Í≥ºÌïô", count: 20 },
            { id: "physics", label: "Î¨ºÎ¶¨", count: 20 },
            { id: "chem", label: "ÌôîÌïô", count: 20 }
          ]
        },
        {
          id: "social",
          label: "ÏÇ¨ÌöåÎ∂ÑÏïº",
          subs: [
            { id: "soc", label: "ÏÇ¨ÌöåÎ¨∏Ìôî", count: 20 },
            { id: "geo", label: "ÏßÄÎ¶¨", count: 20 },
            { id: "law", label: "Î≤ï", count: 20 },
            { id: "pol", label: "Ï†ïÏπòÍ≤ΩÏ†ú", count: 20 }
          ]
        },
        {
          id: "korlit",
          label: "ÌïúÍµ≠Î¨∏ÌïôÎ∂ÑÏïº",
          subs: [
            { id: "modern", label: "ÌòÑÎåÄÎ¨∏Ìïô", count: 40 },
            { id: "classic", label: "Í≥†Ï†ÑÎ¨∏Ìïô", count: 40 }
          ]
        },
        {
          id: "worldlit",
          label: "ÏÑ∏Í≥ÑÎ¨∏ÌïôÎ∂ÑÏïº",
          subs: [
            { id: "world1", label: "ÏÑ∏Í≥ÑÎ¨∏Ìïô(1)", count: 40 },
            { id: "world2", label: "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2)", count: 40 }
          ]
        },
        {
          id: "person",
          label: "Ïù∏Î¨ºÎ∂ÑÏïº",
          subs: [
            { id: "people1", label: "ÌïúÍµ≠Ïù∏Î¨º", count: 40 },
            { id: "people2", label: "ÏÑ∏Í≥ÑÏù∏Î¨º", count: 40 }
          ]
        }
      ],
      // ÎÇòÎ®∏ÏßÄÎäî ÏÑ∏Ï¢Ö Íµ¨Ï°∞ Ïû¨ÏÇ¨Ïö©
      BRAINUP: null,
      BRAINFIT: null,
      BRAINDEEP: null,
      // ÏÑ±Í∑†Í¥Ä
      BRAINM: [
        {
          id: "nonfiction",
          label: "ÎπÑÎ¨∏ÌïôÎ∂ÑÏïº",
          subs: [
            { id: "naesin", label: "ÎÇ¥Ïã†ÍµêÍ≥º", count: 20 },
            { id: "suneung", label: "ÏàòÎä•Î™®Í≥†", count: 20 }
          ]
        },
        {
          id: "modernlit",
          label: "ÌòÑÎåÄÎ¨∏ÌïôÎ∂ÑÏïº",
          subs: [
            { id: "poem", label: "ÌòÑÎåÄÏãú", count: 20 },
            { id: "novel", label: "ÌòÑÎåÄÏÜåÏÑ§", count: 20 },
            { id: "etc", label: "Í∑π¬∑ÏàòÌïÑ¬∑Ìù¨Í≥°", count: 20 }
          ]
        },
        {
          id: "classiclit",
          label: "Í≥†Ï†ÑÎ¨∏ÌïôÎ∂ÑÏïº",
          subs: [
            { id: "gosi", label: "Í≥†Ï†ÑÏãúÍ∞Ä", count: 20 },
            { id: "gonovel", label: "Í≥†Ï†ÑÏÜåÏÑ§", count: 20 },
            { id: "goessay", label: "Í≥†Ï†ÑÏàòÌïÑ", count: 20 }
          ]
        },
        {
          id: "grammar",
          label: "Î¨∏Î≤ïÎ∂ÑÏïº",
          subs: [
            { id: "modern", label: "ÌòÑÎåÄ", count: 12 },
            { id: "middle", label: "Ï§ëÏÑ∏", count: 12 }
          ]
        }
      ],
      // Íµ≠ÏûêÍ∞ê
      BRAINH: [
        {
          id: "nonfiction",
          label: "ÎπÑÎ¨∏ÌïôÎ∂ÑÏïº",
          subs: [
            { id: "naesin", label: "ÎÇ¥Ïã†ÍµêÍ≥º", count: 24 },
            { id: "suneung", label: "ÏàòÎä•Î™®Í≥†", count: 24 }
          ]
        },
        {
          id: "modernlit",
          label: "ÌòÑÎåÄÎ¨∏ÌïôÎ∂ÑÏïº",
          subs: [
            { id: "poem", label: "ÌòÑÎåÄÏãú", count: 20 },
            { id: "novel", label: "ÌòÑÎåÄÏÜåÏÑ§", count: 20 },
            { id: "etc", label: "Í∑π¬∑ÏàòÌïÑ¬∑Ìù¨Í≥°", count: 15 }
          ]
        },
        {
          id: "classiclit",
          label: "Í≥†Ï†ÑÎ¨∏ÌïôÎ∂ÑÏïº",
          subs: [
            { id: "gosi", label: "Í≥†Ï†ÑÏãúÍ∞Ä", count: 20 },
            { id: "gonovel", label: "Í≥†Ï†ÑÏÜåÏÑ§", count: 20 },
            { id: "goessay", label: "Í≥†Ï†ÑÏàòÌïÑ", count: 15 }
          ]
        },
        {
          id: "grammar",
          label: "Î¨∏Î≤ïÎ∂ÑÏïº",
          subs: [
            { id: "modern", label: "ÌòÑÎåÄ", count: 12 },
            { id: "middle", label: "Ï§ëÏÑ∏", count: 12 }
          ]
        }
      ]
    };

    /* 1.5 Í≥ºÎ™©Î≥Ñ Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ Îß§Ìïë (PCÏö©) */
    const subjectBackgrounds = {
      'bio': './images/ÏÉùÎ¨º.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'earth': './images/ÏßÄÍµ¨Í≥ºÌïô.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'physics': './images/Î¨ºÎ¶¨.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'chem': './images/ÌôîÌïô.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'soc': './images/ÏÇ¨ÌöåÎ¨∏Ìôî.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'geo': './images/ÏßÄÎ¶¨.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'law': './images/Î≤ïÎ∞∞Í≤Ω.jpg',
      'pol': './images/Ï†ïÏπòÍ≤ΩÏ†úÎ∞∞Í≤Ω.jpg',
      'modern': './images/ÌòÑÎåÄÎ¨∏ÌïôÎ∞∞Í≤Ω.jpg',
      'classic': './images/Í≥†Ï†ÑÎ¨∏ÌïôÎ∞∞Í≤Ω.jpg',
      'world': './images/ÏÑ∏Í≥ÑÎ¨∏Ìïô1Î∞∞Í≤Ω.jpg',
      'world1': './images/ÏÑ∏Í≥ÑÎ¨∏Ìïô1Î∞∞Í≤Ω.jpg',
      'world2': './images/ÏÑ∏Í≥ÑÎ¨∏Ìïô2Î∞∞Í≤Ω.jpg',
      'people': './images/Ïù∏Î¨º1Î∞∞Í≤Ω.jpg',
      'people1': './images/Ïù∏Î¨º1Î∞∞Í≤Ω.jpg',
      'people2': './images/Ïù∏Î¨º2Î∞∞Í≤Ω.jpg'
    };

    /* Í≥ºÎ™©Î≥Ñ Î∞∞Í≤Ω ÎπÑÎîîÏò§ Îß§Ìïë (ÌÉúÎ∏îÎ¶øÏö©) */
    const subjectBackgroundVideos = {
      'bio': './images/ÏÉùÎ¨º.mp4',
      'earth': './images/ÏßÄÍµ¨Í≥ºÌïô.mp4',
      'physics': './images/Î¨ºÎ¶¨.mp4',
      'chem': './images/ÌôîÌïô.mp4',
      'soc': './images/ÏÇ¨ÌöåÎ¨∏Ìôî.mp4',
      'geo': './images/ÏßÄÎ¶¨.mp4'
    };

    /* Í≥ºÎ™©Î≥Ñ Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ Îß§Ìïë (ÌÉúÎ∏îÎ¶øÏö©) */
    const subjectBackgroundsTablet = {
      'bio': './images/ÏÉùÎ¨º.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'earth': './images/ÏßÄÍµ¨Í≥ºÌïô.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'physics': './images/Î¨ºÎ¶¨.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'chem': './images/ÌôîÌïô.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'soc': './images/ÏÇ¨ÌöåÎ¨∏Ìôî.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'geo': './images/ÏßÄÎ¶¨.mp4',  // ÎπÑÎîîÏò§Î°ú Î≥ÄÍ≤Ω
      'law': './images/Î≤ïÎ∞∞Í≤Ω_tablet.jpg',
      'pol': './images/Ï†ïÏπòÍ≤ΩÏ†úÎ∞∞Í≤Ω_tablet.jpg',
      'modern': './images/ÌòÑÎåÄÎ¨∏ÌïôÎ∞∞Í≤Ω_tablet.jpg',
      'classic': './images/Í≥†Ï†ÑÎ¨∏ÌïôÎ∞∞Í≤Ω_tablet.jpg',
      'world': './images/ÏÑ∏Í≥ÑÎ¨∏Ìïô1Î∞∞Í≤Ω_tablet.jpg',
      'world1': './images/ÏÑ∏Í≥ÑÎ¨∏Ìïô1Î∞∞Í≤Ω_tablet.jpg',
      'world2': './images/ÏÑ∏Í≥ÑÎ¨∏Ìïô2Î∞∞Í≤Ω_tablet.jpg',
      'people': './images/Ïù∏Î¨º1Î∞∞Í≤Ω_tablet.jpg',
      'people1': './images/Ïù∏Î¨º1Î∞∞Í≤Ω_tablet.jpg',
      'people2': './images/Ïù∏Î¨º2Î∞∞Í≤Ω_tablet.jpg'
    };

    /* Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ Î≥ÄÍ≤Ω Ìï®Ïàò */
    function changeBackgroundImage(subjectObj) {
      console.log('üé® Î∞∞Í≤Ω Î≥ÄÍ≤Ω ÏöîÏ≤≠:', subjectObj);

      // ÌÉúÎ∏îÎ¶ø(ÏïÑÏù¥Ìå®Îìú) Í∞êÏßÄ
      const isTablet = window.innerWidth >= 769 && window.innerWidth <= 1400;

      // offsetÏù¥ ÏûàÏúºÎ©¥ (2)Î≤à Ïù¥ÎØ∏ÏßÄ ÏÇ¨Ïö©
      let subjectId = subjectObj.id;
      if (subjectObj.offset && subjectObj.offset > 0) {
        // world + offset ‚Üí world2, people + offset ‚Üí people2
        if (subjectId === 'world') {
          subjectId = 'world2';
        } else if (subjectId === 'people') {
          subjectId = 'people2';
        }
      }

      // PCÏôÄ ÌÉúÎ∏îÎ¶øÏóê Îî∞Îùº Îã§Î•∏ Ïù¥ÎØ∏ÏßÄ ÏÇ¨Ïö©
      let imageUrl;
      if (isTablet) {
        imageUrl = subjectBackgroundsTablet[subjectId];
        // world2, people2 ÌÉúÎ∏îÎ¶ø Îß§Ìïë
        if (!imageUrl) {
          if (subjectId === 'world2') {
            imageUrl = './images/ÏÑ∏Í≥ÑÎ¨∏Ìïô2Î∞∞Í≤Ω_tablet.jpg';
          } else if (subjectId === 'people2') {
            imageUrl = './images/Ïù∏Î¨º2Î∞∞Í≤Ω_tablet.jpg';
          }
        }
      } else {
        imageUrl = subjectBackgrounds[subjectId];
        // world2, people2 PC Îß§Ìïë
        if (!imageUrl) {
          if (subjectId === 'world2') {
            imageUrl = './images/ÏÑ∏Í≥ÑÎ¨∏Ìïô2Î∞∞Í≤Ω.jpg';
          } else if (subjectId === 'people2') {
            imageUrl = './images/Ïù∏Î¨º2Î∞∞Í≤Ω.jpg';
          }
        }
      }

      console.log('üñºÔ∏è Ïù¥ÎØ∏ÏßÄ/ÎπÑÎîîÏò§ URL:', imageUrl);
      if (imageUrl) {
        // ÎπÑÎîîÏò§Ïù∏ÏßÄ Ïù¥ÎØ∏ÏßÄÏù∏ÏßÄ ÌôïÏù∏
        const isVideo = imageUrl.endsWith('.mp4') || imageUrl.endsWith('.webm');

        if (isVideo) {
          // ÎπÑÎîîÏò§ Î∞∞Í≤Ω Ï≤òÎ¶¨
          console.log('üé¨ ÎπÑÎîîÏò§ Î∞∞Í≤Ω Ï†ÅÏö©:', imageUrl);

          // Í∏∞Ï°¥ subject-bg-videoÍ∞Ä ÏûàÏúºÎ©¥ Ï†úÍ±∞
          let existingSubjectVideo = document.getElementById('subject-bg-video');
          if (existingSubjectVideo) {
            existingSubjectVideo.remove();
          }

          // ÏÉà ÎπÑÎîîÏò§ ÏöîÏÜå ÏÉùÏÑ±
          const video = document.createElement('video');
          video.id = 'subject-bg-video';
          video.autoplay = true;
          video.loop = true;
          video.muted = true;
          video.playsInline = true;
          video.setAttribute('webkit-playsinline', 'true');  // iOS Safari ÏßÄÏõê
          video.setAttribute('playsinline', 'true');  // iOS Safari ÏßÄÏõê
          video.src = imageUrl;

          console.log('üì± isTablet:', isTablet, 'width:', window.innerWidth);

          if (isTablet) {
            // ÏïÑÏù¥Ìå®Îìú: tablet-fixed-bg ÏïàÏóê ÎπÑÎîîÏò§ ÏÇΩÏûÖ
            const tabletBg = document.getElementById('tablet-fixed-bg');
            console.log('üì± tabletBg Ï∞æÏùå:', tabletBg);
            if (tabletBg) {
              // ÏïÑÏù¥Ìå®ÎìúÏóêÏÑú Î°úÎî© Ïä§ÌîºÎÑà ÌëúÏãú
              const loadingOverlay = document.getElementById('loading-overlay');
              if (loadingOverlay) {
                loadingOverlay.classList.remove('fade-out');
                loadingOverlay.style.display = 'flex';
              }

              tabletBg.style.backgroundImage = 'none';
              tabletBg.innerHTML = '';  // Í∏∞Ï°¥ ÎπÑÎîîÏò§ Ï†úÍ±∞

              video.style.cssText = `
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                object-fit: cover;
                z-index: 1;
              `;

              // ÎπÑÎîîÏò§Í∞Ä Ïû¨ÏÉù ÏãúÏûëÌïòÎ©¥ Î°úÎî© Ïä§ÌîºÎÑà Ïà®Í∏∞Í∏∞
              video.oncanplay = function() {
                if (loadingOverlay) {
                  loadingOverlay.classList.add('fade-out');
                  setTimeout(() => {
                    loadingOverlay.style.display = 'none';
                  }, 500);
                }
              };

              tabletBg.appendChild(video);
              console.log('üì± ÎπÑÎîîÏò§Î•º tabletBgÏóê Ï∂îÍ∞ÄÌï®');

              // iOS SafariÏóêÏÑú ÎπÑÎîîÏò§ Î°úÎìú Í∞ïÏ†ú
              video.load();
            }
          } else {
            // PC: bodyÏóê ÎπÑÎîîÏò§ ÏÇΩÏûÖ
            video.style.cssText = `
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              object-fit: cover;
              z-index: 0;
              pointer-events: none;
            `;
            document.body.style.background = 'transparent';
            document.body.style.backgroundImage = 'none';
            document.body.insertBefore(video, document.body.firstChild);
          }

          // iOSÏóêÏÑú ÏûêÎèôÏû¨ÏÉù ÏãúÎèÑ
          video.play().catch(function(error) {
            console.log('ÎπÑÎîîÏò§ ÏûêÎèôÏû¨ÏÉù Ïã§Ìå®:', error);
          });

          // Í∏∞Ï°¥ Î©îÎâ¥ Î∞∞Í≤Ω ÎèôÏòÅÏÉÅ Ïà®Í∏∞Í∏∞
          const bgVideo = document.querySelector('.menu-bg-video');
          if (bgVideo) {
            bgVideo.style.display = 'none';
          }

          console.log('‚úÖ ÎπÑÎîîÏò§ Î∞∞Í≤Ω Î≥ÄÍ≤Ω ÏôÑÎ£å');
        } else {
          // Ïù¥ÎØ∏ÏßÄ Î∞∞Í≤Ω Ï≤òÎ¶¨ (Í∏∞Ï°¥ Î°úÏßÅ)
          // Í∏∞Ï°¥ subject-bg-videoÍ∞Ä ÏûàÏúºÎ©¥ Ï†úÍ±∞
          let existingSubjectVideo = document.getElementById('subject-bg-video');
          if (existingSubjectVideo) {
            existingSubjectVideo.remove();
          }

          const img = new Image();
          img.onload = function() {
            // ÌÉúÎ∏îÎ¶øÏóêÏÑúÎäî Í≥†Ï†ï Î∞∞Í≤Ω divÏóê Ïù¥ÎØ∏ÏßÄ ÏÑ§Ï†ï
            if (isTablet) {
              const tabletBg = document.getElementById('tablet-fixed-bg');
              if (tabletBg) {
                tabletBg.style.backgroundImage = `url('${imageUrl}')`;
              }
              // body Î∞∞Í≤ΩÏùÄ Ìà¨Î™ÖÌïòÍ≤å (CSSÏóêÏÑú Ï≤òÎ¶¨)
            } else {
              // PCÏóêÏÑúÎäî bodyÏóê Î∞∞Í≤Ω ÏÑ§Ï†ï
              document.body.style.backgroundImage = `url('${imageUrl}')`;
              document.body.style.backgroundSize = '110%';
              document.body.style.backgroundPosition = 'center bottom';
              document.body.style.backgroundAttachment = 'fixed';
            }

            // Î∞∞Í≤Ω ÎèôÏòÅÏÉÅ Ïà®Í∏∞Í∏∞
            const bgVideo = document.querySelector('.menu-bg-video');
            if (bgVideo) {
              bgVideo.style.display = 'none';
            }
            console.log('‚úÖ Î∞∞Í≤Ω Î≥ÄÍ≤Ω ÏôÑÎ£å:', document.body.style.backgroundImage);

          };
          img.onerror = function() {
            console.warn('‚ùå Ïù¥ÎØ∏ÏßÄ Î°úÎìú Ïã§Ìå®:', imageUrl);
          };
          img.src = imageUrl;
        }
      } else {
        console.warn('‚ùå Ìï¥Îãπ Í≥ºÎ™©Ïùò Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§:', subjectId);
      }
    }

    // Í∏ÄÎ°úÎ≤å Ïä§ÏΩîÌîÑÏóê Ìï®ÏàòÏôÄ Í∞ùÏ≤¥ ÎÖ∏Ï∂ú (ÎîîÎ≤ÑÍπÖ Î∞è Ïô∏Î∂Ä Ï†ëÍ∑ºÏö©)
    window.changeBackgroundImage = changeBackgroundImage;
    window.subjectBackgrounds = subjectBackgrounds;

    /* 2. Í≥ºÎ™©Î≥Ñ ÌÖåÎßà */
    const titleThemes = {
      bio: [
        "üß¨ ÏÉùÎ¨ºÍ≥º Î¨¥ÏÉùÎ¨ºÏùò Íµ¨Î∂ÑÍ≥º Í¥ÄÍ≥Ñ",
        "ü¶Å ÎèôÎ¨ºÏùò Î™∏Í≥º ÏÉùÌôú Î∞©ÏãùÏùÄ Ïôú Îã§Î•ºÍπå?",
        "Îã§ÏñëÌïú ÏÉùÎ¨ºÏùò Íµ¨Ï°∞ÏôÄ Í∏∞Îä•",
        "Ïú†Ï†ÑÍ≥º Î≤àÏãùÏùò ÎπÑÎ∞Ä",
        "ÌôòÍ≤ΩÍ≥º ÏÉùÎ¨ºÏùò ÏÉÅÌò∏ÏûëÏö©",
        "Ï†ÅÏùëÍ≥º ÏßÑÌôîÏùò Í≥ºÏ†ï",
        "ÏÉùÌÉúÍ≥ÑÏùò Íµ¨ÏÑ±Í≥º ÏàúÌôò",
        "Ïù∏Í∞ÑÍ≥º ÏÉùÌÉúÍ≥ÑÏùò Ï°∞Ìôî",
        "ÏßàÎ≥ëÍ≥º Î©¥Ïó≠Ïùò Ïù¥Ìï¥",
        "ÏÉùÎ™ÖÍ≥µÌïôÏùò Í∏∞Ï¥à ÏÇ¥Ìé¥Î≥¥Í∏∞"
      ],
      earth: [
        "üåç ÏßÄÍµ¨Îäî Ïñ¥ÎñªÍ≤å ÎßåÎì§Ïñ¥Ï°åÏùÑÍπå?",
        "üåã ÎßàÍ∑∏ÎßàÍ∞Ä Îì§Î†§Ï£ºÎäî ÏßÄÍµ¨Ïùò Ïù¥ÏïºÍ∏∞",
        "ÏßÄÏßà Íµ¨Ï°∞Ïùò ÏõêÎ¶¨",
        "Ìï¥ÏñëÏùò ÌùêÎ¶ÑÍ≥º ÏÉùÌÉú",
        "Í∏∞ÏÉÅ Ïû¨Ìï¥ÏôÄ ÎåÄÎπÑ",
        "Í∏∞ÌõÑ Î≥ÄÌôîÏùò Ïù¥Ìï¥",
        "Î≥ÑÍ≥º Ïö∞Ï£ºÏùò Í¥ÄÏ∞∞",
        "ÏßÄÍµ¨ ÎÇ¥Î∂ÄÏùò ÎπÑÎ∞Ä",
        "ÏûêÏó∞ÏûêÏõêÏùò ÌòïÏÑ±Í≥º Ïù¥Ïö©",
        "ÏßÄÍµ¨ ÌôòÍ≤ΩÏùò Î≥¥Ï†Ñ"
      ],
      physics: [
        "üí™ Ìûò, ÏÑ∏ÏÉÅÏùÑ ÏõÄÏßÅÏù¥Îäî Î≥¥Ïù¥ÏßÄ ÏïäÎäî ÏÜê",
        "üåç ÏÇ¨Í≥ºÍ∞Ä Îñ®Ïñ¥ÏßÑ Ïù¥Ïú†, Ï§ëÎ†•Ïùò Î∞úÍ≤¨",
        "üåô Îã¨ÏóêÏÑúÎäî Ï†êÌîÑÏôï! Î¨¥Í≤å vs ÏßàÎüâ",
        "‚öñÔ∏è ÏãúÏÜåÏùò Í≥ºÌïô, ÏßÄÎ†õÎåÄÏôÄ Í∑†Ìòï",
        "üöó ÏÜçÎ†•, Í±∞Î¶¨, ÏãúÍ∞ÑÏùò ÏÇºÍ∞ÅÍ¥ÄÍ≥Ñ",
        "‚ö° Ï†ÑÏûêÎì§Ïùò ÎåÄÏù¥Îèô, Ï†ÑÎ•òÏôÄ Ï†ÑÏïï",
        "üîå Î∂àÏù¥ ÏºúÏßÄÎäî Í∏∏, Ï†ÑÍ∏∞ ÌöåÎ°ú",
        "üß≤ ÎÅåÏñ¥ÎãπÍ∏∞Í≥† Î∞ÄÏñ¥ÎÇ¥Îäî ÏûêÏÑùÏùò Ìûò",
        "‚ö° ÏûêÏÑùÏúºÎ°ú Ï†ÑÍ∏∞Î•º ÎßåÎì†Îã§! Ï†ÑÏûêÍ∏∞ Ïú†ÎèÑ",
        "üåä Ï∂úÎ†ÅÏù¥Î©∞ ÌçºÏ†∏ÎÇòÍ∞ÄÎäî ÌååÎèô",
        "üí° Í±∞Ïö∏ ÏÜç ÏÑ∏ÏÉÅ, ÎπõÏùò Î∞òÏÇ¨",
        "üîç Î¨ºÏÜç Îã§Î¶¨Í∞Ä Í∫æÏó¨ Î≥¥Ïù¥Îäî Ïù¥Ïú†",
        "üîä ÏßÑÎèôÏù¥ ÎßåÎì§Ïñ¥ÎÇ∏ ÏÜåÎ¶¨Ïùò ÏÑ∏Í≥Ñ",
        "üå°Ô∏è Îú®Í±∞ÏõÄÏùò Ï†ïÏ≤¥, Ïó¥Í≥º Ïò®ÎèÑ",
        "‚ö° ÏóêÎÑàÏßÄÎäî Î≥ÄÌï† Îøê, ÏÇ¨ÎùºÏßÄÏßÄ ÏïäÎäîÎã§",
        "‚öõÔ∏è ÎààÏóê Î≥¥Ïù¥ÏßÄ ÏïäÎäî ÏûëÏùÄ ÏÑ∏Í≥Ñ",
        "üéà Î∞∞Í∞Ä Îú®Í≥† ÌíçÏÑ†Ïù¥ ÎÇ†ÏïÑÏò§Î•¥Îäî ÏõêÎ¶¨",
        "üîå Í∞êÏ†ÑÏùÑ ÌîºÌïòÎùº! Ï†ÑÍ∏∞ ÏïàÏ†Ñ ÏàòÏπô",
        "üåü Î∞§ÌïòÎäò Î≥ÑÎπõ ÏÜçÏóê Îã¥Í∏¥ Ïö∞Ï£º",
        "üöÄ SFÍ∞Ä ÌòÑÏã§Ïù¥ ÎêòÎäî ÎØ∏Îûò Í∏∞Ïà†"
      ],
      chem: [
        "üß™ Ïó∞ÌïÑÏù¥ Î¨ºÏßàÏù¥ÎùºÍ≥†? Î¨ºÏ≤¥ÏôÄ Î¨ºÏßà Íµ¨Î≥ÑÎ≤ï",
        "üç¨ ÏÇ¨ÎùºÏßÑ ÏÑ§ÌÉïÏùÄ Ïñ¥ÎîîÎ°ú Í∞îÏùÑÍπå?",
        "üíß Î¨ºÍ≥º Í∏∞Î¶ÑÏù¥ Ï†àÎåÄ ÏπúÌï¥Ïßà Ïàò ÏóÜÎäî Ïù¥Ïú†",
        "üéà ÌíçÏÑ†Ïù¥ ÎπµÎπµÌï¥ÏßÄÎäî ÏßÑÏßú Ïù¥Ïú†",
        "üßä ÏñºÏùå ‚Üí Î¨º ‚Üí ÏàòÏ¶ùÍ∏∞, Î¨ºÏùò 3Îã® Î≥ÄÏã†",
        "‚öóÔ∏è Ïö∞Ï£ºÏùò Î†àÍ≥† Î∏îÎ°ù, ÏõêÏÜå 118Í∞ÄÏßÄ",
        "‚öõÔ∏è ÎààÏóê Ïïà Î≥¥Ïù¥Îäî ÏïåÍ∞±Ïù¥, ÏõêÏûêÏùò Ï†ïÏ≤¥",
        "üîó ÏõêÏûêÎì§Ïù¥ ÏÜêÏû°Í≥† Î∂ÑÏûêÍ∞Ä ÎêòÎäî ÏàúÍ∞Ñ",
        "‚öñÔ∏è ÌÉúÏõåÎèÑ ÎÖπÏó¨ÎèÑ Î¨¥Í≤åÎäî ÎòëÍ∞ôÎã§!",
        "üçã Î†àÎ™¨ÏùÄ ÏãúÌÅº, ÎπÑÎàÑÎäî ÎØ∏ÎÅà! Ïôú?",
        "üî• ÏÇ∞ÏÜåÍ∞Ä Î≤îÏù∏! ÎÖπÍ≥º Î∂àÏùò Í≥µÌÜµÏ†ê",
        "‚ö° Î¨ºÏóê Ï†ÑÍ∏∞Î•º ÎÑ£ÏúºÎ©¥ ÎøÖ! Í∏∞Ï≤¥Í∞Ä ÎÇòÏôÄ",
        "üå°Ô∏è ÏÑ§ÌÉïÏùÑ Î¨¥ÌïúÏ†ï ÎÖπÏùº Ïàò ÏûàÏùÑÍπå?",
        "üí® Ï£ºÏÇ¨Í∏∞Î•º ÎàÑÎ•¥Î©¥ Í≥µÍ∏∞Îäî Ïñ¥ÎîîÎ°ú?",
        "üî¨ ÏÜêÎÇúÎ°úÍ∞Ä Îú®Í±∞ÏõåÏßÄÎäî ÌôîÌïôÏùò ÎπÑÎ∞Ä",
        "üß¨ 500ÎÖÑÏù¥ ÏßÄÎÇòÎèÑ Ïïà Ïç©Îäî ÌîåÎùºÏä§Ìã±",
        "‚öôÔ∏è Ï≤†+ÌÉÑÏÜå=Í∞ïÏ≤†! Í∏àÏÜç Ìï©Ï≤¥Ïùò ÎßàÎ≤ï",
        "üåø ÎØ∏ÏÑ∏Î®ºÏßÄÏôÄ ÏÇ∞ÏÑ±ÎπÑ, ÌôîÌïôÏùò Ïó≠Ïäµ",
        "üß¥ ÏÑ∏Ï†ú, ÏπòÏïΩ, ÏÉ¥Ìë∏ ÏÜç ÌôîÌïô Ïù¥ÏïºÍ∏∞",
        "üöÄ Í∑∏ÎûòÌïÄÎ∂ÄÌÑ∞ ÎÇòÎÖ∏ÍπåÏßÄ, ÎØ∏Îûò ÏÜåÏû¨ ÎåÄÌÉêÌóò"
      ],
      soc: [
        "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ïö∞Î¶¨ Í∞ÄÏ°±ÏùÄ Ïñ¥ÎñªÍ≤å Ïù¥Î£®Ïñ¥ÏßàÍπåÏöî?",
        "üë®‚Äçüë©‚Äçüëß ÏãúÎåÄÏóê Îî∞Îùº Îã¨ÎùºÏßÑ Í∞ÄÏ°± Ïù¥ÏïºÍ∏∞",
        "üíï Î∞∞Î†§Î°ú ÏôÑÏÑ±ÎêòÎäî Í∞ÄÏ°± Í¥ÄÍ≥Ñ",
        "üöÇ ÏãúÍ∞ÑÏùÑ Îã®Ï∂ïÌïú Î∞úÎ™ÖÎì§, Îçî ÎÑìÏñ¥ÏßÑ ÏÉùÌôúÍ∂å",
        "üèòÔ∏è Ïö∞Î¶¨ ÎèôÎÑ§ Î¨∏Ï†ú, Ìï®Íªò Ìï¥Í≤∞Ìï¥Ïöî",
        "üéÆ Í≤åÏûÑ ÏÜç ÎÇò vs ÌòÑÏã§Ïùò ÎÇò, Ï†ïÏ≤¥ÏÑ± Ïù¥ÏïºÍ∏∞",
        "üì± SNSÍ∞Ä Î∞îÍæº Ïö∞Î¶¨Ïùò Í¥ÄÍ≥Ñ",
        "ü§ñ AIÏôÄ Ìï®Íªò ÏÇ¨Îäî Î≤ï, Ïù∏Í∞ÑÎã§ÏõÄÏù¥ÎûÄ?",
        "üë• Ïù∏Ïã∏ÏôÄ ÏïÑÏã∏, ÏßëÎã® ÏÜç Ïö∞Î¶¨Ïùò Î™®Ïäµ",
        "üçú ÎùºÎ©¥ÏùÄ Î¨∏ÌôîÏùºÍπå? Î¨∏ÌôîÏùò ÏùòÎØ∏ ÌÉêÍµ¨",
        "üé¨ K-ÎìúÎùºÎßàÎäî Ïôú ÏÑ∏Í≥ÑÎ•º ÏÇ¨Î°úÏû°ÏïòÏùÑÍπå?",
        "üì∞ Í∞ÄÏßú Îâ¥Ïä§Î•º Íµ¨Î≥ÑÌïòÎäî Î≤ï",
        "üó≥Ô∏è 18ÏÑ∏ ÏÑ†Í±∞Í∂å, Ïö∞Î¶¨Ïùò Î™©ÏÜåÎ¶¨",
        "‚öñÔ∏è Ï†ïÏùòÎûÄ Î¨¥ÏóáÏù∏Í∞Ä? Í≥µÏ†ïÌïú ÏÇ¨ÌöåÎ•º Ìñ•ÌïòÏó¨",
        "üåç Í∏∞ÌõÑ ÏúÑÍ∏∞ÏôÄ ÎØ∏Îûò ÏÑ∏ÎåÄÏùò Ï±ÖÏûÑ",
        "üåç Íµ≠Ï†úÏÇ¨ÌöåÏôÄ Í∏ÄÎ°úÎ≤å ÏãúÎØº",
        "üî¨ Í≥ºÌïôÍ∏∞Ïà†Ïù¥ Î∞îÍæ∏Îäî ÏùºÏÉÅ",
        "üè• Î≥µÏßÄÎûÄ Î¨¥ÏóáÏù∏Í∞Ä? Ìï®Íªò ÏÇ¨Îäî ÏÇ¨Ìöå",
        "‚ôªÔ∏è ÏßÄÏÜçÍ∞ÄÎä•Ìïú ÏÇ∂, ÌôòÍ≤ΩÍ≥º Í≤ΩÏ†úÏùò Í∑†Ìòï",
        "üîÆ ÎØ∏Îûò ÏÇ¨Ìöå, Ïö∞Î¶¨Í∞Ä ÎßåÎì§Ïñ¥Í∞à ÏÑ∏ÏÉÅ"
      ],
      geo: [
        "üó∫Ô∏è ÏßÄÎèÑÎ•º ÌÜµÌï¥ ÏÑ∏ÏÉÅÏùÑ Ïù¥Ìï¥ÌïòÎã§",
        "üìç ÏßÄÎèÑÏóê Îã¥Í∏¥ ÏïΩÏÜçÍ≥º ÌëúÌòÑ",
        "üèòÔ∏è Ïö∞Î¶¨ Í≥†Ïû•Ïùò ÏÉÅÏßïÍ≥º Ïú†Îûò",
        "üèôÔ∏è Ïö∞Î¶¨ ÎèôÎÑ§Îäî Ïôú Î∂àÌé∏Ìï†Íπå? ÏßÄÏó≠ Î¨∏Ï†ú ÏÇ¥Ìé¥Î≥¥Í∏∞",
        "üåæ ÏãúÎåÄÏôÄ Ìï®Íªò Î∞úÏ†ÑÌïòÎäî ÏãúÍ≥® ÎßàÏùÑ",
        "üß≠ ÏßÄÍµ¨Ïóê Ï£ºÏÜåÍ∞Ä ÏûàÎã§Í≥†? ÏúÑÎèÑÏôÄ Í≤ΩÎèÑÏùò ÎπÑÎ∞Ä",
        "üåç ÏßÄÍµ¨Ïùò ÏñºÍµ¥, ÎåÄÎ•ôÍ≥º Î∞îÎã§ Ïù¥ÏïºÍ∏∞",
        "üá∞üá∑ Ïö∞Î¶¨ÎÇòÎùºÎäî Ïñ¥ÎîîÏóê ÏûàÏùÑÍπå? ÌïúÎ∞òÎèÑÏùò ÏúÑÏπò",
        "üèîÔ∏è Î∞±ÎëêÏÇ∞ÏóêÏÑú ÌïúÎùºÏÇ∞ÍπåÏßÄ, Íµ≠ÌÜ† Ïó¨Ìñâ",
        "‚òÄÔ∏è Ïôú Ï†úÏ£ºÎèÑÎäî ÏÑúÏö∏Î≥¥Îã§ Îî∞ÎúªÌï†Íπå?",
        "üèôÔ∏è ÎèÑÏãúÎäî Ïôú Ïª§ÏßàÍπå? ÎèÑÏãúÌôîÏùò ÎπõÍ≥º Í∑∏Î¶ºÏûê",
        "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ïù∏Íµ¨ Ïù¥Îèô, ÏÇ¨ÎûåÎì§ÏùÄ Ïôú ÏõÄÏßÅÏùºÍπå?",
        "üöÑ ÏÑ∏Í≥ÑÎäî ÌïòÎÇòÎ°ú, ÍµêÌÜµÍ≥º ÌÜµÏã†Ïùò Î∞úÎã¨",
        "üó∫Ô∏è ÏßÄÎèÑ ÏÜç Î≥¥Î¨ºÏ∞æÍ∏∞, ÏßÄÎ¶¨ Ï†ïÎ≥¥ Í∏∞Ïà†",
        "‚õΩ ÏûêÏõêÏùÄ Ïñ¥ÎîîÏóê? ÏóêÎÑàÏßÄÏôÄ ÏûêÏõêÏùò Î∂ÑÌè¨",
        "‚ö° ÏÑùÏú†Í∞Ä ÏÇ¨ÎùºÏßÑÎã§Î©¥? ÏóêÎÑàÏßÄÏùò ÎØ∏Îûò",
        "üêü Î∞îÎã§Îäî Î¨¥ÌïúÌïú Î≥¥Î¨ºÏ∞ΩÍ≥†ÏùºÍπå?",
        "üåã ÎïÖÏù¥ ÌùîÎì§Î¶¨Í≥† ÌïòÎäòÏù¥ Î¨¥ÎÑàÏßà Îïå",
        "üåê Ï†Ñ ÏÑ∏Í≥ÑÍ∞Ä Ïù¥ÏõÉÏù¥ Îêú ÏãúÎåÄ, ÏÑ∏Í≥ÑÌôî",
        "üåè 100ÎÖÑ ÌõÑÏóêÎèÑ ÏÇ¥ Ïàò ÏûàÏùÑÍπå? ÏßÄÍµ¨Ïùò ÎØ∏Îûò"
      ],
      law: [
        "ü§ù ÏÇ¨ÎûåÏù¥ÎùºÎ©¥ ÎàÑÍµ¨ÎÇò ÎàÑÎ¶¨Îäî ÏÜåÏ§ëÌïú Í∂åÎ¶¨, Ïù∏Í∂å",
        "‚öñÔ∏è ÌèâÎì±ÏùÑ Ìñ•Ìïú Ïò§Îûú Ïó¨Ï†ï",
        "üõ°Ô∏è Ïö∞Î¶¨ Í≥ÅÏùò Ïù∏Í∂å, Ïñ¥ÎñªÍ≤å ÏßÄÏºúÏ°åÏùÑÍπå?",
        "üõ°Ô∏è ÏÇ¨Ïù¥Î≤Ñ Ìè≠Î†•ÏóêÏÑú ÏïÑÎèô ÌïôÎåÄÍπåÏßÄ, Ïù∏Í∂å Î≥¥Ìò∏Ïùò Ï§ëÏöîÏÑ±",
        "‚öñÔ∏è ÏÇºÎ≥µ Ï†úÎèÑÏôÄ Ï°∞ÏÑ†Ïùò Ïã†Ï§ëÌïú Ïû¨Ìåê Î∞©Ïãù",
        "üìú ÌóåÎ≤ï, ÎÇòÎùºÏùò Í∞ÄÏû• ÎÜíÏùÄ ÏïΩÏÜç",
        "üèõÔ∏è Î≤ïÏùÄ Ïñ¥ÎñªÍ≤å ÎßåÎì§Ïñ¥ÏßàÍπå?",
        "üë®‚Äç‚öñÔ∏è Î≤ïÏõêÍ≥º Ïû¨Ìåê, Ï†ïÏùòÎ•º Ï∞æÏïÑÏÑú",
        "üöî Î≤îÏ£ÑÏôÄ ÌòïÎ≤å, Ïôú Ï≤òÎ≤åÌï†Íπå?",
        "üë∂ Ï≤≠ÏÜåÎÖÑÎèÑ Î≤ïÏùò Î≥¥Ìò∏Î•º Î∞õÏïÑÏöî",
        "üìù Í≥ÑÏïΩÍ≥º ÏÜåÎπÑÏûêÏùò Í∂åÎ¶¨",
        "‚ö†Ô∏è Î∂àÎ≤ï ÌñâÏúÑÏôÄ ÏÜêÌï¥ Î∞∞ÏÉÅ",
        "üë®‚Äçüë©‚Äçüëß Í∞ÄÏ°±Í≥º Î≤ï, Ìï®Íªò ÏÇ¨Îäî Í∑úÏπô",
        "üë∑ ÏùºÌïòÎäî ÏÇ¨ÎûåÏùò Í∂åÎ¶¨, ÎÖ∏ÎèôÎ≤ï",
        "üåç Íµ≠Ï†úÎ≤ïÍ≥º ÏÑ∏Í≥Ñ ÏãúÎØºÏùò Í∂åÎ¶¨",
        "üåø ÌôòÍ≤ΩÏùÑ ÏßÄÌÇ§Îäî Î≤ï, ÌôòÍ≤ΩÎ≤ï",
        "üí° ÏïÑÏù¥ÎîîÏñ¥Î•º Î≥¥Ìò∏ÌïòÎäî Î≤ï, ÏßÄÏãùÏû¨ÏÇ∞Í∂å",
        "üì± ÎîîÏßÄÌÑ∏ ÏãúÎåÄÏùò Î≤ï, Ï†ïÎ≥¥ÏôÄ Í∞úÏù∏Ï†ïÎ≥¥",
        "ü§ù Î∂ÑÏüÅÏùÑ Ìï¥Í≤∞ÌïòÎäî Î∞©Î≤ï, ÏÜåÏÜ°Í≥º Ï°∞Ï†ï",
        "‚öñÔ∏è Î≤ïÍ≥º Ï†ïÏùò, Îçî ÎÇòÏùÄ ÏÇ¨ÌöåÎ•º Ìñ•Ìï¥"
      ],
      pol: [
        "üèõÔ∏è Ï†ïÏπòÎäî Ïôú ÌïÑÏöîÌï†Íπå?",
        "üó≥Ô∏è Íµ≠ÎØºÏù¥ Ï£ºÏù∏Ïù¥ ÎêòÎäî ÎÇòÎùº, ÎØºÏ£ºÏ£ºÏùò",
        "‚úä 4¬∑19ÏóêÏÑú 6Ïõî Ìï≠ÏüÅÍπåÏßÄ, ÎØºÏ£ºÏ£ºÏùòÏùò ÏÑ±Ïû•",
        "‚öñÔ∏è Îã§ÏàòÍ≤∞ÎßåÏúºÎ°ú Ï∂©Î∂ÑÌï†Íπå? ÎØºÏ£ºÏ£ºÏùòÏùò ÏßÑÏßú ÏõêÎ¶¨",
        "üó≥Ô∏è Ìïú ÌëúÏùò ÌûòÏù¥ Î™®Ïó¨ ÎßåÎìúÎäî ÎØºÏ£ºÏ£ºÏùò",
        "‚öñÔ∏è Í∂åÎ†•ÏùÑ ÎÇòÎàÑÎäî ÏßÄÌòú, ÏÇºÍ∂åÎ∂ÑÎ¶Ω",
        "üè† Ïö∞Î¶¨ ÎèôÎÑ§Î•º Ïö∞Î¶¨ ÏÜêÏúºÎ°ú, ÏßÄÎ∞©ÏûêÏπò",
        "üìú ÏãúÎØºÏùò Í∂åÎ¶¨ÏôÄ Ï±ÖÏûÑ",
        "üåç ÏÑ∏Í≥Ñ ÏÜçÏùò ÎåÄÌïúÎØºÍµ≠, Íµ≠Ï†úÏ†ïÏπò",
        "‚òÆÔ∏è ÌèâÌôî ÌÜµÏùºÏùÑ Ìñ•Ìïú Ïó¨Ï†ï",
        "üí∞ Í≤ΩÏ†ú ÌôúÎèôÏùò ÏãúÏûë, Ìù¨ÏÜåÏÑ±Í≥º ÏÑ†ÌÉù",
        "üè™ ÏãúÏû•ÏóêÏÑú ÎßåÎÇòÎäî ÏàòÏöîÏôÄ Í≥µÍ∏â",
        "üìà Í∞ÄÍ≤©ÏùÄ Ïñ¥ÎñªÍ≤å Ï†ïÌï¥ÏßàÍπå?",
        "üè¶ ÎèàÏùò ÌùêÎ¶Ñ, Í∏àÏúµÍ≥º Ï†ÄÏ∂ï",
        "üí≥ Ïã†Ïö©Í≥º Ìï©Î¶¨Ï†Å ÏÜåÎπÑ",
        "üè≠ Í∏∞ÏóÖÏùò Ïó≠Ìï†Í≥º ÏÇ¨ÌöåÏ†Å Ï±ÖÏûÑ",
        "üìä Íµ≠Í∞Ä Í≤ΩÏ†úÏôÄ Í≤ΩÏ†ú ÏÑ±Ïû•",
        "üíµ ÏÑ∏Í∏àÍ≥º Ï†ïÎ∂ÄÏùò Ïó≠Ìï†",
        "üåç Î¨¥Ïó≠Í≥º ÏÑ∏Í≥Ñ Í≤ΩÏ†ú",
        "üå± ÎØ∏Îûò Í≤ΩÏ†úÏôÄ ÏßÄÏÜç Í∞ÄÎä•Ìïú Î∞úÏ†Ñ"
      ],
      econ: [
        "Í≤ΩÏ†ú ÌôúÎèôÏùò Í∏∞Î≥∏ ÏõêÎ¶¨",
        "ÏãúÏû•Í≥º ÏàòÏöî¬∑Í≥µÍ∏â",
        "Í∞ÄÍ≤©Ïù¥ Í≤∞Ï†ïÎêòÎäî Í≥ºÏ†ï",
        "Í∏àÏúµÍ≥º ÌôîÌèêÏùò Ïó≠Ìï†",
        "Íµ≠Í∞Ä Í≤ΩÏ†úÏùò ÏàúÌôò",
        "Î¨¥Ïó≠Í≥º ÏÑ∏Í≥Ñ Í≤ΩÏ†ú",
        "ÏÜåÎπÑÏûêÏôÄ Ìï©Î¶¨Ï†Å ÏÑ†ÌÉù",
        "Í∏∞ÏóÖÏùò Ïó≠Ìï†Í≥º Í≤ΩÏòÅ",
        "Í≤ΩÏ†ú Î¨∏Ï†úÏôÄ Ï†ïÏ±Ö",
        "ÎØ∏Îûò ÏÇ∞ÏóÖÍ≥º Í≤ΩÏ†ú Î≥ÄÌôî"
      ],
      modern: [
        "üåô Î©îÎ∞ÄÍΩÉ ÌïÑ Î¨¥Î†µ, Îã¨Îπõ ÏïÑÎûò ÌîºÏñ¥ÎÇú Ïù∏Ïó∞",
        "üåßÔ∏è ÏÜåÎÇòÍ∏∞, ÏßßÏßÄÎßå Í∞ïÎ†¨ÌñàÎçò Ï≤´ÏÇ¨Îûë",
        "üìñ Î¥ÑÎ¥Ñ, Ïû•Ïù∏ÏóêÍ≤å ÏÜçÏùÄ Îç∞Î¶¥ÏÇ¨ÏúÑÏùò Î∂ÑÎÖ∏",
        "üöó Ïö¥Ïàò Ï¢ãÏùÄ ÎÇ†, ÌñâÏö¥ Îí§Ïóê Ïà®ÏùÄ ÎπÑÍ∑π",
        "üå∏ ÎèôÎ∞±ÍΩÉ, Îã≠Ïã∏ÏõÄÏúºÎ°ú ÏãúÏûëÎêú ÌíãÏÇ¨Îûë",
        "üíï ÏÇ¨ÎûëÏÜêÎãòÍ≥º Ïñ¥Î®∏Îãà, Ïò•Ìù¨ ÎààÏóê ÎπÑÏπú Ïñ¥Î•∏Îì§",
        "ü•î Í∞êÏûê, Í∞ÄÎÇúÏù¥ Î¨¥ÎÑàÎú®Î¶∞ Ìïú Ïó¨Ïù∏Ïùò ÏÇ∂",
        "‚õµ Î∞∞Îî∞ÎùºÍ∏∞, Î∞îÎã§ ÏúÑÏóê Îñ†ÎèÑÎäî Ïä¨Ìîà ÎÖ∏Îûò",
        "üíî ÎπàÏ≤ò, Í∞ÄÎÇú ÏÜçÏóêÏÑúÎèÑ ÎπõÎÇòÎäî ÏïÑÎÇ¥Ïùò ÏÇ¨Îûë",
        "üéì Î†àÎîîÎ©îÏù¥Îìú Ïù∏ÏÉù, ÏßÄÏãùÏù∏Ïùò Ï¢åÏ†àÍ≥º ÏûêÏ°∞",
        "üåä ÌÉÅÎ•ò, ÌùêÎ¶∞ Î¨ºÏóê Ìú©Ïì∏Î¶∞ Ï¥àÎ¥âÏù¥Ïùò Ïö¥Î™Ö",
        "üë®‚Äçüë©‚Äçüë¶ ÏÇºÎåÄ, ÏÑ∏ ÏÑ∏ÎåÄÍ∞Ä Î∂ÄÎî™ÌûàÎäî Í∞ÄÏπòÍ¥Ä",
        "üòè ÌÉúÌèâÏ≤úÌïò, Ïú§ ÏßÅÏõêÏùò Í∏∞ÎßâÌûå Ï≤òÏÑ∏Ïà†",
        "üèôÔ∏è Ï≤úÎ≥ÄÌíçÍ≤Ω, Ï≤≠Í≥ÑÏ≤ú ÏÇ¨ÎûåÎì§Ïùò Ìù¨Î°úÏï†ÎùΩ",
        "üíî Î¨¥Ï†ï, Í∑ºÎåÄÎ•º Ìñ•Ìïú Ï≤≠Ï∂òÏùò Î∞©Ìô©",
        "üöÇ ÎßåÏÑ∏Ï†Ñ, Ï°∞ÏÑ†ÏúºÎ°ú ÎèåÏïÑÏò® ÏßÄÏãùÏù∏Ïùò Îàà",
        "üïäÔ∏è ÎÇ†Í∞ú, Î∞ïÏ†úÎêú Ï≤úÏû¨Ïùò ÎπÑÍ∑πÏ†Å Ïô∏Ïπ®",
        "üí´ Î¥âÎ≥ÑÍ∏∞, Í∏∞ÏÉù Í∏àÌôçÍ≥ºÏùò Ïù¥Î≥Ñ Ïù¥ÏïºÍ∏∞",
        "üö∂ ÏÇºÌè¨ Í∞ÄÎäî Í∏∏, Í≥†Ìñ• ÏûÉÏùÄ Îñ†ÎèåÏù¥Îì§",
        "üåßÔ∏è Ïû•Îßà, Ïù¥ÎÖêÏùÑ ÎÑòÏñ¥ÏÑ† Îëê Ìï†Î®∏Îãà",
        "üèõÔ∏è Í¥ëÏû•, ÎÇ®Í≥º Î∂Å ÏÇ¨Ïù¥ÏóêÏÑú Í∏∏ÏùÑ ÏûÉÎã§",
        "üí• Ïò§Î∞úÌÉÑ, Ï†ÑÏüÅÏù¥ ÎÇ®Í∏¥ ÏÉÅÏ≤òÌà¨ÏÑ±Ïù¥ Í∞ÄÏ°±",
        "üë®‚Äçüë¶ ÏàòÎÇúÏù¥ÎåÄ, ÏïÑÎ≤ÑÏßÄÏôÄ ÏïÑÎì§Ïùò ÏûÉÏñ¥Î≤ÑÎ¶∞ ÌåîÎã§Î¶¨",
        "üåæ Ïπ¥Ïù∏Ïùò ÌõÑÏòà, ÌÜ†ÏßÄÍ∞úÌòÅÏù¥ ÎπºÏïóÏùÄ ÏÇ∂",
        "üê¥ Ïó≠Îßà, Îñ†ÎèåÏù¥ Ïö¥Î™ÖÏùÑ ÌÉÄÍ≥†ÎÇú ÏÑ±Í∏∞",
        "üèòÔ∏è ÏÇ¨ÌïòÏ¥å, Ï†à ÏïÑÎûò ÎßàÏùÑÏùò Í∞ÄÎÇúÌïú ÏÇ¨ÎûåÎì§",
        "ü¶¢ Ìïô, ÌïòÏñÄ ÎÇ†Í∞úÏóê Îã¥Í∏¥ Í∑∏Î¶¨ÏõÄ",
        "üåæ Ìô©ÎßåÍ∑ºÏùÄ Ïù¥Î†áÍ≤å ÎßêÌñàÎã§, ÏàúÎ∞ïÌïú ÎÜçÎ∂ÄÏùò ÏµúÌõÑ",
        "üëû ÏïÑÌôâ Ïº§Î†àÏùò Íµ¨ÎëêÎ°ú ÎÇ®ÏùÄ ÏÇ¨ÎÇ¥, Í∞ÄÏû•Ïùò Î¨¥Í≤å",
        "üè† ÏóÑÎßàÏùò ÎßêÎöù, Ïñ¥Î®∏ÎãàÍ∞Ä Î∞ïÏùÄ ÏÇ∂Ïùò ÌÑ∞Ï†Ñ",
        "üéà ÎÇúÏû•Ïù¥Í∞Ä ÏèòÏïÑÏò¨Î¶∞ ÏûëÏùÄ Í≥µ, Ï≤†Í±∞ÎØºÏùò Íøà",
        "üë§ Ïö∞Î¶¨Îì§Ïùò ÏùºÍ∑∏Îü¨ÏßÑ ÏòÅÏõÖ, ÏóÑÏÑùÎåÄÏùò ÏôïÍµ≠",
        "üèÉ ÍπÉÎ∞ú ÏóÜÎäî Í∏∞Ïàò, Îã¨Î¶¨Í∏∞ÏôÄ Ï¢åÏ†à ÏÇ¨Ïù¥",
        "üî® Í∞ùÏßÄ, Í≥µÏÇ¨ÌåêÏùÑ Îñ†ÎèÑÎäî ÎÖ∏ÎèôÏûêÎì§",
        "üé∂ ÏÑúÌé∏Ï†ú, ÏÜåÎ¶¨Ïóê Î∞îÏπú ÏÜ°ÌôîÏùò Îàà",
        "üåè ÌÜ†ÏßÄ, ÏµúÏ∞∏ÌåêÎåÅ 5ÎåÄÏùò ÎåÄÌïòÎìúÎùºÎßà",
        "üî• ÌòºÎ∂à, Í∫ºÏßÄÏßÄ ÏïäÎäî Ï¢ÖÍ∞ÄÏùò Î∂àÏî®",
        "‚õ∞Ô∏è ÌÉúÎ∞±ÏÇ∞Îß•, Î∂ÑÎã®ÏùÑ Í∞ÄÎ•∏ Ïù¥ÎÖêÏùò ÏÇ∞Îß•",
        "üîÆ Î¨¥ÎÖÄÎèÑ, Î¨¥Îãπ Ïñ¥Î®∏ÎãàÏôÄ Í∏∞ÎèÖÍµê ÏïÑÎì§",
        "üå∫ ÎèôÎ∞±ÍΩÉ, ÏïåÏã∏Ìïú Ìñ•Í∏∞ ÏÜç ÌíãÌíãÌïú Í≥†Î∞±"
      ],
      classic: [
        "üìú Ï∂òÌñ•Í≥º Î™ΩÎ£°Ïùò ÏïΩÏÜç, Ï∂òÌñ•Ï†Ñ",
        "‚öñÔ∏è Ïñ¥ÏÇ¨ Ïù¥ÎèÑÎ†πÍ≥º Ï∂òÌñ•Ïùò Ïû¨Ìöå, Ï∂òÌñ•Ï†Ñ",
        "üåä ÌôçÍ≥ÑÏõî, Î¨ºÏóêÏÑú Í±¥Ï†∏ Ïò¨Î¶∞ Ïö¥Î™Ö, ÌôçÍ≥ÑÏõîÏ†Ñ",
        "‚ú® Î∞±ÏÑ±ÏùÑ ÏúÑÌï¥ ÎÇòÏÑ† Ïã†ÎπÑÌïú ÏÑ†ÎπÑ, Ï†ÑÏö∞ÏπòÏ†Ñ",
        "üê¢ ÏàôÌñ•Ïùò Í∏∞Ïù¥Ìïú ÌÉÑÏÉùÍ≥º ÏûÉÏñ¥Î≤ÑÎ¶∞ Ïñ¥Î¶∞ ÏãúÏ†à, ÏàôÌñ•Ï†Ñ",
        "üëÅÔ∏è ÏïÑÎ≤ÑÏßÄÏùò ÎààÏùÑ Îú®Í≤å Ìïú Ìö®ÎÖÄÏùò Ìù¨ÏÉù, Ïã¨Ï≤≠Ï†Ñ",
        "üê¶ Ï†úÎπÑÍ∞Ä Î¨ºÏñ¥Îã§ Ï§Ä Î≥µÍ≥º Î≤å, Ìù•Î∂ÄÏ†Ñ",
        "üê¢ Ïö©Í∂ÅÏóêÏÑú ÏÇ¥ÏïÑ ÎèåÏïÑÏò® ÌÜ†ÎÅºÏùò ÏßÄÌòú, Î≥ÑÏ£ºÎ∂ÄÏ†Ñ",
        "üëª ÏõêÌòºÏù¥ ÎêòÏñ¥ Î∞ùÌûå ÏñµÏö∏Ìïú Ï£ΩÏùå, Ïû•ÌôîÌôçÎ†®Ï†Ñ",
        "üëü ÌïòÎäòÏù¥ ÎèÑÏö¥ Ï∞©Ìïú ÏΩ©Ï•êÏùò ÌñâÎ≥µ, ÏΩ©Ï•êÌå•Ï•êÏ†Ñ",
        "üé≠ Ï†úÏ£º Í∏∞ÏÉùÏóêÍ≤å ÎÜÄÏïÑÎÇú ÏúÑÏÑ†ÏûêÏùò ÏµúÌõÑ, Î∞∞ÎπÑÏû•Ï†Ñ",
        "üë§ ÎèÑÍπ®ÎπÑÏóêÍ≤å ÌòºÏ≠êÎÇú Í≥†ÏßëÏüÅÏù¥, ÏòπÍ≥†ÏßëÏ†Ñ",
        "üí™ Î™ªÏÉùÍ∏¥ Î©∞ÎäêÎ¶¨ÏóêÏÑú ÎÇòÎùºÎ•º Íµ¨Ìïú ÏòÅÏõÖÏúºÎ°ú, Î∞ïÏî®Ï†Ñ",
        "üíî Í∂ÅÎÖÄÏôÄ ÏÑ†ÎπÑÏùò Ïù¥Î£®ÏßÄ Î™ªÌïú ÏÇ¨Îûë, Ïö¥ÏòÅÏ†Ñ",
        "üé® Ïã†Î∂ÑÏùÑ ÎÑòÏùÄ Í∏∞ÏÉùÍ≥º ÏñëÎ∞òÏùò ÏÇ¨Îûë, Ï±ÑÎ¥âÍ∞êÎ≥ÑÍ≥°",
        "üåô ÌåîÏÑ†ÎÖÄÏôÄ Ìï®ÍªòÌïú ÎçßÏóÜÎäî ÏòÅÌôîÏùò Íøà, Íµ¨Ïö¥Î™Ω",
        "üë∏ Ï´ìÍ≤®ÎÇú Î≥∏Ï≤òÍ∞Ä ÎêòÏ∞æÏùÄ Î™ÖÏòà, ÏÇ¨Ïî®ÎÇ®Ï†ïÍ∏∞",
        "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ìö®ÏÑ±Í≥º Ïö∞Ïï†Î°ú Í∞ÄÎ¨∏ÏùÑ ÏßÄÌÇ® ÌòïÏ†ú, Ï∞ΩÏÑ†Í∞êÏùòÎ°ù",
        "‚öîÔ∏è ÏôúÏ†ÅÏùÑ Î¨ºÎ¶¨Ïπú Ï°∞ÏÑ†Ïùò ÏòÅÏõÖÎì§, ÏûÑÏßÑÎ°ù",
        "üìö Ïû•ÏÇ¨Î°ú ÏÑ∏ÏÉÅÏùÑ ÎπÑÌåêÌïú ÏÑ†ÎπÑ, ÌóàÏÉùÏ†Ñ",
        "üí∞ ÎèàÏúºÎ°ú ÏÇ¨Í≥†Ìåê ÏñëÎ∞òÏùò Ïã†Î∂Ñ, ÏñëÎ∞òÏ†Ñ",
        "üêÖ Î≤îÏóêÍ≤å Íæ∏ÏßÄÎûå Îì§ÏùÄ ÏúÑÏÑ†Ïûê, Ìò∏Ïßà",
        "üé≠ Í∏∞ÏÉùÏóêÍ≤å Îπ†Ï†∏ Ìå®Í∞ÄÎßùÏã†Ìïú ÌïúÎüâ, Ïù¥Ï∂òÌíçÏ†Ñ",
        "üíï Í≥†ÎÇú ÎÅùÏóê Îã§Ïãú ÎßåÎÇú Îëê Ïó∞Ïù∏, Ïò•Îã®Ï∂òÏ†Ñ",
        "üå∏ ÌïòÎäòÏù¥ Îß∫Ïñ¥Ï§Ä Ïù∏Ïó∞Ïùò ÏãúÎ†®Í≥º Í≤∞Ïã§, ÏàôÏòÅÎÇ≠ÏûêÏ†Ñ",
        "üåä Ï†ÑÏüÅÏù¥ Í∞àÎùºÎÜìÏùÄ Í∞ÄÏ°±Ïùò Í∏∞Ï†Å Í∞ôÏùÄ Ïû¨Ìöå, ÏµúÏ≤ôÏ†Ñ",
        "üåç ÏÑ∏ ÎÇòÎùºÎ•º Îñ†Îèà ÌååÎûÄÎßåÏû•Ìïú ÏÇ∂, ÍπÄÏòÅÏ≤†Ï†Ñ",
        "‚öîÔ∏è ÏÑúÏûêÎ°ú ÌÉúÏñ¥ÎÇò ÏÉà ÎÇòÎùºÎ•º ÏÑ∏Ïö∞Îã§, ÌôçÍ∏∏ÎèôÏ†Ñ",
        "ü§¶ Ïñ¥Î¶¨ÏÑùÏùÄ ÏÇ¨ÏúÑÏùò Ï¢åÏ∂©Ïö∞Îèå Ïã§ÏàòÎã¥, ÏÑúÎèôÏßÄÏ†Ñ",
        "üê¶ ÏöïÏã¨ Î∂ÄÎ¶¨Îã§ Î™©Ïà®ÏùÑ ÏûÉÏùÄ Íø©, Ïû•ÎÅºÏ†Ñ",
        "üêç Î±Ä Ïã†ÎûëÏùò ÎπÑÎ∞ÄÍ≥º ÏßÑÏ†ïÌïú ÏÇ¨Îûë, Íµ¨Î†ÅÎç©Îç© Ïã†ÏÑ†ÎπÑ",
        "üë∏ Î≤ÑÎ†§ÏßÑ Í≥µÏ£ºÍ∞Ä Î∂ÄÎ™®Î•º ÏÇ¥Î¶¨Îã§, Î∞îÎ¶¨Îç∞Í∏∞",
        "üîî Í∏àÎ∞©Ïö∏Î°ú ÎÇòÎùºÎ•º Íµ¨Ìïú ÏòÅÏõÖ, Í∏àÎ∞©Ïö∏Ï†Ñ",
        "‚öîÔ∏è Í∞ÑÏã†Ïóê ÎßûÏÑú Ï∂©ÏÑ±ÏùÑ Îã§Ìïú ÏòÅÏõÖ, Ïú†Ï∂©Î†¨Ï†Ñ",
        "üó°Ô∏è Î∂ÄÎ™®Ïùò ÏõêÏàòÎ•º Í∞öÏùÄ Ìö®Ïûê Ïû•Ïàò, Ï°∞ÏõÖÏ†Ñ",
        "üë¶ Í≥†ÏïÑÏóêÏÑú ÎåÄÏû•Íµ∞Ïù¥ Îêú ÏÜåÎÖÑ, ÏÜåÎåÄÏÑ±Ï†Ñ",
        "üè¥ ÎÇòÎùºÎ•º ÏúÑÌï¥ Î™©Ïà®ÏùÑ Î∞îÏπú Ï∂©Ïã† Ïû•Íµ∞, ÏûÑÍ≤ΩÏóÖÏ†Ñ",
        "üíé Ïó≠Í≤ΩÏùÑ ÎîõÍ≥† ÏùºÏñ¥ÏÑ† Ï∂©Ïã†Ïùò ÌõÑÏÜê, Ï†ÅÏÑ±ÏùòÏ†Ñ",
        "üåô Îã¨Îπõ ÏïÑÎûò ÌîºÏñ¥ÎÇú Ïã†ÎπÑÎ°úÏö¥ ÏÇ¨Îûë, ÏõîÏòÅÎÇ≠ÏûêÏ†Ñ",
        "üëª Ï£ΩÏùåÎèÑ Í∞ÄÎ•¥ÏßÄ Î™ªÌïú ÏÇ¨Îûë, Ïù¥ÏÉùÍ∑úÏû•Ï†Ñ"
      ],
      world: [
        "üìö ÎëêÎ†§ÏõÄÏùÑ ÎÑòÏñ¥ÏÑ† ÏÉàÎ°úÏö¥ ÏãúÏûë",
        "üèùÔ∏è ÏÑ¨Ïùò ÎπÑÎ∞ÄÍ≥º ÏÜåÎÖÑÎì§Ïùò Í≤∞Ïã¨",
        "ÎèôÏñë Î¨∏ÌïôÏùò Ï†ïÏÑú",
        "üé≠ ÌÉÄÎØ∏ÎÖ∏ÏôÄ ÌååÌååÍ≤åÎÖ∏ÏóêÍ≤å ÎÇ¥Î†§ÏßÑ Ï≤´ Î≤àÏß∏ ÏãúÌóò",
        "Ïã†ÌôîÏôÄ Ï†ÑÏÑ§Ïùò Î≥ÄÏ£º",
        "ÌòÑÎåÄ ÏÑ∏Í≥ÑÎ¨∏ÌïôÏùò ÌùêÎ¶Ñ",
        "Ï†ÑÏüÅÍ≥º ÌèâÌôîÎ•º ÎÖ∏ÎûòÌïòÎã§",
        "ÏÇ¨ÎûëÍ≥º Ïù∏Í∞Ñ ÎÇ¥Î©¥Ïùò ÌëúÌòÑ",
        "ÏÇ¨Ìöå ÎπÑÌåêÏ†Å ÏãúÍ∞ÅÏùò Î¨∏Ìïô",
        "Ïó¨ÏÑ±Í≥º Î¨∏ÌïôÏùò Î™©ÏÜåÎ¶¨",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô 11", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 12", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 13", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 14", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 15",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô 16", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 17", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 18", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 19", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 20",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô 21", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 22", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 23", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 24", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 25",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô 26", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 27", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 28", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 29", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 30",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô 31", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 32", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 33", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 34", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 35",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô 36", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 37", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 38", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 39", "ÏÑ∏Í≥ÑÎ¨∏Ìïô 40",
        "üèπ ÌÖîÏùò Ïö©Í∏∞ÏôÄ ÎëêÎ†§ÏõÄ",
        "üí™ ÏÜåÎÖÑÎì§Ïùò Ïö©Í∏∞ÏôÄ ÏºÄÏù¥Ìä∏Ïùò ÎààÎ¨º",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 43", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 44", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 45",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 46", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 47", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 48", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 49", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 50",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 51", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 52", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 53", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 54", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 55",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 56", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 57", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 58", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 59", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 60",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 61", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 62", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 63", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 64", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 65",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 66", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 67", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 68", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 69", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 70",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 71", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 72", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 73", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 74", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 75",
        "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 76", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 77", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 78", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 79", "ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) 80"
      ],
      people: [
        "Ïó≠ÏÇ¨Î•º Î∞îÍæº Ïù∏Î¨ºÎì§",
        "ÏÇ¨ÏÉÅÍ∞ÄÎì§Ïùò ÏÉùÍ∞Å Îî∞ÎùºÍ∞ÄÍ∏∞",
        "Í≥ºÌïô Î∞úÏ†ÑÏóê Í∏∞Ïó¨Ìïú ÏÇ¨ÎûåÎì§",
        "Î¨∏ÌôîÏòàÏà†ÏùÑ ÎπõÎÇ∏ Ïù∏Î¨º",
        "ÎèÖÎ¶ΩÍ≥º ÌèâÌôîÎ•º ÏúÑÌïú ÏßÄÎèÑÏûê",
        "ÍµêÏú°Í≥º Î≥µÏßÄÎ•º Ïù¥ÎÅà Ïù¥Îì§",
        "ÏÑ∏Í≥Ñ Î¨¥ÎåÄÏùò Î¶¨ÎçîÏã≠",
        "ÎèÑÏ†ÑÍ≥º ÌòÅÏã†Ïùò ÏÇ¨Î°Ä",
        "Ïù∏Î¨ºÎπÑÍµêÎ°ú Î≥¥Îäî ÏãúÎåÄ",
        "Ïù∏Î¨º Ïù¥ÏïºÍ∏∞Î°ú ÏùΩÎäî Ïó≠ÏÇ¨"
      ],
      naesin: [
        "ÍµêÍ≥º Í∞úÎÖêÏùÑ Ï†ïÎ¶¨ÌïòÎã§",
        "ÏßÄÎ¨∏ Íµ¨Ï°∞Î•º ÌååÏïÖÌïòÎã§",
        "Î¨∏Îã® Ï†ÑÍ∞úÎ•º Ïù¥Ìï¥ÌïòÎã§",
        "Ï§ëÏöî Ïñ¥ÌúòÎ•º ÏùµÌûàÎã§",
        "ÏûêÎ£åÏôÄ ÌëúÎ•º Ìï¥ÏÑùÌïòÎã§",
        "Ï∂úÏ†ú Ìè¨Ïù∏Ìä∏Î•º Ï†ïÎ¶¨ÌïòÎã§",
        "ÏÑúÏà†Ìòï ÎãµÏïàÏùÑ Ïó∞ÏäµÌïòÎã§",
        "ÎπÑÌåêÏ†Å ÏùΩÍ∏∞Î°ú ÌôïÏû•ÌïòÎã§",
        "Ïú†ÌòïÎ≥Ñ Î¨∏Ï†úÏóê Ï†ÅÏùëÌïòÎã§",
        "ÌïôÏäµÌïú ÎÇ¥Ïö©ÏùÑ ÎßàÎ¨¥Î¶¨ÌïòÎã§"
      ],
      suneung: [
        "ÏàòÎä• ÏßÄÎ¨∏Ïùò Ï†ÑÍ∞ú Î∞©Ïãù",
        "ÏÇ¨ÏÑ§¬∑ÌèâÎ°† ÏßÄÎ¨∏ ÎèÖÌï¥",
        "Ï†ïÎ≥¥ ÌôïÏù∏ Î¨∏Ï†ú Í≥µÎûµ",
        "Ï∂îÎ°†Ìòï Î¨∏Ï†ú Ï†ëÍ∑ºÎ≤ï",
        "Í∞ÑÏ†ë Ïó∞Í≥Ñ ÏßÄÎ¨∏ Ïó∞Ïäµ",
        "ÏãúÍ∞Ñ Í¥ÄÎ¶¨ Ï†ÑÎûµ ÏÑ∏Ïö∞Í∏∞",
        "Î≥¥Í∏∞ ÏûêÎ£åÏôÄ Ìï®Íªò ÏùΩÍ∏∞",
        "Ïò§Îãµ Ïú†Ìòï Î∂ÑÏÑùÌïòÍ∏∞",
        "ÏàòÎä• Ïñ¥Ìúò Î≥¥Ï∂©ÌïòÍ∏∞",
        "Ïã§Ï†ÑÏ≤òÎüº ÌíÄÏñ¥Î≥¥Í∏∞"
      ],
      poem: [
        "ÏãúÏ†Å ÌôîÏûêÏôÄ Ï†ïÏÑú ÌååÏïÖ",
        "Ïù¥ÎØ∏ÏßÄÏôÄ ÏÉÅÏßï ÏùΩÍ∏∞",
        "Î¶¨Îì¨Í≥º Ïö¥Ïú® ÎäêÎÅºÍ∏∞",
        "ÎπÑÏú†Î≤ïÏùò Ìö®Í≥º Ïù¥Ìï¥",
        "ÌòÑÎåÄÏãúÏùò Ï£ºÏ†ú Ï†ïÎ¶¨",
        "ÌôîÏûêÏùò ÌÉúÎèÑ Î≥ÄÌôî Î≥¥Í∏∞",
        "ÎåÄÏÉÅÍ≥º ÏãúÏÑ†Ïùò Í±∞Î¶¨",
        "Ï†úÎ™©Í≥º ÎÇ¥Ïö©Ïùò Í¥ÄÍ≥Ñ",
        "Ïú†ÌòïÎ≥Ñ Î¨∏Ï†ú Ï†ëÍ∑º",
        "Í∞êÏÉÅÎ¨∏ÏúºÎ°ú ÏòÆÍ≤®Î≥¥Í∏∞"
      ],
      novel: [
        "Ïù∏Î¨ºÍ≥º Í∞àÎì± Íµ¨Ï°∞",
        "ÏãúÏ†êÍ≥º ÏÑúÏà† Î∞©Ïãù",
        "Î∞∞Í≤ΩÍ≥º Ï£ºÏ†úÏùò Ïó∞Í≤∞",
        "ÎåÄÌôîÏôÄ ÌñâÎèôÏùò ÏùòÎØ∏",
        "ÌòÑÎåÄÏÜåÏÑ§Ïùò ÌëúÌòÑ Í∏∞Î≤ï",
        "Í≤∞ÎßêÏùÑ ÌÜµÌïú Ï£ºÏ†ú ÌôïÏù∏",
        "Î∞òÏ†ÑÍ≥º Î≥µÏÑ† ÌååÏïÖ",
        "Ïù∏Î¨ºÏùò Ïã¨Î¶¨ ÏùΩÍ∏∞",
        "ÏÉÅÏßïÏ†Å Ïû•Î©¥ Ìï¥ÏÑù",
        "ÏÑúÏÇ¨ Íµ¨Ï°∞ Ï†ïÎ¶¨ÌïòÍ∏∞"
      ],
      etc: [
        "Í∑πÏùò Íµ¨Ï°∞ Ïù¥Ìï¥ÌïòÍ∏∞",
        "Ìù¨Í≥° Ïù∏Î¨ºÏùò ÎåÄÏÇ¨ Î∂ÑÏÑù",
        "ÏàòÌïÑÏùò ÌôîÏûêÏôÄ ÌÉúÎèÑ",
        "Ìù¨Í≥° Î¨¥ÎåÄÏßÄÏãú ÏùΩÍ∏∞",
        "ÏàòÌïÑÏùò Ï§ëÏã¨ ÏÉùÍ∞Å Ï∞æÍ∏∞",
        "Í∑πÏùò Í∞àÎì±Í≥º Ìï¥Í≤∞",
        "Ìù¨Í≥° Ïû•Î•¥Ïùò ÌäπÏßï",
        "ÏÇ∂ÏùÑ Îã¥ÏùÄ ÏàòÌïÑ ÏùΩÍ∏∞",
        "ÌëúÌòÑÏÉÅÏùò ÌäπÏßï Ï†ïÎ¶¨",
        "ÎÇ¥Ïö©ÏùÑ Î∞îÌÉïÏúºÎ°ú Ïì∞Í∏∞"
      ],
      gosi: [
        "ÏãúÏ°∞Ïùò ÌòïÏãùÍ≥º Ï†ïÏÑú",
        "Ìñ•Í∞ÄÏôÄ Í≥†Î†§Í∞ÄÏöîÏùò ÎØ∏",
        "Í≥†Ï†ÑÏãúÍ∞ÄÏùò ÌôîÏûê Ïù¥Ìï¥",
        "ÌëúÌòÑÎ≤ïÍ≥º Î∂ÄÏÇ¨Ïñ¥ Ìï¥ÏÑù",
        "ÏãúÎåÄÎ≥Ñ ÏãúÍ∞ÄÏùò ÌäπÏßï",
        "ÏûêÏó∞Í≥º Ïù∏Í∞ÑÏùò ÍµêÍ∞ê",
        "Ïó∞Íµ∞¬∑Ïó∞Íµ∞Í∞ÄÏùò ÏùòÎØ∏",
        "Ïó¨ÏÑ± ÌôîÏûêÏùò Î™©ÏÜåÎ¶¨",
        "Ïö¥Ïú®Í≥º Ïñ¥Ï°∞ ÌååÏïÖ",
        "ÌòÑÎåÄÏñ¥ ÌíÄÏù¥ Ïó∞Ïäµ"
      ],
      gonovel: [
        "Í≥†Ï†ÑÏÜåÏÑ§Ïùò Íµ¨Ï°∞",
        "ÏòÅÏõÖÏÜåÏÑ§Ïùò Ï†ÑÍ∞ú",
        "Ïï†Ï†ïÏÜåÏÑ§Ïùò Í∞àÎì±",
        "Í∞ÄÏ†ïÏÜåÏÑ§Í≥º ÍµêÌõà",
        "Ïö∞ÌôîÏ†Å ÌëúÌòÑ ÏùΩÍ∏∞",
        "Ïó¨ÏÑ± Ïù∏Î¨ºÏùò ÌòïÏÉÅÌôî",
        "Í∂åÏÑ†ÏßïÏïÖ Íµ¨Ï°∞ Ïù¥Ìï¥",
        "ÏÑúÏÇ¨ Îã®ÏúÑÎ°ú ÎÇòÎàÑÍ∏∞",
        "Í≥†Ï†ÑÏÜåÏÑ§Ïùò Î∞∞Í≤Ω",
        "ÌòÑÎåÄÏ†Å ÏùòÎØ∏Î°ú ÌôïÏû•"
      ],
      goessay: [
        "Í≥†Ï†Ñ ÏàòÌïÑÏùò Ïñ¥Ï°∞",
        "ÏûêÏó∞Í≥º ÏùÄÏùºÏùò Ï†ïÏÑú",
        "Ïù∏Î¨º ÌèâÍ∞ÄÏôÄ ÍµêÌõà",
        "Ïó≠ÏÇ¨Ï†Å ÏùºÌôî ÏùΩÍ∏∞",
        "ÏûêÍ∏∞ ÏÑ±Ï∞∞Ïùò Í∏Ä",
        "Í∞ÑÍ≤∞Ìïú ÌëúÌòÑÏùò ÎØ∏",
        "ÎπÑÏú†ÏôÄ ÌïúÏûêÏñ¥ Ìï¥ÏÑù",
        "Í∏ÄÏì¥Ïù¥Ïùò ÏÇ∂Í≥º ÌÉúÎèÑ",
        "Î¨∏Ïû• Í≥†Ï≥ê Ïì∞Í∏∞",
        "Í∞êÏÉÅ Ï†ïÎ¶¨ÌïòÍ∏∞"
      ],
      modernGrammar: [
        "ÌòÑÎåÄ Íµ≠Ïñ¥Ïùò ÏùåÏö¥",
        "ÌíàÏÇ¨ÏôÄ ÌòïÌÉúÏÜå Î∂ÑÏÑù",
        "Îã®Ïñ¥Ïùò ÌòïÏÑ± Î∞©Ïãù",
        "Î¨∏Ïû•Ïùò ÏÑ±Î∂Ñ Ïù¥Ìï¥",
        "Î¨∏Ïû• Ìò∏ÏùëÍ≥º Ïñ¥Ïàú",
        "ÎÜíÏûÑÎ≤ïÍ≥º Í≥µÏÜê ÌëúÌòÑ",
        "Ïñ¥ÌúòÏùò ÏùòÎØ∏ Í¥ÄÍ≥Ñ",
        "ÌëúÏ§ÄÏñ¥ÏôÄ ÎßûÏ∂§Î≤ï",
        "ÎùÑÏñ¥Ïì∞Í∏∞ Í∑úÏπô",
        "Îã¥ÌôîÏôÄ Îã¥Ìôî ÌëúÏßÄ"
      ],
      middleGrammar: [
        "Ï§ëÏÑ∏Íµ≠Ïñ¥Ïùò Î¨∏ÏûêÏôÄ ÏÜåÎ¶¨",
        "ÌõàÎØºÏ†ïÏùå Ï∞ΩÏ†ú Î∞∞Í≤Ω",
        "Ï§ëÏÑ∏Íµ≠Ïñ¥Ïùò Î¨∏Î≤ï ÏöîÏÜå",
        "ÏòõÎßê Ïñ¥ÎØ∏ÏôÄ ÏÑ†Ïñ¥ÎßêÏñ¥ÎØ∏",
        "Ï§ëÏÑ∏Íµ≠Ïñ¥ Ïñ¥Ìúò ÏÇ¥Ìé¥Î≥¥Í∏∞",
        "ÏãúÎåÄÎ≥Ñ Î¨∏Ìóå ÏùΩÍ∏∞",
        "Ï§ëÏÑ∏Íµ≠Ïñ¥ Î¨∏Ïû• Î∂ÑÏÑù",
        "ÌòÑÎåÄÍµ≠Ïñ¥ÏôÄÏùò Ï∞®Ïù¥",
        "ÏùòÎØ∏ Î≥ÄÏ≤ú Ïù¥Ìï¥",
        "Í≥†Ïñ¥ Ìï¥ÏÑù Ïó∞Ïäµ"
      ]
    };

    /* 3. Ï†ÑÏ≤¥ Í≥ºÎ™© ÏûÑÏãú Ï†úÎ™© ÏûêÎèô ÏÉùÏÑ± */
    function buildUnitTitleOverrides() {
      const overrides = {};

      for (const [seriesKey, domains] of Object.entries(domainsBySeries)) {
        const realDomains = domains || domainsBySeries["BRAINON"];

        realDomains.forEach(domainObj => {
          domainObj.subs.forEach(subObj => {
            // offsetÏù¥ ÏûàÎäî Í≤ΩÏö∞ (Ïòà: ÏÑ∏Í≥ÑÎ¨∏Ìïô(2), Ïù∏Î¨º(2)) Î≥ÑÎèÑ ÌÇ§ ÏÇ¨Ïö©
            const keyId = subObj.offset ? `${subObj.id}_part2` : subObj.id;
            const key = `${seriesKey}.${domainObj.id}.${keyId}`;
            const count = subObj.count;

            const theme =
              titleThemes[subObj.id] ||
              titleThemes[subObj.label] ||
              ["ÎÇ¥Ïö©ÏùÑ Ïù¥Ìï¥ÌïòÍ≥† Ï†ïÎ¶¨ÌïòÍ∏∞", "ÌïµÏã¨Ïñ¥Î•º Ï§ëÏã¨ÏúºÎ°ú ÏùΩÍ∏∞", "Î¨∏Îã® Ï†ÑÍ∞ú ÌååÏïÖÌïòÍ∏∞", "ÏûêÎ£åÏôÄ Ìï®Íªò ÏÉùÍ∞ÅÌïòÍ∏∞"];

            const arr = [];
            for (let i = 1; i <= count; i++) {
              const picked = theme[(i - 1) % theme.length];
              arr.push(`${picked}`);
            }
            overrides[key] = arr;
          });
        });
      }

      // Ïã§Ï†ú ÏïåÍ≥† ÏûàÎäî Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞ (Ï†ïÏ°∞/ÏÇ¨Ìöå/ÏßÄÎ¶¨)
      // ‚úÖ BRAINDEEP Îî•ÏßÄÍµ¨Í≥ºÌïô Ï†úÎ™©
      overrides["BRAINDEEP.science.earth"] = [
        "üåç ÌÉúÏñëÍ≥Ñ ÏÑ±Ïö¥ÏóêÏÑú Î∂ÑÌôîÍπåÏßÄ, ÏßÄÍµ¨ ÌòïÏÑ±Ïùò Ï≤úÎ¨∏ÌïôÏ†Å Í≥ºÏ†ï",
        "üåã Îß®ÌãÄ ÎåÄÎ•òÏóêÏÑú ÌôîÏÇ∞ Î∂ÑÏ∂úÍπåÏßÄ, ÏßÄÍµ¨ ÎÇ¥Î∂Ä Ïó¥Ïó≠ÌïôÏùò ÏßÄÌëú ÌëúÌòÑ",
        "ü™® ÏïîÏÑù ÏàúÌôòÍ≥º Í¥ëÎ¨º Ï°∞ÏÑ±, ÏßÄÍ∞Å Î¨ºÏßàÏùò Í∏∞ÏõêÍ≥º Î≥ÄÌôò",
        "üèúÔ∏è ÌíçÌôîÏôÄ ÌÜ†Ïñë ÏÉùÏÑ±, ÏïîÏÑùÍ∂åÏóêÏÑú ÏÉùÎ¨ºÍ∂åÏúºÎ°úÏùò Î¨ºÏßà Ï†ÑÌôò",
        "üåä ÌïòÏ≤ú ÏûëÏö©Í≥º ÏßÄÌòï Î∞úÎã¨, Ïú†ÏàòÏùò Ïπ®Ïãù¬∑Ïö¥Î∞ò¬∑Ìá¥Ï†Å Ïó≠Ìïô",
        "üåã Ìåê Í≤ΩÍ≥ÑÏôÄ ÏßÄÏßÑ Î∞úÏÉù Î©îÏª§ÎãàÏ¶ò, ÌÉÑÏÑ± Î∞òÎ∞úÏÑ§Í≥º ÏßÄÏßÑÌåå Ìï¥ÏÑù",
        "üèîÔ∏è ÌåêÍµ¨Ï°∞Î°†Í≥º Ï°∞ÏÇ∞Ïö¥Îèô, Ìï¥Ï†Ä ÌôïÏû•ÏóêÏÑú ÎåÄÎ•ô Ï∂©ÎèåÍπåÏßÄ",
        "üìö ÏßÄÏ∏µ ÎàÑÏ§ëÍ≥º Ìá¥Ï†Å Íµ¨Ï°∞, Ï∏µÏÑúÌïôÏ†Å Í∏∞Î°ù Ìï¥ÏÑùÏùò ÏõêÎ¶¨",
        "ü¶¥ ÌôîÏÑùÏùò ÌòïÏÑ±Í≥º Í≥†ÏÉùÎ¨ºÌïô, ÏÉùÎ™Ö ÏßÑÌôîÏùò ÏßÄÏßàÌïôÏ†Å Í∏∞Î°ù",
        "üß≤ ÏßÄÍµ¨ ÏûêÍ∏∞Ïû•Í≥º Îã§Ïù¥ÎÇòÎ™® Ïù¥Î°†, Í≥†ÏßÄÏûêÍ∏∞Ïùò ÏßÄÏßàÌïôÏ†Å ÏùëÏö©",
        "üå§Ô∏è ÎåÄÍ∏∞ ÏàúÌôòÍ≥º Í∏∞Îã®Ïùò ÏÉÅÌò∏ÏûëÏö©, Ï¢ÖÍ¥Ä Í∏∞ÏÉÅÌïôÏùò ÏõêÎ¶¨",
        "‚òÅÔ∏è Íµ¨Î¶Ñ Î¨ºÎ¶¨ÌïôÍ≥º Í∞ïÏàò Í≥ºÏ†ï, ÎåÄÍ∏∞ ÏàòÎ¨∏ÌïôÏùò Î©îÏª§ÎãàÏ¶ò",
        "üí® Ìï¥Ïñë ÏàúÌôòÍ≥º Ïó¥ÏóºÎ∂Ñ ÎåÄÎ•ò, Í∏∞ÌõÑ Ï°∞Ï†àÏûêÎ°úÏÑúÏùò Ìï¥Ïñë",
        "üå°Ô∏è Í∏∞ÌõÑ ÏãúÏä§ÌÖúÏùò Î≥µÏû°ÏÑ±Í≥º Ïù∏ÏúÑÏ†Å Í∏∞ÌõÑ Î≥ÄÌôîÏùò Í≥ºÌïô",
        "ü™ê ÌÉúÏñëÍ≥ÑÏùò Íµ¨Ï°∞ÏôÄ ÌñâÏÑ± Í≥ºÌïô, ÎπÑÍµê ÌñâÏÑ±ÌïôÏùò Í¥ÄÏ†ê",
        "‚õèÔ∏è ÏßÄÍµ¨ ÏûêÏõêÏùò ÌòïÏÑ±Í≥º Î∂ÑÌè¨, ÏóêÎÑàÏßÄ Ï†ÑÌôòÏùò ÏßÄÍµ¨Í≥ºÌïôÏ†Å Í∏∞Î∞ò",
        "üåä Ï°∞ÏÑù Ïó≠ÌïôÍ≥º Ìï¥Ïñë ÌååÎèô, Ï≤úÏ≤¥ÏôÄ Ìï¥ÏñëÏùò ÏÉÅÌò∏ÏûëÏö©",
        "‚è≥ ÏßÄÏßà Ïó∞ÎåÄÌïôÍ≥º ÏÉùÎ¨º ÏßÑÌôîÏÇ¨, ÎåÄÎ©∏Ï¢ÖÍ≥º ÏÉùÌÉúÍ≥Ñ Ïû¨Ìé∏",
        "üöÄ Ïö∞Ï£º ÌÉêÏÇ¨Ïùò Í≥ºÌïôÍ≥º Í∏∞Ïà†, Ï≤úÎ¨∏ÌïôÏ†Å Í¥ÄÏ∏°Ïùò ÏßÄÍµ¨Í≥ºÌïôÏ†Å ÏùòÏùò",
        "üåã ÏûêÏó∞Ïû¨Ìï¥Ïùò Î∞úÏÉù Î©îÏª§ÎãàÏ¶òÍ≥º Î∞©Ïû¨ Í≥ºÌïô, Ïû¨Ìï¥ Í≤ΩÍ∞ê Í∏∞Ïà†Ïùò Î∞úÏ†Ñ"
      ];

      // ‚úÖ BRAINDEEP Îî•Î¨ºÎ¶¨ Ï†úÎ™©
      overrides["BRAINDEEP.science.physics"] = [
        "üî¨ Î¨ºÎ¶¨ÎüâÏùò Ï∏°Ï†ïÍ≥º Íµ≠Ï†úÎã®ÏúÑÍ≥Ñ(SI)Ïùò Ïù¥Ìï¥",
        "üìê Î≤°ÌÑ∞ÏôÄ Ïä§ÏπºÎùº, Î¨ºÎ¶¨ÎüâÏùò Î∂ÑÎ•òÏôÄ Ïó∞ÏÇ∞",
        "üöÄ ÏßÅÏÑ† Ïö¥ÎèôÏùò Í∏∞Ïà†, ÏÜçÎèÑÏôÄ Í∞ÄÏÜçÎèÑÏùò Î¨ºÎ¶¨Ìïô",
        "üçé Îâ¥ÌÑ¥Ïùò Ïö¥Îèô Î≤ïÏπô, Í≥†Ï†ÑÏó≠ÌïôÏùò Í∏∞Ï¥à",
        "üéØ Ìè¨Î¨ºÏÑ† Ïö¥Îèô, 2Ï∞®ÏõêÏóêÏÑúÏùò Î¨ºÏ≤¥ Ïö¥Îèô Î∂ÑÏÑù",
        "üîÑ ÏõêÏö¥ÎèôÍ≥º Íµ¨Ïã¨Î†•, ÌöåÏ†ÑÌïòÎäî Î¨ºÏ≤¥Ïùò Ïó≠Ìïô",
        "‚ö° ÏùºÍ≥º ÏóêÎÑàÏßÄ, Ïó≠ÌïôÏ†Å ÏóêÎÑàÏßÄ Î≥¥Ï°¥Ïùò ÏõêÎ¶¨",
        "üí• Ïö¥ÎèôÎüâÍ≥º Ï∂©Í≤©Îüâ, Ï∂©ÎèåÏùò Î¨ºÎ¶¨Ìïô",
        "üî• Ïó¥Í≥º Ïó¥Ïó≠Ìïô, ÏóêÎÑàÏßÄ Ï†ÑÌôòÏùò Î≤ïÏπô",
        "üåä ÌååÎèôÏùò Í∏∞Ï¥à, ÏßÑÎèôÏù¥ Ï†ÑÌååÎêòÎäî ÏõêÎ¶¨",
        "üîä ÏÜåÎ¶¨ÏôÄ ÏùåÌåå, ÏßÑÎèôÏù¥ ÎßåÎì§Ïñ¥ÎÇ¥Îäî Ï≤≠Í∞Å ÏÑ∏Í≥Ñ",
        "üí° ÎπõÍ≥º Í¥ëÌïô, Î∞òÏÇ¨ÏôÄ Íµ¥Ï†àÏùò Î¨ºÎ¶¨Ìïô",
        "‚ö° Ï†ÑÍ∏∞ÏôÄ Ï†ÑÌïò, Ï†ïÏ†ÑÍ∏∞ ÌòÑÏÉÅÍ≥º Ïø®Î°±Ïùò Î≤ïÏπô",
        "üîå Ï†ÑÎ•òÏôÄ Ï†ÑÍ∏∞ÌöåÎ°ú, Ïò¥Ïùò Î≤ïÏπôÍ≥º ÌöåÎ°ú Ìï¥ÏÑù",
        "üß≤ ÏûêÍ∏∞ÏôÄ Ï†ÑÏûêÍ∏∞ Ïú†ÎèÑ, Ï†ÑÍ∏∞ÏôÄ ÏûêÍ∏∞Ïùò ÌÜµÌï©",
        "üöÄ ÏÉÅÎåÄÏÑ± Ïù¥Î°†, ÏãúÍ∞ÑÍ≥º Í≥µÍ∞ÑÏùò ÌòÅÎ™Ö",
        "‚öõÔ∏è ÏñëÏûêÏó≠ÌïôÏùò Í∏∞Ï¥à, ÎØ∏Ïãú ÏÑ∏Í≥ÑÏùò ÏÉàÎ°úÏö¥ Î¨ºÎ¶¨Ìïô",
        "‚ò¢Ô∏è ÏõêÏûêÏôÄ ÌïµÎ¨ºÎ¶¨, Î¨ºÏßàÏùò Í∞ÄÏû• ÍπäÏùÄ Íµ¨Ï°∞",
        "üíª Î∞òÎèÑÏ≤¥ÏôÄ Ï†ÑÏûêÏÜåÏûê, ÌòÑÎåÄ Ï†ÑÏûêÍ≥µÌïôÏùò Î¨ºÎ¶¨Ï†Å Í∏∞Ï¥à",
        "üåê Î¨ºÎ¶¨ÌïôÍ≥º ÌòÑÎåÄ Í∏∞Ïà†, Í≥ºÌïôÏù¥ ÎßåÎì† ÏùºÏÉÅÏùò ÌòÅÏã†"
      ];

      // ‚úÖ BRAINDEEP Îî•ÌôîÌïô Ï†úÎ™©
      overrides["BRAINDEEP.science.chem"] = [
        "‚öóÔ∏è Î¨ºÏßàÏùò Î∂ÑÎ•ò Ï≤¥Í≥ÑÏôÄ ÏàúÎ¨ºÏßà, ÌòºÌï©Î¨ºÏùò ÌôîÌïôÏ†Å ÌäπÏÑ±",
        "üî¨ ÏõêÏûêÏùò Íµ¨Ï°∞ÏôÄ Ï†ÑÏûê Î∞∞Ïπò, Ï£ºÍ∏∞Ïú®ÌëúÏùò ÌôîÌïôÏ†Å ÏùòÎØ∏",
        "üîó ÌôîÌïô Í≤∞Ìï©Ïùò ÏõêÎ¶¨ÏôÄ Ïù¥Ïò® Í≤∞Ìï©, Í≥µÏú† Í≤∞Ìï©Ïùò ÌäπÏÑ±",
        "‚öñÔ∏è ÌôîÌïô Î∞òÏùëÏãùÍ≥º Î™∞Ïùò Í∞úÎÖê, ÏñëÏ†Å Í¥ÄÍ≥ÑÏùò Ïù¥Ìï¥",
        "üå°Ô∏è Ïö©Ïï°Ïùò ÎÜçÎèÑÏôÄ Î¨ΩÏùÄ Ïö©Ïï°Ïùò Ï¥ùÍ¥ÑÏÑ±",
        "‚öóÔ∏è ÏÇ∞Í≥º ÏóºÍ∏∞Ïùò Ï†ïÏùò, Ï§ëÌôî Î∞òÏùëÍ≥º pHÏùò ÌôîÌïô",
        "üî• ÏÇ∞Ìôî-ÌôòÏõê Î∞òÏùëÏùò ÏõêÎ¶¨ÏôÄ Ï†ÑÏûê Ïù¥ÎèôÏùò ÌôîÌïô",
        "üîã Ï†ÑÍ∏∞ÌôîÌïôÏùò ÏõêÎ¶¨ÏôÄ ÌôîÌïô Ï†ÑÏßÄÏùò ÏûëÎèô Î©îÏª§ÎãàÏ¶ò",
        "‚è±Ô∏è ÌôîÌïô Î∞òÏùë ÏÜçÎèÑÏôÄ Î∞òÏùë ÏÜçÎèÑÏóê ÏòÅÌñ•ÏùÑ ÎØ∏ÏπòÎäî ÏöîÏù∏",
        "‚öñÔ∏è ÌôîÌïô ÌèâÌòïÏùò ÏõêÎ¶¨ÏôÄ Î•¥ÏÉ§ÌãÄÎ¶¨ÏóêÏùò Î≤ïÏπô",
        "üå°Ô∏è Ïó¥ÌôîÌïôÍ≥º ÏóîÌÉàÌîº Î≥ÄÌôîÏùò ÏõêÎ¶¨",
        "üí® Í∏∞Ï≤¥Ïùò ÏÑ±ÏßàÍ≥º Í∏∞Ï≤¥ Î≤ïÏπôÏùò ÏõêÎ¶¨",
        "üß¨ Ïú†Í∏∞ÌôîÌï©Î¨ºÏùò ÏÑ∏Í≥ÑÏôÄ ÌÉÑÏÜå ÌôîÌïôÏùò Í∏∞Ï¥à",
        "üß™ Í≥†Î∂ÑÏûê ÌôîÌï©Î¨ºÍ≥º Ìï©ÏÑ± Í≥†Î∂ÑÏûêÏùò ÏÑ∏Í≥Ñ",
        "üß¨ ÏÉùÌôîÌïôÏùò Í∏∞Ï¥àÏôÄ ÏÉùÎ™ÖÏ≤¥Ïùò ÌôîÌïô Î∞òÏùë",
        "üåç ÌôîÌïôÍ≥º ÌôòÍ≤Ω - ÎåÄÍ∏∞ Ïò§ÏóºÍ≥º ÎÖπÏÉâ ÌôîÌïôÏùò ÎØ∏Îûò",
        "üî¨ Î∂ÑÏÑùÌôîÌïôÏùò Í∏∞Ï¥àÏôÄ ÌôîÌïô Î∂ÑÏÑù Î∞©Î≤ï",
        "‚öôÔ∏è Í∏àÏÜçÏùò ÌôîÌïôÍ≥º Ìï©Í∏àÏùò ÏõêÎ¶¨",
        "üß¥ ÌôîÌïôÍ≥º ÏùºÏÉÅÏÉùÌôú - ÏÉùÌôú ÏÜç ÌôîÌïôÏùò ÏõêÎ¶¨",
        "üöÄ Ïã†ÏÜåÏû¨ÏôÄ ÎÇòÎÖ∏ÌôîÌïô, ÎØ∏Îûò Í∏∞Ïà†Ïùò ÌôîÌïôÏ†Å Í∏∞Î∞ò"
      ];

      // ‚úÖ BRAINDEEP Îî•ÏÇ¨ÌöåÎ¨∏Ìôî Ï†úÎ™©
      overrides["BRAINDEEP.social.soc"] = [
        "üîç ÏÇ¨ÌöåÎ•º Î≥¥Îäî Îàà",
        "üé≠ ÏßÑÏã§ÏùÑ Ï∞æÎäî Ïó¨Ï†ï",
        "‚öñÔ∏è Ïó∞Íµ¨ÏûêÏùò Ïú§Î¶¨Ï†Å ÎîúÎ†àÎßà",
        "üß© ÎÇòÎäî ÎàÑÍµ¨Ïù∏Í∞Ä",
        "üé™ Î≥¥Ïù¥ÏßÄ ÏïäÎäî Î¨¥ÎåÄ",
        "üë• Ìï®Íªò ÏÇ¥ÏïÑÍ∞ÄÎäî Î≤ï",
        "üèõÔ∏è Í¥ÄÎ£åÏ†úÏùò Îëê ÏñºÍµ¥",
        "üì± Ïó∞Í≤∞Îêú ÏÑ∏ÏÉÅÏùò Î™ÖÏïî",
        "üö® Ïôú Í∑úÏπôÏùÑ Ïñ¥Í∏∞ÎäîÍ∞Ä",
        "üéì ÌïôÍµêÎäî ÌèâÎì±ÌïúÍ∞Ä",
        "üìä Ïà´ÏûêÎ°ú Î≥¥Îäî ÏÇ¨Ìöå",
        "üèòÔ∏è Ïö∞Î¶¨ ÎèôÎÑ§Í∞Ä Î≥ÄÌïòÍ≥† ÏûàÎã§",
        "üì∫ ÎØ∏ÎîîÏñ¥Í∞Ä ÎßåÎìúÎäî ÏÑ∏ÏÉÅ",
        "üåç ÏßÄÍµ¨Ï¥å ÏãúÎåÄÏùò ÎπõÍ≥º Í∑∏Î¶ºÏûê",
        "üó≥Ô∏è Ìïú ÌëúÏùò Ìûò",
        "üîç Ïö∞Î¶¨ ÏÇ¨ÌöåÏùò ÎØºÎÇØ",
        "üè• Ìï®Íªò ÎßåÎìúÎäî ÏïàÏ†ÑÎßù",
        "üå± ÏßÄÍµ¨ÏôÄ Ìï®Íªò ÏÇ¥ÏïÑÍ∞ÄÍ∏∞",
        "‚öñÔ∏è Î≤ïÏùò ÏßÄÎ∞∞ÏôÄ Ï†ïÏùò",
        "‚úä Ïù∏Í∂åÏùò Ïó≠ÏÇ¨ÏôÄ ÏãúÎØºÏÇ¨Ìöå"
      ];

      // ‚úÖ BRAINDEEP Îî•ÏßÄÎ¶¨ Ï†úÎ™©
      overrides["BRAINDEEP.social.geo"] = [
        "üó∫Ô∏è ÏÑ∏ÏÉÅÏùÑ ÏùΩÎäî ÏßÄÎèÑ",
        "üåç ÏúÑÏπòÍ∞Ä Ïö¥Î™ÖÏùÑ Î∞îÍæºÎã§",
        "üèîÔ∏è ÎïÖÏù¥ Îì§Î†§Ï£ºÎäî Ïù¥ÏïºÍ∏∞",
        "üåä Î¨ºÏù¥ ÎπöÏñ¥ÎÇ∏ ÏßÄÌòï",
        "‚òÄÔ∏è Í∏∞ÌõÑÍ∞Ä ÏÇ∂ÏùÑ Í≤∞Ï†ïÌïúÎã§",
        "üë• ÏÇ¨ÎûåÏùÄ Ïôú Î™®Ïó¨ ÏÇ¥Íπå",
        "üèôÔ∏è ÎèÑÏãúÏùò ÎπõÍ≥º Í∑∏Î¶ºÏûê",
        "üåæ ÎßàÏùÑÏù¥ ÏÇ¨ÎùºÏßÄÍ≥† ÏûàÎã§",
        "üèóÔ∏è Íµ≠ÌÜ†Ïùò Í∑†ÌòïÏùÑ Ï∞æÏïÑÏÑú",
        "‚ö° ÏóêÎÑàÏßÄ, ÎØ∏ÎûòÎ•º Î∞îÍæ∏Îã§",
        "üåê ÏÑ∏Í≥ÑÍ∞Ä ÌïòÎÇòÎ°ú Ïó∞Í≤∞ÎêòÎã§",
        "‚úàÔ∏è ÏãúÍ∞ÑÍ≥º Í≥µÍ∞ÑÏùÑ ÎÑòÏñ¥",
        "üåç ÏßÄÍµ¨Ï¥å Í∏∞ÌõÑ Ïó¨Ìñâ",
        "üë• 80Ïñµ Ïù∏Î•òÏùò Î∂àÍ∑†ÌòïÌïú ÏßÄÎèÑ",
        "üèôÔ∏è ÎèÑÏãúÏùò ÎπõÍ≥º Í∑∏Î¶ºÏûê",
        "üó∫Ô∏è ÎîîÏßÄÌÑ∏ ÏßÄÍµ¨Î•º ÏùΩÎã§",
        "‚öîÔ∏è Íµ≠Í≤ΩÏÑ†Ïóê ÏÉàÍ≤®ÏßÑ Í∞àÎì±Ïùò Ïó≠ÏÇ¨",
        "üåø ÏßÄÍµ¨Î•º ÏÇ¥Î¶¨Îäî ÏÑ†ÌÉù",
        "‚ö° ÏóêÎÑàÏßÄ Ï†ÑÌôòÏùò ÏãúÎåÄ",
        "üìç ÏßÄÏó≠Ïù¥ Î∏åÎûúÎìúÍ∞Ä ÎêòÎäî ÏãúÎåÄ"
      ];

      // ‚úÖ BRAINDEEP Îî•Î≤ï Ï†úÎ™©
      overrides["BRAINDEEP.social.law"] = [
        "‚öñÔ∏è Ïôú Ïö∞Î¶¨ÏóêÍ≤å Î≤ïÏù¥ ÌïÑÏöîÌïúÍ∞Ä",
        "üìú ÎåÄÌïúÎØºÍµ≠Ïùò ÏÑ§Í≥ÑÎèÑ",
        "üóΩ ÎÇòÏùò Í∂åÎ¶¨Îäî Ïñ¥ÎîîÍπåÏßÄÏù∏Í∞Ä",
        "üèõÔ∏è Í∂åÎ†•ÏùÑ ÎÇòÎàÑÎäî Ïù¥Ïú†",
        "üó≥Ô∏è Ìïú ÌëúÍ∞Ä ÏÑ∏ÏÉÅÏùÑ Î∞îÍæºÎã§",
        "üë§ Î≤ï ÏïûÏóê ÏÑ† ÎÇò, Í∂åÎ¶¨Ïùò Ï£ºÏ≤¥",
        "üìù ÏïΩÏÜçÏùÄ ÏßÄÏºúÏïº ÌïúÎã§",
        "üè† ÎÇ¥ Í≤ÉÍ≥º ÎÑ§ Í≤ÉÏùò Í≤ΩÍ≥Ñ",
        "üíç Í∞ÄÏ°±, Î≤ïÏúºÎ°ú Î¨∂Ïù∏ Ïù∏Ïó∞",
        "üö® Î¨¥ÏóáÏù¥ Î≤îÏ£ÑÏù∏Í∞Ä",
        "üí• ÌîºÌï¥Î•º ÏûÖÏóàÎã§Î©¥ Î∞∞ÏÉÅÎ∞õÏûê",
        "‚öñÔ∏è Î≤ïÏ†ïÏóêÏÑúÎäî Î¨¥Ïä® ÏùºÏù¥",
        "ü§ù Ïã∏Ïö∞ÏßÄ ÏïäÍ≥† Ìï¥Í≤∞ÌïòÎäî Î≤ï",
        "üíº ÏùºÌïòÎäî ÏÇ¨ÎûåÏùÑ ÏßÄÌÇ§Îäî Î≤ï",
        "üåç ÏÑ∏Í≥ÑÎ•º Î¨∂Îäî ÏïΩÏÜç",
        "üõí ÌòÑÎ™ÖÌïú ÏÜåÎπÑÏûêÍ∞Ä ÎêòÎ†§Î©¥",
        "üí° ÏïÑÏù¥ÎîîÏñ¥ÎèÑ Ïû¨ÏÇ∞Ïù¥Îã§",
        "üåø ÏûêÏó∞ÏùÑ ÏßÄÌÇ§Îäî Î≤ï",
        "üë¶ ÎØ∏ÏÑ±ÎÖÑÏûêÏùò Î≤ïÏ†Å ÏßÄÏúÑ",
        "üìã ÏïåÏïÑÎëêÎ©¥ Ï¢ãÏùÄ Î≤ï"
      ];

      // ‚úÖ BRAINDEEP Îî•Ï†ïÏπòÍ≤ΩÏ†ú Ï†úÎ™©
      overrides["BRAINDEEP.social.pol"] = [
        "üó≥Ô∏è ÎØºÏ£ºÏ£ºÏùòÎûÄ Î¨¥ÏóáÏù∏Í∞Ä",
        "üèõÔ∏è ÎåÄÌÜµÎ†πÏ†úÏôÄ ÏùòÏõêÎÇ¥Í∞ÅÏ†ú",
        "‚úã Ìïú ÌëúÏùò Ìûò, ÏÑ†Í±∞",
        "ü§ù Ï†ïÏπòÎ•º ÏõÄÏßÅÏù¥Îäî ÏßëÎã®Îì§",
        "üèòÔ∏è Ïö∞Î¶¨ ÏßÄÏó≠ÏùÄ Ïö∞Î¶¨ ÏÜêÏúºÎ°ú",
        "üí∞ Í≤ΩÏ†úÌôúÎèôÏùò Í∏∞Ï¥à",
        "üìä ÏàòÏöîÏôÄ Í≥µÍ∏âÏùò ÎßåÎÇ®",
        "üè™ Í≤ΩÏüÅ ÏãúÏû•Í≥º ÎèÖÏ†ê ÏãúÏû•",
        "‚öñÔ∏è Î≥¥Ïù¥ÏßÄ ÏïäÎäî ÏÜêÏùò ÌïúÍ≥Ñ",
        "üìà GDPÎ°ú Î≥¥Îäî ÎÇòÎùº Í≤ΩÏ†ú",
        "üí∏ Ïôú Í≥ºÏûêÍ∞Ä Ï†êÏ†ê ÏûëÏïÑÏßÄÎäî Í±∏Íπå?",
        "üë∑ ÏùºÏûêÎ¶¨ÏôÄ Ïã§ÏóÖÎ•†",
        "üìä Ìò∏Ìô©Í≥º Î∂àÌô©Ïùò Î∞òÎ≥µ",
        "üö¢ Ïôú ÎÇòÎùºÎÅºÎ¶¨ Î¨ºÍ±¥ÏùÑ ÏÇ¨Í≥†ÌåîÍπå?",
        "üí± ÏõêÌôîÏôÄ Îã¨Îü¨Ïùò Í¥ÄÍ≥Ñ",
        "üè≠ Í∏∞ÏóÖÏùÄ Ïñ¥ÎñªÍ≤å ÎèàÏùÑ Î≤åÍπå?",
        "üè¶ ÏùÄÌñâÏùÄ Ïö∞Î¶¨ ÎèàÏúºÎ°ú Î¨¥ÏóáÏùÑ Ìï†Íπå?",
        "üí∞ ÏÑ∏Í∏àÏùÄ Ïñ¥ÎîîÏóê Ïì∞ÏùºÍπå?",
        "üèõÔ∏è Ï†ïÎ∂ÄÎäî Ïôú Í≤ΩÏ†úÏóê Í∞úÏûÖÌï†Íπå?",
        "üåê ÏÑ∏Í≥ÑÎäî Ïñ¥ÎñªÍ≤å Ïó∞Í≤∞ÎêòÏñ¥ ÏûàÏùÑÍπå?"
      ];

      // ‚úÖ BRAINDEEP Îî•ÌòÑÎåÄÎ¨∏Ìïô Ï†úÎ™©
      overrides["BRAINDEEP.korlit.modern"] = [
        "üåô Î©îÎ∞ÄÍΩÉ ÌïÑ Î¨¥Î†µ, Îã¨Îπõ ÏïÑÎûò ÌîºÏñ¥ÎÇú Ïù∏Ïó∞",
        "üåßÔ∏è ÏÜåÎÇòÍ∏∞, ÏßßÏßÄÎßå Í∞ïÎ†¨ÌñàÎçò Ï≤´ÏÇ¨Îûë",
        "üìñ Î¥ÑÎ¥Ñ, Ïû•Ïù∏ÏóêÍ≤å ÏÜçÏùÄ Îç∞Î¶¥ÏÇ¨ÏúÑÏùò Î∂ÑÎÖ∏",
        "üöó Ïö¥Ïàò Ï¢ãÏùÄ ÎÇ†, ÌñâÏö¥ Îí§Ïóê Ïà®ÏùÄ ÎπÑÍ∑π",
        "üå∏ ÎèôÎ∞±ÍΩÉ, Îã≠Ïã∏ÏõÄÏúºÎ°ú ÏãúÏûëÎêú ÌíãÏÇ¨Îûë",
        "üíï ÏÇ¨ÎûëÏÜêÎãòÍ≥º Ïñ¥Î®∏Îãà, Ïò•Ìù¨ ÎààÏóê ÎπÑÏπú Ïñ¥Î•∏Îì§",
        "ü•î Í∞êÏûê, Í∞ÄÎÇúÏù¥ Î¨¥ÎÑàÎú®Î¶∞ Ìïú Ïó¨Ïù∏Ïùò ÏÇ∂",
        "‚õµ Î∞∞Îî∞ÎùºÍ∏∞, Î∞îÎã§ ÏúÑÏóê Îñ†ÎèÑÎäî Ïä¨Ìîà ÎÖ∏Îûò",
        "üíî ÎπàÏ≤ò, Í∞ÄÎÇú ÏÜçÏóêÏÑúÎèÑ ÎπõÎÇòÎäî ÏïÑÎÇ¥Ïùò ÏÇ¨Îûë",
        "üéì Î†àÎîîÎ©îÏù¥Îìú Ïù∏ÏÉù, ÏßÄÏãùÏù∏Ïùò Ï¢åÏ†àÍ≥º ÏûêÏ°∞",
        "üåä ÌÉÅÎ•ò, ÌùêÎ¶∞ Î¨ºÏóê Ìú©Ïì∏Î¶∞ Ï¥àÎ¥âÏù¥Ïùò Ïö¥Î™Ö",
        "üë®‚Äçüë©‚Äçüë¶ ÏÇºÎåÄ, ÏÑ∏ ÏÑ∏ÎåÄÍ∞Ä Î∂ÄÎî™ÌûàÎäî Í∞ÄÏπòÍ¥Ä",
        "üòè ÌÉúÌèâÏ≤úÌïò, Ïú§ ÏßÅÏõêÏùò Í∏∞ÎßâÌûå Ï≤òÏÑ∏Ïà†",
        "üèôÔ∏è Ï≤úÎ≥ÄÌíçÍ≤Ω, Ï≤≠Í≥ÑÏ≤ú ÏÇ¨ÎûåÎì§Ïùò Ìù¨Î°úÏï†ÎùΩ",
        "üíî Î¨¥Ï†ï, Í∑ºÎåÄÎ•º Ìñ•Ìïú Ï≤≠Ï∂òÏùò Î∞©Ìô©",
        "üöÇ ÎßåÏÑ∏Ï†Ñ, Ï°∞ÏÑ†ÏúºÎ°ú ÎèåÏïÑÏò® ÏßÄÏãùÏù∏Ïùò Îàà",
        "üïäÔ∏è ÎÇ†Í∞ú, Î∞ïÏ†úÎêú Ï≤úÏû¨Ïùò ÎπÑÍ∑πÏ†Å Ïô∏Ïπ®",
        "üí´ Î¥âÎ≥ÑÍ∏∞, Í∏∞ÏÉù Í∏àÌôçÍ≥ºÏùò Ïù¥Î≥Ñ Ïù¥ÏïºÍ∏∞",
        "üö∂ ÏÇºÌè¨ Í∞ÄÎäî Í∏∏, Í≥†Ìñ• ÏûÉÏùÄ Îñ†ÎèåÏù¥Îì§",
        "üåßÔ∏è Ïû•Îßà, Ïù¥ÎÖêÏùÑ ÎÑòÏñ¥ÏÑ† Îëê Ìï†Î®∏Îãà",
        "üèõÔ∏è Í¥ëÏû•, ÎÇ®Í≥º Î∂Å ÏÇ¨Ïù¥ÏóêÏÑú Í∏∏ÏùÑ ÏûÉÎã§",
        "üí• Ïò§Î∞úÌÉÑ, Ï†ÑÏüÅÏù¥ ÎÇ®Í∏¥ ÏÉÅÏ≤òÌà¨ÏÑ±Ïù¥ Í∞ÄÏ°±",
        "üë®‚Äçüë¶ ÏàòÎÇúÏù¥ÎåÄ, ÏïÑÎ≤ÑÏßÄÏôÄ ÏïÑÎì§Ïùò ÏûÉÏñ¥Î≤ÑÎ¶∞ ÌåîÎã§Î¶¨",
        "üåæ Ïπ¥Ïù∏Ïùò ÌõÑÏòà, ÌÜ†ÏßÄÍ∞úÌòÅÏù¥ ÎπºÏïóÏùÄ ÏÇ∂",
        "üê¥ Ïó≠Îßà, Îñ†ÎèåÏù¥ Ïö¥Î™ÖÏùÑ ÌÉÄÍ≥†ÎÇú ÏÑ±Í∏∞",
        "üèòÔ∏è ÏÇ¨ÌïòÏ¥å, Ï†à ÏïÑÎûò ÎßàÏùÑÏùò Í∞ÄÎÇúÌïú ÏÇ¨ÎûåÎì§",
        "ü¶¢ Ìïô, ÌïòÏñÄ ÎÇ†Í∞úÏóê Îã¥Í∏¥ Í∑∏Î¶¨ÏõÄ",
        "üåæ Ìô©ÎßåÍ∑ºÏùÄ Ïù¥Î†áÍ≤å ÎßêÌñàÎã§, ÏàúÎ∞ïÌïú ÎÜçÎ∂ÄÏùò ÏµúÌõÑ",
        "üëû ÏïÑÌôâ Ïº§Î†àÏùò Íµ¨ÎëêÎ°ú ÎÇ®ÏùÄ ÏÇ¨ÎÇ¥, Í∞ÄÏû•Ïùò Î¨¥Í≤å",
        "üè† ÏóÑÎßàÏùò ÎßêÎöù, Ïñ¥Î®∏ÎãàÍ∞Ä Î∞ïÏùÄ ÏÇ∂Ïùò ÌÑ∞Ï†Ñ",
        "üéà ÎÇúÏû•Ïù¥Í∞Ä ÏèòÏïÑÏò¨Î¶∞ ÏûëÏùÄ Í≥µ, Ï≤†Í±∞ÎØºÏùò Íøà",
        "üë§ Ïö∞Î¶¨Îì§Ïùò ÏùºÍ∑∏Îü¨ÏßÑ ÏòÅÏõÖ, ÏóÑÏÑùÎåÄÏùò ÏôïÍµ≠",
        "üèÉ ÍπÉÎ∞ú ÏóÜÎäî Í∏∞Ïàò, Îã¨Î¶¨Í∏∞ÏôÄ Ï¢åÏ†à ÏÇ¨Ïù¥",
        "üî® Í∞ùÏßÄ, Í≥µÏÇ¨ÌåêÏùÑ Îñ†ÎèÑÎäî ÎÖ∏ÎèôÏûêÎì§",
        "üé∂ ÏÑúÌé∏Ï†ú, ÏÜåÎ¶¨Ïóê Î∞îÏπú ÏÜ°ÌôîÏùò Îàà",
        "üåè ÌÜ†ÏßÄ, ÏµúÏ∞∏ÌåêÎåÅ 5ÎåÄÏùò ÎåÄÌïòÎìúÎùºÎßà",
        "üî• ÌòºÎ∂à, Í∫ºÏßÄÏßÄ ÏïäÎäî Ï¢ÖÍ∞ÄÏùò Î∂àÏî®",
        "‚õ∞Ô∏è ÌÉúÎ∞±ÏÇ∞Îß•, Î∂ÑÎã®ÏùÑ Í∞ÄÎ•∏ Ïù¥ÎÖêÏùò ÏÇ∞Îß•",
        "üîÆ Î¨¥ÎÖÄÎèÑ, Î¨¥Îãπ Ïñ¥Î®∏ÎãàÏôÄ Í∏∞ÎèÖÍµê ÏïÑÎì§",
        "üå∫ ÎèôÎ∞±ÍΩÉ, ÏïåÏã∏Ìïú Ìñ•Í∏∞ ÏÜç ÌíãÌíãÌïú Í≥†Î∞±"
      ];

      // ‚úÖ BRAINDEEP Îî•Í≥†Ï†ÑÎ¨∏Ìïô Ï†úÎ™©
      overrides["BRAINDEEP.korlit.classic"] = [
        "üìú Ï∂òÌñ•Í≥º Î™ΩÎ£°Ïùò ÏïΩÏÜç",
        "‚öñÔ∏è Ïñ¥ÏÇ¨ Ïù¥ÎèÑÎ†πÍ≥º Ï∂òÌñ•Ïùò Ïû¨Ìöå",
        "üåä ÌôçÍ≥ÑÏõî, Î¨ºÏóêÏÑú Í±¥Ï†∏ Ïò¨Î¶∞ Ïö¥Î™Ö",
        "‚ú® Î∞±ÏÑ±ÏùÑ ÏúÑÌï¥ ÎÇòÏÑ† Ïã†ÎπÑÌïú ÏÑ†ÎπÑ",
        "üê¢ ÏàôÌñ•Ïùò Í∏∞Ïù¥Ìïú ÌÉÑÏÉùÍ≥º ÏûÉÏñ¥Î≤ÑÎ¶∞ Ïñ¥Î¶∞ ÏãúÏ†à",
        "üëÅÔ∏è ÏïÑÎ≤ÑÏßÄÏùò ÎààÏùÑ Îú®Í≤å Ìïú Ìö®ÎÖÄÏùò Ìù¨ÏÉù",
        "üê¶ Ï†úÎπÑÍ∞Ä Î¨ºÏñ¥Îã§ Ï§Ä Î≥µÍ≥º Î≤å",
        "üê¢ Ïö©Í∂ÅÏóêÏÑú ÏÇ¥ÏïÑ ÎèåÏïÑÏò® ÌÜ†ÎÅºÏùò ÏßÄÌòú",
        "üëª ÏõêÌòºÏù¥ ÎêòÏñ¥ Î∞ùÌûå ÏñµÏö∏Ìïú Ï£ΩÏùå",
        "üëü ÌïòÎäòÏù¥ ÎèÑÏö¥ Ï∞©Ìïú ÏΩ©Ï•êÏùò ÌñâÎ≥µ",
        "üé≠ Ï†úÏ£º Í∏∞ÏÉùÏóêÍ≤å ÎÜÄÏïÑÎÇú ÏúÑÏÑ†ÏûêÏùò ÏµúÌõÑ",
        "üë• Í∞ÄÏßúÏóêÍ≤å ÎπºÏïóÍ∏¥ ÏßÑÏßúÏùò ÏûêÎ¶¨",
        "üí™ Î™ªÏÉùÍ∏¥ Î©∞ÎäêÎ¶¨ÏóêÏÑú ÎÇòÎùºÎ•º Íµ¨Ìïú ÏòÅÏõÖÏúºÎ°ú",
        "üíî Í∂ÅÎÖÄÏôÄ ÏÑ†ÎπÑÏùò Ïù¥Î£®ÏßÄ Î™ªÌïú ÏÇ¨Îûë",
        "üé® Ïã†Î∂ÑÏùÑ ÎÑòÏùÄ Í∏∞ÏÉùÍ≥º ÏñëÎ∞òÏùò ÏÇ¨Îûë",
        "üåô ÌåîÏÑ†ÎÖÄÏôÄ Ìï®ÍªòÌïú ÎçßÏóÜÎäî ÏòÅÌôîÏùò Íøà",
        "üë∏ Ï´ìÍ≤®ÎÇú Î≥∏Ï≤òÍ∞Ä ÎêòÏ∞æÏùÄ Î™ÖÏòà",
        "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ìö®ÏÑ±Í≥º Ïö∞Ïï†Î°ú Í∞ÄÎ¨∏ÏùÑ ÏßÄÌÇ® ÌòïÏ†ú",
        "‚öîÔ∏è ÏôúÏ†ÅÏùÑ Î¨ºÎ¶¨Ïπú Ï°∞ÏÑ†Ïùò ÏòÅÏõÖÎì§",
        "üìö Ïû•ÏÇ¨Î°ú ÏÑ∏ÏÉÅÏùÑ ÎπÑÌåêÌïú ÏÑ†ÎπÑ",
        "üí∞ ÎèàÏúºÎ°ú ÏÇ¨Í≥†Ìåê ÏñëÎ∞òÏùò Ïã†Î∂Ñ",
        "üêÖ Î≤îÏóêÍ≤å Íæ∏ÏßÄÎûå Îì§ÏùÄ ÏúÑÏÑ†Ïûê",
        "üé≠ Í∏∞ÏÉùÏóêÍ≤å Îπ†Ï†∏ Ìå®Í∞ÄÎßùÏã†Ìïú ÌïúÎüâ",
        "üíï Í≥†ÎÇú ÎÅùÏóê Îã§Ïãú ÎßåÎÇú Îëê Ïó∞Ïù∏",
        "üå∏ ÌïòÎäòÏù¥ Îß∫Ïñ¥Ï§Ä Ïù∏Ïó∞Ïùò ÏãúÎ†®Í≥º Í≤∞Ïã§",
        "üåä Ï†ÑÏüÅÏù¥ Í∞àÎùºÎÜìÏùÄ Í∞ÄÏ°±Ïùò Í∏∞Ï†Å Í∞ôÏùÄ Ïû¨Ìöå",
        "üåç ÏÑ∏ ÎÇòÎùºÎ•º Îñ†Îèà ÌååÎûÄÎßåÏû•Ìïú ÏÇ∂",
        "‚öîÔ∏è ÏÑúÏûêÎ°ú ÌÉúÏñ¥ÎÇò ÏÉà ÎÇòÎùºÎ•º ÏÑ∏Ïö∞Îã§",
        "ü§¶ Ïñ¥Î¶¨ÏÑùÏùÄ ÏÇ¨ÏúÑÏùò Ï¢åÏ∂©Ïö∞Îèå Ïã§ÏàòÎã¥",
        "üê¶ ÏöïÏã¨ Î∂ÄÎ¶¨Îã§ Î™©Ïà®ÏùÑ ÏûÉÏùÄ Íø©",
        "üêç Î±Ä Ïã†ÎûëÏùò ÎπÑÎ∞ÄÍ≥º ÏßÑÏ†ïÌïú ÏÇ¨Îûë",
        "üë∏ Î≤ÑÎ†§ÏßÑ Í≥µÏ£ºÍ∞Ä Î∂ÄÎ™®Î•º ÏÇ¥Î¶¨Îã§",
        "üîî Í∏àÎ∞©Ïö∏Î°ú ÎÇòÎùºÎ•º Íµ¨Ìïú ÏòÅÏõÖ",
        "‚öîÔ∏è Í∞ÑÏã†Ïóê ÎßûÏÑú Ï∂©ÏÑ±ÏùÑ Îã§Ìïú ÏòÅÏõÖ",
        "üó°Ô∏è Î∂ÄÎ™®Ïùò ÏõêÏàòÎ•º Í∞öÏùÄ Ìö®Ïûê Ïû•Ïàò",
        "üë¶ Í≥†ÏïÑÏóêÏÑú ÎåÄÏû•Íµ∞Ïù¥ Îêú ÏÜåÎÖÑ",
        "üè¥ ÎÇòÎùºÎ•º ÏúÑÌï¥ Î™©Ïà®ÏùÑ Î∞îÏπú Ï∂©Ïã† Ïû•Íµ∞",
        "üíé Ïó≠Í≤ΩÏùÑ ÎîõÍ≥† ÏùºÏñ¥ÏÑ† Ï∂©Ïã†Ïùò ÌõÑÏÜê",
        "üåô Îã¨Îπõ ÏïÑÎûò ÌîºÏñ¥ÎÇú Ïã†ÎπÑÎ°úÏö¥ ÏÇ¨Îûë",
        "üëª Ï£ΩÏùåÎèÑ Í∞ÄÎ•¥ÏßÄ Î™ªÌïú ÏÇ¨Îûë"
      ];

      // ‚úÖ BRAINDEEP Îî•ÏÑ∏Í≥ÑÎ¨∏Ìïô1 Ï†úÎ™©
      overrides["BRAINDEEP.worldlit.world1"] = [
        "üìö ÎëêÎ†§ÏõÄÏùÑ ÎÑòÏñ¥ÏÑ† ÏÉàÎ°úÏö¥ ÏãúÏûë",
        "üèùÔ∏è ÏÑ¨Ïùò ÎπÑÎ∞ÄÍ≥º ÏÜåÎÖÑÎì§Ïùò Í≤∞Ïã¨",
        "üå∏ ÍΩÉÏùò ÏöîÏ†ïÏù¥ Ïù¥Î£¨ ÏÜåÏõê",
        "üé≠ ÌÉÄÎØ∏ÎÖ∏ÏôÄ ÌååÌååÍ≤åÎÖ∏ÏóêÍ≤å ÎÇ¥Î†§ÏßÑ Ï≤´ Î≤àÏß∏ ÏãúÌóò",
        "ü¶ä Ïñ¥Î¶∞ ÏôïÏûêÏôÄ Ïó¨Ïö∞Ïùò ÌäπÎ≥ÑÌïú ÎßåÎÇ®",
        "üè¥‚Äç‚ò†Ô∏è Î≥¥Î¨º ÏßÄÎèÑÎ•º ÏÜêÏóê ÎÑ£ÏùÄ ÏÜåÎÖÑ",
        "ü™µ ÎÇòÎ¨¥ Ïù∏ÌòïÏù¥ ÏÇ¨ÎûåÏù¥ ÎêòÍ∏∞ÍπåÏßÄ",
        "üå™Ô∏è ÌöåÏò§Î¶¨Î∞îÎûåÏùÑ ÌÉÄÍ≥† ÎßàÎ≤ïÏùò ÎÇòÎùºÎ°ú",
        "üê∞ ÌÜ†ÎÅº Íµ¥ ÏÜçÏúºÎ°ú Îñ®Ïñ¥ÏßÑ ÏÜåÎÖÄ",
        "üê∫ ÎäëÎåÄÏóêÍ≤å ÌÇ§ÏõåÏßÑ ÏïÑÏù¥",
        "üßö ÏòÅÏõêÌûà Ïñ¥Î•∏Ïù¥ ÎêòÏßÄ ÏïäÎäî ÏÜåÎÖÑ",
        "üèùÔ∏è Î¨¥Ïù∏ÎèÑÏóêÏÑú ÏÇ¥ÏïÑÎÇ®ÏùÄ ÏÇ¨ÎÇòÏù¥",
        "üîç Í±∞Ïù∏Ïù¥ ÎêòÏóàÎã§Í∞Ä ÎÇúÏüÅÏù¥Í∞Ä Îêú ÏÇ¨ÎÇòÏù¥",
        "üß¢ ÎØ∏ÏãúÏãúÌîºÍ∞ïÍ∞ÄÏùò ÎßêÏçΩÍæ∏Îü¨Í∏∞",
        "üçé ÏùºÍ≥± ÎÇúÏüÅÏù¥ÏôÄ ÎèÖÏÇ¨Í≥º",
        "üë† Ïú†Î¶¨Íµ¨ÎëêÏùò Ï£ºÏù∏ÏùÑ Ï∞æÏïÑÏÑú",
        "üßú‚Äç‚ôÄÔ∏è Î∞îÎã§ Î∞ëÏóêÏÑú Ïò® Í≥µÏ£º",
        "üåπ Î∞± ÎÖÑ ÎèôÏïà Ïû†Îì† Í≥µÏ£º",
        "üê∫ Ïà≤ÏÜçÏùò Î¨¥ÏÑúÏö¥ ÎäëÎåÄ",
        "üç¨ Í≥ºÏûêÎ°ú ÎßåÎì† Ïßë",
        "üíá ÎÜíÏùÄ ÌÉëÏóê Í∞áÌûå ÏÜåÎÖÄ",
        "üå± ÌïòÎäòÍπåÏßÄ ÏûêÎûÄ ÏΩ©ÎÇòÎ¨¥",
        "üê∑ ÏÑ∏ ÎßàÎ¶¨ ÏïÑÍ∏∞ ÎèºÏßÄ",
        "ü¶¢ ÏïÑÎ¶ÑÎã§Ïö¥ Î∞±Ï°∞Í∞Ä Îêú Ïò§Î¶¨",
        "üî• Ï∂îÏö¥ Î∞§Ïùò ÏûëÏùÄ Î∂àÍΩÉ",
        "üéµ ÎèôÎ¨ºÎì§Ïùò ÏùåÏïÖ Ïó¨Ìñâ",
        "üê∏ Ìô©Í∏à Í≥µÍ≥º Í∞úÍµ¨Î¶¨",
        "üé∂ Ï•êÎ•º Ï´ìÏïÑÎÇ∏ ÌîºÎ¶¨",
        "ü•æ ÏòÅÎ¶¨Ìïú Í≥†ÏñëÏù¥Ïùò Í≥ÑÎûµ",
        "üë∏ ÍΩÉÏóêÏÑú ÌÉúÏñ¥ÎÇú ÏûëÏùÄ ÏÜåÎÖÄ",
        "üêê ÏóÑÎßà ÏóºÏÜåÏôÄ ÏïÑÍ∏∞ ÏóºÏÜåÎì§",
        "üéÑ ÌÅ¨Î¶¨Ïä§ÎßàÏä§Ïùò ÎßàÎ≤ï Ïù∏Ìòï",
        "üë† Î©àÏ∂ú Ïàò ÏóÜÎäî Ï∂§",
        "‚öîÔ∏è Ï†ïÏßÅÌïú ÎÇòÎ¨¥Íæº",
        "üíé Ïä¨ÌîîÏùÑ ÏïÑÎäî Ìô©Í∏à ÎèôÏÉÅ",
        "ü¶¢ ÎßàÎ≤ïÏóê Í±∏Î¶∞ Ïò§Îπ†Îì§",
        "‚ùÑÔ∏è ÏñºÏùå Í∂ÅÏ†ÑÏúºÎ°ú Í∞Ñ ÏÜåÎÖÑ",
        "‚≠ê ÏûëÏùÄ Î≥ÑÏóêÏÑú Ïò® ÏÜåÎÖÑ",
        "üêë Í±∞ÏßìÎßêÏùò ÎåÄÍ∞Ä",
        "üê¢ ÎäêÎ¶ºÎ≥¥Ïùò ÏäπÎ¶¨"
      ];

      // ‚úÖ BRAINDEEP Îî•ÏÑ∏Í≥ÑÎ¨∏Ìïô2 Ï†úÎ™©
      overrides["BRAINDEEP.worldlit.world2"] = [
        "üèπ ÌÖîÏùò Ïö©Í∏∞ÏôÄ ÎëêÎ†§ÏõÄ",
        "üí™ ÏÜåÎÖÑÎì§Ïùò Ïö©Í∏∞ÏôÄ ÏºÄÏù¥Ìä∏Ïùò ÎààÎ¨º",
        "üèπ Î°úÎπà ÌõÑÎìúÏùò ÏùÄÎ∞ÄÌïú Ïû¨Ìåê",
        "üíÉ ÎßêÍ¥ÑÎüâÏù¥ Ïπ¥ÌÉÄÎ¶¨ÎÇòÎ•º ÎëòÎü¨Ïãº Ïò§Ìï¥ÏôÄ ÏßÑÏã§",
        "üç≤ Ïò¨Î¶¨Î≤ÑÏùò Ïö©Í∏∞ ÏûàÎäî ÌïúÎßàÎîî",
        "üö£ ÏûêÏú†Î•º Ï∞æÏïÑ Îñ†ÎÇú ÏÜåÎÖÑ",
        "üå∏ Ïû†Îì† Ï†ïÏõêÏù¥ Íπ®Ïñ¥ÎÇòÎã§",
        "üåç ÏãúÍ∞ÑÏùÑ Îã§Ìà¨Îäî ÎåÄÎ™®Ìóò",
        "üêö Ïã†ÎπÑÎ°úÏö¥ Î∞îÎã∑ÏÜç ÏÑ∏Í≥Ñ",
        "üëë Î∞îÎÄê Ïö¥Î™Ö, Î∞îÎÄê ÏÑ∏ÏÉÅ",
        "üé£ ÎØ∏ÏãúÏãúÌîº Í∞ïÏùò Ïû•ÎÇúÍæ∏Îü¨Í∏∞",
        "üê∫ Ï†ïÍ∏ÄÏùò ÏïÑÏù¥ Î™®Í∏ÄÎ¶¨",
        "‚ú® ÏòÅÏõêÌûà ÏûêÎùºÏßÄ ÏïäÎäî ÏÜåÎÖÑ",
        "üè¥‚Äç‚ò†Ô∏è Î≥¥Î¨ºÏùÑ Ï∞æÏïÑ Îñ†ÎÇú Î™®Ìóò",
        "üåà Î¨¥ÏßÄÍ∞ú ÎÑàÎ®∏ ÎßàÎ≤ïÏùò ÎÇòÎùº",
        "üé≠ Îëê ÏñºÍµ¥ÏùÑ Í∞ÄÏßÑ ÏùòÏÇ¨",
        "üëß ÎÑ§ ÏûêÎß§Ïùò ÏÑ±Ïû• Ïù¥ÏïºÍ∏∞",
        "üå™Ô∏è Ìô©ÏïºÏùò ÎπÑÍ∑πÏ†Å ÏÇ¨Îûë",
        "üìñ ÏûêÏ°¥Ïã¨ÏùÑ ÏßÄÌÇ® Ïó¨Ïù∏",
        "‚öîÔ∏è Î≥µÏàòÏùò Î∞±Ïûë",
        "üèùÔ∏è Î¨¥Ïù∏ÎèÑÏóêÏÑú ÏÇ¥ÏïÑÎÇ®Í∏∞",
        "üß≠ Í±∞Ïù∏Í≥º ÏÜåÏù∏Ïùò ÎÇòÎùº",
        "üõ°Ô∏è Ïù¥ÏÉÅÍ≥º ÌòÑÏã§ ÏÇ¨Ïù¥Ïùò Í∏∞ÏÇ¨",
        "üî¥ Í∞ÄÏä¥Ïóê ÏÉàÍ∏¥ Ï£ÑÏùò Í∏ÄÏûê",
        "üíï Ï≤´Ïù∏ÏÉÅÏùÑ ÎÑòÏñ¥ÏÑú",
        "üòà ÏïÖÎßàÏôÄÏùò Í±∞Îûò",
        "üïØÔ∏è ÏùÄÏ¥õÎåÄÏùò Í∏∞Ï†Å",
        "üöÇ Ïö¥Î™ÖÏùò Í∏∞Ï∞®",
        "‚öñÔ∏è ÏñëÏã¨Ïùò Î¨¥Í≤å",
        "ü™≤ Ïñ¥Îäê ÎÇ† ÏïÑÏπ® Î≤åÎ†àÍ∞Ä ÎêòÎã§",
        "üê∞ ÌÜ†ÎÅºÍµ¥ ÏÜçÏúºÎ°ú",
        "üêã ÌïòÏñÄ Í≥†ÎûòÎ•º Ï´ìÏïÑÏÑú",
        "üåä ÎßàÎ≤ïÏÇ¨Ïùò ÏÑ¨",
        "üåæ Ïñ¥Î•∏Ïù¥ ÎêòÍ∏∞ Ïã´Ïñ¥",
        "üé£ Ìè¨Í∏∞ÌïòÏßÄ ÏïäÎäî ÎÖ∏Ïù∏",
        "üê∑ ÎèôÎ¨ºÎì§Ïùò ÌòÅÎ™Ö",
        "üíö Ï¥àÎ°ùÎπõ Î∂àÎπõÏùÑ Ìñ•Ìï¥",
        "‚öñÔ∏è Ï†ïÏùòÎ•º ÏúÑÌïú Î≥ÄÌò∏",
        "üëÅÔ∏è ÎπÖ Î∏åÎùºÎçîÍ∞Ä Î≥¥Í≥† ÏûàÎã§",
        "üêö ÏÜåÎÖÑÎì§Ïùò ÏÑ¨"
      ];

      // ‚úÖ BRAINDEEP Îî•ÌïúÍµ≠Ïù∏Î¨º Ï†úÎ™©
      overrides["BRAINDEEP.person.people1"] = [
        "‚öîÔ∏è Îã§ÏßêÏúºÎ°ú Îã§Ïãú ÌÉúÏñ¥ÎÇú ÍπÄÏú†Ïã†",
        "üëë ÏïÑÎ≤ÑÏßÄÏùò ÎúªÏùÑ ÏûáÎäî Ïôï, Î¨∏Î¨¥Ïôï",
        "üíÄ Ìï¥Í≥® Î¨ºÏóêÏÑú ÏñªÏùÄ Íπ®Îã¨Ïùå",
        "üåè Ïö∞Î¨º Ïïà Í∞úÍµ¨Î¶¨Î•º Î≤óÏñ¥ÎÇú ÌòúÏ¥àÏùò Î™®Ìóò",
        "‚öôÔ∏è ÎÖ∏ÎπÑ Ï∂úÏã† Ï≤úÏû¨ Í≥ºÌïôÏûê Ïû•ÏòÅÏã§",
        "‚öì Î∞îÎã§Î•º ÏßÄÌÇ® ÏòÅÏõÖ Ïù¥ÏàúÏã†",
        "üìö Î∞±ÏÑ±ÏùÑ ÏÇ¨ÎûëÌïú ÏûÑÍ∏à ÏÑ∏Ï¢ÖÎåÄÏôï",
        "üíä Î∞±ÏÑ±Ïùò Î≥ëÏùÑ Í≥†Ïπú ÏùòÏõê ÌóàÏ§Ä",
        "üé® Í∑∏Î¶ºÍ≥º ÌïôÎ¨∏ÏúºÎ°ú ÎπõÎÇú Ïã†ÏÇ¨ÏûÑÎãπ",
        "üìñ Ï°∞ÏÑ† ÏÑ±Î¶¨ÌïôÏùò Í±∞Ïû• Ïù¥Ìô©",
        "üí° Ïã§Ï≤úÌïòÎäî ÌïôÏûê Ïú®Í≥° Ïù¥Ïù¥",
        "üî¨ Î∞±ÏÑ±ÏùÑ ÏúÑÌïú Ïã§ÌïôÏûê Ï†ïÏïΩÏö©",
        "üèπ ÏòÅÌÜ†Î•º ÎÑìÌûå Í¥ëÍ∞úÌÜ†ÎåÄÏôï",
        "‚öîÔ∏è ÏÇ¥ÏàòÎåÄÏ≤©Ïùò ÏòÅÏõÖ ÏùÑÏßÄÎ¨∏Îçï",
        "üõ°Ô∏è Í∑ÄÏ£ºÎåÄÏ≤©Ïùò Î™ÖÏû• Í∞ïÍ∞êÏ∞¨",
        "üí£ ÌôîÏïΩÏùÑ ÎßåÎì† ÏµúÎ¨¥ÏÑ†",
        "üå∏ Ï∂©Ï†àÏùò ÏÑ†ÎπÑ Ï†ïÎ™ΩÏ£º",
        "‚öñÔ∏è Ï≤≠Î†¥Ìïú Ïû¨ÏÉÅ Ìô©Ìù¨",
        "ü¶Å Ïö∞ÏÇ∞Íµ≠ÏùÑ Ï†ïÎ≥µÌïú Ïû•Íµ∞ Ïù¥ÏÇ¨Î∂Ä",
        "üó∫Ô∏è ÎåÄÎèôÏó¨ÏßÄÎèÑÎ•º ÎßåÎì† ÍπÄÏ†ïÌò∏",
        "üî´ ÎèÖÎ¶ΩÏùÑ ÏúÑÌï¥ Ïã∏Ïö¥ ÏïàÏ§ëÍ∑º",
        "üá∞üá∑ ÎßåÏÑ∏Î•º Ïô∏Ïπú Ïú†Í¥ÄÏàú",
        "üí™ Ï°∞Íµ≠ÏùÑ ÏúÑÌï¥ Î™©Ïà® Î∞îÏπú Ïú§Î¥âÍ∏∏",
        "üïäÔ∏è ÎèÖÎ¶ΩÏö¥ÎèôÏùò ÏßÄÎèÑÏûê ÍπÄÍµ¨",
        "‚úçÔ∏è Î™ÖÌïÑÏùò ÎåÄÍ∞Ä ÌïúÏÑùÎ¥â",
        "üñåÔ∏è ÏÑúÎØºÏùò ÏÇ∂ÏùÑ Í∑∏Î¶∞ ÍπÄÌôçÎèÑ",
        "üëò ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ Í∑∏Î¶∞ Ïã†Ïú§Î≥µ",
        "üìù Ïó¥ÌïòÏùºÍ∏∞Î•º Ïì¥ Î∞ïÏßÄÏõê",
        "‚úùÔ∏è Ï≤´ ÌïúÍµ≠Ïù∏ Ïã†Î∂Ä ÍπÄÎåÄÍ±¥",
        "üî§ ÌïúÍ∏Ä Ïó∞Íµ¨Ïùò ÏïÑÎ≤ÑÏßÄ Ï£ºÏãúÍ≤Ω",
        "üë∂ Ïñ¥Î¶∞Ïù¥ÎÇ†ÏùÑ ÎßåÎì† Î∞©Ï†ïÌôò",
        "üö¢ Ìï¥ÏÉÅÏôï Ïû•Î≥¥Í≥†",
        "üëë Ïã†ÎùºÏùò Ï≤´ Ïó¨Ïôï ÏÑ†ÎçïÏó¨Ïôï",
        "üè∞ Í≥†Íµ¨Î†§Ïùò Î™ÖÏû• Ïó∞Í∞úÏÜåÎ¨∏",
        "‚öîÔ∏è Ìô©ÏÇ∞Î≤åÏùò ÏòÅÏõÖ Í≥ÑÎ∞±",
        "üó°Ô∏è Í≥†Î†§Ïùò Ï∂©Ïã† ÏµúÏòÅ",
        "üèØ ÌñâÏ£ºÎåÄÏ≤©Ïùò Î™ÖÏû• Í∂åÏú®",
        "üî• ÏùòÎ≥ëÏû• Í≥ΩÏû¨Ïö∞",
        "üå± Î™©ÌôîÏî®Î•º Í∞ÄÏ†∏Ïò® Î¨∏ÏùµÏ†ê",
        "üìú Ï°∞ÏÑ† ÏµúÍ≥†Ïùò Ïó¨Î•ò ÏãúÏù∏ ÌóàÎÇúÏÑ§Ìóå"
      ];

      // ‚úÖ BRAINDEEP Îî•ÏÑ∏Í≥ÑÏù∏Î¨º Ï†úÎ™©
      overrides["BRAINDEEP.person.people2"] = [
        "üé® Í¥ÄÏ∞∞Î°ú ÏÑ∏ÏÉÅÏùÑ Í∑∏Î¶∞ ÏÜåÎÖÑ, Î†àÏò§ÎÇòÎ•¥ÎèÑ",
        "üé® Ï≤úÏû•ÏùÑ Í∑∏Î¶∞ ÎÇ®Ïûê, ÎØ∏ÏºàÎûÄÏ†§Î°ú",
        "üé≠ Í∑πÏû•ÏúºÎ°ú Îì§Ïñ¥Í∞Ñ Ìïú ÎÇ®ÏûêÏùò Ïù¥ÏïºÍ∏∞",
        "üéµ ÎÜÄÎùºÏö¥ Ïû¨Îä•ÏùÑ ÏßÄÎãå Ïñ¥Î¶∞ ÏùåÏïÖÍ∞Ä",
        "üî¨ ÏÉÅÏÉÅÎ†•ÏúºÎ°ú Ïö∞Ï£ºÎ•º ÌÉêÌóòÌïú Í≥ºÌïôÏûê, ÏïÑÏù∏ÏäàÌÉÄÏù∏",
        "‚öóÔ∏è Î∞©ÏÇ¨Îä•Ïùò ÎπÑÎ∞ÄÏùÑ Î∞ùÌûå Ïó¨ÏÑ± Í≥ºÌïôÏûê, ÎßàÎ¶¨ ÌÄ¥Î¶¨",
        "‚òÆÔ∏è ÎπÑÌè≠Î†•ÏúºÎ°ú ÏÑ∏ÏÉÅÏùÑ Î∞îÍæº ÏßÄÎèÑÏûê, Í∞ÑÎîî",
        "‚úàÔ∏è ÌïòÎäòÏùÑ ÎÇòÎäî ÍøàÏùÑ Ïù¥Î£¨ ÌòïÏ†ú, ÎùºÏù¥Ìä∏ ÌòïÏ†ú",
        "üí° Ïñ¥Îë† ÏÜçÏóêÏÑú ÎπõÏùÑ Ï∞æÏùÄ Ìó¨Î†å ÏºàÎü¨",
        "üé® Î∂ìÏúºÎ°ú Í∞êÏ†ïÏùÑ Í∑∏Î¶∞ ÌôîÍ∞Ä, Î∞ò Í≥†Ìùê",
        "üè• Î∞±ÏùòÏùò Ï≤úÏÇ¨, ÎÇòÏù¥ÌåÖÍ≤åÏùº",
        "‚úä 27ÎÖÑÏùò Í∞êÏò•, Ïö©ÏÑúÎ°ú ÎÇòÎùºÎ•º Î∞îÍæº ÎÑ¨Ïä® ÎßåÎç∏Îùº",
        "üíª Îã§Î•¥Í≤å ÏÉùÍ∞ÅÌïòÎùº, Ïä§Ìã∞Î∏å Ïû°Ïä§",
        "üôè Í∞ÄÎÇúÌïú Ïù¥Îì§Ïùò Ïñ¥Î®∏Îãà, ÎßàÎçî ÌÖåÎ†àÏÇ¨",
        "üé® ÏÑ∏ÏÉÅÏùÑ ÏÉàÎ°≠Í≤å Î≥∏ ÌôîÍ∞Ä, ÌîºÏπ¥ÏÜå",
        "üè∞ ÍøàÏùò ÏôïÍµ≠ÏùÑ ÏÑ∏Ïö¥ ÏõîÌä∏ ÎîîÏ¶àÎãà",
        "üî¨ ÏÑ∏Í∑†ÏùÑ Î∞úÍ≤¨Ìïú Í≥ºÌïôÏûê, Î£®Ïù¥ ÌååÏä§Ìá¥Î•¥",
        "üë©‚Äçüè´ Í∏∞Ï†ÅÏùÑ ÎßåÎì† ÏÑ†ÏÉùÎãò, Ïï§ ÏÑ§Î¶¨Î≤à",
        "üé¨ ÏõÉÏùåÏúºÎ°ú ÏÑ∏ÏÉÅÏùÑ ÏúÑÎ°úÌïú Ï∞∞Î¶¨ Ï±ÑÌîåÎ¶∞",
        "üêµ Ïπ®Ìå¨ÏßÄÏôÄ Ìï®Íªò ÏÇ¥Îã§, Ï†úÏù∏ Íµ¨Îã¨",
        "üéª ÏïÖÍ∏∞Ïùò Î™ÖÏû•, ÏïàÌÜ†ÎãàÏò§ Ïä§Ìä∏ÎùºÎîîÎ∞îÎ¶¨",
        "üéº Ïö¥Î™ÖÏùÑ Í∑πÎ≥µÌïú ÏùåÏïÖÍ∞Ä, Î≤†ÌÜ†Î≤§",
        "üé® Ï≤úÏû¨Ïùò ÎåÄÎ™ÖÏÇ¨, Î†àÏò§ÎÇòÎ•¥ÎèÑ Îã§ÎπàÏπò",
        "üíä ÌéòÎãàÏã§Î¶∞ÏùÑ Î∞úÍ≤¨Ìïú ÏïåÎ†âÏÇ∞Îçî ÌîåÎ†àÎ∞ç",
        "üé© ÎÖ∏ÏòàÎ•º Ìï¥Î∞©Ìïú ÎåÄÌÜµÎ†π, ÎßÅÏª®",
        "‚öîÔ∏è Ïú†ÎüΩÏùÑ Ï†ïÎ≥µÌïú Ìô©Ï†ú, ÎÇòÌè¥Î†àÏòπ",
        "‚úä ÎÇòÏóêÍ≤åÎäî ÍøàÏù¥ ÏûàÏäµÎãàÎã§, ÎßàÌã¥ Î£®ÌÑ∞ ÌÇπ",
        "üìñ ÎèàÌÇ§Ìò∏ÌÖåÎ•º Ïì¥ ÏÑ∏Î•¥Î∞òÌÖåÏä§",
        "üìö Ïù∏ÏùÑ Í∞ÄÎ•¥Ïπú Ïä§Ïäπ, Í≥µÏûê",
        "üó°Ô∏è ÏÑ∏Í≥ÑÎ•º Ï†ïÎ≥µÌïú Ï†äÏùÄ Ïôï, ÏïåÎ†âÏÇ∞Îçî ÎåÄÏôï",
        "üëë Ïù¥ÏßëÌä∏Ïùò ÎßàÏßÄÎßâ Ïó¨Ïôï, ÌÅ¥Î†àÏò§ÌååÌä∏Îùº",
        "üèπ ÏÑ∏Í≥Ñ ÏµúÎåÄ Ï†úÍµ≠ÏùÑ ÏÑ∏Ïö¥ ÏßïÍ∏∞Ïä§Ïπ∏",
        "ü¶é ÏßÑÌôîÎ°†ÏùÑ Î∞úÍ≤¨Ìïú Ï∞∞Ïä§ Îã§Ïúà",
        "üëó Ìå®ÏÖòÏùÑ Î∞îÍæº Ïó¨ÏÑ±, ÏΩîÏΩî ÏÉ§ÎÑ¨",
        "üíª Ïª¥Ìì®ÌÑ∞ ÌòÅÎ™ÖÏùÑ Ïù¥ÎÅà Îπå Í≤åÏù¥Ï∏†",
        "üèÄ ÎÜçÍµ¨Ïùò Ïã†, ÎßàÏù¥ÌÅ¥ Ï°∞Îçò",
        "‚öîÔ∏è Ï†ÑÏÑ§Ïùò Ïôï, ÏïÑÏÑúÏôï",
        "üè∫ Ìô©Í∏à ÎßàÏä§ÌÅ¨Ïùò Ï£ºÏù∏, Ìà¨ÌÉïÏπ¥Î©ò",
        "üî≠ ÏßÄÎèôÏÑ§Ïùò ÏïÑÎ≤ÑÏßÄ, Í∞àÎ¶¥Î†àÏò§ Í∞àÎ¶¥Î†àÏù¥",
        "‚ö° Ï†ÑÍ∏∞Ïùò ÎßàÎ≤ïÏÇ¨, ÎãàÏΩúÎùº ÌÖåÏä¨Îùº"
      ];

      overrides["BRAINUP.social.geo"] = [
        "üó∫Ô∏è ÏßÄÎèÑÎ•º ÌÜµÌï¥ ÏÑ∏ÏÉÅÏùÑ Ïù¥Ìï¥ÌïòÎã§",
        "üìç ÏßÄÎèÑÏóê Îã¥Í∏¥ ÏïΩÏÜçÍ≥º ÌëúÌòÑ",
        "üèòÔ∏è Ïö∞Î¶¨ Í≥†Ïû•Ïùò ÏÉÅÏßïÍ≥º Ïú†Îûò",
        "üèôÔ∏è Ïö∞Î¶¨ ÎèôÎÑ§Îäî Ïôú Î∂àÌé∏Ìï†Íπå? ÏßÄÏó≠ Î¨∏Ï†ú ÏÇ¥Ìé¥Î≥¥Í∏∞",
        "üåæ ÏãúÎåÄÏôÄ Ìï®Íªò Î∞úÏ†ÑÌïòÎäî ÏãúÍ≥® ÎßàÏùÑ",
        "üß≠ ÏßÄÍµ¨Ïóê Ï£ºÏÜåÍ∞Ä ÏûàÎã§Í≥†? ÏúÑÎèÑÏôÄ Í≤ΩÎèÑÏùò ÎπÑÎ∞Ä",
        "üåç ÏßÄÍµ¨Ïùò ÏñºÍµ¥, ÎåÄÎ•ôÍ≥º Î∞îÎã§ Ïù¥ÏïºÍ∏∞",
        "üá∞üá∑ Ïö∞Î¶¨ÎÇòÎùºÎäî Ïñ¥ÎîîÏóê ÏûàÏùÑÍπå? ÌïúÎ∞òÎèÑÏùò ÏúÑÏπò",
        "üèîÔ∏è Î∞±ÎëêÏÇ∞ÏóêÏÑú ÌïúÎùºÏÇ∞ÍπåÏßÄ, Íµ≠ÌÜ† Ïó¨Ìñâ",
        "‚òÄÔ∏è Ïôú Ï†úÏ£ºÎèÑÎäî ÏÑúÏö∏Î≥¥Îã§ Îî∞ÎúªÌï†Íπå?",
        "üèôÔ∏è ÎèÑÏãúÎäî Ïôú Ïª§ÏßàÍπå? ÎèÑÏãúÌôîÏùò ÎπõÍ≥º Í∑∏Î¶ºÏûê",
        "üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Ïù∏Íµ¨ Ïù¥Îèô, ÏÇ¨ÎûåÎì§ÏùÄ Ïôú ÏõÄÏßÅÏùºÍπå?",
        "üöÑ ÏÑ∏Í≥ÑÎäî ÌïòÎÇòÎ°ú, ÍµêÌÜµÍ≥º ÌÜµÏã†Ïùò Î∞úÎã¨",
        "üó∫Ô∏è ÏßÄÎèÑ ÏÜç Î≥¥Î¨ºÏ∞æÍ∏∞, ÏßÄÎ¶¨ Ï†ïÎ≥¥ Í∏∞Ïà†",
        "‚õΩ ÏûêÏõêÏùÄ Ïñ¥ÎîîÏóê? ÏóêÎÑàÏßÄÏôÄ ÏûêÏõêÏùò Î∂ÑÌè¨",
        "‚ö° ÏÑùÏú†Í∞Ä ÏÇ¨ÎùºÏßÑÎã§Î©¥? ÏóêÎÑàÏßÄÏùò ÎØ∏Îûò",
        "üêü Î∞îÎã§Îäî Î¨¥ÌïúÌïú Î≥¥Î¨ºÏ∞ΩÍ≥†ÏùºÍπå?",
        "üåã ÎïÖÏù¥ ÌùîÎì§Î¶¨Í≥† ÌïòÎäòÏù¥ Î¨¥ÎÑàÏßà Îïå",
        "üåê Ï†Ñ ÏÑ∏Í≥ÑÍ∞Ä Ïù¥ÏõÉÏù¥ Îêú ÏãúÎåÄ, ÏÑ∏Í≥ÑÌôî",
        "üåè 100ÎÖÑ ÌõÑÏóêÎèÑ ÏÇ¥ Ïàò ÏûàÏùÑÍπå? ÏßÄÍµ¨Ïùò ÎØ∏Îûò"
      ];

      // BRAINFIT ÌïèÎ≤ï Ï†úÎ™© (ÏÉà Ï†úÎ™©)
      overrides["BRAINFIT.social.law"] = [
        "üåü ÌÉúÏñ¥ÎÇòÎ©¥ÏÑú Î∞õÎäî ÏÑ†Î¨º, Ïù∏Í∂åÏù¥ÎûÄ?",
        "üöÄ 'Î™®Îëê ÌèâÎì±ÌïòÎã§'Í∞Ä ÎãπÏó∞Ìï¥ÏßÄÍ∏∞ÍπåÏßÄ",
        "ü¶∏ Ïù∏Í∂å ÏßÄÌÇ¥Ïù¥Îì§Ïùò ÏúÑÎåÄÌïú ÎèÑÏ†Ñ",
        "üîí Î≥¥Ïù¥ÏßÄ ÏïäÎäî Ìè≠Î†•, Ïñ¥ÎñªÍ≤å ÎßâÏùÑÍπå?",
        "üèØ Ï°∞ÏÑ†ÏãúÎåÄÏóêÎèÑ ÏñµÏö∏Ìï®ÏùÑ ÌíÄ Ïàò ÏûàÏóàÎã§Í≥†?",
        "üëë ÎåÄÌÜµÎ†πÎèÑ ÏßÄÏºúÏïº ÌïòÎäî Î≤ï, ÌóåÎ≤ï",
        "üìù ÎÇ¥ ÏïÑÏù¥ÎîîÏñ¥Í∞Ä Î≤ïÏù¥ ÎêúÎã§Î©¥?",
        "üî® ÌåêÏÇ¨Ïùò ÎßùÏπòÍ∞Ä ÎÇ¥Î†§Ïò§Í∏∞ÍπåÏßÄ",
        "‚õìÔ∏è ÎÇòÏÅú ÏßìÏùÑ ÌïòÎ©¥ Ïôú Î≤åÏùÑ Î∞õÏùÑÍπå?",
        "üéí ÎØ∏ÏÑ±ÎÖÑÏûêÎùºÏÑú Í¥úÏ∞ÆÎã§? Ï∞©Í∞ÅÏù¥Ïïº!",
        "üõí ÌôòÎ∂àÎ∞õÍ≥† Ïã∂ÏùÑ Îïå, Ïñ¥ÎñªÍ≤å Ìï¥Ïïº Ìï†Íπå?",
        "üí∏ ÏπúÍµ¨Í∞Ä ÎÇ¥ Î¨ºÍ±¥ÏùÑ ÎßùÍ∞ÄÎú®Î†∏Îã§Î©¥?",
        "üíç Í≤∞ÌòºÌïòÎ©¥ Î≤ïÏ†ÅÏúºÎ°ú Î≠êÍ∞Ä Îã¨ÎùºÏßàÍπå?",
        "üí∞ ÏïåÎ∞îÎπÑ Î™ª Î∞õÏïòÏùÑ Îïå Ïù¥Î†áÍ≤å ÌïòÏÑ∏Ïöî!",
        "üåê Íµ≠Í≤ΩÏùÑ ÎÑòÎäî ÏïΩÏÜç, Íµ≠Ï†úÎ≤ï",
        "üå± ÏßÄÍµ¨Î•º ÏßÄÌÇ§Îäî Î≤ïÏùò Ìûò",
        "üé® ÎÇ¥ Ï∞ΩÏûëÎ¨º, ÎàÑÍ∞Ä ÌõîÏ≥êÍ∞ÄÎ©¥?",
        "üîê ÎÇ¥ Í∞úÏù∏Ï†ïÎ≥¥, Ïñ¥ÎîîÍπåÏßÄ ÏïåÍ≥† ÏûàÏùÑÍπå?",
        "‚öîÔ∏è Ïã∏ÏõÄÏù¥ ÏÉùÍ≤ºÏùÑ Îïå, Î≤ïÏõê ÎßêÍ≥† Îã§Î•∏ Î∞©Î≤ï",
        "üåà Î≤ïÏù¥ ÏóÜÎã§Î©¥ ÏÑ∏ÏÉÅÏùÄ Ïñ¥ÎñªÍ≤å Îê†Íπå?"
      ];

      // BRAINFIT ÌïèÏßÄÎ¶¨ Ï†úÎ™© (ÏÉà Ï†úÎ™©)
      overrides["BRAINFIT.social.geo"] = [
        "üó∫Ô∏è Ï¢ÖÏù¥ Ìïú Ïû•Ïóê Îã¥Í∏¥ ÏÑ∏ÏÉÅ, ÏßÄÎèÑÏùò ÎπÑÎ∞Ä",
        "üó∫Ô∏è Îì±Í≥†ÏÑ†Ïùò ÎπÑÎ∞Ä, ÏßÄÎèÑÎäî Ïñ¥ÎñªÍ≤å ÏùΩÏùÑÍπå?",
        "üèõÔ∏è ÎïÖÏóê ÏÉàÍ≤®ÏßÑ Ïù¥ÏïºÍ∏∞, Ïö∞Î¶¨ Í≥†Ïû• ÌÉêÌóò",
        "üöå Î≤ÑÏä§Í∞Ä Ïïà ÏôÄÏöî! Ïö∞Î¶¨ ÎèôÎÑ§ Î¨∏Ï†ú Ìï¥Í≤∞ÌïòÍ∏∞",
        "üöú ÎìúÎ°†Ïù¥ ÎÜçÏÇ¨ÏßìÎäî ÏãúÎåÄ, Ï¥åÎùΩÏùò Î≥ÄÏã†",
        "üåç ÏßÄÍµ¨ÏóêÎèÑ Ï£ºÏÜåÍ∞Ä ÏûàÎã§Í≥†? ÏúÑÎèÑÏôÄ Í≤ΩÎèÑÏùò ÎπÑÎ∞Ä",
        "üåä 70% Î∞îÎã§, 30% ÎïÖ! ÏßÄÍµ¨Ïùò ÏñºÍµ¥ ÌÉêÌóò",
        "üá∞üá∑ Î∞òÎèÑÏùò ÎÇòÎùº, ÎåÄÎ•ôÍ≥º Î∞îÎã§Î•º ÏûáÎã§",
        "üèîÔ∏è ÎèôÏ™ΩÏùÄ ÎÜíÍ≥† ÏÑúÏ™ΩÏùÄ ÎÇÆÎã§! Íµ≠ÌÜ†Ïùò ÎπÑÎ∞Ä",
        "‚òÄÔ∏è Í∞ôÏùÄ ÎÇ†, Îã§Î•∏ ÎÇ†Ïî®? Í∏∞ÌõÑÏùò ÎπÑÎ∞ÄÏùÑ ÌíÄÎã§",
        "üèôÔ∏è ÏÇ¨ÎûåÎì§ÏùÄ Ïôú ÎèÑÏãúÎ°ú Î™®ÏùºÍπå?",
        "üöö Í≥†Ìñ•ÏùÑ Îñ†ÎÇòÎäî ÏÇ¨ÎûåÎì§, Ïù∏Íµ¨ Ïù¥ÎèôÏùò ÎπÑÎ∞Ä",
        "üöÄ KTXÎ°ú 2ÏãúÍ∞Ñ, ÏÑ∏ÏÉÅÏù¥ Í∞ÄÍπåÏõåÏßÄÎã§",
        "üì± Ïä§ÎßàÌä∏Ìè∞Ïù¥ Í∏∏ÏùÑ Ï∞æÎäî Î≤ï, GPSÏùò ÎπÑÎ∞Ä",
        "‚õΩ ÏÑùÏú† Ìïú Î∞©Ïö∏, Ïñ¥ÎîîÏÑú ÏôîÏùÑÍπå?",
        "‚ö° 50ÎÖÑ ÌõÑ ÏÑùÏú†Í∞Ä ÏóÜÎã§Î©¥? ÏóêÎÑàÏßÄÏùò ÎØ∏Îûò",
        "üêü Î¨ºÍ≥†Í∏∞Í∞Ä ÏÇ¨ÎùºÏßÄÍ≥† ÏûàÎã§? Î∞îÎã§Ïùò SOS",
        "üåã Î∂àÏùò Í≥†Î¶¨ ÏúÑÏùò ÏßÄÍµ¨, ÏßÄÏßÑÍ≥º ÌôîÏÇ∞",
        "üåê Î≤†Ìä∏ÎÇ® ÏåÄÍµ≠Ïàò, ÏùºÎ≥∏ Ïï†Îãà! ÏßÄÍµ¨Ï¥å ÏãúÎåÄ",
        "üåè ÎπôÌïòÍ∞Ä ÎÖπÍ≥† ÏûàÎã§! ÏßÄÍµ¨Î•º Íµ¨ÌïòÎùº"
      ];

      // BRAINFIT Ï†ïÏπòÍ≤ΩÏ†ú Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINFIT.social.pol"] = [
        "üé≠ Ï†ïÏπòÍ∞Ä ÏÇ¨ÎùºÏßÑ ÌïôÍ∏âÏóêÏÑú Î≤åÏñ¥ÏßÄÎäî ÌïòÎ£®",
        "üèõÔ∏è Î™®ÎëêÍ∞Ä ÏßÅÏ†ë Ìà¨ÌëúÌïúÎã§Î©¥? Í≥†ÎåÄ ÏïÑÌÖåÎÑ§Ïùò ÎØºÏ£ºÏ£ºÏùò Ïã§Ìóò",
        "üì∞ 1987ÎÖÑ 6Ïõî, Í±∞Î¶¨Î°ú ÎÇòÏÑ† ÏÇ¨ÎûåÎì§Ïùò Ïù¥ÏïºÍ∏∞",
        "üé≤ 51% vs 49%, Ïù¥ Í≤∞Ï†ïÏù¥ Ï†ïÎßê Ïò≥ÏùÑÍπå?",
        "üó≥Ô∏è Îã® Ìïú Ìëú Ï∞®Ïù¥Î°ú Îí§Î∞îÎÄê Ïó≠ÏÇ¨Ï†Å ÏÑ†Í±∞Îì§",
        "üëë ÏôïÏóêÍ≤å Î™®Îì† Í∂åÎ†•Ïù¥ ÏßëÏ§ëÎêêÎçò ÏãúÎåÄÏùò ÎπÑÍ∑π",
        "üèòÔ∏è ÎÇ¥Í∞Ä ÏÇ¥Í≥† Ïã∂ÏùÄ ÎèôÎÑ§, Ï£ºÎØºÎì§Ïù¥ ÏßÅÏ†ë Î∞îÍæº ÏÑ±Í≥µ ÏÇ¨Î°Ä",
        "üì± ÎÇ¥ SNS Í≤åÏãúÎ¨º, ÌëúÌòÑÏùò ÏûêÏú†ÏùºÍπå Î™ÖÏòàÌõºÏÜêÏùºÍπå?",
        "üåê Ï†ÑÏóºÎ≥ëÏù¥ Íµ≠Í≤ΩÏùÑ ÎÑòÏùÑ Îïå, ÏÑ∏Í≥ÑÍ∞Ä ÌòëÎ†•ÌïòÎäî Î∞©Î≤ï",
        "üöÇ ÏÑúÏö∏ÏóêÏÑú ÌèâÏñëÍπåÏßÄ Í∏∞Ï∞®Î°ú 3ÏãúÍ∞Ñ, ÌÜµÏùº ÌõÑ Îã¨ÎùºÏßÄÎäî Í≤ÉÎì§",
        "‚è∞ Îßå ÏõêÏùò ÌñâÎ≥µ: Í≤åÏûÑ vs ÎßõÏßë, ÎÇòÏùò Í∏∞ÌöåÎπÑÏö©ÏùÄ?",
        "üç¶ Ïó¨Î¶ÑÏóê ÏïÑÏù¥Ïä§ÌÅ¨Î¶º Í∞íÏù¥ Ïò§Î•¥Îäî ÏßÑÏßú Ïù¥Ïú†",
        "üéÆ ÌïúÏ†ïÌåêÏùÄ Ïôú ÎπÑÏåÄÍπå? Í∞ÄÍ≤©Ïùò ÎπÑÎ∞Ä ÌååÌó§ÏπòÍ∏∞",
        "üí∞ Î≥µÎ¶¨Ïùò ÎßàÎ≤ï: Ïö©Îèà 1Îßå ÏõêÏù¥ 100Îßå Ïõê ÎêòÎäî ÎπÑÍ≤∞",
        "üõí \"ÏßÄÍ∏à Ïïà ÏÇ¨Î©¥ ÌíàÏ†à!\" Í¥ëÍ≥† ÏÜç Ïà®Í≤®ÏßÑ Ïã¨Î¶¨ Ìä∏Î¶≠",
        "ü¶∏ ÎèàÎèÑ Î≤åÍ≥† ÏÑ∏ÏÉÅÎèÑ Î∞îÍæ∏Îäî Ï∞©Ìïú Í∏∞ÏóÖÏùò ÎπÑÎ∞Ä",
        "üìâ Î∂àÌô©Ïù¥ Ïò§Î©¥ Îú®Îäî ÏùòÏô∏Ïùò Ïù∏Í∏∞ ÏÉÅÌíàÎì§",
        "üíµ ÏÑ∏Í∏àÏù¥ ÏÇ¨ÎùºÏßÑÎã§Î©¥? ÌïòÎ£® ÎèôÏïà ÏÉùÍ∏∞Îäî ÏùºÎì§",
        "üç´ Ï¥àÏΩúÎ¶ø Ìïú Ï°∞Í∞Å ÏÜçÏóê Îã¥Í∏¥ ÏÑ∏Í≥Ñ Ïó¨Ìñâ Ïù¥ÏïºÍ∏∞",
        "üåç 2050ÎÖÑ ÏßÄÍµ¨Ïùò ÌïòÎ£®: Ïö∞Î¶¨Í∞Ä Î∞îÍøÄ Ïàò ÏûàÎäî ÎØ∏Îûò"
      ];

      // ÌïèÏÇ¨ÌöåÎ¨∏Ìôî Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINFIT.social.soc"] = [
        "üè† ÌîºÎ≥¥Îã§ ÏßÑÌïú ÏÇ¨Îûë, Í∞ÄÏ°±Ïù¥ÎûÄ Î¨¥ÏóáÏùºÍπå?",
        "üë®‚Äçüë©‚Äçüëß Ìï†Î®∏Îãà ÏãúÎåÄ vs Ïö∞Î¶¨ ÏãúÎåÄ, Í∞ÄÏ°±Ïùò Î≥ÄÏã†",
        "üíï Ïö∞Î¶¨ Ïßë ÌôîÎ™© ÎπÑÍ≤∞, Î∞∞Î†§Ïùò ÎßàÎ≤ï",
        "üöÄ ÎßêÏù¥ ÎÅåÎçò ÏãúÎåÄÏóêÏÑú ÎπÑÌñâÍ∏∞ ÏãúÎåÄÍπåÏßÄ",
        "üôã ÎÇ¥ Î™©ÏÜåÎ¶¨Í∞Ä ÎèôÎÑ§Î•º Î∞îÍæºÎã§!",
        "üé≠ Í∞ÄÎ©¥ Îí§Ïùò ÏßÑÏßú ÎÇòÎäî ÎàÑÍµ¨ÏùºÍπå?",
        "üì± Ï¢ãÏïÑÏöî 1000Í∞úÎ≥¥Îã§ ÏßÑÏßú ÏπúÍµ¨ Ìïú Î™Ö",
        "ü§ñ Î°úÎ¥áÏù¥ Ìï† Ïàò ÏóÜÎäî Í≤É, Ïù∏Í∞ÑÎßåÏùò ÌäπÎ≥ÑÌï®",
        "üë• ÎÅºÎ¶¨ÎÅºÎ¶¨? ÎÇòÎßåÏùò ÏÉâÍπîÏùÑ Ï∞æÏïÑÏÑú",
        "üçú ÎùºÎ©¥ÎèÑ Î¨∏ÌôîÎã§! ÏùºÏÉÅ ÏÜç Ïà®ÏùÄ Î¨∏Ìôî Ï∞æÍ∏∞",
        "üé¨ K-ÏΩòÌÖêÏ∏†, Ï†Ñ ÏÑ∏Í≥ÑÎ•º ÏÇ¨Î°úÏû°Îã§",
        "üì∞ ÏßÑÏßúÏôÄ Í∞ÄÏßúÎ•º Íµ¨Î≥ÑÌïòÎäî ÌÉêÏ†ï ÎêòÍ∏∞",
        "üó≥Ô∏è ÎÇòÎèÑ Ìïú Ìëú! ÎØºÏ£ºÏ£ºÏùòÏùò Ï£ºÏù∏Í≥µ",
        "‚öñÔ∏è Í≥µÏ†ïÌïú ÏÑ∏ÏÉÅÏùÑ ÎßåÎìúÎäî Î∞©Î≤ï",
        "üåç ÏßÄÍµ¨Í∞Ä Î≥¥ÎÇ¥Îäî SOS, Í∏∞ÌõÑ ÏúÑÍ∏∞",
        "üåê ÏßÄÍµ¨Ï¥å Ìïú Í∞ÄÏ°±, ÏÑ∏Í≥Ñ ÏãúÎØº ÎêòÍ∏∞",
        "üî¨ Í∏∞Ïà†Ïù¥ Î∞îÍæº Ïö∞Î¶¨Ïùò ÌïòÎ£®",
        "üè• Î™®ÎëêÍ∞Ä ÌñâÎ≥µÌïú ÏÇ¨ÌöåÏùò ÎπÑÎ∞Ä, Î≥µÏßÄ",
        "‚ôªÔ∏è Ïò§ÎäòÍ≥º ÎÇ¥ÏùºÏùÑ Ìï®Íªò ÏÉùÍ∞ÅÌïòÎäî ÏÇ∂",
        "üîÆ ÎÇ¥Í∞Ä ÎßåÎì§Ïñ¥Í∞à 10ÎÖÑ ÌõÑÏùò ÏÑ∏ÏÉÅ"
      ];

      // ÌïúÍµ≠Ïù∏Î¨º Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      const people1Titles = [
        "‚öîÔ∏è Îã§ÏßêÏúºÎ°ú Îã§Ïãú ÌÉúÏñ¥ÎÇú ÍπÄÏú†Ïã†",
        "üëë ÏïÑÎ≤ÑÏßÄÏùò ÎúªÏùÑ ÏûáÎäî Ïôï, Î¨∏Î¨¥Ïôï",
        "üíÄ Ìï¥Í≥® Î¨ºÏóêÏÑú ÏñªÏùÄ Íπ®Îã¨Ïùå",
        "üåè Ïö∞Î¨º Ïïà Í∞úÍµ¨Î¶¨Î•º Î≤óÏñ¥ÎÇú ÌòúÏ¥àÏùò Î™®Ìóò",
        "‚öôÔ∏è ÎÖ∏ÎπÑ Ï∂úÏã† Ï≤úÏû¨ Í≥ºÌïôÏûê Ïû•ÏòÅÏã§",
        "‚öì Î∞îÎã§Î•º ÏßÄÌÇ® ÏòÅÏõÖ Ïù¥ÏàúÏã†",
        "üìö Î∞±ÏÑ±ÏùÑ ÏÇ¨ÎûëÌïú ÏûÑÍ∏à ÏÑ∏Ï¢ÖÎåÄÏôï",
        "üíä Î∞±ÏÑ±Ïùò Î≥ëÏùÑ Í≥†Ïπú ÏùòÏõê ÌóàÏ§Ä",
        "üé® Í∑∏Î¶ºÍ≥º ÌïôÎ¨∏ÏúºÎ°ú ÎπõÎÇú Ïã†ÏÇ¨ÏûÑÎãπ",
        "üìñ Ï°∞ÏÑ† ÏÑ±Î¶¨ÌïôÏùò Í±∞Ïû• Ïù¥Ìô©",
        "üí° Ïã§Ï≤úÌïòÎäî ÌïôÏûê Ïú®Í≥° Ïù¥Ïù¥",
        "üî¨ Î∞±ÏÑ±ÏùÑ ÏúÑÌïú Ïã§ÌïôÏûê Ï†ïÏïΩÏö©",
        "üèπ ÏòÅÌÜ†Î•º ÎÑìÌûå Í¥ëÍ∞úÌÜ†ÎåÄÏôï",
        "‚öîÔ∏è ÏÇ¥ÏàòÎåÄÏ≤©Ïùò ÏòÅÏõÖ ÏùÑÏßÄÎ¨∏Îçï",
        "üõ°Ô∏è Í∑ÄÏ£ºÎåÄÏ≤©Ïùò Î™ÖÏû• Í∞ïÍ∞êÏ∞¨",
        "üí£ ÌôîÏïΩÏùÑ ÎßåÎì† ÏµúÎ¨¥ÏÑ†",
        "üå∏ Ï∂©Ï†àÏùò ÏÑ†ÎπÑ Ï†ïÎ™ΩÏ£º",
        "‚öñÔ∏è Ï≤≠Î†¥Ìïú Ïû¨ÏÉÅ Ìô©Ìù¨",
        "ü¶Å Ïö∞ÏÇ∞Íµ≠ÏùÑ Ï†ïÎ≥µÌïú Ïû•Íµ∞ Ïù¥ÏÇ¨Î∂Ä",
        "üó∫Ô∏è ÎåÄÎèôÏó¨ÏßÄÎèÑÎ•º ÎßåÎì† ÍπÄÏ†ïÌò∏",
        "üî´ ÎèÖÎ¶ΩÏùÑ ÏúÑÌï¥ Ïã∏Ïö¥ ÏïàÏ§ëÍ∑º",
        "üá∞üá∑ ÎßåÏÑ∏Î•º Ïô∏Ïπú Ïú†Í¥ÄÏàú",
        "üí™ Ï°∞Íµ≠ÏùÑ ÏúÑÌï¥ Î™©Ïà® Î∞îÏπú Ïú§Î¥âÍ∏∏",
        "üïäÔ∏è ÎèÖÎ¶ΩÏö¥ÎèôÏùò ÏßÄÎèÑÏûê ÍπÄÍµ¨",
        "‚úçÔ∏è Î™ÖÌïÑÏùò ÎåÄÍ∞Ä ÌïúÏÑùÎ¥â",
        "üñåÔ∏è ÏÑúÎØºÏùò ÏÇ∂ÏùÑ Í∑∏Î¶∞ ÍπÄÌôçÎèÑ",
        "üëò ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ Í∑∏Î¶∞ Ïã†Ïú§Î≥µ",
        "üìù Ïó¥ÌïòÏùºÍ∏∞Î•º Ïì¥ Î∞ïÏßÄÏõê",
        "‚úùÔ∏è Ï≤´ ÌïúÍµ≠Ïù∏ Ïã†Î∂Ä ÍπÄÎåÄÍ±¥",
        "üî§ ÌïúÍ∏Ä Ïó∞Íµ¨Ïùò ÏïÑÎ≤ÑÏßÄ Ï£ºÏãúÍ≤Ω",
        "üë∂ Ïñ¥Î¶∞Ïù¥ÎÇ†ÏùÑ ÎßåÎì† Î∞©Ï†ïÌôò",
        "üö¢ Ìï¥ÏÉÅÏôï Ïû•Î≥¥Í≥†",
        "üëë Ïã†ÎùºÏùò Ï≤´ Ïó¨Ïôï ÏÑ†ÎçïÏó¨Ïôï",
        "üè∞ Í≥†Íµ¨Î†§Ïùò Î™ÖÏû• Ïó∞Í∞úÏÜåÎ¨∏",
        "‚öîÔ∏è Ìô©ÏÇ∞Î≤åÏùò ÏòÅÏõÖ Í≥ÑÎ∞±",
        "üó°Ô∏è Í≥†Î†§Ïùò Ï∂©Ïã† ÏµúÏòÅ",
        "üèØ ÌñâÏ£ºÎåÄÏ≤©Ïùò Î™ÖÏû• Í∂åÏú®",
        "üî• ÏùòÎ≥ëÏû• Í≥ΩÏû¨Ïö∞",
        "üå± Î™©ÌôîÏî®Î•º Í∞ÄÏ†∏Ïò® Î¨∏ÏùµÏ†ê",
        "üìú Ï°∞ÏÑ† ÏµúÍ≥†Ïùò Ïó¨Î•ò ÏãúÏù∏ ÌóàÎÇúÏÑ§Ìóå"
      ];
      overrides["BRAINUP.person.people1"] = people1Titles;
      overrides["BRAINFIT.person.people1"] = people1Titles;

      // ÏÑ∏Í≥ÑÏù∏Î¨º Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      const people2Titles = [
        "üé® Í¥ÄÏ∞∞Î°ú ÏÑ∏ÏÉÅÏùÑ Í∑∏Î¶∞ ÏÜåÎÖÑ, Î†àÏò§ÎÇòÎ•¥ÎèÑ",
        "üé® Ï≤úÏû•ÏùÑ Í∑∏Î¶∞ ÎÇ®Ïûê, ÎØ∏ÏºàÎûÄÏ†§Î°ú",
        "üé≠ Í∑πÏû•ÏúºÎ°ú Îì§Ïñ¥Í∞Ñ Ìïú ÎÇ®ÏûêÏùò Ïù¥ÏïºÍ∏∞",
        "üéµ ÎÜÄÎùºÏö¥ Ïû¨Îä•ÏùÑ ÏßÄÎãå Ïñ¥Î¶∞ ÏùåÏïÖÍ∞Ä",
        "üî¨ ÏÉÅÏÉÅÎ†•ÏúºÎ°ú Ïö∞Ï£ºÎ•º ÌÉêÌóòÌïú Í≥ºÌïôÏûê, ÏïÑÏù∏ÏäàÌÉÄÏù∏",
        "‚öóÔ∏è Î∞©ÏÇ¨Îä•Ïùò ÎπÑÎ∞ÄÏùÑ Î∞ùÌûå Ïó¨ÏÑ± Í≥ºÌïôÏûê, ÎßàÎ¶¨ ÌÄ¥Î¶¨",
        "‚òÆÔ∏è ÎπÑÌè≠Î†•ÏúºÎ°ú ÏÑ∏ÏÉÅÏùÑ Î∞îÍæº ÏßÄÎèÑÏûê, Í∞ÑÎîî",
        "‚úàÔ∏è ÌïòÎäòÏùÑ ÎÇòÎäî ÍøàÏùÑ Ïù¥Î£¨ ÌòïÏ†ú, ÎùºÏù¥Ìä∏ ÌòïÏ†ú",
        "üí° Ïñ¥Îë† ÏÜçÏóêÏÑú ÎπõÏùÑ Ï∞æÏùÄ Ìó¨Î†å ÏºàÎü¨",
        "üé® Î∂ìÏúºÎ°ú Í∞êÏ†ïÏùÑ Í∑∏Î¶∞ ÌôîÍ∞Ä, Î∞ò Í≥†Ìùê",
        "üè• Î∞±ÏùòÏùò Ï≤úÏÇ¨, ÎÇòÏù¥ÌåÖÍ≤åÏùº",
        "‚úä 27ÎÖÑÏùò Í∞êÏò•, Ïö©ÏÑúÎ°ú ÎÇòÎùºÎ•º Î∞îÍæº ÎÑ¨Ïä® ÎßåÎç∏Îùº",
        "üíª Îã§Î•¥Í≤å ÏÉùÍ∞ÅÌïòÎùº, Ïä§Ìã∞Î∏å Ïû°Ïä§",
        "üôè Í∞ÄÎÇúÌïú Ïù¥Îì§Ïùò Ïñ¥Î®∏Îãà, ÎßàÎçî ÌÖåÎ†àÏÇ¨",
        "üé® ÏÑ∏ÏÉÅÏùÑ ÏÉàÎ°≠Í≤å Î≥∏ ÌôîÍ∞Ä, ÌîºÏπ¥ÏÜå",
        "üè∞ ÍøàÏùò ÏôïÍµ≠ÏùÑ ÏÑ∏Ïö¥ ÏõîÌä∏ ÎîîÏ¶àÎãà",
        "üî¨ ÏÑ∏Í∑†ÏùÑ Î∞úÍ≤¨Ìïú Í≥ºÌïôÏûê, Î£®Ïù¥ ÌååÏä§Ìá¥Î•¥",
        "üë©‚Äçüè´ Í∏∞Ï†ÅÏùÑ ÎßåÎì† ÏÑ†ÏÉùÎãò, Ïï§ ÏÑ§Î¶¨Î≤à",
        "üé¨ ÏõÉÏùåÏúºÎ°ú ÏÑ∏ÏÉÅÏùÑ ÏúÑÎ°úÌïú Ï∞∞Î¶¨ Ï±ÑÌîåÎ¶∞",
        "üêµ Ïπ®Ìå¨ÏßÄÏôÄ Ìï®Íªò ÏÇ¥Îã§, Ï†úÏù∏ Íµ¨Îã¨",
        "üéª ÏïÖÍ∏∞Ïùò Î™ÖÏû•, ÏïàÌÜ†ÎãàÏò§ Ïä§Ìä∏ÎùºÎîîÎ∞îÎ¶¨",
        "üéº Ïö¥Î™ÖÏùÑ Í∑πÎ≥µÌïú ÏùåÏïÖÍ∞Ä, Î≤†ÌÜ†Î≤§",
        "üé® Ï≤úÏû¨Ïùò ÎåÄÎ™ÖÏÇ¨, Î†àÏò§ÎÇòÎ•¥ÎèÑ Îã§ÎπàÏπò",
        "üíä ÌéòÎãàÏã§Î¶∞ÏùÑ Î∞úÍ≤¨Ìïú ÏïåÎ†âÏÇ∞Îçî ÌîåÎ†àÎ∞ç",
        "üé© ÎÖ∏ÏòàÎ•º Ìï¥Î∞©Ìïú ÎåÄÌÜµÎ†π, ÎßÅÏª®",
        "‚öîÔ∏è Ïú†ÎüΩÏùÑ Ï†ïÎ≥µÌïú Ìô©Ï†ú, ÎÇòÌè¥Î†àÏòπ",
        "‚úä ÎÇòÏóêÍ≤åÎäî ÍøàÏù¥ ÏûàÏäµÎãàÎã§, ÎßàÌã¥ Î£®ÌÑ∞ ÌÇπ",
        "üìñ ÎèàÌÇ§Ìò∏ÌÖåÎ•º Ïì¥ ÏÑ∏Î•¥Î∞òÌÖåÏä§",
        "üìö Ïù∏ÏùÑ Í∞ÄÎ•¥Ïπú Ïä§Ïäπ, Í≥µÏûê",
        "üó°Ô∏è ÏÑ∏Í≥ÑÎ•º Ï†ïÎ≥µÌïú Ï†äÏùÄ Ïôï, ÏïåÎ†âÏÇ∞Îçî ÎåÄÏôï",
        "üëë Ïù¥ÏßëÌä∏Ïùò ÎßàÏßÄÎßâ Ïó¨Ïôï, ÌÅ¥Î†àÏò§ÌååÌä∏Îùº",
        "üèπ ÏÑ∏Í≥Ñ ÏµúÎåÄ Ï†úÍµ≠ÏùÑ ÏÑ∏Ïö¥ ÏßïÍ∏∞Ïä§Ïπ∏",
        "ü¶é ÏßÑÌôîÎ°†ÏùÑ Î∞úÍ≤¨Ìïú Ï∞∞Ïä§ Îã§Ïúà",
        "üëó Ìå®ÏÖòÏùÑ Î∞îÍæº Ïó¨ÏÑ±, ÏΩîÏΩî ÏÉ§ÎÑ¨",
        "üíª Ïª¥Ìì®ÌÑ∞ ÌòÅÎ™ÖÏùÑ Ïù¥ÎÅà Îπå Í≤åÏù¥Ï∏†",
        "üèÄ ÎÜçÍµ¨Ïùò Ïã†, ÎßàÏù¥ÌÅ¥ Ï°∞Îçò",
        "‚öîÔ∏è Ï†ÑÏÑ§Ïùò Ïôï, ÏïÑÏÑúÏôï",
        "üè∫ Ìô©Í∏à ÎßàÏä§ÌÅ¨Ïùò Ï£ºÏù∏, Ìà¨ÌÉïÏπ¥Î©ò",
        "üî≠ ÏßÄÎèôÏÑ§Ïùò ÏïÑÎ≤ÑÏßÄ, Í∞àÎ¶¥Î†àÏò§ Í∞àÎ¶¥Î†àÏù¥",
        "‚ö° Ï†ÑÍ∏∞Ïùò ÎßàÎ≤ïÏÇ¨, ÎãàÏΩúÎùº ÌÖåÏä¨Îùº"
      ];
      overrides["BRAINUP.person.people2"] = people2Titles;
      overrides["BRAINFIT.person.people2"] = people2Titles;

      // ÏÑ∏Í≥ÑÎ¨∏Ìïô(1) Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINUP.worldlit.world1"] = [
        "üìö ÎëêÎ†§ÏõÄÏùÑ ÎÑòÏñ¥ÏÑ† ÏÉàÎ°úÏö¥ ÏãúÏûë",
        "üèùÔ∏è ÏÑ¨Ïùò ÎπÑÎ∞ÄÍ≥º ÏÜåÎÖÑÎì§Ïùò Í≤∞Ïã¨",
        "üå∏ ÍΩÉÏùò ÏöîÏ†ïÏù¥ Ïù¥Î£¨ ÏÜåÏõê",
        "üé≠ ÌÉÄÎØ∏ÎÖ∏ÏôÄ ÌååÌååÍ≤åÎÖ∏ÏóêÍ≤å ÎÇ¥Î†§ÏßÑ Ï≤´ Î≤àÏß∏ ÏãúÌóò",
        "ü¶ä Ïñ¥Î¶∞ ÏôïÏûêÏôÄ Ïó¨Ïö∞Ïùò ÌäπÎ≥ÑÌïú ÎßåÎÇ®",
        "üè¥‚Äç‚ò†Ô∏è Î≥¥Î¨º ÏßÄÎèÑÎ•º ÏÜêÏóê ÎÑ£ÏùÄ ÏÜåÎÖÑ",
        "ü™µ ÎÇòÎ¨¥ Ïù∏ÌòïÏù¥ ÏÇ¨ÎûåÏù¥ ÎêòÍ∏∞ÍπåÏßÄ",
        "üå™Ô∏è ÌöåÏò§Î¶¨Î∞îÎûåÏùÑ ÌÉÄÍ≥† ÎßàÎ≤ïÏùò ÎÇòÎùºÎ°ú",
        "üê∞ ÌÜ†ÎÅº Íµ¥ ÏÜçÏúºÎ°ú Îñ®Ïñ¥ÏßÑ ÏÜåÎÖÄ",
        "üê∫ ÎäëÎåÄÏóêÍ≤å ÌÇ§ÏõåÏßÑ ÏïÑÏù¥",
        "üßö ÏòÅÏõêÌûà Ïñ¥Î•∏Ïù¥ ÎêòÏßÄ ÏïäÎäî ÏÜåÎÖÑ",
        "üèùÔ∏è Î¨¥Ïù∏ÎèÑÏóêÏÑú ÏÇ¥ÏïÑÎÇ®ÏùÄ ÏÇ¨ÎÇòÏù¥",
        "üîç Í±∞Ïù∏Ïù¥ ÎêòÏóàÎã§Í∞Ä ÎÇúÏüÅÏù¥Í∞Ä Îêú ÏÇ¨ÎÇòÏù¥",
        "üß¢ ÎØ∏ÏãúÏãúÌîºÍ∞ïÍ∞ÄÏùò ÎßêÏçΩÍæ∏Îü¨Í∏∞",
        "üçé ÏùºÍ≥± ÎÇúÏüÅÏù¥ÏôÄ ÎèÖÏÇ¨Í≥º",
        "üë† Ïú†Î¶¨Íµ¨ÎëêÏùò Ï£ºÏù∏ÏùÑ Ï∞æÏïÑÏÑú",
        "üßú‚Äç‚ôÄÔ∏è Î∞îÎã§ Î∞ëÏóêÏÑú Ïò® Í≥µÏ£º",
        "üåπ Î∞± ÎÖÑ ÎèôÏïà Ïû†Îì† Í≥µÏ£º",
        "üê∫ Ïà≤ÏÜçÏùò Î¨¥ÏÑúÏö¥ ÎäëÎåÄ",
        "üç¨ Í≥ºÏûêÎ°ú ÎßåÎì† Ïßë",
        "üíá ÎÜíÏùÄ ÌÉëÏóê Í∞áÌûå ÏÜåÎÖÄ",
        "üå± ÌïòÎäòÍπåÏßÄ ÏûêÎûÄ ÏΩ©ÎÇòÎ¨¥",
        "üê∑ ÏÑ∏ ÎßàÎ¶¨ ÎèºÏßÄÏôÄ ÎäëÎåÄ",
        "ü¶¢ Î™ªÏÉùÍ∏¥ ÏïÑÍ∏∞ Ïò§Î¶¨Ïùò ÎπÑÎ∞Ä",
        "üî• ÏÑ±ÎÉ•Î∂à ÏÜçÏóêÏÑú Î≥∏ Íøà",
        "üéµ ÏùåÏïÖÎåÄÎ•º ÍøàÍæº ÎèôÎ¨ºÎì§",
        "üê∏ Í∞úÍµ¨Î¶¨Í∞Ä Îêú ÏôïÏûê",
        "üé∂ ÌîºÎ¶¨ ÏÜåÎ¶¨Î•º Îî∞ÎùºÍ∞Ñ ÏïÑÏù¥Îì§",
        "üë¢ Ïû•ÌôîÎ•º Ïã†ÏùÄ ÏòÅÎ¶¨Ìïú Í≥†ÏñëÏù¥",
        "üî¨ ÏûëÏïÑÏ°åÎã§ Ïª§Ï°åÎã§ ÌïòÎäî Î™®Ìóò",
        "üê∫ ÎäëÎåÄÏôÄ ÏùºÍ≥± ÎßàÎ¶¨ ÏïÑÍ∏∞ ÏóºÏÜå",
        "üç´ Ìô©Í∏à Ìã∞ÏºìÍ≥º Ï¥àÏΩúÎ¶ø Í≥µÏû•",
        "üëë ÌñâÎ≥µÌïú ÏôïÏûêÏùò ÎààÎ¨º",
        "ü™ì Ï†ïÏßÅÌïú ÎÇòÎ¨¥ÍæºÍ≥º ÎèÑÎÅº",
        "üëª ÌÅ¨Î¶¨Ïä§ÎßàÏä§Ïùò Ïú†Î†πÎì§",
        "‚ùÑÔ∏è ÏñºÏùå ÏÑ±Ïùò Ïó¨Ïôï",
        "üå∏ Ïû†Í∏¥ Î¨∏ Îí§Ïùò ÎπÑÎ∞Ä Ï†ïÏõê",
        "üåπ Ïñ¥Î¶∞ ÏôïÏûêÏôÄ Ïû•ÎØ∏",
        "üêë ÏñëÏπòÍ∏∞ ÏÜåÎÖÑÍ≥º ÎäëÎåÄ",
        "üê¢ ÌÜ†ÎÅºÏôÄ Í±∞Î∂ÅÏù¥Ïùò Í≤ΩÏ£º"
      ];

      // BRAINFIT ÏÑ∏Í≥ÑÎ¨∏Ìïô(1) Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINFIT.worldlit.world1"] = [
        "üìö ÎëêÎ†§ÏõÄÏùÑ ÎÑòÏñ¥ÏÑ† ÏÉàÎ°úÏö¥ ÏãúÏûë",
        "üèùÔ∏è ÏÑ¨Ïùò ÎπÑÎ∞ÄÍ≥º ÏÜåÎÖÑÎì§Ïùò Í≤∞Ïã¨",
        "üå∏ ÍΩÉÏùò ÏöîÏ†ïÏù¥ Ïù¥Î£¨ ÏÜåÏõê",
        "üé≠ ÌÉÄÎØ∏ÎÖ∏ÏôÄ ÌååÌååÍ≤åÎÖ∏ÏóêÍ≤å ÎÇ¥Î†§ÏßÑ Ï≤´ Î≤àÏß∏ ÏãúÌóò",
        "ü¶ä Ïñ¥Î¶∞ ÏôïÏûêÏôÄ Ïó¨Ïö∞Ïùò ÌäπÎ≥ÑÌïú ÎßåÎÇ®",
        "üè¥‚Äç‚ò†Ô∏è Î≥¥Î¨º ÏßÄÎèÑÎ•º ÏÜêÏóê ÎÑ£ÏùÄ ÏÜåÎÖÑ",
        "ü™µ ÎÇòÎ¨¥ Ïù∏ÌòïÏù¥ ÏÇ¨ÎûåÏù¥ ÎêòÍ∏∞ÍπåÏßÄ",
        "üå™Ô∏è ÌöåÏò§Î¶¨Î∞îÎûåÏùÑ ÌÉÄÍ≥† ÎßàÎ≤ïÏùò ÎÇòÎùºÎ°ú",
        "üê∞ ÌÜ†ÎÅº Íµ¥ ÏÜçÏúºÎ°ú Îñ®Ïñ¥ÏßÑ ÏÜåÎÖÄ",
        "üê∫ ÎäëÎåÄÏóêÍ≤å ÌÇ§ÏõåÏßÑ ÏïÑÏù¥",
        "üßö ÏòÅÏõêÌûà Ïñ¥Î•∏Ïù¥ ÎêòÏßÄ ÏïäÎäî ÏÜåÎÖÑ",
        "üèùÔ∏è Î¨¥Ïù∏ÎèÑÏóêÏÑú ÏÇ¥ÏïÑÎÇ®ÏùÄ ÏÇ¨ÎÇòÏù¥",
        "üîç Í±∞Ïù∏Ïù¥ ÎêòÏóàÎã§Í∞Ä ÎÇúÏüÅÏù¥Í∞Ä Îêú ÏÇ¨ÎÇòÏù¥",
        "üß¢ ÎØ∏ÏãúÏãúÌîºÍ∞ïÍ∞ÄÏùò ÎßêÏçΩÍæ∏Îü¨Í∏∞",
        "üçé ÏùºÍ≥± ÎÇúÏüÅÏù¥ÏôÄ ÎèÖÏÇ¨Í≥º",
        "üë† Ïú†Î¶¨Íµ¨ÎëêÏùò Ï£ºÏù∏ÏùÑ Ï∞æÏïÑÏÑú",
        "üßú‚Äç‚ôÄÔ∏è Î∞îÎã§ Î∞ëÏóêÏÑú Ïò® Í≥µÏ£º",
        "üåπ Î∞± ÎÖÑ ÎèôÏïà Ïû†Îì† Í≥µÏ£º",
        "üê∫ Ïà≤ÏÜçÏùò Î¨¥ÏÑúÏö¥ ÎäëÎåÄ",
        "üç¨ Í≥ºÏûêÎ°ú ÎßåÎì† Ïßë",
        "üíá ÎÜíÏùÄ ÌÉëÏóê Í∞áÌûå ÏÜåÎÖÄ",
        "üå± ÌïòÎäòÍπåÏßÄ ÏûêÎûÄ ÏΩ©ÎÇòÎ¨¥",
        "üê∑ ÏÑ∏ ÎßàÎ¶¨ ÎèºÏßÄÏôÄ ÎäëÎåÄ",
        "ü¶¢ Î™ªÏÉùÍ∏¥ ÏïÑÍ∏∞ Ïò§Î¶¨Ïùò ÎπÑÎ∞Ä",
        "üî• ÏÑ±ÎÉ•Î∂à ÏÜçÏóêÏÑú Î≥∏ Íøà",
        "üéµ ÏùåÏïÖÎåÄÎ•º ÍøàÍæº ÎèôÎ¨ºÎì§",
        "üê∏ Í∞úÍµ¨Î¶¨Í∞Ä Îêú ÏôïÏûê",
        "üé∂ ÌîºÎ¶¨ ÏÜåÎ¶¨Î•º Îî∞ÎùºÍ∞Ñ ÏïÑÏù¥Îì§",
        "üë¢ Ïû•ÌôîÎ•º Ïã†ÏùÄ ÏòÅÎ¶¨Ìïú Í≥†ÏñëÏù¥",
        "üî¨ ÏûëÏïÑÏ°åÎã§ Ïª§Ï°åÎã§ ÌïòÎäî Î™®Ìóò",
        "üê∫ ÎäëÎåÄÏôÄ ÏùºÍ≥± ÎßàÎ¶¨ ÏïÑÍ∏∞ ÏóºÏÜå",
        "üç´ Ìô©Í∏à Ìã∞ÏºìÍ≥º Ï¥àÏΩúÎ¶ø Í≥µÏû•",
        "üëë ÌñâÎ≥µÌïú ÏôïÏûêÏùò ÎààÎ¨º",
        "ü™ì Ï†ïÏßÅÌïú ÎÇòÎ¨¥ÍæºÍ≥º ÎèÑÎÅº",
        "üëª ÌÅ¨Î¶¨Ïä§ÎßàÏä§Ïùò Ïú†Î†πÎì§",
        "‚ùÑÔ∏è ÏñºÏùå ÏÑ±Ïùò Ïó¨Ïôï",
        "üå∏ Ïû†Í∏¥ Î¨∏ Îí§Ïùò ÎπÑÎ∞Ä Ï†ïÏõê",
        "üåπ Ïñ¥Î¶∞ ÏôïÏûêÏôÄ Ïû•ÎØ∏",
        "üêë ÏñëÏπòÍ∏∞ ÏÜåÎÖÑÍ≥º ÎäëÎåÄ",
        "üê¢ ÌÜ†ÎÅºÏôÄ Í±∞Î∂ÅÏù¥Ïùò Í≤ΩÏ£º"
      ];

      // ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINUP.worldlit.world2"] = [
        "üèπ ÌÖîÏùò Ïö©Í∏∞ÏôÄ ÎëêÎ†§ÏõÄ",
        "üí™ ÏÜåÎÖÑÎì§Ïùò Ïö©Í∏∞ÏôÄ ÏºÄÏù¥Ìä∏Ïùò ÎààÎ¨º",
        "üèπ Î°úÎπà ÌõÑÎìúÏùò ÏùÄÎ∞ÄÌïú Ïû¨Ìåê",
        "üíÉ ÎßêÍ¥ÑÎüâÏù¥ Ïπ¥ÌÉÄÎ¶¨ÎÇòÎ•º ÎëòÎü¨Ïãº Ïò§Ìï¥ÏôÄ ÏßÑÏã§",
        "üç≤ Ïò¨Î¶¨Î≤ÑÏùò Ïö©Í∏∞ ÏûàÎäî ÌïúÎßàÎîî",
        "üö£ ÏûêÏú†Î•º Ï∞æÏïÑ Îñ†ÎÇú ÏÜåÎÖÑ",
        "üå∏ Ïû†Îì† Ï†ïÏõêÏù¥ Íπ®Ïñ¥ÎÇòÎã§",
        "üåç ÏãúÍ∞ÑÏùÑ Îã§Ìà¨Îäî ÎåÄÎ™®Ìóò",
        "üêö Ïã†ÎπÑÎ°úÏö¥ Î∞îÎã∑ÏÜç ÏÑ∏Í≥Ñ",
        "üëë Î∞îÎÄê Ïö¥Î™Ö, Î∞îÎÄê ÏÑ∏ÏÉÅ",
        "üé£ ÎØ∏ÏãúÏãúÌîº Í∞ïÏùò Ïû•ÎÇúÍæ∏Îü¨Í∏∞",
        "üê∫ Ï†ïÍ∏ÄÏùò ÏïÑÏù¥ Î™®Í∏ÄÎ¶¨",
        "‚ú® ÏòÅÏõêÌûà ÏûêÎùºÏßÄ ÏïäÎäî ÏÜåÎÖÑ",
        "üè¥‚Äç‚ò†Ô∏è Î≥¥Î¨ºÏùÑ Ï∞æÏïÑ Îñ†ÎÇú Î™®Ìóò",
        "üåà Î¨¥ÏßÄÍ∞ú ÎÑàÎ®∏ ÎßàÎ≤ïÏùò ÎÇòÎùº",
        "üé≠ Îëê ÏñºÍµ¥ÏùÑ Í∞ÄÏßÑ ÏùòÏÇ¨",
        "üëß ÎÑ§ ÏûêÎß§Ïùò ÏÑ±Ïû• Ïù¥ÏïºÍ∏∞",
        "üå™Ô∏è Ìô©ÏïºÏùò ÎπÑÍ∑πÏ†Å ÏÇ¨Îûë",
        "üìñ ÏûêÏ°¥Ïã¨ÏùÑ ÏßÄÌÇ® Ïó¨Ïù∏",
        "‚öîÔ∏è Î≥µÏàòÏùò Î∞±Ïûë",
        "üèùÔ∏è Î¨¥Ïù∏ÎèÑÏóêÏÑú ÏÇ¥ÏïÑÎÇ®Í∏∞",
        "üß≠ Í±∞Ïù∏Í≥º ÏÜåÏù∏Ïùò ÎÇòÎùº",
        "üõ°Ô∏è Ïù¥ÏÉÅÍ≥º ÌòÑÏã§ ÏÇ¨Ïù¥Ïùò Í∏∞ÏÇ¨",
        "üî¥ Í∞ÄÏä¥Ïóê ÏÉàÍ∏¥ Ï£ÑÏùò Í∏ÄÏûê",
        "üíï Ï≤´Ïù∏ÏÉÅÏùÑ ÎÑòÏñ¥ÏÑú",
        "üòà ÏïÖÎßàÏôÄÏùò Í±∞Îûò",
        "üïØÔ∏è ÏùÄÏ¥õÎåÄÏùò Í∏∞Ï†Å",
        "üöÇ Ïö¥Î™ÖÏùò Í∏∞Ï∞®",
        "‚öñÔ∏è ÏñëÏã¨Ïùò Î¨¥Í≤å",
        "ü™≤ Ïñ¥Îäê ÎÇ† ÏïÑÏπ® Î≤åÎ†àÍ∞Ä ÎêòÎã§",
        "üê∞ ÌÜ†ÎÅºÍµ¥ ÏÜçÏúºÎ°ú",
        "üêã ÌïòÏñÄ Í≥†ÎûòÎ•º Ï´ìÏïÑÏÑú",
        "üåä ÎßàÎ≤ïÏÇ¨Ïùò ÏÑ¨",
        "üåæ Ïñ¥Î•∏Ïù¥ ÎêòÍ∏∞ Ïã´Ïñ¥",
        "üé£ Ìè¨Í∏∞ÌïòÏßÄ ÏïäÎäî ÎÖ∏Ïù∏",
        "üê∑ ÎèôÎ¨ºÎì§Ïùò ÌòÅÎ™Ö",
        "üíö Ï¥àÎ°ùÎπõ Î∂àÎπõÏùÑ Ìñ•Ìï¥",
        "‚öñÔ∏è Ï†ïÏùòÎ•º ÏúÑÌïú Î≥ÄÌò∏",
        "üëÅÔ∏è ÎπÖ Î∏åÎùºÎçîÍ∞Ä Î≥¥Í≥† ÏûàÎã§",
        "üêö ÏÜåÎÖÑÎì§Ïùò ÏÑ¨"
      ];

      // BRAINFIT ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINFIT.worldlit.world2"] = [
        "üèπ ÌÖîÏùò Ïö©Í∏∞ÏôÄ ÎëêÎ†§ÏõÄ",
        "üí™ ÏÜåÎÖÑÎì§Ïùò Ïö©Í∏∞ÏôÄ ÏºÄÏù¥Ìä∏Ïùò ÎààÎ¨º",
        "üèπ Î°úÎπà ÌõÑÎìúÏùò ÏùÄÎ∞ÄÌïú Ïû¨Ìåê",
        "üíÉ ÎßêÍ¥ÑÎüâÏù¥ Ïπ¥ÌÉÄÎ¶¨ÎÇòÎ•º ÎëòÎü¨Ïãº Ïò§Ìï¥ÏôÄ ÏßÑÏã§",
        "üç≤ Ïò¨Î¶¨Î≤ÑÏùò Ïö©Í∏∞ ÏûàÎäî ÌïúÎßàÎîî",
        "üö£ ÏûêÏú†Î•º Ï∞æÏïÑ Îñ†ÎÇú ÏÜåÎÖÑ",
        "üå∏ Ïû†Îì† Ï†ïÏõêÏù¥ Íπ®Ïñ¥ÎÇòÎã§",
        "üåç ÏãúÍ∞ÑÏùÑ Îã§Ìà¨Îäî ÎåÄÎ™®Ìóò",
        "üêö Ïã†ÎπÑÎ°úÏö¥ Î∞îÎã∑ÏÜç ÏÑ∏Í≥Ñ",
        "üëë Î∞îÎÄê Ïö¥Î™Ö, Î∞îÎÄê ÏÑ∏ÏÉÅ",
        "üé£ ÎØ∏ÏãúÏãúÌîº Í∞ïÏùò Ïû•ÎÇúÍæ∏Îü¨Í∏∞",
        "üê∫ Ï†ïÍ∏ÄÏùò ÏïÑÏù¥ Î™®Í∏ÄÎ¶¨",
        "‚ú® ÏòÅÏõêÌûà ÏûêÎùºÏßÄ ÏïäÎäî ÏÜåÎÖÑ",
        "üè¥‚Äç‚ò†Ô∏è Î≥¥Î¨ºÏùÑ Ï∞æÏïÑ Îñ†ÎÇú Î™®Ìóò",
        "üåà Î¨¥ÏßÄÍ∞ú ÎÑàÎ®∏ ÎßàÎ≤ïÏùò ÎÇòÎùº",
        "üé≠ Îëê ÏñºÍµ¥ÏùÑ Í∞ÄÏßÑ ÏùòÏÇ¨",
        "üëß ÎÑ§ ÏûêÎß§Ïùò ÏÑ±Ïû• Ïù¥ÏïºÍ∏∞",
        "üå™Ô∏è Ìô©ÏïºÏùò ÎπÑÍ∑πÏ†Å ÏÇ¨Îûë",
        "üìñ ÏûêÏ°¥Ïã¨ÏùÑ ÏßÄÌÇ® Ïó¨Ïù∏",
        "‚öîÔ∏è Î≥µÏàòÏùò Î∞±Ïûë",
        "üèùÔ∏è Î¨¥Ïù∏ÎèÑÏóêÏÑú ÏÇ¥ÏïÑÎÇ®Í∏∞",
        "üß≠ Í±∞Ïù∏Í≥º ÏÜåÏù∏Ïùò ÎÇòÎùº",
        "üõ°Ô∏è Ïù¥ÏÉÅÍ≥º ÌòÑÏã§ ÏÇ¨Ïù¥Ïùò Í∏∞ÏÇ¨",
        "üî¥ Í∞ÄÏä¥Ïóê ÏÉàÍ∏¥ Ï£ÑÏùò Í∏ÄÏûê",
        "üíï Ï≤´Ïù∏ÏÉÅÏùÑ ÎÑòÏñ¥ÏÑú",
        "üòà ÏïÖÎßàÏôÄÏùò Í±∞Îûò",
        "üïØÔ∏è ÏùÄÏ¥õÎåÄÏùò Í∏∞Ï†Å",
        "üöÇ Ïö¥Î™ÖÏùò Í∏∞Ï∞®",
        "‚öñÔ∏è ÏñëÏã¨Ïùò Î¨¥Í≤å",
        "ü™≤ Ïñ¥Îäê ÎÇ† ÏïÑÏπ® Î≤åÎ†àÍ∞Ä ÎêòÎã§",
        "üê∞ ÌÜ†ÎÅºÍµ¥ ÏÜçÏúºÎ°ú",
        "üêã ÌïòÏñÄ Í≥†ÎûòÎ•º Ï´ìÏïÑÏÑú",
        "üåä ÎßàÎ≤ïÏÇ¨Ïùò ÏÑ¨",
        "üåæ Ïñ¥Î•∏Ïù¥ ÎêòÍ∏∞ Ïã´Ïñ¥",
        "üé£ Ìè¨Í∏∞ÌïòÏßÄ ÏïäÎäî ÎÖ∏Ïù∏",
        "üê∑ ÎèôÎ¨ºÎì§Ïùò ÌòÅÎ™Ö",
        "üíö Ï¥àÎ°ùÎπõ Î∂àÎπõÏùÑ Ìñ•Ìï¥",
        "‚öñÔ∏è Ï†ïÏùòÎ•º ÏúÑÌïú Î≥ÄÌò∏",
        "üëÅÔ∏è ÎπÖ Î∏åÎùºÎçîÍ∞Ä Î≥¥Í≥† ÏûàÎã§",
        "üêö ÏÜåÎÖÑÎì§Ïùò ÏÑ¨"
      ];

      // Í≥ºÌïôÎ∂ÑÏïº ÏÉùÎ¨º Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINUP.science.bio"] = [
        "üß¨ ÏÉùÎ¨ºÍ≥º Î¨¥ÏÉùÎ¨ºÏùò Íµ¨Î∂ÑÍ≥º Í¥ÄÍ≥Ñ",
        "ü¶Å ÎèôÎ¨ºÏùò Î™∏Í≥º ÏÉùÌôú Î∞©ÏãùÏùÄ Ïôú Îã§Î•ºÍπå?",
        "üêô Ïà®ÏùÄ Ï£ºÏù∏Í≥µ, Î¨¥Ï≤ôÏ∂îÎèôÎ¨ºÏùò ÏÑ∏Í≥Ñ",
        "üêú ÏûëÏßÄÎßå ÏúÑÎåÄÌïú Ï°¥Ïû¨, Í≥§Ï∂©Ïùò ÏÑ∏Í≥Ñ",
        "ü¶ã ÏôÑÏ†Ñ ÌÉàÎ∞îÍøàÍ≥º Î∂àÏôÑÏ†Ñ ÌÉàÎ∞îÍøàÏùò Ï∞®Ïù¥",
        "üåø ÏãùÎ¨ºÏùò Íµ¨Ï°∞ÏôÄ ÏÉùÏ°¥ Ï†ÑÎûµ",
        "‚òÄÔ∏è Í¥ëÌï©ÏÑ±, ÏßÄÍµ¨Î•º ÏÇ¥Î¶¨Îäî ÎßàÎ≤ï",
        "üî¨ ÏÑ∏Ìè¨, ÏÉùÎ™ÖÏùò Í∏∞Î≥∏ Îã®ÏúÑ",
        "üß´ ÏÑ∏Ìè¨Îäî Ïñ¥ÎñªÍ≤å Î∂ÑÏó¥Ìï†Íπå?",
        "üçΩÔ∏è ÏùåÏãùÎ¨ºÏùò Ïó¨Ìñâ, ÏÜåÌôîÏùò ÎπÑÎ∞Ä",
        "ü©∏ Ïò®Î™∏ÏùÑ ÎèÑÎäî ÌòàÏï°Ïùò ÏàúÌôò",
        "üí® Ïà® Ïâ¨Í≥† ÎÇ¥Î≥¥ÎÇ¥Îäî Ìò∏Ìù°Í≥º Î∞∞ÏÑ§",
        "üß† ÏûêÍ∑πÍ≥º Î∞òÏùë, Ïã†Í≤ΩÍ≥ÑÏùò ÏûëÎèô",
        "ü¶¥ ÎºàÏôÄ Í∑ºÏú°Ïù¥ ÎßåÎìúÎäî ÏõÄÏßÅÏûÑ",
        "üß¨ Î∂ÄÎ™®Î•º ÎãÆÎäî Ïù¥Ïú†, Ïú†Ï†ÑÏùò ÏõêÎ¶¨",
        "üîó DNA, ÏÉùÎ™ÖÏùò ÏÑ§Í≥ÑÎèÑ",
        "üåç ÏÉùÌÉúÍ≥ÑÏôÄ Î®πÏù¥ Í∑∏Î¨º",
        "üîÑ ÏûêÏó∞ ÏÜç Î¨ºÏßàÏùò ÏàúÌôò",
        "ü¶† ÏÑ∏Í∑†Í≥º Î∞îÏù¥Îü¨Ïä§Ïùò ÏÑ∏Í≥Ñ",
        "üß™ ÏÉùÎ™ÖÍ≥µÌïôÍ≥º ÎØ∏Îûò ÏÇ¨Ìöå"
      ];

      // Í≥ºÌïôÎ∂ÑÏïº ÏßÄÍµ¨Í≥ºÌïô Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINUP.science.earth"] = [
        "üåç ÏßÄÍµ¨Îäî Ïñ¥ÎñªÍ≤å ÎßåÎì§Ïñ¥Ï°åÏùÑÍπå?",
        "üåã ÎßàÍ∑∏ÎßàÍ∞Ä Îì§Î†§Ï£ºÎäî ÏßÄÍµ¨Ïùò Ïù¥ÏïºÍ∏∞",
        "ü™® ÎèåÏùÄ Ïñ¥ÎñªÍ≤å ÎßåÎì§Ïñ¥ÏßàÍπå?",
        "üèúÔ∏è ÏûëÏùÄ ÏïåÍ∞±Ïù¥Í∞Ä ÎêòÍ∏∞ÍπåÏßÄ, ÏïîÏÑùÏùò ÏÇ∂",
        "üåä Í∞ïÏùò ÌùêÎ¶ÑÏù¥ ÎπöÏñ¥ÎÇ∏ ÏûêÏó∞ Ï°∞Í∞ÅÌíà",
        "üåã ÎïÖÏù¥ ÌùîÎì§Î¶¨Í≥† Î∂àÏù¥ ÏÜüÎäîÎã§",
        "üèîÔ∏è ÏÇ∞Í≥º Î∞îÎã§Îäî Ïñ¥ÎñªÍ≤å ÎßåÎì§Ïñ¥Ï°åÏùÑÍπå",
        "ü™® ÎèåÎ©©Ïù¥ ÏÜçÏóê Ïà®ÏùÄ ÏßÄÍµ¨Ïùò Ïó≠ÏÇ¨",
        "ü¶¥ ÌôîÏÑùÏù¥ Îì§Î†§Ï£ºÎäî ÏòõÎÇ† Ïù¥ÏïºÍ∏∞",
        "üß≤ ÏßÄÍµ¨Í∞Ä Í±∞ÎåÄÌïú ÏûêÏÑùÏù¥ÎùºÍ≥†?",
        "üå§Ô∏è ÎÇ†Ïî®Îäî Ïôú Îß§Ïùº Îã¨ÎùºÏßàÍπå?",
        "‚òÅÔ∏è Íµ¨Î¶ÑÏùÄ Ïñ¥ÎñªÍ≤å ÎßåÎì§Ïñ¥ÏßàÍπå?",
        "üí® Í∏∞ÏïïÍ≥º Î∞îÎûåÏùò Í¥ÄÍ≥Ñ",
        "üå°Ô∏è Í∏∞ÌõÑÏôÄ Í∏∞ÌõÑ Î≥ÄÌôî",
        "ü™ê ÌÉúÏñëÍ≥ÑÏôÄ ÏßÄÍµ¨Ïùò ÏúÑÏπò",
        "‚õèÔ∏è ÏûêÏõêÏùò Î∂ÑÌè¨ÏôÄ Ïù¥Ïö©",
        "üåä Ìï¥Î•òÏôÄ Ï°∞ÏÑù, Î∞îÎã§Ïùò ÏõÄÏßÅÏûÑ",
        "‚è≥ ÏßÄÍµ¨Ïùò Ïó≠ÏÇ¨ÏôÄ ÏßÄÏßà ÏãúÎåÄ",
        "üöÄ Ïö∞Ï£º ÌÉêÏÇ¨ÏôÄ Ïù∏Î•òÏùò ÎèÑÏ†Ñ",
        "üå™Ô∏è ÏûêÏó∞Ïû¨Ìï¥ÏôÄ Î∞©Ïû¨"
      ];

      // ‚úÖ BRAINFIT Í≥ºÌïôÎ∂ÑÏïº ÏÉùÎ¨º Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINFIT.science.bio"] = [
        "üå± ÏÇ¥ÏïÑ ÏûàÎã§Îäî Í±¥ Î≠òÍπå?",
        "üêæ Ïôú ÏπòÌÉÄÎäî Îπ†Î•¥Í≥† ÎÇòÎ¨¥ÎäòÎ≥¥Îäî ÎäêÎ¶¥Íπå?",
        "ü¶ë Îºà ÏóÜÏù¥ÎèÑ ÏÇ¥ Ïàò ÏûàÏñ¥!",
        "üêù ÏßÄÍµ¨Ïùò ÏßÑÏßú ÏßÄÎ∞∞Ïûê, Í≥§Ï∂©",
        "ü¶ã Ïï†Î≤åÎ†àÎäî Ïñ¥ÎñªÍ≤å ÎÇòÎπÑÍ∞Ä Îê†Íπå?",
        "üå≥ ÏõÄÏßÅÏù¥ÏßÄ ÏïäÍ≥† ÏÇ¥ÏïÑÎÇ®Îäî Î≤ï",
        "‚òÄÔ∏è ÌñáÎπõÏùÑ Î®πÎäî ÏÉùÎ¨º",
        "üî¨ Î™®Îì† ÏÉùÎ™ÖÏùÄ Ïó¨Í∏∞ÏÑú ÏãúÏûëÎêêÎã§",
        "‚úÇÔ∏è ÏÑ∏Ìè¨Í∞Ä ÏûêÏã†ÏùÑ Î≥µÏÇ¨ÌïòÎäî Î∞©Î≤ï",
        "üçï ÌîºÏûê Ìïú Ï°∞Í∞ÅÏùò ÎåÄÎ™®Ìóò",
        "‚ù§Ô∏è Î©àÏ∂îÏßÄ ÏïäÎäî Ïã¨Ïû•Ïùò ÌéåÌîÑÏßà",
        "üí® Îì§Ïà®Í≥º ÎÇ†Ïà® ÏÇ¨Ïù¥Ïóê ÏùºÏñ¥ÎÇòÎäî Ïùº",
        "‚ö° ÎáåÏóêÏÑú Î∞úÎÅùÍπåÏßÄ Ï†ÑÍ∏∞ Ïã†Ìò∏",
        "ü¶¥ 206Í∞úÏùò ÎºàÍ∞Ä Ï∂§ÏùÑ Ï∂òÎã§",
        "üë®‚Äçüë©‚Äçüëß Ïôú ÎÇòÎäî Î∂ÄÎ™®ÎãòÏùÑ ÎãÆÏïòÏùÑÍπå?",
        "ü¶Å ÎàÑÍ∞Ä ÎàÑÍµ¨Î•º Î®πÏùÑÍπå?",
        "üè≠ ÏßÄÍµ¨Í∞Ä ÏïÑÌîÑÎ©¥ Ïö∞Î¶¨ÎèÑ ÏïÑÌåå",
        "üåà Îã§ÏñëÌïú ÏÉùÎ¨ºÏù¥ ÏßÄÍµ¨Î•º ÏßÄÌÇ®Îã§",
        "üå°Ô∏è ÏßÄÍµ¨Í∞Ä Îú®Í±∞ÏõåÏßÄÎ©¥ ÏÉùÎ¨ºÏùÄ Ïñ¥ÎñªÍ≤å Îê†Íπå?",
        "üöÄ ÎÇ¥ÏùºÏùò ÏÉùÎ™Ö Í≥ºÌïô, Ïñ¥ÎîîÍπåÏßÄ Í∞àÍπå?"
      ];

      // ‚úÖ BRAINFIT Í≥ºÌïôÎ∂ÑÏïº ÏßÄÍµ¨Í≥ºÌïô Ï†úÎ™© ÎçÆÏñ¥Ïì∞Í∏∞
      overrides["BRAINFIT.science.earth"] = [
        "üåç 46Ïñµ ÏÇ¥ ÏßÄÍµ¨Ïùò ÌÉÑÏÉù ÎπÑÎ∞Ä",
        "üåã ÌéÑÌéÑ ÎÅìÎäî ÏßÄÍµ¨ ÏÜç Ïö©Ïïî Ïó¨Ìñâ",
        "ü™® ÏÑ∏ Í∞ÄÏßÄ ÏñºÍµ¥ÏùÑ Í∞ÄÏßÑ ÏïîÏÑù",
        "üèúÔ∏è Î∞îÏúÑÍ∞Ä Î™®ÎûòÍ∞Ä ÎêòÎäî ÎßàÎ≤ï",
        "üåä Î¨ºÎ∞©Ïö∏Ïù¥ ÎßåÎì† Í±∞ÎåÄÌïú ÌòëÍ≥°",
        "üåã ÏßÄÍµ¨Í∞Ä ÌôîÎÇ¨ÏùÑ Îïå ÏùºÏñ¥ÎÇòÎäî Ïùº",
        "üèîÔ∏è ÏõÄÏßÅÏù¥Îäî ÎïÖ, ÌåêÏùò ÎåÄÏ∂©Îèå",
        "ü™® ÏßÄÏ∏µÏù¥ Ïç® ÎÇ¥Î†§Í∞Ñ ÏßÄÍµ¨ ÏùºÍ∏∞Ïû•",
        "ü¶¥ Í≥µÎ£° ÎºàÍ∞Ä Ï†ÑÌïòÎäî ÎπÑÎ∞Ä Î©îÏãúÏßÄ",
        "üß≤ ÎÇòÏπ®Î∞òÏù¥ Î∂ÅÏ™ΩÏùÑ Í∞ÄÎ¶¨ÌÇ§Îäî Ïù¥Ïú†",
        "üå§Ô∏è ÌïòÎäòÏù¥ Îß§Ïùº Ïò∑ÏùÑ Í∞àÏïÑÏûÖÎäî Ïù¥Ïú†",
        "‚òÅÔ∏è ÌïòÎäòÏóê Îñ†Îã§ÎãàÎäî ÏÜúÏÇ¨ÌÉïÏùò Ï†ïÏ≤¥",
        "üí® Î≥¥Ïù¥ÏßÄ ÏïäÎäî Í≥µÍ∏∞Ïùò ÌûòÍ≤®Î£®Í∏∞",
        "üå°Ô∏è ÏßÄÍµ¨Í∞Ä Ïó¥Ïù¥ ÎÇòÎ©¥ ÏÉùÍ∏∞Îäî Ïùº",
        "ü™ê ÌÉúÏñëÏùò ÏÑ∏ Î≤àÏß∏ ÌñâÏÑ±, ÏßÄÍµ¨",
        "‚õèÔ∏è ÎïÖÏÜçÏóê Ïà®Í≤®ÏßÑ Î≥¥Î¨ºÏùÑ Ï∞æÏïÑÏÑú",
        "üåä Î∞îÎã§ÎèÑ Í∞ïÏ≤òÎüº ÌùêÎ•∏Îã§Í≥†?",
        "‚è≥ 46Ïñµ ÎÖÑÏùÑ 24ÏãúÍ∞ÑÏúºÎ°ú ÏïïÏ∂ïÌïòÎ©¥",
        "üöÄ Î≥ÑÏùÑ Ìñ•Ìï¥ ÎÇ†ÏïÑÍ∞Ñ ÏÇ¨ÎûåÎì§",
        "üå™Ô∏è ÏßÄÍµ¨Ïùò Î∂ÑÎÖ∏Î•º ÌîºÌïòÎäî Î∞©Î≤ï"
      ];

      return overrides;
    }

    const unitTitleOverrides = buildUnitTitleOverrides();

    // Îã®ÏõêÎ≥Ñ Îì±Í∏â Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Í∞ùÏ≤¥
    let unitGradesData = {};

    /* 4. DOM Ï∫êÏã± */
    const domainList = document.getElementById("domainList");
    const subjectList = document.getElementById("subjectList");
    const unitList = document.getElementById("unitList");
    const modal = document.getElementById("pendingModal");
    const closeModalBtn = document.getElementById("closeModalBtn");
    const unitSearch = document.getElementById("unitSearch");
    let currentUnits = [];

    // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú ÏãúÎ¶¨Ï¶à/ÎèÑÎ©îÏù∏/Í≥ºÎ™© Ï∂îÏ†Å
    let currentSelectedSeries = null;
    let currentSelectedDomain = null;
    let currentSelectedSubject = null;



    // üö™ Î°úÍ∑∏ÏïÑÏõÉ Î™®Îã¨ Í¥ÄÎ†®
const logoutModal = document.getElementById("logoutModal");
const logoutCancelBtn = document.getElementById("logoutCancelBtn");
const logoutConfirmBtn = document.getElementById("logoutConfirmBtn");
let logoutCallback = null;


    function showPendingModal() {
      modal.classList.add("show");
    }

    function hidePendingModal() {
      modal.classList.remove("show");
    }

    // X Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú: ÌåùÏóÖ Îã´Í≥† 1.5Ï¥à ÌõÑ ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ®
    closeModalBtn.addEventListener("click", () => {
      hidePendingModal();
      setTimeout(() => {
        location.reload();
      }, 1500);
    });

    modal.addEventListener("click", e => {
      if (e.target === modal) hidePendingModal();
    });

/* üö™ Î°úÍ∑∏ÏïÑÏõÉ Î™®Îã¨ Ïó¥Í∏∞/Îã´Í∏∞ */
function showLogoutModal(cb) {
  logoutCallback = cb || null;
  if (logoutModal) logoutModal.classList.add("show");
}
function hideLogoutModal() {
  if (logoutModal) logoutModal.classList.remove("show");
}

if (logoutCancelBtn) {
  logoutCancelBtn.addEventListener("click", () => {
    hideLogoutModal();
    if (logoutCallback) logoutCallback(false);  // Ï∑®ÏÜå
  });
}

if (logoutConfirmBtn) {
  logoutConfirmBtn.addEventListener("click", () => {
    hideLogoutModal();
    if (logoutCallback) logoutCallback(true);   // ÌôïÏù∏
  });
}


    

    /* 5. ÏãúÎ¶¨Ï¶à ÌÅ¥Î¶≠ */
    // Ïò§ÌîàÎêú ÏãúÎ¶¨Ï¶à Î™©Î°ù (BRAINUP, BRAINFIT Ïò§Ìîà)
    const openedSeries = ['BRAINUP', 'BRAINFIT', 'BRAINDEEP'];

    document.querySelectorAll("#seriesList .series-item").forEach(li => {
      li.addEventListener("click", () => {
        const series = li.dataset.series;

        // Ïò§ÌîàÎêòÏßÄ ÏïäÏùÄ ÏãúÎ¶¨Ï¶àÎäî Ï§ÄÎπÑÏ§ë ÌåùÏóÖ ÌëúÏãú
        if (!openedSeries.includes(series)) {
          showComingSoonPopup();
          return;
        }

        document.querySelectorAll("#seriesList .series-item").forEach(x => x.classList.remove("active"));
        li.classList.add("active");
        currentSelectedSeries = series;
        currentSelectedDomain = null;
        currentSelectedSubject = null;
        renderDomains(series);
        subjectList.innerHTML = "";
        unitList.innerHTML = "";
        document.getElementById("unitTitle").textContent = "Îã®Ïõê ÏÑ†ÌÉù";
        document.getElementById("unitDesc").textContent =
          seriesInfo[series].desc + " ¬∑ Î∂ÑÏïºÏôÄ Í≥ºÎ™©ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.";
        unitSearch.value = "";

        // ‚úÖ ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉùÏùÑ localStorageÏóê Ï†ÄÏû• (ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Î≥µÏõêÏö©)
        localStorage.setItem('selectedMenuSeries', series);
        console.log('‚úÖ ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉù Ï†ÄÏû•:', series);

        // ‚úÖ ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉù Ïãú Ï¢ÖÌï©Î¶¨Ìè¨Ìä∏ Î±ÉÏßÄÎèÑ Ìï¥Îãπ ÏãúÎ¶¨Ï¶àÎ°ú ÏóÖÎç∞Ïù¥Ìä∏
        updateRadarGradeBadgeForSeries(series);
      });
    });

    /* ‚úÖ Ï†ÄÏû•Îêú Î©îÎâ¥ ÏÉÅÌÉú Î≥µÏõê */
    function restoreMenuState() {
      const savedState = sessionStorage.getItem('menuState');

      // ‚úÖ localStorageÏóêÏÑú Ï†ÄÏû•Îêú ÏãúÎ¶¨Ï¶à ÌôïÏù∏ (ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Î≥µÏõêÏö©)
      const savedSeries = localStorage.getItem('selectedMenuSeries');

      if (savedState) {
        try {
          const state = JSON.parse(savedState);
          console.log('üîÑ Î©îÎâ¥ ÏÉÅÌÉú Î≥µÏõê ÏãúÎèÑ:', state);

          // Î©îÎâ¥ ÏÉÅÌÉú ÏÇ¨Ïö© ÌõÑ ÏÇ≠Ï†ú (Ìïú Î≤àÎßå Î≥µÏõê)
          sessionStorage.removeItem('menuState');

          const seriesKey = state.series || 'BRAINUP';
          currentSelectedSeries = seriesKey;

          // 1. ÏãúÎ¶¨Ï¶à Î†åÎçîÎßÅ Î∞è ÌôúÏÑ±Ìôî
          renderDomains(seriesKey);
          document.querySelectorAll("#seriesList .series-item").forEach(li => {
            li.classList.remove("active");
            if (li.dataset.series === seriesKey) {
              li.classList.add("active");
            }
          });

          // 2. Î∂ÑÏïº(ÎèÑÎ©îÏù∏) Î≥µÏõê
          if (state.domainId) {
            const domainData = domainsBySeries[seriesKey] || domainsBySeries["BRAINON"];
            const targetDomain = domainData.find(d => d.id === state.domainId);

            if (targetDomain) {
              currentSelectedDomain = targetDomain;

              // Î∂ÑÏïº ÌôúÏÑ±Ìôî
              document.querySelectorAll(".domain-item").forEach(li => {
                li.classList.remove("active");
                if (li.dataset.domain === state.domainId) {
                  li.classList.add("active");
                }
              });

              // ÏÑ∏Î∂Ä Í≥ºÎ™© Î†åÎçîÎßÅ
              renderSubjects(seriesKey, targetDomain);

              // 3. ÏÑ∏Î∂Ä Í≥ºÎ™© Î≥µÏõê
              if (state.subjectId) {
                const targetSubject = targetDomain.subs.find(s =>
                  s.id === state.subjectId &&
                  (s.offset || null) === (state.subjectOffset || null)
                );

                if (targetSubject) {
                  currentSelectedSubject = targetSubject;

                  // ÏÑ∏Î∂Ä Í≥ºÎ™© ÌôúÏÑ±Ìôî
                  setTimeout(() => {
                    document.querySelectorAll(".subject-item").forEach(li => {
                      li.classList.remove("active");
                      // offsetÎèÑ Ìï®Íªò ÌôïÏù∏ÌïòÏó¨ Ï†ïÌôïÌïú Í≥ºÎ™© ÏÑ†ÌÉù (ÏÑ∏Í≥ÑÎ¨∏Ìïô(1) vs ÏÑ∏Í≥ÑÎ¨∏Ìïô(2) Íµ¨Î∂Ñ)
                      const liOffset = li.dataset.offset ? parseInt(li.dataset.offset) : null;
                      const stateOffset = state.subjectOffset || null;
                      if (li.dataset.sub === state.subjectId && liOffset === stateOffset) {
                        li.classList.add("active");
                      }
                    });

                    // Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ Î≥ÄÍ≤Ω Î∞è Îã®Ïõê Î™©Î°ù Î†åÎçîÎßÅ
                    changeBackgroundImage(targetSubject);
                    renderUnits(seriesKey, targetDomain, targetSubject);

                    console.log('‚úÖ Î©îÎâ¥ ÏÉÅÌÉú Î≥µÏõê ÏôÑÎ£å:', state);
                  }, 100);
                }
              }
            }
          }

          return; // Î≥µÏõê ÏÑ±Í≥µ
        } catch (e) {
          console.error('‚ùå Î©îÎâ¥ ÏÉÅÌÉú Î≥µÏõê Ïã§Ìå®:', e);
        }
      }

      // ‚úÖ sessionStorage ÏÉÅÌÉúÍ∞Ä ÏóÜÏúºÎ©¥ localStorageÏùò ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉù Î≥µÏõê
      if (savedSeries && openedSeries.includes(savedSeries)) {
        console.log('üîÑ Ï†ÄÏû•Îêú ÏãúÎ¶¨Ï¶à Î≥µÏõê:', savedSeries);
        currentSelectedSeries = savedSeries;
        renderDomains(savedSeries);

        // ÏãúÎ¶¨Ï¶à UI ÌôúÏÑ±Ìôî
        document.querySelectorAll("#seriesList .series-item").forEach(li => {
          li.classList.remove("active");
          if (li.dataset.series === savedSeries) {
            li.classList.add("active");
          }
        });

        // ÏÑ§Î™Ö ÌÖçÏä§Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
        document.getElementById("unitTitle").textContent = "Îã®Ïõê ÏÑ†ÌÉù";
        document.getElementById("unitDesc").textContent =
          seriesInfo[savedSeries].desc + " ¬∑ Î∂ÑÏïºÏôÄ Í≥ºÎ™©ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.";
        return;
      }

      // Ï†ÄÏû•Îêú ÏÉÅÌÉú ÏóÜÏúºÎ©¥ Í∏∞Î≥∏Í∞íÏúºÎ°ú ÏãúÏûë
      currentSelectedSeries = "BRAINUP";
      renderDomains("BRAINUP");
    }

    /* 6. Î∂ÑÏïº ÌëúÏãú */
    function renderDomains(seriesKey) {
      domainList.innerHTML = "";
      const domainData = domainsBySeries[seriesKey] || domainsBySeries["BRAINON"];

      domainData.forEach(dom => {
        const li = document.createElement("li");
        li.className = "domain-item";
        li.dataset.domain = dom.id;
        li.innerHTML = `<span>${dom.label}</span><span class="meta">${dom.subs.length}Í≥ºÎ™©</span>`;
        li.addEventListener("click", () => {
          document.querySelectorAll(".domain-item").forEach(x => x.classList.remove("active"));
          li.classList.add("active");
          currentSelectedDomain = dom;
          currentSelectedSubject = null;
          renderSubjects(seriesKey, dom);
          unitList.innerHTML = "";
          document.getElementById("unitTitle").textContent = dom.label;
          document.getElementById("unitDesc").textContent = "ÏÑ∏Î∂Ä Í≥ºÎ™©ÏùÑ ÏÑ†ÌÉùÌïòÎ©¥ 01~Î≤àÌò∏Í∞Ä ÌëúÏãúÎê©ÎãàÎã§.";
          unitSearch.value = "";
        });
        domainList.appendChild(li);
      });
    }

    /* 7. ÏÑ∏Î∂Ä Í≥ºÎ™© ÌëúÏãú */
    function renderSubjects(seriesKey, domainObj) {
      subjectList.innerHTML = "";
      domainObj.subs.forEach(sub => {
        const li = document.createElement("li");
        li.className = "subject-item";
        li.dataset.sub = sub.id;
        li.dataset.offset = sub.offset || ''; // ‚úÖ offset Ï†ïÎ≥¥ Ï∂îÍ∞Ä
        // ÏôÑÎ£å Í∞úÏàò Í≥ÑÏÇ∞ - BRAINUP, BRAINFIT, BRAINDEEP ÏãúÎ¶¨Ï¶à ÏßÄÏõê
        let completedCount = 0;
        if (seriesKey === 'BRAINUP') {
          completedCount = getCompletedCountForSubject(sub.id, sub.count, sub.offset || 0);
        } else if (seriesKey === 'BRAINFIT') {
          completedCount = getCompletedCountForFitSubject(sub.id, sub.count);
        } else if (seriesKey === 'BRAINDEEP') {
          completedCount = getCompletedCountForDeepSubject(sub.id, sub.count);
        }
        li.innerHTML = `<span>${sub.label}</span><span class="meta">${completedCount}/${sub.count}Í∞ú</span>`;
        li.addEventListener("click", () => {
          document.querySelectorAll(".subject-item").forEach(x => x.classList.remove("active"));
          li.classList.add("active");
          currentSelectedSubject = sub;
          changeBackgroundImage(sub);  // Î∞∞Í≤Ω Ïù¥ÎØ∏ÏßÄ Î≥ÄÍ≤Ω (sub Ï†ÑÏ≤¥ Ï†ÑÎã¨)
          renderUnits(seriesKey, domainObj, sub);
        });
        subjectList.appendChild(li);
      });
    }

    /* 8. Îã®Ïõê ÌëúÏãú */
    function renderUnits(seriesKey, domainObj, subObj) {
      unitList.innerHTML = "";
      document.getElementById("unitTitle").textContent =
        `${seriesInfo[seriesKey].name} / ${domainObj.label} / ${subObj.label}`;
      document.getElementById("unitDesc").textContent =
        `${subObj.label} ${subObj.count}Í∞ú Îã®ÏõêÏûÖÎãàÎã§.`;

      unitSearch.value = "";
      currentUnits = [];

      // offsetÏù¥ ÏûàÎäî Í≤ΩÏö∞ (Ïòà: ÏÑ∏Í≥ÑÎ¨∏Ìïô(2), Ïù∏Î¨º(2)) Î≥ÑÎèÑ ÌÇ§ ÏÇ¨Ïö©
      const keyId = subObj.offset ? `${subObj.id}_part2` : subObj.id;
      const key = `${seriesKey}.${domainObj.id}.${keyId}`;
      const titles = unitTitleOverrides[key] || [];
      const startNum = (subObj.offset || 0) + 1; // offsetÏù¥ ÏûàÏúºÎ©¥ ÏãúÏûë Î≤àÌò∏ Ï°∞Ï†ï

      for (let i = 1; i <= subObj.count; i++) {
        const actualNum = startNum + i - 1; // Ïã§Ï†ú ÌååÏùº Î≤àÌò∏
        const num = String(actualNum).padStart(2, "0");
        // offsetÏù¥ ÏûàÎäî Í≤ΩÏö∞ i-1 Ïù∏Îç±Ïä§ ÏÇ¨Ïö© (1~40 ‚Üí 0~39)
        const titleIndex = subObj.offset ? (i - 1) : (actualNum - 1);
        let title = titles[titleIndex] || `${subObj.label} ${num} ÌïôÏäµÌïòÍ∏∞`;

        // ÌååÏùºÎ™Ö Î≥ÄÌôò: soc‚Üísoc_, geo‚Üígeo_, law‚Üílaw_, pol‚Üípol_, bio‚Üíbio_, earth‚Üíearth_, physics‚Üíphysics_, chem‚Üíchem_, modern‚Üímodern_, classic‚Üíclassic_, world‚Üíworld_, people‚Üípeople_
        let filename = `${subObj.id}_${num}.html`;
        if (subObj.id === 'soc') {
          filename = `soc_${num}.html`;
        } else if (subObj.id === 'geo') {
          filename = `geo_${num}.html`;
        } else if (subObj.id === 'law') {
          filename = `law_${num}.html`;
        } else if (subObj.id === 'pol') {
          filename = `pol_${num}.html`;
        } else if (subObj.id === 'bio') {
          filename = `bio_${num}.html`;
        } else if (subObj.id === 'earth') {
          filename = `earth_${num}.html`;
        } else if (subObj.id === 'physics') {
          filename = `physics_${num}.html`;
        } else if (subObj.id === 'chem') {
          filename = `chem_${num}.html`;
        } else if (subObj.id === 'modern') {
          filename = `modern_${num}.html`;
        } else if (subObj.id === 'classic') {
          filename = `classic_${num}.html`;
        } else if (subObj.id === 'world1') {
          filename = `world1_${num}.html`;
        } else if (subObj.id === 'world2') {
          filename = `world2_${num}.html`;
        } else if (subObj.id === 'people') {
          filename = `people_${num}.html`;
        } else if (subObj.id === 'people1') {
          filename = `people1_${num}.html`;
        } else if (subObj.id === 'people2') {
          filename = `people2_${num}.html`;
        }

        // ‚úÖ BRAINFIT/BRAINDEEP ÏãúÎ¶¨Ï¶à: BRAINUP Ìè¥ÎçîÏùò fit_/deep_ ÌååÏùº ÏÇ¨Ïö©
        let actualSeriesKey = seriesKey;

        if (seriesKey === 'BRAINFIT') {
          actualSeriesKey = 'BRAINUP';
          filename = `fit_${filename}`;
        } else if (seriesKey === 'BRAINDEEP') {
          actualSeriesKey = 'BRAINUP';
          filename = `deep_${filename}`;
        }

        currentUnits.push({
          label: `${subObj.label} ${num} ${title}`.trim(),
          num,
          path: `./${actualSeriesKey}/${domainObj.id}/${filename}`
        });
      }

      renderUnitList(currentUnits);
    }

    /* 9. Îã®Ïõê Î¶¨Ïä§Ìä∏ Ï∂úÎ†• */
    async function renderUnitList(units) {
      // Îã®Ïõê Îì±Í∏â Îç∞Ïù¥ÌÑ∞ Î°úÎìú
      unitGradesData = await fetchUnitGrades();
      unitList.innerHTML = "";
      units.forEach((u, unitIndex) => {
        const li = document.createElement("li");
        li.className = "unit-item";
        li.dataset.page = u.path;
        li.dataset.unitIndex = unitIndex;  // Îã®Ïõê Ïù∏Îç±Ïä§ Ï†ÄÏû•

        // Í≥ºÏ†ú Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• (ÎìúÎûòÍ∑∏/Î™®Î∞îÏùº Ï∂îÍ∞ÄÏö©)
        li.dataset.taskData = JSON.stringify({
          unitId: u.path,
          title: u.label,
          series: currentSelectedSeries ? seriesInfo[currentSelectedSeries].name : '',
          domain: currentSelectedDomain ? currentSelectedDomain.label : '',
          subject: currentSelectedSubject ? currentSelectedSubject.label : ''
        });

        // Îã®Ïõê ID Ï∂îÏ∂ú (Ïòà: "BRAINUP/social/geo_01.html" ‚Üí "geo_01")
        let unitId = u.path.split('/').pop().replace('.html', '');
        li.dataset.unitId = unitId;  // Îã®Ïõê ID Ï†ÄÏû•

        // ‚úÖ world2_XX, people2_XX ÌòïÏãù Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö© (ÏÑúÎ≤Ñ APIÏôÄ ÎèôÏùºÌïòÍ≤å)
        // ÏÑúÎ≤ÑÏóêÏÑú world2_XX ÌòïÏãù Í∑∏ÎåÄÎ°ú Ï†ÄÏû•ÌïòÎØÄÎ°ú Î≥ÄÌôòÌïòÏßÄ ÏïäÏùå

        // Ìï¥Îãπ Îã®ÏõêÏùò Îì±Í∏â Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
        const gradeInfo = unitGradesData[unitId];
        const stars = gradeInfo ? getStarsForGrade(gradeInfo.grade) : '';

        // Îã®Ïõê Î†åÎçîÎßÅ (Ïû†Í∏à ÌëúÏãúÎäî ÌÅ¥Î¶≠ Ïãú Ï≤¥ÌÅ¨)
        li.innerHTML = `
          <span>${u.label}</span>
          <span class="unit-right">
            ${stars ? `<span class="unit-stars">${stars}</span>` : ''}
            <span class="status-badge status-default" draggable="true">‚úèÔ∏è ÎØ∏ÏôÑÎ£å</span>
          </span>
        `;

        // Îã®Ïõê ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏
        li.addEventListener("click", async (e) => {
          // ÏÉÅÌÉú Î±ÉÏßÄ ÌÅ¥Î¶≠ ÏãúÏóêÎäî Îã®Ïõê Ïó¥Í∏∞ Î∞©ÏßÄ
          if (e.target.classList.contains('status-badge')) {
            return;
          }

          // üîí Ïã§ÏãúÍ∞Ñ Ïû†Í∏à Ï≤¥ÌÅ¨ (Ï∫êÏãú ÏÇ¨Ïö©)
          const saved = localStorage.getItem('currentStudent');
          if (saved) {
            try {
              const student = JSON.parse(saved);
              const data = await ApiCache.fetch(`/api/gate-quiz/status?grade=${encodeURIComponent(student.grade)}&name=${encodeURIComponent(student.name)}`);

              if (data && data.ok) {
                // Ï†ÑÏó≠ Î≥ÄÏàò ÏóÖÎç∞Ïù¥Ìä∏
                passedGates = data.highestPassedGate || 0;
                completedUnitsCount = data.completedUnits || 0;
                completedUnitIds = data.completedUnitIds || [];

                console.log(`[Lock Check] API ÏùëÎãµ - ÌÜµÍ≥ºÍ¥ÄÎ¨∏:${passedGates}, ÏôÑÎ£åÎã®Ïõê:${completedUnitsCount}, ÌÅ¥Î¶≠Îã®Ïõê:${unitId}`);

                // Ïû†Í∏à Ï≤¥ÌÅ¨
                if (!canAccessUnit(unitId)) {
                  const requiredGate = getRequiredGate();
                  showLockModal(requiredGate);
                  return;
                }
              }
            } catch (err) {
              console.error('[Lock Check Error]', err);
            }
          }

          // Îã®Ïõê ÌååÏùº Ï°¥Ïû¨ Ïó¨Î∂Ä ÌôïÏù∏
          fetch(u.path, { method: "HEAD" })
            .then(res => {
              if (res.ok) {
                openUnitModal(u.path);
              } else {
                showPendingModal();
              }
            })
            .catch(() => showPendingModal());
        });

        // ÏÉÅÌÉú Î±ÉÏßÄ ÎìúÎûòÍ∑∏ Ïù¥Î≤§Ìä∏
        const statusBadge = li.querySelector('.status-badge');

        // PC: ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠
        statusBadge.addEventListener('dragstart', (e) => {
          e.stopPropagation();
          li.classList.add('dragging');
          e.dataTransfer.effectAllowed = 'copy';
          e.dataTransfer.setData('text/plain', li.dataset.taskData);
        });

        statusBadge.addEventListener('dragend', (e) => {
          li.classList.remove('dragging');
        });

        // Î™®Î∞îÏùº: ÌÅ¥Î¶≠ÏúºÎ°ú Í≥ºÏ†úÎ∂ÄÏó¨ ÌåùÏóÖ
        statusBadge.addEventListener('click', (e) => {
          e.stopPropagation();
          showAssignTaskModal(li.dataset.taskData);
        });

        unitList.appendChild(li);
      });

      // Î™©Î°ù Í∑∏Î¶¥ ÎïåÎßàÎã§ Ï†ÄÏû•Îêú ÏôÑÎ£å ÏÉÅÌÉú Îã§Ïãú Î∞òÏòÅ
      restoreProgressOnRenderedList();
    }

    /* 10. Í≤ÄÏÉâ */
    unitSearch.addEventListener("input", (e) => {
      const q = e.target.value.trim();
      if (!q) {
        renderUnitList(currentUnits);
        return;
      }
      const filtered = currentUnits.filter(u =>
        u.label.includes(q) || u.num.includes(q)
      );
      renderUnitList(filtered);
    });

    // ‚úÖ ÏÉÅÌÉúÎ•º Î∞îÍæ∏Îäî Í≥µÏö© Ìï®Ïàò
    function updateLessonStatus(pageKey, status) {
      const li = document.querySelector(`.unit-item[data-page="${pageKey}"]`);
      if (!li) return;
      const badge = li.querySelector('.status-badge');
      if (!badge) return;

      badge.classList.remove('status-default', 'status-done');

      if (status === 'done') {
        badge.classList.add('status-done');
        badge.textContent = 'üèÜ ÌïôÏäµÏôÑÎ£å';
      } else {
        badge.classList.add('status-default');
        badge.textContent = '‚úèÔ∏è ÎØ∏ÏôÑÎ£å';
      }
    }

    /* üîê ÌïôÏÉù Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ */
    function getCurrentStudent() {
      const saved = localStorage.getItem('currentStudent');
      if (!saved) return null;
      try { return JSON.parse(saved); }
      catch(e) { return null; }
    }

    /* üîê ÌïôÏÉùÌÇ§ ÎßåÎì§Í∏∞ (Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄÎûë Í∞ôÏùÄ Í∑úÏπô) */
    function buildStudentKey(stu) {
      const cleanPhone = (stu.phone || '').replace(/\D/g, '');
      const cleanName = (stu.name || '').trim();
      const cleanGrade = (stu.grade || '').trim();
      return `${cleanGrade}_${cleanName}_${cleanPhone}`;
    }

    /* ‚≠ê Îã®ÏõêÎ≥Ñ Îì±Í∏â Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞ (Ï∫êÏãú ÏÇ¨Ïö©) */
    async function fetchUnitGrades() {
      try {
        const stu = getCurrentStudent();
        if (!stu) {
          console.log('‚≠ê Î°úÍ∑∏Ïù∏Îêú ÌïôÏÉù Ï†ïÎ≥¥ ÏóÜÏùå');
          return {};
        }

        const url = `/api/unit-grades?grade=${encodeURIComponent(stu.grade || '')}&name=${encodeURIComponent(stu.name || '')}`;
        const data = await ApiCache.fetch(url);
        console.log('‚≠ê Îã®Ïõê Îì±Í∏â Îç∞Ïù¥ÌÑ∞ Î°úÎìú:', Object.keys(data).length, 'Í∞ú');
        // ÎîîÎ≤ÑÍ∑∏: fit_world1 Í¥ÄÎ†® ÌÇ§ Î™®Îëê Ï∂úÎ†•
        const world1Keys = Object.keys(data).filter(k => k.includes('world1'));
        console.log('‚≠ê [ÎîîÎ≤ÑÍ∑∏] fit_world1 Í¥ÄÎ†® ÌÇ§:', world1Keys);
        return data;
      } catch (error) {
        console.error('‚≠ê Îã®Ïõê Îì±Í∏â Ï°∞Ìöå Ïò§Î•ò:', error);
        return {};
      }
    }

    /* ‚≠ê Îì±Í∏âÎ≥Ñ Î≥Ñ Í∞úÏàò Î∞òÌôò */
    function getStarsForGrade(grade) {
      const starsMap = {
        'Ïö∞Ïàò': '‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê',
        'ÏñëÌò∏': '‚≠ê‚≠ê‚≠ê‚≠ê',
        'Î≥¥ÌÜµ': '‚≠ê‚≠ê‚≠ê',
        'Í≤©Î†§': '‚≠ê‚≠ê'
      };
      return starsMap[grade] || '';
    }

    /* ‚úÖ ÌòÑÏû¨ Î°úÍ∑∏Ïù∏Ìïú ÌïôÏÉùÏùò ÏôÑÎ£å Î¶¨Ïä§Ìä∏ Î∂àÎü¨Ïò§Í∏∞ */
    function getStudentProgressList() {
      const stu = getCurrentStudent();
      if (!stu) return [];  // Î°úÍ∑∏Ïù∏ Ïïà ÎêòÏñ¥ ÏûàÏúºÎ©¥ ÎπàÎ∞∞Ïó¥
      const stuKey = buildStudentKey(stu);
      const progressKey = `dan-progress:${stuKey}`;
      return JSON.parse(localStorage.getItem(progressKey) || '[]');
    }

    // ‚≠ê ÏÑ∏Î∂Ä Í≥ºÎ™©Î≥Ñ ÏôÑÎ£åÎêú Îã®Ïõê Í∞úÏàò Í≥ÑÏÇ∞
    function getCompletedCountForSubject(subjectId, totalCount, offset = 0) {
      const stu = getCurrentStudent();
      if (!stu) return 0;

      const stuKey = buildStudentKey(stu);
      const keyPrefix = `dan-progress:${stuKey}:`;

      let completedCount = 0;
      // offsetÏù¥ ÏûàÏúºÎ©¥ (offset+1)Î∂ÄÌÑ∞ ÏãúÏûë (Ïòà: ÏÑ∏Í≥ÑÎ¨∏Ìïô(2)Îäî 41~80)
      for (let i = offset + 1; i <= offset + totalCount; i++) {
        const num = String(i).padStart(2, "0");
        const unitCode = `${subjectId}_${num}`; // world_41, world_42, ...
        const storageKey = keyPrefix + unitCode;

        try {
          const data = localStorage.getItem(storageKey);
          if (data) {
            const saved = JSON.parse(data);
            if (Array.isArray(saved) && saved.length > 0) {
              completedCount++;
            }
          }
        } catch(e) {
          // ignore
        }
      }
      return completedCount;
    }

    // ‚≠ê BRAINFIT ÏãúÎ¶¨Ï¶à Í≥ºÎ™©Î≥Ñ ÏôÑÎ£åÎêú Îã®Ïõê Í∞úÏàò Í≥ÑÏÇ∞ (fit_bio_01 ÌòïÌÉú)
    function getCompletedCountForFitSubject(subjectId, totalCount) {
      const stu = getCurrentStudent();
      if (!stu) return 0;

      const stuKey = buildStudentKey(stu);
      const keyPrefix = `dan-progress:${stuKey}:`;

      let completedCount = 0;
      for (let i = 1; i <= totalCount; i++) {
        const num = String(i).padStart(2, "0");
        const unitCode = `fit_${subjectId}_${num}`; // fit_bio_01, fit_earth_02, ...
        const storageKey = keyPrefix + unitCode;

        try {
          const data = localStorage.getItem(storageKey);
          if (data) {
            // '1' ÌòïÏãù(Î†àÍ±∞Ïãú)Í≥º Î∞∞Ïó¥ ÌòïÏãù Î™®Îëê ÏßÄÏõê
            if (data === '1' || data === '"1"') {
              completedCount++;
            } else {
              const saved = JSON.parse(data);
              if (Array.isArray(saved) && saved.length > 0) {
                completedCount++;
              }
            }
          }
        } catch(e) {
          // ignore
        }
      }
      return completedCount;
    }

    // ‚≠ê BRAINDEEP ÏãúÎ¶¨Ï¶à Í≥ºÎ™©Î≥Ñ ÏôÑÎ£åÎêú Îã®Ïõê Í∞úÏàò Í≥ÑÏÇ∞ (deep_bio_01 ÌòïÌÉú)
    function getCompletedCountForDeepSubject(subjectId, totalCount) {
      const stu = getCurrentStudent();
      if (!stu) return 0;

      const stuKey = buildStudentKey(stu);
      const keyPrefix = `dan-progress:${stuKey}:`;

      let completedCount = 0;
      for (let i = 1; i <= totalCount; i++) {
        const num = String(i).padStart(2, "0");
        const unitCode = `deep_${subjectId}_${num}`; // deep_bio_01, deep_earth_02, ...
        const storageKey = keyPrefix + unitCode;

        try {
          const data = localStorage.getItem(storageKey);
          if (data) {
            // '1' ÌòïÏãù(Î†àÍ±∞Ïãú)Í≥º Î∞∞Ïó¥ ÌòïÏãù Î™®Îëê ÏßÄÏõê
            if (data === '1' || data === '"1"') {
              completedCount++;
            } else {
              const saved = JSON.parse(data);
              if (Array.isArray(saved) && saved.length > 0) {
                completedCount++;
              }
            }
          }
        } catch(e) {
          // ignore
        }
      }
      return completedCount;
    }

    // üîÑ ÏÑúÎ≤ÑÏóêÏÑú ÏµúÏã† ÏôÑÎ£å ÏÉÅÌÉú Í∞ÄÏ†∏ÏôÄÏÑú localStorageÏóê Ï†ÄÏû•
    async function syncCompletionStatusFromServer() {
      try {
        const stu = getCurrentStudent();
        if (!stu) return;

        const stuKey = buildStudentKey(stu);
        const keyPrefix = `dan-progress:${stuKey}:`;

        // ‚úÖ BRAINUPÍ≥º BRAINFIT ÏãúÎ¶¨Ï¶à Î™®Îëê Í∞ÄÏ†∏Ïò§Í∏∞
        const urlBrainUp = `/api/completion-status?grade=${encodeURIComponent(stu.grade || '')}&name=${encodeURIComponent(stu.name || '')}&series=BRAINÏóÖ`;
        const urlBrainFit = `/api/completion-status?grade=${encodeURIComponent(stu.grade || '')}&name=${encodeURIComponent(stu.name || '')}&series=BRAINÌïè`;

        const [dataBrainUp, dataBrainFit] = await Promise.all([
          ApiCache.fetch(urlBrainUp),
          ApiCache.fetch(urlBrainFit)
        ]);

        console.log('[syncCompletionStatus] BRAINUP ÏùëÎãµ:', dataBrainUp);
        console.log('[syncCompletionStatus] BRAINFIT ÏùëÎãµ:', dataBrainFit);

        // Îëê ÏãúÎ¶¨Ï¶àÏùò completedUnits Ìï©ÏπòÍ∏∞
        let allCompletedUnits = [];
        if (dataBrainUp && dataBrainUp.ok && Array.isArray(dataBrainUp.completedUnits)) {
          allCompletedUnits = allCompletedUnits.concat(dataBrainUp.completedUnits);
        }
        if (dataBrainFit && dataBrainFit.ok && Array.isArray(dataBrainFit.completedUnits)) {
          // ‚úÖ BRAINFIT Îã®ÏõêÏùÄ fit_ Ï†ëÎëêÏñ¥ Ï∂îÍ∞Ä (DBÏóê bio_01Î°ú Ï†ÄÏû•ÎêòÏñ¥ ÏûàÏùå ‚Üí fit_bio_01Î°ú Î≥ÄÌôò)
          const fitUnits = dataBrainFit.completedUnits.map(unit => {
            // Ïù¥ÎØ∏ fit_ Ï†ëÎëêÏñ¥Í∞Ä ÏûàÏúºÎ©¥ Í∑∏ÎåÄÎ°ú, ÏóÜÏúºÎ©¥ Ï∂îÍ∞Ä
            return unit.startsWith('fit_') ? unit : `fit_${unit}`;
          });
          allCompletedUnits = allCompletedUnits.concat(fitUnits);
        }

        if (allCompletedUnits.length === 0) {
          console.warn('[syncCompletionStatus] ÏôÑÎ£åÎêú Îã®Ïõê ÏóÜÏùå');
          return;
        }

        console.log('[syncCompletionStatus] Ï¥ù ÏôÑÎ£å Îã®Ïõê:', allCompletedUnits.length);

        // Í∏∞Ï°¥ Î°úÏßÅ Ïú†ÏßÄ (data.completedUnits ‚Üí allCompletedUnitsÎ°ú Î≥ÄÍ≤Ω)
        if (allCompletedUnits.length > 0) {
          allCompletedUnits.forEach(unit => {
            const key = keyPrefix + unit;
            // Î∞∞Ïó¥ ÌòïÏãùÏúºÎ°ú Ï†ÄÏû• (ÌïôÏäµ ÌéòÏù¥ÏßÄÏôÄ ÎèôÏùºÌïú Î∞©Ïãù)
            let saved = [];
            try {
              const existing = localStorage.getItem(key);
              if (existing) {
                saved = JSON.parse(existing);
                if (!Array.isArray(saved)) saved = [];
              }
            } catch(e) {
              saved = [];
            }

            // Í∏∞Î≥∏ ÌéòÏù¥ÏßÄ ID Ï∂îÍ∞Ä (ÎπÑÏñ¥ÏûàÏúºÎ©¥)
            // ‚úÖ Îã®Ïõê ÏΩîÎìúÏóê Îî∞Îùº Ïò¨Î∞îÎ•∏ Ìè¥Îçî ÏÑ§Ï†ï (FIT/DEEP ÏãúÎ¶¨Ï¶à Ìè¨Ìï®)
            if (saved.length === 0) {
              let folder = 'social';  // Í∏∞Î≥∏Í∞í
              // FIT ÏãúÎ¶¨Ï¶à: fit_bio_01, fit_earth_02 Îì±
              if (unit.startsWith('fit_bio_') || unit.startsWith('fit_chem_') ||
                  unit.startsWith('fit_physics_') || unit.startsWith('fit_earth_')) {
                folder = 'science';
              } else if (unit.startsWith('fit_modern_') || unit.startsWith('fit_classic_')) {
                folder = 'korlit';
              } else if (unit.startsWith('fit_world_') || unit.startsWith('fit_world1_') || unit.startsWith('fit_world2_')) {
                folder = 'worldlit';
              } else if (unit.startsWith('fit_people_') || unit.startsWith('fit_people1_') || unit.startsWith('fit_people2_')) {
                folder = 'person';
              }
              // DEEP ÏãúÎ¶¨Ï¶à: deep_bio_01, deep_earth_02 Îì±
              else if (unit.startsWith('deep_bio_') || unit.startsWith('deep_chem_') ||
                  unit.startsWith('deep_physics_') || unit.startsWith('deep_earth_')) {
                folder = 'science';
              } else if (unit.startsWith('deep_modern_') || unit.startsWith('deep_classic_')) {
                folder = 'korlit';
              } else if (unit.startsWith('deep_world_') || unit.startsWith('deep_world1_') || unit.startsWith('deep_world2_')) {
                folder = 'worldlit';
              } else if (unit.startsWith('deep_people_') || unit.startsWith('deep_people1_') || unit.startsWith('deep_people2_')) {
                folder = 'person';
              }
              // BRAINUP ÏãúÎ¶¨Ï¶à
              else if (unit.startsWith('bio_') || unit.startsWith('chem_') ||
                  unit.startsWith('physics_') || unit.startsWith('earth_')) {
                folder = 'science';
              } else if (unit.startsWith('classic_') || unit.startsWith('modern_')) {
                folder = 'korlit';
              } else if (unit.startsWith('world1_') || unit.startsWith('world2_') || unit.startsWith('world_')) {
                folder = 'worldlit';
              } else if (unit.startsWith('people1_') || unit.startsWith('people2_') || unit.startsWith('people_')) {
                folder = 'person';
              }
              saved.push(`BRAINUP_${folder}_${unit}`);
            }

            localStorage.setItem(key, JSON.stringify(saved));
            console.log('[syncCompletionStatus] Ï†ÄÏû•:', key);
          });

          console.log('[syncCompletionStatus] ÏôÑÎ£å ÏÉÅÌÉú ÎèôÍ∏∞Ìôî ÏôÑÎ£å:', allCompletedUnits.length, 'Í∞ú');
        }
      } catch (e) {
        console.warn('[syncCompletionStatus] Ïò§Î•ò', e);
      }
    }

    // ‚úÖ localStorageÏóê Ï†ÄÏû•Ìï¥Îëî ÏôÑÎ£åÎêú Îã®ÏõêÎì§ÏùÑ Î©îÎâ¥Ïóê Î∞òÏòÅ (ÌïôÏÉùÎ≥Ñ)
    function restoreProgressOnRenderedList() {
      const stu = getCurrentStudent();
      if (!stu) return;

      // 1Ô∏è‚É£ Í∏∞Ï°¥ Î∞©Ïãù: Î∞∞Ïó¥Î°ú Ï†ÄÏû•Îêú ÏôÑÎ£å Î™©Î°ù (ÌïòÏúÑ Ìò∏Ìôò)
      const saved = getStudentProgressList(); // ["./BRAINUP/social/geo_01.html", ...]
      saved.forEach(pageKey => {
        updateLessonStatus(pageKey, 'done');
      });

      // 2Ô∏è‚É£ ÏÉà Î∞©Ïãù: Í∞úÎ≥Ñ ÌÇ§Î°ú Ï†ÄÏû•Îêú ÏôÑÎ£å ÏÉÅÌÉú (ÌïôÏäµ ÌéòÏù¥ÏßÄÏôÄ ÎèôÏùºÌïú Î∞©Ïãù)
      const stuKey = buildStudentKey(stu);
      const keyPrefix = `dan-progress:${stuKey}:`;

      // ÌòÑÏû¨ ÌôîÎ©¥Ïóê ÌëúÏãúÎêú Î™®Îì† Îã®Ïõê li ÏàúÌöå
      document.querySelectorAll('.unit-item').forEach(li => {
        const pageKey = li.dataset.page; // "./BRAINUP/social/geo_01.html"
        if (!pageKey) return;

        // Í≤ΩÎ°úÏóêÏÑú Îã®Ïõê ÏΩîÎìú Ï∂îÏ∂ú (geo_01, geo_02 Îì±)
        const match = pageKey.match(/\/([^\/]+)\.html$/);
        if (!match) return;
        const unitCode = match[1]; // "geo_01"

        // localStorageÏóêÏÑú ÏôÑÎ£å ÏÉÅÌÉú ÌôïÏù∏ (Î∞∞Ïó¥ Î∞©Ïãù + Î†àÍ±∞Ïãú '1' ÌòïÏãù)
        const storageKey = keyPrefix + unitCode;
        let isCompleted = false;
        try {
          const data = localStorage.getItem(storageKey);
          if (data) {
            // '1' ÌòïÏãù(Î†àÍ±∞Ïãú)Í≥º Î∞∞Ïó¥ ÌòïÏãù Î™®Îëê ÏßÄÏõê
            if (data === '1' || data === '"1"') {
              isCompleted = true;
            } else {
              const saved = JSON.parse(data);
              if (Array.isArray(saved) && saved.length > 0) {
                isCompleted = true;
              }
            }
          }
        } catch(e) {
          // ignore
        }

        // ÏôÑÎ£å ÏÉÅÌÉúÎ©¥ ÌëúÏãú
        if (isCompleted) {
          updateLessonStatus(pageKey, 'done');
        }
      });
    }

    // ‚úÖ ÏÑ∏Î∂ÄÍ≥ºÎ™© Î¶¨Ïä§Ìä∏Ïùò ÏôÑÎ£å Í∞úÏàò(X/20Í∞ú) ÏóÖÎç∞Ïù¥Ìä∏ (sync ÏôÑÎ£å ÌõÑ Ìò∏Ï∂ú)
    function updateSubjectCompletionCounts() {
      // ÌòÑÏû¨ ÏÑ†ÌÉùÎêú ÏãúÎ¶¨Ï¶à ÌôïÏù∏
      const seriesKey = currentSelectedSeries || 'BRAINUP';

      // ÌòÑÏû¨ ÌôîÎ©¥Ïóê ÌëúÏãúÎêú Î™®Îì† ÏÑ∏Î∂ÄÍ≥ºÎ™© li ÏàúÌöå
      document.querySelectorAll('.subject-item').forEach(li => {
        const subId = li.dataset.sub;
        const offset = li.dataset.offset ? parseInt(li.dataset.offset) : 0;
        if (!subId) return;

        // ÌòÑÏû¨ ÎèÑÎ©îÏù∏ÏóêÏÑú Ìï¥Îãπ Í≥ºÎ™© Ï†ïÎ≥¥ Ï∞æÍ∏∞
        const domainData = domainsBySeries[seriesKey] || domainsBySeries["BRAINON"];
        let subInfo = null;
        for (const dom of domainData) {
          const found = dom.subs.find(s => s.id === subId && (s.offset || 0) === offset);
          if (found) {
            subInfo = found;
            break;
          }
        }
        if (!subInfo) return;

        // ÏôÑÎ£å Í∞úÏàò Îã§Ïãú Í≥ÑÏÇ∞
        let completedCount = 0;
        if (seriesKey === 'BRAINUP') {
          completedCount = getCompletedCountForSubject(subInfo.id, subInfo.count, subInfo.offset || 0);
        } else if (seriesKey === 'BRAINFIT') {
          completedCount = getCompletedCountForFitSubject(subInfo.id, subInfo.count);
        } else if (seriesKey === 'BRAINDEEP') {
          completedCount = getCompletedCountForDeepSubject(subInfo.id, subInfo.count);
        }

        // .meta Î∂ÄÎ∂ÑÎßå ÏóÖÎç∞Ïù¥Ìä∏
        const metaSpan = li.querySelector('.meta');
        if (metaSpan) {
          metaSpan.textContent = `${completedCount}/${subInfo.count}Í∞ú`;
        }
      });

      console.log('[updateSubjectCompletionCounts] ÏÑ∏Î∂ÄÍ≥ºÎ™© ÏôÑÎ£å Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å');
    }

    /* üîã Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥ Ï†úÏñ¥ (Îã®Ïõê Ïù¥ÎèôÏö©) */
    function hideLoadingScreen() {
      const loadingOverlay = document.getElementById('loadingOverlay');
      loadingOverlay.classList.remove('show');
    }

    function showLoadingScreen(targetUrl) {
      const overlay = document.getElementById('loadingOverlay');
      const bar = document.getElementById('loadingBar');
      const percent = document.getElementById('loadingPercent');
      const emoji = document.querySelector('.loading-emoji');
      const title = document.querySelector('.loading-title');
      const msg = document.querySelector('.loading-msg');

      if (!overlay || !bar || !percent) {
        window.location.href = targetUrl;
        return;
      }

      overlay.classList.add('show');
      // Í∏∞Î≥∏ Î™®ÎìúÎäî ÌïôÏäµ Î°úÎî© Ïä§ÌÉÄÏùº Ïú†ÏßÄ
      if (emoji) emoji.textContent = 'üêã';
      if (title) title.textContent = 'Î°úÎî© Ï§ë...';
      if (msg) msg.textContent = 'ÌïôÏäµ ÏûêÎ£åÎ•º Ï§ÄÎπÑÌïòÍ≥† ÏûàÏñ¥Ïöî.';

      bar.style.width = '0%';
      percent.textContent = '0%';

      let p = 0;
      const timer = setInterval(() => {
        p += 5;
        if (p > 100) p = 100;
        bar.style.width = p + '%';
        percent.textContent = p + '%';

        if (p === 100) {
          clearInterval(timer);
          setTimeout(() => {
            window.location.href = targetUrl;
          }, 500);
        }
      }, 80);
    }

    window.onbeforeunload = () => {
      hideLoadingScreen();
    };

    // üêã Î°úÍ∑∏Ïù∏ Ïãú Ï±óÎ¥á Î±ÉÏßÄ Ï¥àÍ∏∞Ìôî (Îß§Ïùº ÏûêÏ†ï 10Í∞ú Î¶¨ÏÖã)
    function initChatbotBadgeOnLogin() {
      const userStr = sessionStorage.getItem('user');
      if (!userStr) return;

      try {
        const user = JSON.parse(userStr);
        const chatbotBadgeKey = `chatbotBadge_${user.grade}_${user.name}`;
        const chatbotBadgeDateKey = `chatbotBadgeDate_${user.grade}_${user.name}`;

        const today = new Date().toISOString().split('T')[0];
        const savedDate = localStorage.getItem(chatbotBadgeDateKey);

        // ÎÇ†ÏßúÍ∞Ä Îã§Î•¥Î©¥ 10Í∞úÎ°ú Î¶¨ÏÖã
        if (savedDate !== today) {
          localStorage.setItem(chatbotBadgeKey, '10');
          localStorage.setItem(chatbotBadgeDateKey, today);
          console.log('üêã [Î°úÍ∑∏Ïù∏] Ï±óÎ¥á Î±ÉÏßÄ 10Í∞úÎ°ú Ï¥àÍ∏∞Ìôî');
        } else {
          console.log('üêã [Î°úÍ∑∏Ïù∏] Ïò§Îäò Ïù¥ÎØ∏ Ï¥àÍ∏∞ÌôîÎê®, Í∏∞Ï°¥ Î±ÉÏßÄ Ïú†ÏßÄ');
        }
      } catch(e) {
        console.error('Ï±óÎ¥á Î±ÉÏßÄ Ï¥àÍ∏∞Ìôî Ïò§Î•ò:', e);
      }
    }

    // üîª ÏÉÅÎã® ÏÇ¨Ïö©Ïûê ÌëúÏãú: localStorageÍ∞Ä Ïö∞ÏÑ†, ÏóÜÏúºÎ©¥ URL ÌååÎùºÎØ∏ÌÑ∞
    function showUserInfo() {
      const infoTarget = document.getElementById("user-info");
      if (!infoTarget) return;

      const stu = getCurrentStudent();
      if (stu) {
        infoTarget.textContent = `${stu.grade || ''} ${stu.name || ''}Îãò ÌôòÏòÅÌï©ÎãàÎã§!`.trim();
      } else {
        infoTarget.textContent = "Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.";
      }
    }

        // Ïã§Ï†úÎ°ú Î°úÍ∑∏ÏïÑÏõÉ Ïã§ÌñâÌïòÎäî Ìï®Ïàò (Î≤ÑÌäº/Îí§Î°úÍ∞ÄÍ∏∞ÏóêÏÑú Í≥µÏö©ÏúºÎ°ú ÏÇ¨Ïö©)
    async function performLogout() {
      const btn = document.getElementById('logoutBtn');
      const overlay = document.getElementById('loadingOverlay');
      const bar = document.getElementById('loadingBar');
      const percent = document.getElementById('loadingPercent');
      const emoji = document.querySelector('.loading-emoji');
      const title = document.querySelector('.loading-title');
      const msg = document.querySelector('.loading-msg');

      // üîÑ Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥Î•º "Î°úÍ∑∏ÏïÑÏõÉ Î™®Îìú"Î°ú ÏÇ¨Ïö©
      if (overlay && bar && percent) {
        overlay.classList.add('show');
        if (emoji) emoji.textContent = 'üö™';
        if (title) title.textContent = 'Î°úÍ∑∏ÏïÑÏõÉ Ï§ë...';
        if (msg) msg.textContent = 'Ïû†Ïãú ÌõÑ Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ÏúºÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§.';

        bar.style.width = '0%';
        percent.textContent = '0%';
      }

      if (btn) btn.disabled = true;

      let progressTimer = null;
      if (bar && percent) {
        progressTimer = setInterval(() => {
          let current = parseInt(percent.textContent) || 0;
          if (current < 95) {
            current += 5;
            bar.style.width = current + '%';
            percent.textContent = current + '%';
          }
        }, 80);
      }

      try {
        // ÌòÑÏû¨ ÌïôÏÉù Ï†ïÎ≥¥ Ï†úÍ±∞
        localStorage.removeItem('currentStudent');

        await fetch("/logout", {
          method: "POST",
          headers: { "Content-Type": "application/json" }
        });
      } catch (e) {
        console.error("logout error", e);
      } finally {
        if (bar && percent) {
          bar.style.width = '100%';
          percent.textContent = '100%';
        }
        if (progressTimer) clearInterval(progressTimer);

        setTimeout(() => {
          window.location.href = "/";
        }, 400);
      }
    }


    // ‚úÖ ÏûòÎ™ªÎêú localStorage ÌÇ§ ÏûêÎèô Ï†ïÎ¶¨ (Îçî Ïù¥ÏÉÅ ÏÇ¨Ïö©ÌïòÏßÄ ÏïäÏùå)
    // NOTE: world1_, world2_, people1_, people2_ ÌòïÏãùÏù¥ Ïù¥Ï†ú Ï†ïÏÉÅ Îã®Ïõê ÏΩîÎìúÏù¥ÎØÄÎ°ú ÏÇ≠Ï†úÌïòÏßÄ ÏïäÏùå
    function cleanupWrongUnitKeys() {
      // Ï†ïÎ¶¨Ìï† Ìå®ÌÑ¥ ÏóÜÏùå (Î™®Îì† Ìå®ÌÑ¥Ïù¥ Ï†ïÏÉÅ ÏΩîÎìúÎ°ú ÏÇ¨Ïö©Îê®)
      const wrongPatterns = [];
      const keysToRemove = [];

      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.includes('dan-progress:')) {
          for (const pattern of wrongPatterns) {
            if (key.includes(pattern)) {
              keysToRemove.push(key);
              break;
            }
          }
        }
      }

      keysToRemove.forEach(key => {
        localStorage.removeItem(key);
        console.log('[cleanupWrongUnitKeys] ÏÇ≠Ï†ú:', key);
      });

      if (keysToRemove.length > 0) {
        console.log('[cleanupWrongUnitKeys] Ï¥ù', keysToRemove.length, 'Í∞úÏùò ÏûòÎ™ªÎêú ÌÇ§ ÏÇ≠Ï†ú ÏôÑÎ£å');
      }
    }

    // ‚úÖ ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú: Ïú†Ï†ÄÏ†ïÎ≥¥ Î∞òÏòÅ + Îí§Î°úÍ∞ÄÍ∏∞Ïö© ÌûàÏä§ÌÜ†Î¶¨ 1Îã®Í≥Ñ ÏåìÍ∏∞
    document.addEventListener('DOMContentLoaded', () => {
      // üßπ ÏûòÎ™ªÎêú localStorage ÌÇ§ Ï†ïÎ¶¨ (world2_XX, people2_XX Îì±)
      cleanupWrongUnitKeys();

      // ü§ñ Î°úÍ∑∏Ïù∏ ÏßÅÌõÑ AI ÌïôÏäµ Ïù∏Ïãù ÌôîÎ©¥ ÌëúÏãú + ÏÉàÎ°úÍ≥†Ïπ®
      const justLoggedIn = sessionStorage.getItem('justLoggedIn');
      const aiRecognitionDone = sessionStorage.getItem('aiRecognitionDone');

      if (justLoggedIn === 'true' && aiRecognitionDone !== 'true') {
        // ÌîåÎûòÍ∑∏ Ï†úÍ±∞ (Î¨¥Ìïú Î£®ÌîÑ Î∞©ÏßÄ)
        sessionStorage.removeItem('justLoggedIn');
        sessionStorage.setItem('aiRecognitionDone', 'true');

        // üêã Î°úÍ∑∏Ïù∏ Ïãú Ï±óÎ¥á Î±ÉÏßÄ 10Í∞ú Ï¥àÍ∏∞Ìôî (Îß§Ïùº ÏûêÏ†ï Î¶¨ÏÖã)
        initChatbotBadgeOnLogin();

        // 1.5Ï¥à ÌõÑ ÏÉàÎ°úÍ≥†Ïπ®
        setTimeout(() => {
          location.reload();
        }, 1500);
        return; // ÎÇòÎ®∏ÏßÄ Ï¥àÍ∏∞Ìôî ÏΩîÎìú Ïã§Ìñâ Ï§ëÎã®
      }

      // AI Ïù∏Ïãù ÏôÑÎ£å ÌõÑÏóêÎäî ÌîåÎûòÍ∑∏ Ï†ïÎ¶¨
      if (aiRecognitionDone === 'true') {
        sessionStorage.removeItem('aiRecognitionDone');
      }

      // ‚úÖ URL ÌååÎùºÎØ∏ÌÑ∞ÏóêÏÑú gradeÏôÄ nameÏùÑ ÏùΩÏñ¥ÏÑú localStorageÏóê Ï†ÄÏû• (Í¥ÄÎ¶¨Ïûê ÌéòÏù¥ÏßÄÏóêÏÑú Ïù¥Îèô Ïãú)
      const urlParams = new URLSearchParams(window.location.search);
      const gradeFromUrl = urlParams.get('grade');
      const nameFromUrl = urlParams.get('name');

      if (gradeFromUrl && nameFromUrl) {
        console.log('üì• URLÏóêÏÑú ÌïôÏÉù Ï†ïÎ≥¥ Í∞êÏßÄ:', gradeFromUrl, nameFromUrl);
        const studentData = {
          grade: gradeFromUrl,
          name: nameFromUrl
        };
        localStorage.setItem('currentStudent', JSON.stringify(studentData));
        console.log('‚úÖ currentStudent Ï†ÄÏû• ÏôÑÎ£å');
      } else {
        console.log('‚ÑπÔ∏è URL ÌååÎùºÎØ∏ÌÑ∞ ÏóÜÏùå - Í∏∞Ï°¥ localStorage ÏÇ¨Ïö©');
      }

      showUserInfo();

      // ÌòÑÏû¨ Î©îÎâ¥ ÌéòÏù¥ÏßÄÎ•º Ìïú Î≤à Îçî pushÌï¥ÏÑú,
      // Ï≤´ Î≤àÏß∏ Îí§Î°úÍ∞ÄÍ∏∞Îäî popstateÎßå Î∞úÏÉùÌïòÍ≥† ÌôîÎ©¥ÏùÄ Í∑∏ÎåÄÎ°ú ÏûàÍ≤å ÎßåÎì§Í∏∞
      if (window.history && window.history.pushState) {
        history.pushState({ page: 'menu' }, '', location.href);
      }

      // ‚úÖ AI Í≥ºÏ†ú ÏïåÎ¶º Ï≤¥ÌÅ¨ (ÎãπÏùº Ï≤´ Î°úÍ∑∏Ïù∏Îßå)
      checkAITaskNotification();

      // ‚úÖ Í¥ÄÎ¶¨Ïûê Î∂ÄÏó¨ Í≥ºÏ†ú ÌôïÏù∏ ÌåùÏóÖ
      checkAssignedTasks();

      // üéâ Î∞∞Í≤Ω Îπà Í≥µÍ∞Ñ ÌÅ¥Î¶≠ Ïãú Ìè≠Ï£Ω Ìö®Í≥º + ÌïôÏäµ ÏßÑÎèÑ Í∞±Ïã†
      // Debounce timer to prevent duplicate sync calls
      let syncDebounceTimer = null;

      document.body.addEventListener('click', function(e) {
        // ÌÅ¥Î¶≠Ìïú ÏöîÏÜåÍ∞Ä Î≤ÑÌäº, ÎßÅÌÅ¨, ÏûÖÎ†• ÌïÑÎìú Îì±Ïù¥ ÏïÑÎãå Í≤ΩÏö∞ÏóêÎßå Ìè≠Ï£Ω Ïã§Ìñâ
        const clickedElement = e.target;
        const isInteractiveElement = clickedElement.closest('button, a, input, select, textarea, .series-item, .domain-item, .subject-item, .unit-item');

        if (!isInteractiveElement) {
          // ÌÅ¥Î¶≠ ÏúÑÏπòÎ•º Í∏∞Ï§ÄÏúºÎ°ú Ìè≠Ï£Ω ÌÑ∞Îú®Î¶¨Í∏∞
          const x = e.clientX / window.innerWidth;
          const y = e.clientY / window.innerHeight;

          confetti({
            particleCount: 150,
            spread: 80,
            origin: { x: x, y: y },
            colors: ['#667eea', '#764ba2', '#f093fb', '#f5576c', '#ffd700', '#ff6b6b']
          });

          // Clear existing sync timer
          if (syncDebounceTimer) {
            clearTimeout(syncDebounceTimer);
          }

          // üîÑ Ìè≠Ï£Ω Ìö®Í≥º ÌõÑ ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú Í∞±Ïã† (ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ® ÏóÜÏù¥)
          syncDebounceTimer = setTimeout(async () => {
            console.log('üîÑ ÏÑúÎ≤ÑÏóêÏÑú ÏµúÏã† Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Îäî Ï§ë...');
            await syncCompletionStatusFromServer(); // ÏÑúÎ≤ÑÏóêÏÑú ÏµúÏã† ÏôÑÎ£å ÏÉÅÌÉú Í∞ÄÏ†∏Ïò§Í∏∞
            console.log('üîÑ UI ÏóÖÎç∞Ïù¥Ìä∏ Ï§ë...');
            restoreProgressOnRenderedList(); // UIÏóê Î∞òÏòÅ
            updateSubjectCompletionCounts(); // ‚úÖ ÏÑ∏Î∂ÄÍ≥ºÎ™© ÏôÑÎ£å Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
            console.log('‚úÖ ÌïôÏäµ ÏßÑÎèÑ Í∞±Ïã† ÏôÑÎ£å!');
            syncDebounceTimer = null;
          }, 800); // Ìè≠Ï£Ω Ìö®Í≥º Í∞êÏÉÅ ÌõÑ ÏóÖÎç∞Ïù¥Ìä∏
        }
      });
    });

    // === AI Í≥ºÏ†ú ÏïåÎ¶º Ï≤¥ÌÅ¨ (ÎãπÏùº Ï≤´ Î°úÍ∑∏Ïù∏Îßå) ===
    async function checkAITaskNotification() {
      try {
        const user = JSON.parse(localStorage.getItem('currentStudent') || '{}');
        if (!user.grade || !user.name) return;

        const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
        const lastNotificationDate = localStorage.getItem('lastAINotificationDate');

        // Ïò§Îäò Ïù¥ÎØ∏ ÏïåÎ¶ºÏùÑ Î∞õÏïòÏúºÎ©¥ ÌëúÏãú Ïïà Ìï®
        if (lastNotificationDate === today) {
          console.log('üîî AI Í≥ºÏ†ú ÏïåÎ¶º: Ïù¥ÎØ∏ Ïò§Îäò ÌôïÏù∏Ìï®');
          return;
        }

        // ÎßàÏßÄÎßâ AI Î∂ÄÏó¨ ÏãúÍ∞Ñ Ï°∞Ìöå (Ï∫êÏãú ÏÇ¨Ïö©)
        const data = await ApiCache.fetch(`/api/ai-task/last-assigned?grade=${encodeURIComponent(user.grade)}&name=${encodeURIComponent(user.name)}`);

        if (data.ok && data.lastAIAssignedAt) {
          const lastAssigned = new Date(data.lastAIAssignedAt).toISOString().split('T')[0];

          // Ïò§Îäò AIÍ∞Ä Í≥ºÏ†úÎ•º Î∂ÄÏó¨ÌñàÏúºÎ©¥ ÏïåÎ¶º ÌëúÏãú
          if (lastAssigned === today) {
            showMessage(
              'ü§ñ',
              'AIÍ≥†ÎûòÏå§Ïù¥ ÏÉà Í≥ºÏ†úÎ•º Ï∂îÏ≤úÌñàÏñ¥Ïöî!',
              'ÌïôÏäµÏã§ÏùÑ ÌôïÏù∏Ìï¥Î≥¥ÏÑ∏Ïöî. ÎßûÏ∂§Ìòï Î≥µÏäµ Í≥ºÏ†úÍ∞Ä Ï§ÄÎπÑÎêòÏñ¥ ÏûàÏäµÎãàÎã§.'
            );

            // Ïò§Îäò ÏïåÎ¶º ÌëúÏãúÌñàÏùåÏùÑ Í∏∞Î°ù
            localStorage.setItem('lastAINotificationDate', today);
            console.log('üîî AI Í≥ºÏ†ú ÏïåÎ¶º: ÏÉà Í≥ºÏ†ú ÏïåÎ¶º ÌëúÏãú');
          }
        }
      } catch (error) {
        console.error('‚ùå AI Í≥ºÏ†ú ÏïåÎ¶º Ï≤¥ÌÅ¨ Ïò§Î•ò:', error);
      }
    }

    // === Í¥ÄÎ¶¨Ïûê Î∂ÄÏó¨ Í≥ºÏ†ú ÌôïÏù∏ ÌåùÏóÖ ===
    async function checkAssignedTasks() {
      try {
        const user = JSON.parse(localStorage.getItem('currentStudent') || '{}');
        if (!user.grade || !user.name) return;

        const today = new Date().toISOString().split('T')[0]; // YYYY-MM-DD
        const taskPopupHideDate = localStorage.getItem('taskPopupHideDate');

        // "Ïò§Îäò ÌïòÎ£® Î≥¥ÏßÄ ÏïäÍ∏∞"Î•º ÏÑ†ÌÉùÌñàÏúºÎ©¥ ÌëúÏãú Ïïà Ìï®
        if (taskPopupHideDate === today) {
          console.log('üìã Í≥ºÏ†ú ÌåùÏóÖ: Ïò§Îäò ÌïòÎ£® Î≥¥ÏßÄ ÏïäÍ∏∞ ÏÑ§Ï†ïÎê®');
          return;
        }

        // Í≥ºÏ†ú Î™©Î°ù Ï°∞Ìöå (Ï∫êÏãú ÏÇ¨Ïö©)
        const data = await ApiCache.fetch(`/api/user-progress/study-room?grade=${encodeURIComponent(user.grade)}&name=${encodeURIComponent(user.name)}`);

        if (data.ok && data.assignedTasks && data.assignedTasks.length > 0) {
          const pendingTasks = data.assignedTasks.filter(t => t.status === 'pending');

          if (pendingTasks.length > 0) {
            showAssignedTasksPopup(pendingTasks);
          }
        }
      } catch (error) {
        console.error('‚ùå Í≥ºÏ†ú ÌôïÏù∏ Ïò§Î•ò:', error);
      }
    }

    // Í≥ºÏ†ú ÌåùÏóÖ ÌëúÏãú Ìï®Ïàò
    function showAssignedTasksPopup(tasks) {
      const overlay = document.createElement('div');
      overlay.className = 'overlay';
      overlay.id = 'assignedTasksOverlay';
      overlay.style.display = 'flex';
      overlay.style.zIndex = '10000';

      const taskList = tasks.slice(0, 5).map(task =>
        `<li>üìö ${task.field} > ${task.subject} > ${task.title || task.unitId}</li>`
      ).join('');

      const moreText = tasks.length > 5 ? `<p style="color: #6b7280; font-size: 14px; margin-top: 8px;">Ïô∏ ${tasks.length - 5}Í∞ú Îçî ÏûàÏäµÎãàÎã§</p>` : '';

      overlay.innerHTML = `
        <div class="assign-modal">
          <div class="assign-modal-header">
            <h3>üìö ÏÉàÎ°úÏö¥ Í≥ºÏ†úÍ∞Ä ÏûàÏäµÎãàÎã§!</h3>
          </div>
          <div class="assign-modal-body">
            <p style="margin-bottom: 12px;">Ï¥ù <strong>${tasks.length}Í∞ú</strong>Ïùò Í≥ºÏ†úÍ∞Ä Î∂ÄÏó¨ÎêòÏóàÏäµÎãàÎã§.</p>
            <ul style="text-align: left; padding-left: 20px; margin: 12px 0;">
              ${taskList}
            </ul>
            ${moreText}
            <p style="margin-top: 16px;">Ï¢åÏ∏° ÏÉÅÎã®Ïùò <strong>ÌïôÏäµÏã§</strong>ÏóêÏÑú ÌôïÏù∏ÌïòÏÑ∏Ïöî!</p>
          </div>
          <div class="assign-modal-footer">
            <button class="btn-cancel" id="hideTodayBtn">Ïò§Îäò ÌïòÎ£® Î≥¥ÏßÄ ÏïäÍ∏∞</button>
            <button class="btn-confirm" id="confirmTaskBtn">ÌôïÏù∏</button>
          </div>
        </div>
      `;

      document.body.appendChild(overlay);

      // ÌôïÏù∏ Î≤ÑÌäº
      document.getElementById('confirmTaskBtn').addEventListener('click', () => {
        document.body.removeChild(overlay);
      });

      // Ïò§Îäò ÌïòÎ£® Î≥¥ÏßÄ ÏïäÍ∏∞ Î≤ÑÌäº
      document.getElementById('hideTodayBtn').addEventListener('click', () => {
        const today = new Date().toISOString().split('T')[0];
        localStorage.setItem('taskPopupHideDate', today);
        document.body.removeChild(overlay);
        console.log('üìã Í≥ºÏ†ú ÌåùÏóÖ: Ïò§Îäò ÌïòÎ£® Î≥¥ÏßÄ ÏïäÍ∏∞ ÏÑ§Ï†ï');
      });

      // Ïò§Î≤ÑÎ†àÏù¥ ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          document.body.removeChild(overlay);
        }
      });
    }

    // ‚úÖ Ïã§Ï†ú Î°úÍ∑∏ÏïÑÏõÉ Ï≤òÎ¶¨ Í≥µÏö© Ìï®Ïàò (Ìó§Îçî Î≤ÑÌäº/Îí§Î°úÍ∞ÄÍ∏∞ Í≥µÏö© ÏÇ¨Ïö©)
    async function doLogoutWithAnimation() {
      const overlay = document.getElementById('loadingOverlay');
      const bar = document.getElementById('loadingBar');
      const percent = document.getElementById('loadingPercent');
      const emoji = document.querySelector('.loading-emoji');
      const title = document.querySelector('.loading-title');
      const msg = document.querySelector('.loading-msg');

      // üîÑ Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥Î•º "Î°úÍ∑∏ÏïÑÏõÉ Î™®Îìú"Î°ú ÏÇ¨Ïö©
      if (overlay && bar && percent) {
        overlay.classList.add('show');
        if (emoji) emoji.textContent = 'üö™';
        if (title) title.textContent = 'Î°úÍ∑∏ÏïÑÏõÉ Ï§ë...';
        if (msg) msg.textContent = 'Ïû†Ïãú ÌõÑ Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ÏúºÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§.';

        bar.style.width = '0%';
        percent.textContent = '0%';
      }

      let progressTimer = null;
      if (bar && percent) {
        progressTimer = setInterval(() => {
          let current = parseInt(percent.textContent) || 0;
          if (current < 95) {
            current += 5;
            bar.style.width = current + '%';
            percent.textContent = current + '%';
          }
        }, 80);
      }

      try {
        // ÌòÑÏû¨ ÌïôÏÉù Ï†ïÎ≥¥ Ï†úÍ±∞
        localStorage.removeItem('currentStudent');

        await fetch("/logout", {
          method: "POST",
          headers: { "Content-Type": "application/json" }
        });
      } catch (e) {
        console.error("logout error", e);
      } finally {
        if (bar && percent) {
          bar.style.width = '100%';
          percent.textContent = '100%';
        }
        if (progressTimer) clearInterval(progressTimer);

        setTimeout(() => {
          window.location.href = "/";
        }, 400);
      }
    }

async function performLogout() {
  const btn = document.getElementById('logoutBtn');
  const overlay = document.getElementById('loadingOverlay');
  const bar = document.getElementById('loadingBar');
  const percent = document.getElementById('loadingPercent');
  const emoji = document.querySelector('.loading-emoji');
  const title = document.querySelector('.loading-title');
  const msg = document.querySelector('.loading-msg');

  if (overlay && bar && percent) {
    overlay.classList.add('show');
    if (emoji) emoji.textContent = 'üö™';
    if (title) title.textContent = 'Î°úÍ∑∏ÏïÑÏõÉ Ï§ë...';
    if (msg) msg.textContent = 'Ïû†Ïãú ÌõÑ Î°úÍ∑∏Ïù∏ ÌôîÎ©¥ÏúºÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§.';

    bar.style.width = '0%';
    percent.textContent = '0%';
  }

  if (btn) btn.disabled = true;

  let progressTimer = null;
  if (bar && percent) {
    progressTimer = setInterval(() => {
      let current = parseInt(percent.textContent) || 0;
      if (current < 95) {
        current += 5;
        bar.style.width = current + '%';
        percent.textContent = current + '%';
      }
    }, 80);
  }

  try {
    localStorage.removeItem('currentStudent');

    await fetch("/logout", {
      method: "POST",
      headers: { "Content-Type": "application/json" }
    });
  } catch (e) {
    console.error("logout error", e);
  } finally {
    if (bar && percent) {
      bar.style.width = '100%';
      percent.textContent = '100%';
    }
    if (progressTimer) clearInterval(progressTimer);

    setTimeout(() => {
      window.location.href = "/";
    }, 400);
  }
}


    // ‚úÖ Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäº ÎèôÏûë (Ïª§Ïä§ÌÖÄ Î™®Îã¨ ÏÇ¨Ïö©)
    (function setupLogout() {
      const btn = document.getElementById('logoutBtn');
      const modal = document.getElementById('logoutConfirm');
      const cancelBtn = document.getElementById('logoutCancelBtn');
      const okBtn = document.getElementById('logoutOkBtn');

      if (!btn || !modal || !cancelBtn || !okBtn) return;

      // 1) Î©îÎâ¥ ÏÉÅÎã® Î°úÍ∑∏ÏïÑÏõÉ Î≤ÑÌäº ÌÅ¥Î¶≠ ‚Üí Î™®Îã¨ Ïó¥Í∏∞
      btn.addEventListener('click', () => {
        modal.classList.add('show');
      });

      // 2) Ï∑®ÏÜå Î≤ÑÌäº ‚Üí Î™®Îã¨ Îã´Í∏∞
      cancelBtn.addEventListener('click', () => {
        modal.classList.remove('show');
      });

      // 3) Î∞îÍπ• Í≤ÄÏùÄ ÏòÅÏó≠ ÌÅ¥Î¶≠ ‚Üí Î™®Îã¨ Îã´Í∏∞
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.remove('show');
        }
      });

      // 4) ÌôïÏù∏(Î°úÍ∑∏ÏïÑÏõÉ) Î≤ÑÌäº ‚Üí Ïã§Ï†ú Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìñâ
      okBtn.addEventListener('click', async () => {
        modal.classList.remove('show');
        btn.disabled = true;     // Ï§ëÎ≥µ ÌÅ¥Î¶≠ Î∞©ÏßÄ
        await doLogoutWithAnimation();
      });
    })();

    // üîô Î∏åÎùºÏö∞Ï†Ä Îí§Î°úÍ∞ÄÍ∏∞ Ïù∏ÌÑ∞ÏÖâÌä∏
    window.addEventListener('popstate', (event) => {
      // menu.html ÏóêÏÑúÎßå ÎèôÏûë (ÌòπÏãú Îã§Î•∏ ÌéòÏù¥ÏßÄÏóêÏÑú ÏÑûÏù¥ÏßÄ ÏïäÍ≤å)
      if (!location.pathname.includes('menu')) return;

      const ok = confirm('Î°úÍ∑∏ÏïÑÏõÉÌïòÏãúÍ≤†ÏäµÎãàÍπå?');

      if (ok) {
        // Îí§Î°úÍ∞ÄÍ∏∞ÏóêÏÑú ÌôïÏù∏ ÎàÑÎ•¥Î©¥ Î∞îÎ°ú Î°úÍ∑∏ÏïÑÏõÉ Ïã§Ìñâ
        doLogoutWithAnimation();
      } else {
        // Ï∑®ÏÜåÌïòÎ©¥ Îã§Ïãú ÌûàÏä§ÌÜ†Î¶¨ ÏåìÏïÑÏÑú ÌôîÎ©¥ Ïú†ÏßÄ
        if (window.history && window.history.pushState) {
          history.pushState({ page: 'menu' }, '', location.href);
        }
      }
    });

    // ‚úÖ Ï†ÄÏû•Îêú Î©îÎâ¥ ÏÉÅÌÉú Î≥µÏõê ÎòêÎäî Í∏∞Î≥∏Í∞íÏúºÎ°ú ÏãúÏûë
    restoreMenuState();

    // ‚úÖ ÌéòÏù¥ÏßÄ Î°úÎî© Ïãú ÏÑúÎ≤ÑÏóêÏÑú ÏôÑÎ£å ÏÉÅÌÉú Í∞ÄÏ†∏ÏôÄÏÑú ÏÑ∏Î∂ÄÍ≥ºÎ™© ÏôÑÎ£å Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
    (async function() {
      await syncCompletionStatusFromServer();
      updateSubjectCompletionCounts();
      restoreProgressOnRenderedList();
      console.log('‚úÖ Ï¥àÍ∏∞ ÏôÑÎ£å ÏÉÅÌÉú ÎèôÍ∏∞Ìôî Î∞è UI ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å');
    })();

    // === Ìó§Îçî ÌÅ¥Î¶≠ Ïãú Ìè≠Ï£Ω Ìö®Í≥º ===
    let jsConfetti = null;

    // JS Confetti Ïù∏Ïä§ÌÑ¥Ïä§ Ï¥àÍ∏∞Ìôî
    if (typeof JSConfetti !== 'undefined') {
      jsConfetti = new JSConfetti();
    }

    // Ìó§Îçî ÏòÅÏó≠ÏóêÎßå Ïù¥Î≤§Ìä∏ Ï∂îÍ∞Ä
    const menuHeader = document.getElementById('menuHeader');
    if (menuHeader) {
      menuHeader.addEventListener('click', function(e) {
        // Î≤ÑÌäº, ÎßÅÌÅ¨ Îì± ÏÉÅÌò∏ÏûëÏö© ÏöîÏÜåÎ•º ÌÅ¥Î¶≠Ìïú Í≤ΩÏö∞Îäî Ï†úÏô∏
        const clickedElement = e.target;
        const isInteractiveElement =
          clickedElement.tagName === 'BUTTON' ||
          clickedElement.tagName === 'A' ||
          clickedElement.tagName === 'INPUT' ||
          clickedElement.closest('button') ||
          clickedElement.closest('a');

        if (!isInteractiveElement) {
          console.log('üéâ Ìó§Îçî ÌÅ¥Î¶≠ - Ìè≠Ï£Ω Ìö®Í≥º!');

          if (jsConfetti) {
            jsConfetti.addConfetti({
              emojis: ['üìö', 'üêã', '‚ú®', 'üéâ', 'üéä', '‚≠ê'],
              emojiSize: 50,
              confettiNumber: 30,
            });
          }
        }
      });
    }

    // === Í≥†Îûò Coin ÏãúÏä§ÌÖú ===
    // Îã®Ïõê ÏôÑÎ£å Î©îÏãúÏßÄÎ•º Î∞õÏïÑÏÑú ÏΩîÏù∏ Ï¶ùÍ∞Ä Ï≤òÎ¶¨ + ÏôÑÎ£å ÏÉÅÌÉú Ï†ÄÏû•
    window.addEventListener('message', function(event) {
      // Î≥¥Ïïà: Í∞ôÏùÄ originÏóêÏÑú Ïò® Î©îÏãúÏßÄÎßå Ï≤òÎ¶¨
      if (event.origin !== window.location.origin) return;

      // üî• Ï∫êÏãú Î¨¥Ìö®Ìôî Î©îÏãúÏßÄ Ï≤òÎ¶¨ (ÌïôÏäµ Î°úÍ∑∏ Ï†ÑÏÜ° ÏôÑÎ£å ÌõÑ)
      if (event.data && event.data.type === 'INVALIDATE_CACHE') {
        console.log('üóëÔ∏è [INVALIDATE_CACHE] Ï∫êÏãú Î¨¥Ìö®Ìôî Î©îÏãúÏßÄ ÏàòÏã†');
        if (window.ApiCache) {
          ApiCache.invalidate('unit-grades');
          ApiCache.invalidate('completion-status');
          ApiCache.invalidate('learning-logs');
        }
        return;
      }

      // Ïñ¥ÌúòÌÄ¥Ï¶à ÏôÑÎ£å Î©îÏãúÏßÄ Ï≤òÎ¶¨
      if (event.data && event.data.type === 'vocabularyQuizCompleted') {
        console.log('‚úÖ Ïñ¥ÌúòÌÄ¥Ï¶à ÏôÑÎ£å Î©îÏãúÏßÄ ÏàòÏã†');

        // Ïñ¥ÌúòÌÄ¥Ï¶à ÌåùÏóÖ Îã´Í∏∞
        closeVocabularyQuiz();

        // ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ® (Î©îÏù∏ Î∞∞Í≤Ω Î≥µÏõê)
        setTimeout(() => {
          location.reload();
        }, 300);

        return;
      }

      if (event.data && event.data.type === 'UNIT_COMPLETED') {
        // ÌòÑÏû¨ Ïó¥Î†§ÏûàÎäî Îã®Ïõê Í≤ΩÎ°ú Í∞ÄÏ†∏Ïò§Í∏∞
        const currentUnitPath = sessionStorage.getItem('currentOpenUnit');
        if (!currentUnitPath) {
          console.log('‚ö†Ô∏è currentOpenUnit not found in sessionStorage');
          return;
        }

        // Í≤ΩÎ°úÏóêÏÑú Îã®Ïõê ÏΩîÎìú Ï∂îÏ∂ú (geo_01, geo_02 Îì±)
        const match = currentUnitPath.match(/\/([^\/]+)\.html$/);
        if (!match) {
          console.log('‚ö†Ô∏è Cannot extract unit code from path:', currentUnitPath);
          return;
        }
        const unitCode = match[1];

        // ÌïôÏÉù Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
        const stu = getCurrentStudent();
        if (!stu) {
          console.log('‚ö†Ô∏è No student info found');
          return;
        }
        const stuKey = buildStudentKey(stu);

        // ÏôÑÎ£å Ïó¨Î∂Ä ÌôïÏù∏ - ÌïôÏäµ ÌéòÏù¥ÏßÄÏôÄ ÎèôÏùºÌïú Î∞©Ïãù ÏÇ¨Ïö©
        const storageKey = `dan-progress:${stuKey}:${unitCode}`;
        let saved = [];
        try {
          const data = localStorage.getItem(storageKey);
          if (data) {
            saved = JSON.parse(data);
            if (!Array.isArray(saved)) saved = [];
          }
        } catch(e) {
          saved = [];
        }

        // Ïù¥ÎØ∏ ÏôÑÎ£åÎêòÏóàÎäîÏßÄ Ï≤¥ÌÅ¨ (Î∞∞Ïó¥Ïóê Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏúºÎ©¥ ÏôÑÎ£å)
        const alreadyCompleted = saved.length > 0;

        if (!alreadyCompleted) {
          console.log(`‚úÖ ÏÉàÎ°úÏö¥ Îã®Ïõê ÏôÑÎ£å: ${unitCode}`);
        } else {
          console.log(`‚ÑπÔ∏è Ïù¥ÎØ∏ ÏôÑÎ£åÎêú Îã®Ïõê: ${unitCode}`);
        }

        // UI ÏóÖÎç∞Ïù¥Ìä∏ (ÌïôÏäµÏôÑÎ£å Î∞∞ÏßÄ ÌëúÏãú)
        updateLessonStatus(currentUnitPath, 'done');

        // üî• API Ï∫êÏãú Î¨¥Ìö®Ìôî (Î≥ÑÌëú/ÌïôÏäµÏôÑÎ£å Ï¶âÏãú Î∞òÏòÅ)
        if (window.ApiCache) {
          ApiCache.invalidate('unit-grades');
          ApiCache.invalidate('completion-status');
          ApiCache.invalidate('learning-logs');
          console.log('üóëÔ∏è [UNIT_COMPLETED] API Ï∫êÏãú Î¨¥Ìö®Ìôî ÏôÑÎ£å');
        }

        // üî• Î≥ÑÌëú Îç∞Ïù¥ÌÑ∞ Îã§Ïãú Î°úÎìú Î∞è Îã®Ïõê Î™©Î°ù ÏóÖÎç∞Ïù¥Ìä∏
        setTimeout(async () => {
          try {
            // ÌòÑÏû¨ ÌëúÏãúÎêú Îã®Ïõê Î™©Î°ù Îã§Ïãú Î†åÎçîÎßÅ (ÏµúÏã† Î≥ÑÌëú Îç∞Ïù¥ÌÑ∞ Î∞òÏòÅ)
            if (typeof currentUnits !== 'undefined' && currentUnits && currentUnits.length > 0) {
              await renderUnitList(currentUnits);
              console.log('‚≠ê [UNIT_COMPLETED] Îã®Ïõê Î™©Î°ù Îã§Ïãú Î†åÎçîÎßÅ (Î≥ÑÌëú Î∞òÏòÅ)');
            }
          } catch (e) {
            console.warn('[UNIT_COMPLETED] Îã®Ïõê Î™©Î°ù ÏóÖÎç∞Ïù¥Ìä∏ Ïò§Î•ò:', e);
          }
        }, 800);

        // ÌïôÏäµÏã§ Î™®Îã¨Ïù¥ Ïó¥Î†§ÏûàÎã§Î©¥ Î¶¨Ïä§Ìä∏ Îã§Ïãú Î†åÎçîÎßÅ
        const studyRoomModal = document.getElementById('studyRoomModal');
        if (studyRoomModal && studyRoomModal.classList.contains('show')) {
          renderStudyRoomList();
          console.log('üîÑ ÌïôÏäµÏã§ Î¶¨Ïä§Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏');
        }
      }
    });

    // ===== ÏãúÎ¶¨Ï¶à ÌôúÏÑ±Ìôî/ÎπÑÌôúÏÑ±Ìôî Ï≤òÎ¶¨ =====
    function applySeriesRestrictions() {
      try {
        const user = JSON.parse(sessionStorage.getItem('user') || '{}');
        const assignedSeries = user.assignedSeries || [];

        console.log('üîí Applying series restrictions:', assignedSeries);

        // ÏãúÎ¶¨Ï¶à Ïù¥Î¶Ñ Îß§Ìïë (Î™®Îã¨ÏóêÏÑú ÏÇ¨Ïö©ÌïòÎäî Ïù¥Î¶Ñ -> HTML data-series Í∞í)
        const seriesMapping = {
          'BRAINÏùÄ': 'BRAINON',
          'BRAINÏïî': 'BRAINUP',
          'BRAINÎπõ': 'BRAINFIT',
          'BRAINÎãµ': 'BRAINDEEP',
          'BRAINÏ§ëÎì±': 'BRAINM',
          'BRAINÍ≥†Îì±': 'BRAINH',
          // Ïó≠Î∞©Ìñ• Îß§ÌïëÎèÑ Ï∂îÍ∞Ä (Ïù¥ÎØ∏ ÏòÅÎ¨∏ IDÏù∏ Í≤ΩÏö∞ ÎåÄÏùë)
          'BRAINON': 'BRAINON',
          'BRAINUP': 'BRAINUP',
          'BRAINFIT': 'BRAINFIT',
          'BRAINDEEP': 'BRAINDEEP',
          'BRAINM': 'BRAINM',
          'BRAINH': 'BRAINH'
        };

        // assignedSeriesÎ•º data-series ÌòïÏãùÏúºÎ°ú Î≥ÄÌôò
        const allowedSeriesIds = assignedSeries.map(name => seriesMapping[name]).filter(Boolean);

        console.log('‚úÖ Allowed series IDs:', allowedSeriesIds);

        // Î™®Îì† ÏãúÎ¶¨Ï¶à ÏïÑÏù¥ÌÖú ÌôïÏù∏
        document.querySelectorAll("#seriesList .series-item").forEach(li => {
          const seriesId = li.dataset.series;

          if (allowedSeriesIds.includes(seriesId)) {
            // ÌôúÏÑ±Ìôî
            li.classList.remove("disabled");
          } else {
            // ÎπÑÌôúÏÑ±Ìôî
            li.classList.add("disabled");
          }
        });
      } catch (err) {
        console.error('‚ùå Error applying series restrictions:', err);
      }
    }

    // ÏãúÎ¶¨Ï¶à Ï†úÌïú Ï†ÅÏö©
    applySeriesRestrictions();

    // ÌéòÏù¥ÏßÄ Ï≤òÏùå Ïó¥Î¶¥ ÎïåÎèÑ Ïù¥ÎØ∏ Ï†ÄÏû•Îèº ÏûàÎçò ÏôÑÎ£å ÎÇ¥Ïó≠ ÏûàÏúºÎ©¥ Î∞òÏòÅ
    restoreProgressOnRenderedList();

    window.addEventListener("pageshow", async function (event) {
      // Îí§Î°úÍ∞ÄÍ∏∞ Ï∫êÏãúÏóêÏÑú ÎèåÏïÑÏò¨ Îïå Î°úÎî© Í∞ÄÎ¶¨Í∏∞
      document.getElementById("loadingOverlay")?.classList.remove("show");

      const stu = getCurrentStudent();

      // üîê Î°úÍ∑∏ÏïÑÏõÉ ÌõÑ Îí§Î°úÍ∞ÄÍ∏∞ ÌïòÎ©¥ Î¨¥Ï°∞Í±¥ Î°úÍ∑∏Ïù∏ ÌéòÏù¥ÏßÄÎ°ú ÎèåÎ†§Î≥¥ÎÇ¥Í∏∞
      if (!stu) {
        window.location.href = "/";
        return;
      }

      // üîÑ ÏÑúÎ≤ÑÏóêÏÑú ÏµúÏã† ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ (ÏãúÎ¶¨Ï¶à Î∂ÄÏó¨ ÏóÖÎç∞Ïù¥Ìä∏ Î∞òÏòÅ)
      if (stu && stu.grade && stu.name) {
        try {
          const res = await fetch(`/api/user-info?grade=${encodeURIComponent(stu.grade)}&name=${encodeURIComponent(stu.name)}`);
          if (res.ok) {
            const userData = await res.json();
            if (userData) {
              // sessionStorage ÏóÖÎç∞Ïù¥Ìä∏
              sessionStorage.setItem('user', JSON.stringify(userData));
              console.log('‚úÖ User info updated from server:', userData);

              // ÏãúÎ¶¨Ï¶à Ï†úÌïú Îã§Ïãú Ï†ÅÏö©
              applySeriesRestrictions();
            }
          }
        } catch (err) {
          console.error('Failed to fetch updated user info:', err);
        }
      }

      // ÌïôÏÉù Ï†ïÎ≥¥Í∞Ä ÏûàÏúºÎ©¥ Ìó§Îçî Î¨∏Íµ¨ Îã§Ïãú Í∞±Ïã†
      showUserInfo();

      // ‚úÖ ÏôÑÎ£å ÏÉÅÌÉúÎäî Ïù¥ÎØ∏ 6099Î≤à Ï§ÑÏóêÏÑú Î°úÎìúÎêòÏóàÏúºÎØÄÎ°ú Ï§ëÎ≥µ Ìò∏Ï∂ú Ï†úÍ±∞
      // UIÎßå ÏóÖÎç∞Ïù¥Ìä∏
      restoreProgressOnRenderedList();
      updateSubjectCompletionCounts(); // ‚úÖ ÏÑ∏Î∂ÄÍ≥ºÎ™© ÏôÑÎ£å Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
    });

    // === Ï§ÄÎπÑÎêú Îã®Ïõê Î™©Î°ù (ÌååÏùº Ï°¥Ïû¨ Ïó¨Î∂Ä ÌôïÏù∏Ïö©) ===
    const availableUnits = {
      './BRAINUP/korlit/classic_01.html': true,
      './BRAINUP/korlit/classic_02.html': true,
      './BRAINUP/korlit/classic_03.html': true,
      './BRAINUP/korlit/classic_04.html': true,
      './BRAINUP/korlit/classic_05.html': true,
      './BRAINUP/korlit/classic_06.html': true,
      './BRAINUP/korlit/classic_07.html': true,
      './BRAINUP/korlit/classic_08.html': true,
      './BRAINUP/korlit/classic_09.html': true,
      './BRAINUP/korlit/classic_10.html': true,
      './BRAINUP/korlit/classic_11.html': true,
      './BRAINUP/korlit/classic_12.html': true,
      './BRAINUP/korlit/classic_13.html': true,
      './BRAINUP/korlit/classic_14.html': true,
      './BRAINUP/korlit/classic_15.html': true,
      './BRAINUP/korlit/classic_16.html': true,
      './BRAINUP/korlit/classic_17.html': true,
      './BRAINUP/korlit/classic_18.html': true,
      './BRAINUP/korlit/classic_19.html': true,
      './BRAINUP/korlit/classic_20.html': true,
      './BRAINUP/korlit/classic_21.html': true,
      './BRAINUP/korlit/classic_22.html': true,
      './BRAINUP/korlit/classic_23.html': true,
      './BRAINUP/korlit/classic_24.html': true,
      './BRAINUP/korlit/classic_25.html': true,
      './BRAINUP/korlit/classic_26.html': true,
      './BRAINUP/korlit/classic_27.html': true,
      './BRAINUP/korlit/classic_28.html': true,
      './BRAINUP/korlit/classic_29.html': true,
      './BRAINUP/korlit/classic_30.html': true,
      './BRAINUP/korlit/classic_31.html': true,
      './BRAINUP/korlit/classic_32.html': true,
      './BRAINUP/korlit/classic_33.html': true,
      './BRAINUP/korlit/classic_34.html': true,
      './BRAINUP/korlit/classic_35.html': true,
      './BRAINUP/korlit/classic_36.html': true,
      './BRAINUP/korlit/classic_37.html': true,
      './BRAINUP/korlit/classic_38.html': true,
      './BRAINUP/korlit/classic_39.html': true,
      './BRAINUP/korlit/classic_40.html': true,
      './BRAINUP/korlit/modern_01.html': true,
      './BRAINUP/korlit/modern_02.html': true,
      './BRAINUP/korlit/modern_03.html': true,
      './BRAINUP/korlit/modern_04.html': true,
      './BRAINUP/korlit/modern_05.html': true,
      './BRAINUP/korlit/modern_06.html': true,
      './BRAINUP/korlit/modern_07.html': true,
      './BRAINUP/korlit/modern_08.html': true,
      './BRAINUP/korlit/modern_09.html': true,
      './BRAINUP/korlit/modern_10.html': true,
      './BRAINUP/korlit/modern_11.html': true,
      './BRAINUP/korlit/modern_12.html': true,
      './BRAINUP/korlit/modern_13.html': true,
      './BRAINUP/korlit/modern_14.html': true,
      './BRAINUP/korlit/modern_15.html': true,
      './BRAINUP/korlit/modern_16.html': true,
      './BRAINUP/korlit/modern_17.html': true,
      './BRAINUP/korlit/modern_18.html': true,
      './BRAINUP/korlit/modern_19.html': true,
      './BRAINUP/korlit/modern_20.html': true,
      './BRAINUP/korlit/modern_21.html': true,
      './BRAINUP/korlit/modern_22.html': true,
      './BRAINUP/korlit/modern_23.html': true,
      './BRAINUP/korlit/modern_24.html': true,
      './BRAINUP/korlit/modern_25.html': true,
      './BRAINUP/korlit/modern_26.html': true,
      './BRAINUP/korlit/modern_27.html': true,
      './BRAINUP/korlit/modern_28.html': true,
      './BRAINUP/korlit/modern_29.html': true,
      './BRAINUP/korlit/modern_30.html': true,
      './BRAINUP/korlit/modern_31.html': true,
      './BRAINUP/korlit/modern_32.html': true,
      './BRAINUP/korlit/modern_33.html': true,
      './BRAINUP/korlit/modern_34.html': true,
      './BRAINUP/korlit/modern_35.html': true,
      './BRAINUP/korlit/modern_36.html': true,
      './BRAINUP/korlit/modern_37.html': true,
      './BRAINUP/korlit/modern_38.html': true,
      './BRAINUP/korlit/modern_39.html': true,
      './BRAINUP/korlit/modern_40.html': true,
      // ÌïúÍµ≠Ïù∏Î¨º (people1_01 ~ people1_40)
      './BRAINUP/person/people1_01.html': true,
      './BRAINUP/person/people1_02.html': true,
      './BRAINUP/person/people1_03.html': true,
      './BRAINUP/person/people1_04.html': true,
      './BRAINUP/person/people1_05.html': true,
      './BRAINUP/person/people1_06.html': true,
      './BRAINUP/person/people1_07.html': true,
      './BRAINUP/person/people1_08.html': true,
      './BRAINUP/person/people1_09.html': true,
      './BRAINUP/person/people1_10.html': true,
      './BRAINUP/person/people1_11.html': true,
      './BRAINUP/person/people1_12.html': true,
      './BRAINUP/person/people1_13.html': true,
      './BRAINUP/person/people1_14.html': true,
      './BRAINUP/person/people1_15.html': true,
      './BRAINUP/person/people1_16.html': true,
      './BRAINUP/person/people1_17.html': true,
      './BRAINUP/person/people1_18.html': true,
      './BRAINUP/person/people1_19.html': true,
      './BRAINUP/person/people1_20.html': true,
      './BRAINUP/person/people1_21.html': true,
      './BRAINUP/person/people1_22.html': true,
      './BRAINUP/person/people1_23.html': true,
      './BRAINUP/person/people1_24.html': true,
      './BRAINUP/person/people1_25.html': true,
      './BRAINUP/person/people1_26.html': true,
      './BRAINUP/person/people1_27.html': true,
      './BRAINUP/person/people1_28.html': true,
      './BRAINUP/person/people1_29.html': true,
      './BRAINUP/person/people1_30.html': true,
      './BRAINUP/person/people1_31.html': true,
      './BRAINUP/person/people1_32.html': true,
      './BRAINUP/person/people1_33.html': true,
      './BRAINUP/person/people1_34.html': true,
      './BRAINUP/person/people1_35.html': true,
      './BRAINUP/person/people1_36.html': true,
      './BRAINUP/person/people1_37.html': true,
      './BRAINUP/person/people1_38.html': true,
      './BRAINUP/person/people1_39.html': true,
      './BRAINUP/person/people1_40.html': true,
      // ÏÑ∏Í≥ÑÏù∏Î¨º (people2_01 ~ people2_40)
      './BRAINUP/person/people2_01.html': true,
      './BRAINUP/person/people2_02.html': true,
      './BRAINUP/person/people2_03.html': true,
      './BRAINUP/person/people2_04.html': true,
      './BRAINUP/person/people2_05.html': true,
      './BRAINUP/person/people2_06.html': true,
      './BRAINUP/person/people2_07.html': true,
      './BRAINUP/person/people2_08.html': true,
      './BRAINUP/person/people2_09.html': true,
      './BRAINUP/person/people2_10.html': true,
      './BRAINUP/person/people2_11.html': true,
      './BRAINUP/person/people2_12.html': true,
      './BRAINUP/person/people2_13.html': true,
      './BRAINUP/person/people2_14.html': true,
      './BRAINUP/person/people2_15.html': true,
      './BRAINUP/person/people2_16.html': true,
      './BRAINUP/person/people2_17.html': true,
      './BRAINUP/person/people2_18.html': true,
      './BRAINUP/person/people2_19.html': true,
      './BRAINUP/person/people2_20.html': true,
      './BRAINUP/person/people2_21.html': true,
      './BRAINUP/person/people2_22.html': true,
      './BRAINUP/person/people2_23.html': true,
      './BRAINUP/person/people2_24.html': true,
      './BRAINUP/person/people2_25.html': true,
      './BRAINUP/person/people2_26.html': true,
      './BRAINUP/person/people2_27.html': true,
      './BRAINUP/person/people2_28.html': true,
      './BRAINUP/person/people2_29.html': true,
      './BRAINUP/person/people2_30.html': true,
      './BRAINUP/person/people2_31.html': true,
      './BRAINUP/person/people2_32.html': true,
      './BRAINUP/person/people2_33.html': true,
      './BRAINUP/person/people2_34.html': true,
      './BRAINUP/person/people2_35.html': true,
      './BRAINUP/person/people2_36.html': true,
      './BRAINUP/person/people2_37.html': true,
      './BRAINUP/person/people2_38.html': true,
      './BRAINUP/person/people2_39.html': true,
      './BRAINUP/person/people2_40.html': true,
      './BRAINUP/science/bio_01.html': true,
      './BRAINUP/science/bio_02.html': true,
      './BRAINUP/science/bio_03.html': true,
      './BRAINUP/science/bio_04.html': true,
      './BRAINUP/science/bio_05.html': true,
      './BRAINUP/science/bio_06.html': true,
      './BRAINUP/science/bio_07.html': true,
      './BRAINUP/science/bio_08.html': true,
      './BRAINUP/science/bio_09.html': true,
      './BRAINUP/science/bio_10.html': true,
      './BRAINUP/science/bio_11.html': true,
      './BRAINUP/science/bio_12.html': true,
      './BRAINUP/science/bio_13.html': true,
      './BRAINUP/science/bio_14.html': true,
      './BRAINUP/science/bio_15.html': true,
      './BRAINUP/science/bio_16.html': true,
      './BRAINUP/science/bio_17.html': true,
      './BRAINUP/science/bio_18.html': true,
      './BRAINUP/science/bio_19.html': true,
      './BRAINUP/science/bio_20.html': true,
      './BRAINUP/science/chem_01.html': true,
      './BRAINUP/science/chem_02.html': true,
      './BRAINUP/science/chem_03.html': true,
      './BRAINUP/science/chem_04.html': true,
      './BRAINUP/science/chem_05.html': true,
      './BRAINUP/science/chem_06.html': true,
      './BRAINUP/science/chem_07.html': true,
      './BRAINUP/science/chem_08.html': true,
      './BRAINUP/science/chem_09.html': true,
      './BRAINUP/science/chem_10.html': true,
      './BRAINUP/science/chem_11.html': true,
      './BRAINUP/science/chem_12.html': true,
      './BRAINUP/science/chem_13.html': true,
      './BRAINUP/science/chem_14.html': true,
      './BRAINUP/science/chem_15.html': true,
      './BRAINUP/science/chem_16.html': true,
      './BRAINUP/science/chem_17.html': true,
      './BRAINUP/science/chem_18.html': true,
      './BRAINUP/science/chem_19.html': true,
      './BRAINUP/science/chem_20.html': true,
      './BRAINUP/science/earth_01.html': true,
      './BRAINUP/science/earth_02.html': true,
      './BRAINUP/science/earth_03.html': true,
      './BRAINUP/science/earth_04.html': true,
      './BRAINUP/science/earth_05.html': true,
      './BRAINUP/science/earth_06.html': true,
      './BRAINUP/science/earth_07.html': true,
      './BRAINUP/science/earth_08.html': true,
      './BRAINUP/science/earth_09.html': true,
      './BRAINUP/science/earth_10.html': true,
      './BRAINUP/science/earth_11.html': true,
      './BRAINUP/science/earth_12.html': true,
      './BRAINUP/science/earth_13.html': true,
      './BRAINUP/science/earth_14.html': true,
      './BRAINUP/science/earth_15.html': true,
      './BRAINUP/science/earth_16.html': true,
      './BRAINUP/science/earth_17.html': true,
      './BRAINUP/science/earth_18.html': true,
      './BRAINUP/science/earth_19.html': true,
      './BRAINUP/science/earth_20.html': true,
      './BRAINUP/science/physics_01.html': true,
      './BRAINUP/science/physics_02.html': true,
      './BRAINUP/science/physics_03.html': true,
      './BRAINUP/science/physics_04.html': true,
      './BRAINUP/science/physics_05.html': true,
      './BRAINUP/science/physics_06.html': true,
      './BRAINUP/science/physics_07.html': true,
      './BRAINUP/science/physics_08.html': true,
      './BRAINUP/science/physics_09.html': true,
      './BRAINUP/science/physics_10.html': true,
      './BRAINUP/science/physics_11.html': true,
      './BRAINUP/science/physics_12.html': true,
      './BRAINUP/science/physics_13.html': true,
      './BRAINUP/science/physics_14.html': true,
      './BRAINUP/science/physics_15.html': true,
      './BRAINUP/science/physics_16.html': true,
      './BRAINUP/science/physics_17.html': true,
      './BRAINUP/science/physics_18.html': true,
      './BRAINUP/science/physics_19.html': true,
      './BRAINUP/science/physics_20.html': true,
      './BRAINUP/social/geo_01.html': true,
      './BRAINUP/social/geo_02.html': true,
      './BRAINUP/social/geo_03.html': true,
      './BRAINUP/social/geo_04.html': true,
      './BRAINUP/social/geo_05.html': true,
      './BRAINUP/social/geo_06.html': true,
      './BRAINUP/social/geo_07.html': true,
      './BRAINUP/social/geo_08.html': true,
      './BRAINUP/social/geo_09.html': true,
      './BRAINUP/social/geo_10.html': true,
      './BRAINUP/social/geo_11.html': true,
      './BRAINUP/social/geo_12.html': true,
      './BRAINUP/social/geo_13.html': true,
      './BRAINUP/social/geo_14.html': true,
      './BRAINUP/social/geo_15.html': true,
      './BRAINUP/social/geo_16.html': true,
      './BRAINUP/social/geo_17.html': true,
      './BRAINUP/social/geo_18.html': true,
      './BRAINUP/social/geo_19.html': true,
      './BRAINUP/social/geo_20.html': true,
      './BRAINUP/social/law_01.html': true,
      './BRAINUP/social/law_02.html': true,
      './BRAINUP/social/law_03.html': true,
      './BRAINUP/social/law_04.html': true,
      './BRAINUP/social/law_05.html': true,
      './BRAINUP/social/law_06.html': true,
      './BRAINUP/social/law_07.html': true,
      './BRAINUP/social/law_08.html': true,
      './BRAINUP/social/law_09.html': true,
      './BRAINUP/social/law_10.html': true,
      './BRAINUP/social/law_11.html': true,
      './BRAINUP/social/law_12.html': true,
      './BRAINUP/social/law_13.html': true,
      './BRAINUP/social/law_14.html': true,
      './BRAINUP/social/law_15.html': true,
      './BRAINUP/social/law_16.html': true,
      './BRAINUP/social/law_17.html': true,
      './BRAINUP/social/law_18.html': true,
      './BRAINUP/social/law_19.html': true,
      './BRAINUP/social/law_20.html': true,
      './BRAINUP/social/pol_01.html': true,
      './BRAINUP/social/pol_02.html': true,
      './BRAINUP/social/pol_03.html': true,
      './BRAINUP/social/pol_04.html': true,
      './BRAINUP/social/pol_05.html': true,
      './BRAINUP/social/pol_06.html': true,
      './BRAINUP/social/pol_07.html': true,
      './BRAINUP/social/pol_08.html': true,
      './BRAINUP/social/pol_09.html': true,
      './BRAINUP/social/pol_10.html': true,
      './BRAINUP/social/pol_11.html': true,
      './BRAINUP/social/pol_12.html': true,
      './BRAINUP/social/pol_13.html': true,
      './BRAINUP/social/pol_14.html': true,
      './BRAINUP/social/pol_15.html': true,
      './BRAINUP/social/pol_16.html': true,
      './BRAINUP/social/pol_17.html': true,
      './BRAINUP/social/pol_18.html': true,
      './BRAINUP/social/pol_19.html': true,
      './BRAINUP/social/pol_20.html': true,
      './BRAINUP/social/soc_01.html': true,
      './BRAINUP/social/soc_02.html': true,
      './BRAINUP/social/soc_03.html': true,
      './BRAINUP/social/soc_04.html': true,
      './BRAINUP/social/soc_05.html': true,
      './BRAINUP/social/soc_06.html': true,
      './BRAINUP/social/soc_07.html': true,
      './BRAINUP/social/soc_08.html': true,
      './BRAINUP/social/soc_09.html': true,
      './BRAINUP/social/soc_10.html': true,
      './BRAINUP/social/soc_11.html': true,
      './BRAINUP/social/soc_12.html': true,
      './BRAINUP/social/soc_13.html': true,
      './BRAINUP/social/soc_14.html': true,
      './BRAINUP/social/soc_15.html': true,
      './BRAINUP/social/soc_16.html': true,
      './BRAINUP/social/soc_17.html': true,
      './BRAINUP/social/soc_18.html': true,
      './BRAINUP/social/soc_19.html': true,
      './BRAINUP/social/soc_20.html': true,
      './BRAINUP/worldlit/world1_01.html': true,
      './BRAINUP/worldlit/world1_02.html': true,
      './BRAINUP/worldlit/world1_03.html': true,
      './BRAINUP/worldlit/world1_04.html': true,
      './BRAINUP/worldlit/world1_05.html': true,
      './BRAINUP/worldlit/world1_06.html': true,
      './BRAINUP/worldlit/world1_07.html': true,
      './BRAINUP/worldlit/world1_08.html': true,
      './BRAINUP/worldlit/world1_09.html': true,
      './BRAINUP/worldlit/world1_10.html': true,
      './BRAINUP/worldlit/world1_11.html': true,
      './BRAINUP/worldlit/world1_12.html': true,
      './BRAINUP/worldlit/world1_13.html': true,
      './BRAINUP/worldlit/world1_14.html': true,
      './BRAINUP/worldlit/world1_15.html': true,
      './BRAINUP/worldlit/world1_16.html': true,
      './BRAINUP/worldlit/world1_17.html': true,
      './BRAINUP/worldlit/world1_18.html': true,
      './BRAINUP/worldlit/world1_19.html': true,
      './BRAINUP/worldlit/world1_20.html': true,
      './BRAINUP/worldlit/world1_21.html': true,
      './BRAINUP/worldlit/world1_22.html': true,
      './BRAINUP/worldlit/world1_23.html': true,
      './BRAINUP/worldlit/world1_24.html': true,
      './BRAINUP/worldlit/world1_25.html': true,
      './BRAINUP/worldlit/world1_26.html': true,
      './BRAINUP/worldlit/world1_27.html': true,
      './BRAINUP/worldlit/world1_28.html': true,
      './BRAINUP/worldlit/world1_29.html': true,
      './BRAINUP/worldlit/world1_30.html': true,
      './BRAINUP/worldlit/world1_31.html': true,
      './BRAINUP/worldlit/world1_32.html': true,
      './BRAINUP/worldlit/world1_33.html': true,
      './BRAINUP/worldlit/world1_34.html': true,
      './BRAINUP/worldlit/world1_35.html': true,
      './BRAINUP/worldlit/world1_36.html': true,
      './BRAINUP/worldlit/world1_37.html': true,
      './BRAINUP/worldlit/world1_38.html': true,
      './BRAINUP/worldlit/world1_39.html': true,
      './BRAINUP/worldlit/world1_40.html': true,
      './BRAINUP/worldlit/world2_01.html': true,
      './BRAINUP/worldlit/world2_02.html': true,
      './BRAINUP/worldlit/world2_03.html': true,
      './BRAINUP/worldlit/world2_04.html': true,
      './BRAINUP/worldlit/world2_05.html': true,
      './BRAINUP/worldlit/world2_06.html': true,
      './BRAINUP/worldlit/world2_07.html': true,
      './BRAINUP/worldlit/world2_08.html': true,
      './BRAINUP/worldlit/world2_09.html': true,
      './BRAINUP/worldlit/world2_10.html': true,
      './BRAINUP/worldlit/world2_11.html': true,
      './BRAINUP/worldlit/world2_12.html': true,
      './BRAINUP/worldlit/world2_13.html': true,
      './BRAINUP/worldlit/world2_14.html': true,
      './BRAINUP/worldlit/world2_15.html': true,
      './BRAINUP/worldlit/world2_16.html': true,
      './BRAINUP/worldlit/world2_17.html': true,
      './BRAINUP/worldlit/world2_18.html': true,
      './BRAINUP/worldlit/world2_19.html': true,
      './BRAINUP/worldlit/world2_20.html': true,
      './BRAINUP/worldlit/world2_21.html': true,
      './BRAINUP/worldlit/world2_22.html': true,
      './BRAINUP/worldlit/world2_23.html': true,
      './BRAINUP/worldlit/world2_24.html': true,
      './BRAINUP/worldlit/world2_25.html': true,
      './BRAINUP/worldlit/world2_26.html': true,
      './BRAINUP/worldlit/world2_27.html': true,
      './BRAINUP/worldlit/world2_28.html': true,
      './BRAINUP/worldlit/world2_29.html': true,
      './BRAINUP/worldlit/world2_30.html': true,
      './BRAINUP/worldlit/world2_31.html': true,
      './BRAINUP/worldlit/world2_32.html': true,
      './BRAINUP/worldlit/world2_33.html': true,
      './BRAINUP/worldlit/world2_34.html': true,
      './BRAINUP/worldlit/world2_35.html': true,
      './BRAINUP/worldlit/world2_36.html': true,
      './BRAINUP/worldlit/world2_37.html': true,
      './BRAINUP/worldlit/world2_38.html': true,
      './BRAINUP/worldlit/world2_39.html': true,
      './BRAINUP/worldlit/world2_40.html': true,
      './BRAINUP/korlit/classic_01.html': true,
      './BRAINUP/korlit/classic_02.html': true,
      './BRAINUP/korlit/classic_03.html': true,
      './BRAINUP/korlit/classic_04.html': true,
      './BRAINUP/korlit/classic_05.html': true,
      './BRAINUP/korlit/classic_06.html': true,
      './BRAINUP/korlit/classic_07.html': true,
      './BRAINUP/korlit/classic_08.html': true,
      './BRAINUP/korlit/classic_09.html': true,
      './BRAINUP/korlit/classic_10.html': true,
      './BRAINUP/korlit/classic_11.html': true,
      './BRAINUP/korlit/classic_12.html': true,
      './BRAINUP/korlit/classic_13.html': true,
      './BRAINUP/korlit/classic_14.html': true,
      './BRAINUP/korlit/classic_15.html': true,
      './BRAINUP/korlit/classic_16.html': true,
      './BRAINUP/korlit/classic_17.html': true,
      './BRAINUP/korlit/classic_18.html': true,
      './BRAINUP/korlit/classic_19.html': true,
      './BRAINUP/korlit/classic_20.html': true,
      './BRAINUP/korlit/classic_21.html': true,
      './BRAINUP/korlit/classic_22.html': true,
      './BRAINUP/korlit/classic_23.html': true,
      './BRAINUP/korlit/classic_24.html': true,
      './BRAINUP/korlit/classic_25.html': true,
      './BRAINUP/korlit/classic_26.html': true,
      './BRAINUP/korlit/classic_27.html': true,
      './BRAINUP/korlit/classic_28.html': true,
      './BRAINUP/korlit/classic_29.html': true,
      './BRAINUP/korlit/classic_30.html': true,
      './BRAINUP/korlit/classic_31.html': true,
      './BRAINUP/korlit/classic_32.html': true,
      './BRAINUP/korlit/classic_33.html': true,
      './BRAINUP/korlit/classic_34.html': true,
      './BRAINUP/korlit/classic_35.html': true,
      './BRAINUP/korlit/classic_36.html': true,
      './BRAINUP/korlit/classic_37.html': true,
      './BRAINUP/korlit/classic_38.html': true,
      './BRAINUP/korlit/classic_39.html': true,
      './BRAINUP/korlit/classic_40.html': true,
      './BRAINUP/korlit/modern_01.html': true,
      './BRAINUP/korlit/modern_02.html': true,
      './BRAINUP/korlit/modern_03.html': true,
      './BRAINUP/korlit/modern_04.html': true,
      './BRAINUP/korlit/modern_05.html': true,
      './BRAINUP/korlit/modern_06.html': true,
      './BRAINUP/korlit/modern_07.html': true,
      './BRAINUP/korlit/modern_08.html': true,
      './BRAINUP/korlit/modern_09.html': true,
      './BRAINUP/korlit/modern_10.html': true,
      './BRAINUP/korlit/modern_11.html': true,
      './BRAINUP/korlit/modern_12.html': true,
      './BRAINUP/korlit/modern_13.html': true,
      './BRAINUP/korlit/modern_14.html': true,
      './BRAINUP/korlit/modern_15.html': true,
      './BRAINUP/korlit/modern_16.html': true,
      './BRAINUP/korlit/modern_17.html': true,
      './BRAINUP/korlit/modern_18.html': true,
      './BRAINUP/korlit/modern_19.html': true,
      './BRAINUP/korlit/modern_20.html': true,
      './BRAINUP/korlit/modern_21.html': true,
      './BRAINUP/korlit/modern_22.html': true,
      './BRAINUP/korlit/modern_23.html': true,
      './BRAINUP/korlit/modern_24.html': true,
      './BRAINUP/korlit/modern_25.html': true,
      './BRAINUP/korlit/modern_26.html': true,
      './BRAINUP/korlit/modern_27.html': true,
      './BRAINUP/korlit/modern_28.html': true,
      './BRAINUP/korlit/modern_29.html': true,
      './BRAINUP/korlit/modern_30.html': true,
      './BRAINUP/korlit/modern_31.html': true,
      './BRAINUP/korlit/modern_32.html': true,
      './BRAINUP/korlit/modern_33.html': true,
      './BRAINUP/korlit/modern_34.html': true,
      './BRAINUP/korlit/modern_35.html': true,
      './BRAINUP/korlit/modern_36.html': true,
      './BRAINUP/korlit/modern_37.html': true,
      './BRAINUP/korlit/modern_38.html': true,
      './BRAINUP/korlit/modern_39.html': true,
      './BRAINUP/korlit/modern_40.html': true,
      // ÌïúÍµ≠Ïù∏Î¨º (people1_01 ~ people1_40)
      './BRAINUP/person/people1_01.html': true,
      './BRAINUP/person/people1_02.html': true,
      './BRAINUP/person/people1_03.html': true,
      './BRAINUP/person/people1_04.html': true,
      './BRAINUP/person/people1_05.html': true,
      './BRAINUP/person/people1_06.html': true,
      './BRAINUP/person/people1_07.html': true,
      './BRAINUP/person/people1_08.html': true,
      './BRAINUP/person/people1_09.html': true,
      './BRAINUP/person/people1_10.html': true,
      './BRAINUP/person/people1_11.html': true,
      './BRAINUP/person/people1_12.html': true,
      './BRAINUP/person/people1_13.html': true,
      './BRAINUP/person/people1_14.html': true,
      './BRAINUP/person/people1_15.html': true,
      './BRAINUP/person/people1_16.html': true,
      './BRAINUP/person/people1_17.html': true,
      './BRAINUP/person/people1_18.html': true,
      './BRAINUP/person/people1_19.html': true,
      './BRAINUP/person/people1_20.html': true,
      './BRAINUP/person/people1_21.html': true,
      './BRAINUP/person/people1_22.html': true,
      './BRAINUP/person/people1_23.html': true,
      './BRAINUP/person/people1_24.html': true,
      './BRAINUP/person/people1_25.html': true,
      './BRAINUP/person/people1_26.html': true,
      './BRAINUP/person/people1_27.html': true,
      './BRAINUP/person/people1_28.html': true,
      './BRAINUP/person/people1_29.html': true,
      './BRAINUP/person/people1_30.html': true,
      './BRAINUP/person/people1_31.html': true,
      './BRAINUP/person/people1_32.html': true,
      './BRAINUP/person/people1_33.html': true,
      './BRAINUP/person/people1_34.html': true,
      './BRAINUP/person/people1_35.html': true,
      './BRAINUP/person/people1_36.html': true,
      './BRAINUP/person/people1_37.html': true,
      './BRAINUP/person/people1_38.html': true,
      './BRAINUP/person/people1_39.html': true,
      './BRAINUP/person/people1_40.html': true,
      // ÏÑ∏Í≥ÑÏù∏Î¨º (people2_01 ~ people2_40)
      './BRAINUP/person/people2_01.html': true,
      './BRAINUP/person/people2_02.html': true,
      './BRAINUP/person/people2_03.html': true,
      './BRAINUP/person/people2_04.html': true,
      './BRAINUP/person/people2_05.html': true,
      './BRAINUP/person/people2_06.html': true,
      './BRAINUP/person/people2_07.html': true,
      './BRAINUP/person/people2_08.html': true,
      './BRAINUP/person/people2_09.html': true,
      './BRAINUP/person/people2_10.html': true,
      './BRAINUP/person/people2_11.html': true,
      './BRAINUP/person/people2_12.html': true,
      './BRAINUP/person/people2_13.html': true,
      './BRAINUP/person/people2_14.html': true,
      './BRAINUP/person/people2_15.html': true,
      './BRAINUP/person/people2_16.html': true,
      './BRAINUP/person/people2_17.html': true,
      './BRAINUP/person/people2_18.html': true,
      './BRAINUP/person/people2_19.html': true,
      './BRAINUP/person/people2_20.html': true,
      './BRAINUP/person/people2_21.html': true,
      './BRAINUP/person/people2_22.html': true,
      './BRAINUP/person/people2_23.html': true,
      './BRAINUP/person/people2_24.html': true,
      './BRAINUP/person/people2_25.html': true,
      './BRAINUP/person/people2_26.html': true,
      './BRAINUP/person/people2_27.html': true,
      './BRAINUP/person/people2_28.html': true,
      './BRAINUP/person/people2_29.html': true,
      './BRAINUP/person/people2_30.html': true,
      './BRAINUP/person/people2_31.html': true,
      './BRAINUP/person/people2_32.html': true,
      './BRAINUP/person/people2_33.html': true,
      './BRAINUP/person/people2_34.html': true,
      './BRAINUP/person/people2_35.html': true,
      './BRAINUP/person/people2_36.html': true,
      './BRAINUP/person/people2_37.html': true,
      './BRAINUP/person/people2_38.html': true,
      './BRAINUP/person/people2_39.html': true,
      './BRAINUP/person/people2_40.html': true,
      './BRAINUP/science/bio_01.html': true,
      './BRAINUP/science/bio_02.html': true,
      './BRAINUP/science/bio_03.html': true,
      './BRAINUP/science/bio_04.html': true,
      './BRAINUP/science/bio_05.html': true,
      './BRAINUP/science/bio_06.html': true,
      './BRAINUP/science/bio_07.html': true,
      './BRAINUP/science/bio_08.html': true,
      './BRAINUP/science/bio_09.html': true,
      './BRAINUP/science/bio_10.html': true,
      './BRAINUP/science/bio_11.html': true,
      './BRAINUP/science/bio_12.html': true,
      './BRAINUP/science/bio_13.html': true,
      './BRAINUP/science/bio_14.html': true,
      './BRAINUP/science/bio_15.html': true,
      './BRAINUP/science/bio_16.html': true,
      './BRAINUP/science/bio_17.html': true,
      './BRAINUP/science/bio_18.html': true,
      './BRAINUP/science/bio_19.html': true,
      './BRAINUP/science/bio_20.html': true,
      './BRAINUP/science/chem_01.html': true,
      './BRAINUP/science/chem_02.html': true,
      './BRAINUP/science/chem_03.html': true,
      './BRAINUP/science/chem_04.html': true,
      './BRAINUP/science/chem_05.html': true,
      './BRAINUP/science/chem_06.html': true,
      './BRAINUP/science/chem_07.html': true,
      './BRAINUP/science/chem_08.html': true,
      './BRAINUP/science/chem_09.html': true,
      './BRAINUP/science/chem_10.html': true,
      './BRAINUP/science/chem_11.html': true,
      './BRAINUP/science/chem_12.html': true,
      './BRAINUP/science/chem_13.html': true,
      './BRAINUP/science/chem_14.html': true,
      './BRAINUP/science/chem_15.html': true,
      './BRAINUP/science/chem_16.html': true,
      './BRAINUP/science/chem_17.html': true,
      './BRAINUP/science/chem_18.html': true,
      './BRAINUP/science/chem_19.html': true,
      './BRAINUP/science/chem_20.html': true,
      './BRAINUP/science/earth_01.html': true,
      './BRAINUP/science/earth_02.html': true,
      './BRAINUP/science/earth_03.html': true,
      './BRAINUP/science/earth_04.html': true,
      './BRAINUP/science/earth_05.html': true,
      './BRAINUP/science/earth_06.html': true,
      './BRAINUP/science/earth_07.html': true,
      './BRAINUP/science/earth_08.html': true,
      './BRAINUP/science/earth_09.html': true,
      './BRAINUP/science/earth_10.html': true,
      './BRAINUP/science/earth_11.html': true,
      './BRAINUP/science/earth_12.html': true,
      './BRAINUP/science/earth_13.html': true,
      './BRAINUP/science/earth_14.html': true,
      './BRAINUP/science/earth_15.html': true,
      './BRAINUP/science/earth_16.html': true,
      './BRAINUP/science/earth_17.html': true,
      './BRAINUP/science/earth_18.html': true,
      './BRAINUP/science/earth_19.html': true,
      './BRAINUP/science/earth_20.html': true,
      './BRAINUP/science/physics_01.html': true,
      './BRAINUP/science/physics_02.html': true,
      './BRAINUP/science/physics_03.html': true,
      './BRAINUP/science/physics_04.html': true,
      './BRAINUP/science/physics_05.html': true,
      './BRAINUP/science/physics_06.html': true,
      './BRAINUP/science/physics_07.html': true,
      './BRAINUP/science/physics_08.html': true,
      './BRAINUP/science/physics_09.html': true,
      './BRAINUP/science/physics_10.html': true,
      './BRAINUP/science/physics_11.html': true,
      './BRAINUP/science/physics_12.html': true,
      './BRAINUP/science/physics_13.html': true,
      './BRAINUP/science/physics_14.html': true,
      './BRAINUP/science/physics_15.html': true,
      './BRAINUP/science/physics_16.html': true,
      './BRAINUP/science/physics_17.html': true,
      './BRAINUP/science/physics_18.html': true,
      './BRAINUP/science/physics_19.html': true,
      './BRAINUP/science/physics_20.html': true,
      './BRAINUP/social/geo_01.html': true,
      './BRAINUP/social/geo_02.html': true,
      './BRAINUP/social/geo_03.html': true,
      './BRAINUP/social/geo_04.html': true,
      './BRAINUP/social/geo_05.html': true,
      './BRAINUP/social/geo_06.html': true,
      './BRAINUP/social/geo_07.html': true,
      './BRAINUP/social/geo_08.html': true,
      './BRAINUP/social/geo_09.html': true,
      './BRAINUP/social/geo_10.html': true,
      './BRAINUP/social/geo_11.html': true,
      './BRAINUP/social/geo_12.html': true,
      './BRAINUP/social/geo_13.html': true,
      './BRAINUP/social/geo_14.html': true,
      './BRAINUP/social/geo_15.html': true,
      './BRAINUP/social/geo_16.html': true,
      './BRAINUP/social/geo_17.html': true,
      './BRAINUP/social/geo_18.html': true,
      './BRAINUP/social/geo_19.html': true,
      './BRAINUP/social/geo_20.html': true,
      './BRAINUP/social/law_01.html': true,
      './BRAINUP/social/law_02.html': true,
      './BRAINUP/social/law_03.html': true,
      './BRAINUP/social/law_04.html': true,
      './BRAINUP/social/law_05.html': true,
      './BRAINUP/social/law_06.html': true,
      './BRAINUP/social/law_07.html': true,
      './BRAINUP/social/law_08.html': true,
      './BRAINUP/social/law_09.html': true,
      './BRAINUP/social/law_10.html': true,
      './BRAINUP/social/law_11.html': true,
      './BRAINUP/social/law_12.html': true,
      './BRAINUP/social/law_13.html': true,
      './BRAINUP/social/law_14.html': true,
      './BRAINUP/social/law_15.html': true,
      './BRAINUP/social/law_16.html': true,
      './BRAINUP/social/law_17.html': true,
      './BRAINUP/social/law_18.html': true,
      './BRAINUP/social/law_19.html': true,
      './BRAINUP/social/law_20.html': true,
      './BRAINUP/social/pol_01.html': true,
      './BRAINUP/social/pol_02.html': true,
      './BRAINUP/social/pol_03.html': true,
      './BRAINUP/social/pol_04.html': true,
      './BRAINUP/social/pol_05.html': true,
      './BRAINUP/social/pol_06.html': true,
      './BRAINUP/social/pol_07.html': true,
      './BRAINUP/social/pol_08.html': true,
      './BRAINUP/social/pol_09.html': true,
      './BRAINUP/social/pol_10.html': true,
      './BRAINUP/social/pol_11.html': true,
      './BRAINUP/social/pol_12.html': true,
      './BRAINUP/social/pol_13.html': true,
      './BRAINUP/social/pol_14.html': true,
      './BRAINUP/social/pol_15.html': true,
      './BRAINUP/social/pol_16.html': true,
      './BRAINUP/social/pol_17.html': true,
      './BRAINUP/social/pol_18.html': true,
      './BRAINUP/social/pol_19.html': true,
      './BRAINUP/social/pol_20.html': true,
      './BRAINUP/social/soc_01.html': true,
      './BRAINUP/social/soc_02.html': true,
      './BRAINUP/social/soc_03.html': true,
      './BRAINUP/social/soc_04.html': true,
      './BRAINUP/social/soc_05.html': true,
      './BRAINUP/social/soc_06.html': true,
      './BRAINUP/social/soc_07.html': true,
      './BRAINUP/social/soc_08.html': true,
      './BRAINUP/social/soc_09.html': true,
      './BRAINUP/social/soc_10.html': true,
      './BRAINUP/social/soc_11.html': true,
      './BRAINUP/social/soc_12.html': true,
      './BRAINUP/social/soc_13.html': true,
      './BRAINUP/social/soc_14.html': true,
      './BRAINUP/social/soc_15.html': true,
      './BRAINUP/social/soc_16.html': true,
      './BRAINUP/social/soc_17.html': true,
      './BRAINUP/social/soc_18.html': true,
      './BRAINUP/social/soc_19.html': true,
      './BRAINUP/social/soc_20.html': true,
      './BRAINUP/worldlit/world1_01.html': true,
      './BRAINUP/worldlit/world1_02.html': true,
      './BRAINUP/worldlit/world1_03.html': true,
      './BRAINUP/worldlit/world1_04.html': true,
      './BRAINUP/worldlit/world1_05.html': true,
      './BRAINUP/worldlit/world1_06.html': true,
      './BRAINUP/worldlit/world1_07.html': true,
      './BRAINUP/worldlit/world1_08.html': true,
      './BRAINUP/worldlit/world1_09.html': true,
      './BRAINUP/worldlit/world1_10.html': true,
      './BRAINUP/worldlit/world1_11.html': true,
      './BRAINUP/worldlit/world1_12.html': true,
      './BRAINUP/worldlit/world1_13.html': true,
      './BRAINUP/worldlit/world1_14.html': true,
      './BRAINUP/worldlit/world1_15.html': true,
      './BRAINUP/worldlit/world1_16.html': true,
      './BRAINUP/worldlit/world1_17.html': true,
      './BRAINUP/worldlit/world1_18.html': true,
      './BRAINUP/worldlit/world1_19.html': true,
      './BRAINUP/worldlit/world1_20.html': true,
      './BRAINUP/worldlit/world1_21.html': true,
      './BRAINUP/worldlit/world1_22.html': true,
      './BRAINUP/worldlit/world1_23.html': true,
      './BRAINUP/worldlit/world1_24.html': true,
      './BRAINUP/worldlit/world1_25.html': true,
      './BRAINUP/worldlit/world1_26.html': true,
      './BRAINUP/worldlit/world1_27.html': true,
      './BRAINUP/worldlit/world1_28.html': true,
      './BRAINUP/worldlit/world1_29.html': true,
      './BRAINUP/worldlit/world1_30.html': true,
      './BRAINUP/worldlit/world1_31.html': true,
      './BRAINUP/worldlit/world1_32.html': true,
      './BRAINUP/worldlit/world1_33.html': true,
      './BRAINUP/worldlit/world1_34.html': true,
      './BRAINUP/worldlit/world1_35.html': true,
      './BRAINUP/worldlit/world1_36.html': true,
      './BRAINUP/worldlit/world1_37.html': true,
      './BRAINUP/worldlit/world1_38.html': true,
      './BRAINUP/worldlit/world1_39.html': true,
      './BRAINUP/worldlit/world1_40.html': true,
      './BRAINUP/worldlit/world2_01.html': true,
      './BRAINUP/worldlit/world2_02.html': true,
      './BRAINUP/worldlit/world2_03.html': true,
      './BRAINUP/worldlit/world2_04.html': true,
      './BRAINUP/worldlit/world2_05.html': true,
      './BRAINUP/worldlit/world2_06.html': true,
      './BRAINUP/worldlit/world2_07.html': true,
      './BRAINUP/worldlit/world2_08.html': true,
      './BRAINUP/worldlit/world2_09.html': true,
      './BRAINUP/worldlit/world2_10.html': true,
      './BRAINUP/worldlit/world2_11.html': true,
      './BRAINUP/worldlit/world2_12.html': true,
      './BRAINUP/worldlit/world2_13.html': true,
      './BRAINUP/worldlit/world2_14.html': true,
      './BRAINUP/worldlit/world2_15.html': true,
      './BRAINUP/worldlit/world2_16.html': true,
      './BRAINUP/worldlit/world2_17.html': true,
      './BRAINUP/worldlit/world2_18.html': true,
      './BRAINUP/worldlit/world2_19.html': true,
      './BRAINUP/worldlit/world2_20.html': true,
      './BRAINUP/worldlit/world2_21.html': true,
      './BRAINUP/worldlit/world2_22.html': true,
      './BRAINUP/worldlit/world2_23.html': true,
      './BRAINUP/worldlit/world2_24.html': true,
      './BRAINUP/worldlit/world2_25.html': true,
      './BRAINUP/worldlit/world2_26.html': true,
      './BRAINUP/worldlit/world2_27.html': true,
      './BRAINUP/worldlit/world2_28.html': true,
      './BRAINUP/worldlit/world2_29.html': true,
      './BRAINUP/worldlit/world2_30.html': true,
      './BRAINUP/worldlit/world2_31.html': true,
      './BRAINUP/worldlit/world2_32.html': true,
      './BRAINUP/worldlit/world2_33.html': true,
      './BRAINUP/worldlit/world2_34.html': true,
      './BRAINUP/worldlit/world2_35.html': true,
      './BRAINUP/worldlit/world2_36.html': true,
      './BRAINUP/worldlit/world2_37.html': true,
      './BRAINUP/worldlit/world2_38.html': true,
      './BRAINUP/worldlit/world2_39.html': true,
      './BRAINUP/worldlit/world2_40.html': true,
      './BRAINUP/korlit/fit_classic_01.html': true,
      './BRAINUP/korlit/fit_classic_02.html': true,
      './BRAINUP/korlit/fit_classic_03.html': true,
      './BRAINUP/korlit/fit_classic_04.html': true,
      './BRAINUP/korlit/fit_classic_05.html': true,
      './BRAINUP/korlit/fit_classic_06.html': true,
      './BRAINUP/korlit/fit_classic_07.html': true,
      './BRAINUP/korlit/fit_classic_08.html': true,
      './BRAINUP/korlit/fit_classic_09.html': true,
      './BRAINUP/korlit/fit_classic_10.html': true,
      './BRAINUP/korlit/fit_classic_11.html': true,
      './BRAINUP/korlit/fit_classic_12.html': true,
      './BRAINUP/korlit/fit_classic_13.html': true,
      './BRAINUP/korlit/fit_classic_14.html': true,
      './BRAINUP/korlit/fit_classic_15.html': true,
      './BRAINUP/korlit/fit_classic_16.html': true,
      './BRAINUP/korlit/fit_classic_17.html': true,
      './BRAINUP/korlit/fit_classic_18.html': true,
      './BRAINUP/korlit/fit_classic_19.html': true,
      './BRAINUP/korlit/fit_classic_20.html': true,
      './BRAINUP/korlit/fit_classic_21.html': true,
      './BRAINUP/korlit/fit_classic_22.html': true,
      './BRAINUP/korlit/fit_classic_23.html': true,
      './BRAINUP/korlit/fit_classic_24.html': true,
      './BRAINUP/korlit/fit_classic_25.html': true,
      './BRAINUP/korlit/fit_classic_26.html': true,
      './BRAINUP/korlit/fit_classic_27.html': true,
      './BRAINUP/korlit/fit_classic_28.html': true,
      './BRAINUP/korlit/fit_classic_29.html': true,
      './BRAINUP/korlit/fit_classic_30.html': true,
      './BRAINUP/korlit/fit_classic_31.html': true,
      './BRAINUP/korlit/fit_classic_32.html': true,
      './BRAINUP/korlit/fit_classic_33.html': true,
      './BRAINUP/korlit/fit_classic_34.html': true,
      './BRAINUP/korlit/fit_classic_35.html': true,
      './BRAINUP/korlit/fit_classic_36.html': true,
      './BRAINUP/korlit/fit_classic_37.html': true,
      './BRAINUP/korlit/fit_classic_38.html': true,
      './BRAINUP/korlit/fit_classic_39.html': true,
      './BRAINUP/korlit/fit_classic_40.html': true,
      './BRAINUP/korlit/fit_modern_01.html': true,
      './BRAINUP/korlit/fit_modern_02.html': true,
      './BRAINUP/korlit/fit_modern_03.html': true,
      './BRAINUP/korlit/fit_modern_04.html': true,
      './BRAINUP/korlit/fit_modern_05.html': true,
      './BRAINUP/korlit/fit_modern_06.html': true,
      './BRAINUP/korlit/fit_modern_07.html': true,
      './BRAINUP/korlit/fit_modern_08.html': true,
      './BRAINUP/korlit/fit_modern_09.html': true,
      './BRAINUP/korlit/fit_modern_10.html': true,
      './BRAINUP/korlit/fit_modern_11.html': true,
      './BRAINUP/korlit/fit_modern_12.html': true,
      './BRAINUP/korlit/fit_modern_13.html': true,
      './BRAINUP/korlit/fit_modern_14.html': true,
      './BRAINUP/korlit/fit_modern_15.html': true,
      './BRAINUP/korlit/fit_modern_16.html': true,
      './BRAINUP/korlit/fit_modern_17.html': true,
      './BRAINUP/korlit/fit_modern_18.html': true,
      './BRAINUP/korlit/fit_modern_19.html': true,
      './BRAINUP/korlit/fit_modern_20.html': true,
      './BRAINUP/korlit/fit_modern_21.html': true,
      './BRAINUP/korlit/fit_modern_22.html': true,
      './BRAINUP/korlit/fit_modern_23.html': true,
      './BRAINUP/korlit/fit_modern_24.html': true,
      './BRAINUP/korlit/fit_modern_25.html': true,
      './BRAINUP/korlit/fit_modern_26.html': true,
      './BRAINUP/korlit/fit_modern_27.html': true,
      './BRAINUP/korlit/fit_modern_28.html': true,
      './BRAINUP/korlit/fit_modern_29.html': true,
      './BRAINUP/korlit/fit_modern_30.html': true,
      './BRAINUP/korlit/fit_modern_31.html': true,
      './BRAINUP/korlit/fit_modern_32.html': true,
      './BRAINUP/korlit/fit_modern_33.html': true,
      './BRAINUP/korlit/fit_modern_34.html': true,
      './BRAINUP/korlit/fit_modern_35.html': true,
      './BRAINUP/korlit/fit_modern_36.html': true,
      './BRAINUP/korlit/fit_modern_37.html': true,
      './BRAINUP/korlit/fit_modern_38.html': true,
      './BRAINUP/korlit/fit_modern_39.html': true,
      './BRAINUP/korlit/fit_modern_40.html': true,
      './BRAINUP/person/fit_people1_01.html': true,
      './BRAINUP/person/fit_people1_02.html': true,
      './BRAINUP/person/fit_people1_03.html': true,
      './BRAINUP/person/fit_people1_04.html': true,
      './BRAINUP/person/fit_people1_05.html': true,
      './BRAINUP/person/fit_people1_06.html': true,
      './BRAINUP/person/fit_people1_07.html': true,
      './BRAINUP/person/fit_people1_08.html': true,
      './BRAINUP/person/fit_people1_09.html': true,
      './BRAINUP/person/fit_people1_10.html': true,
      './BRAINUP/person/fit_people1_11.html': true,
      './BRAINUP/person/fit_people1_12.html': true,
      './BRAINUP/person/fit_people1_13.html': true,
      './BRAINUP/person/fit_people1_14.html': true,
      './BRAINUP/person/fit_people1_15.html': true,
      './BRAINUP/person/fit_people1_16.html': true,
      './BRAINUP/person/fit_people1_17.html': true,
      './BRAINUP/person/fit_people1_18.html': true,
      './BRAINUP/person/fit_people1_19.html': true,
      './BRAINUP/person/fit_people1_20.html': true,
      './BRAINUP/person/fit_people1_21.html': true,
      './BRAINUP/person/fit_people1_22.html': true,
      './BRAINUP/person/fit_people1_23.html': true,
      './BRAINUP/person/fit_people1_24.html': true,
      './BRAINUP/person/fit_people1_25.html': true,
      './BRAINUP/person/fit_people1_26.html': true,
      './BRAINUP/person/fit_people1_27.html': true,
      './BRAINUP/person/fit_people1_28.html': true,
      './BRAINUP/person/fit_people1_29.html': true,
      './BRAINUP/person/fit_people1_30.html': true,
      './BRAINUP/person/fit_people1_31.html': true,
      './BRAINUP/person/fit_people1_32.html': true,
      './BRAINUP/person/fit_people1_33.html': true,
      './BRAINUP/person/fit_people1_34.html': true,
      './BRAINUP/person/fit_people1_35.html': true,
      './BRAINUP/person/fit_people1_36.html': true,
      './BRAINUP/person/fit_people1_37.html': true,
      './BRAINUP/person/fit_people1_38.html': true,
      './BRAINUP/person/fit_people1_39.html': true,
      './BRAINUP/person/fit_people1_40.html': true,
      './BRAINUP/person/fit_people2_01.html': true,
      './BRAINUP/person/fit_people2_02.html': true,
      './BRAINUP/person/fit_people2_03.html': true,
      './BRAINUP/person/fit_people2_04.html': true,
      './BRAINUP/person/fit_people2_05.html': true,
      './BRAINUP/person/fit_people2_06.html': true,
      './BRAINUP/person/fit_people2_07.html': true,
      './BRAINUP/person/fit_people2_08.html': true,
      './BRAINUP/person/fit_people2_09.html': true,
      './BRAINUP/person/fit_people2_10.html': true,
      './BRAINUP/person/fit_people2_11.html': true,
      './BRAINUP/person/fit_people2_12.html': true,
      './BRAINUP/person/fit_people2_13.html': true,
      './BRAINUP/person/fit_people2_14.html': true,
      './BRAINUP/person/fit_people2_15.html': true,
      './BRAINUP/person/fit_people2_16.html': true,
      './BRAINUP/person/fit_people2_17.html': true,
      './BRAINUP/person/fit_people2_18.html': true,
      './BRAINUP/person/fit_people2_19.html': true,
      './BRAINUP/person/fit_people2_20.html': true,
      './BRAINUP/person/fit_people2_21.html': true,
      './BRAINUP/person/fit_people2_22.html': true,
      './BRAINUP/person/fit_people2_23.html': true,
      './BRAINUP/person/fit_people2_24.html': true,
      './BRAINUP/person/fit_people2_25.html': true,
      './BRAINUP/person/fit_people2_26.html': true,
      './BRAINUP/person/fit_people2_27.html': true,
      './BRAINUP/person/fit_people2_28.html': true,
      './BRAINUP/person/fit_people2_29.html': true,
      './BRAINUP/person/fit_people2_30.html': true,
      './BRAINUP/person/fit_people2_31.html': true,
      './BRAINUP/person/fit_people2_32.html': true,
      './BRAINUP/person/fit_people2_33.html': true,
      './BRAINUP/person/fit_people2_34.html': true,
      './BRAINUP/person/fit_people2_35.html': true,
      './BRAINUP/person/fit_people2_36.html': true,
      './BRAINUP/person/fit_people2_37.html': true,
      './BRAINUP/person/fit_people2_38.html': true,
      './BRAINUP/person/fit_people2_39.html': true,
      './BRAINUP/person/fit_people2_40.html': true,
      './BRAINUP/science/fit_bio_01.html': true,
      './BRAINUP/science/fit_bio_02.html': true,
      './BRAINUP/science/fit_bio_03.html': true,
      './BRAINUP/science/fit_bio_04.html': true,
      './BRAINUP/science/fit_bio_05.html': true,
      './BRAINUP/science/fit_bio_06.html': true,
      './BRAINUP/science/fit_bio_07.html': true,
      './BRAINUP/science/fit_bio_08.html': true,
      './BRAINUP/science/fit_bio_09.html': true,
      './BRAINUP/science/fit_bio_10.html': true,
      './BRAINUP/science/fit_bio_11.html': true,
      './BRAINUP/science/fit_bio_12.html': true,
      './BRAINUP/science/fit_bio_13.html': true,
      './BRAINUP/science/fit_bio_14.html': true,
      './BRAINUP/science/fit_bio_15.html': true,
      './BRAINUP/science/fit_bio_16.html': true,
      './BRAINUP/science/fit_bio_17.html': true,
      './BRAINUP/science/fit_bio_18.html': true,
      './BRAINUP/science/fit_bio_19.html': true,
      './BRAINUP/science/fit_bio_20.html': true,
      './BRAINUP/science/fit_chem_01.html': true,
      './BRAINUP/science/fit_chem_02.html': true,
      './BRAINUP/science/fit_chem_03.html': true,
      './BRAINUP/science/fit_chem_04.html': true,
      './BRAINUP/science/fit_chem_05.html': true,
      './BRAINUP/science/fit_chem_06.html': true,
      './BRAINUP/science/fit_chem_07.html': true,
      './BRAINUP/science/fit_chem_08.html': true,
      './BRAINUP/science/fit_chem_09.html': true,
      './BRAINUP/science/fit_chem_10.html': true,
      './BRAINUP/science/fit_chem_11.html': true,
      './BRAINUP/science/fit_chem_12.html': true,
      './BRAINUP/science/fit_chem_13.html': true,
      './BRAINUP/science/fit_chem_14.html': true,
      './BRAINUP/science/fit_chem_15.html': true,
      './BRAINUP/science/fit_chem_16.html': true,
      './BRAINUP/science/fit_chem_17.html': true,
      './BRAINUP/science/fit_chem_18.html': true,
      './BRAINUP/science/fit_chem_19.html': true,
      './BRAINUP/science/fit_chem_20.html': true,
      './BRAINUP/science/fit_earth_01.html': true,
      './BRAINUP/science/fit_earth_02.html': true,
      './BRAINUP/science/fit_earth_03.html': true,
      './BRAINUP/science/fit_earth_04.html': true,
      './BRAINUP/science/fit_earth_05.html': true,
      './BRAINUP/science/fit_earth_06.html': true,
      './BRAINUP/science/fit_earth_07.html': true,
      './BRAINUP/science/fit_earth_08.html': true,
      './BRAINUP/science/fit_earth_09.html': true,
      './BRAINUP/science/fit_earth_10.html': true,
      './BRAINUP/science/fit_earth_11.html': true,
      './BRAINUP/science/fit_earth_12.html': true,
      './BRAINUP/science/fit_earth_13.html': true,
      './BRAINUP/science/fit_earth_14.html': true,
      './BRAINUP/science/fit_earth_15.html': true,
      './BRAINUP/science/fit_earth_16.html': true,
      './BRAINUP/science/fit_earth_17.html': true,
      './BRAINUP/science/fit_earth_18.html': true,
      './BRAINUP/science/fit_earth_19.html': true,
      './BRAINUP/science/fit_earth_20.html': true,
      './BRAINUP/science/fit_physics_01.html': true,
      './BRAINUP/science/fit_physics_02.html': true,
      './BRAINUP/science/fit_physics_03.html': true,
      './BRAINUP/science/fit_physics_04.html': true,
      './BRAINUP/science/fit_physics_05.html': true,
      './BRAINUP/science/fit_physics_06.html': true,
      './BRAINUP/science/fit_physics_07.html': true,
      './BRAINUP/science/fit_physics_08.html': true,
      './BRAINUP/science/fit_physics_09.html': true,
      './BRAINUP/science/fit_physics_10.html': true,
      './BRAINUP/science/fit_physics_11.html': true,
      './BRAINUP/science/fit_physics_12.html': true,
      './BRAINUP/science/fit_physics_13.html': true,
      './BRAINUP/science/fit_physics_14.html': true,
      './BRAINUP/science/fit_physics_15.html': true,
      './BRAINUP/science/fit_physics_16.html': true,
      './BRAINUP/science/fit_physics_17.html': true,
      './BRAINUP/science/fit_physics_18.html': true,
      './BRAINUP/science/fit_physics_19.html': true,
      './BRAINUP/science/fit_physics_20.html': true,
      './BRAINUP/social/fit_geo_01.html': true,
      './BRAINUP/social/fit_geo_02.html': true,
      './BRAINUP/social/fit_geo_03.html': true,
      './BRAINUP/social/fit_geo_04.html': true,
      './BRAINUP/social/fit_geo_05.html': true,
      './BRAINUP/social/fit_geo_06.html': true,
      './BRAINUP/social/fit_geo_07.html': true,
      './BRAINUP/social/fit_geo_08.html': true,
      './BRAINUP/social/fit_geo_09.html': true,
      './BRAINUP/social/fit_geo_10.html': true,
      './BRAINUP/social/fit_geo_11.html': true,
      './BRAINUP/social/fit_geo_12.html': true,
      './BRAINUP/social/fit_geo_13.html': true,
      './BRAINUP/social/fit_geo_14.html': true,
      './BRAINUP/social/fit_geo_15.html': true,
      './BRAINUP/social/fit_geo_16.html': true,
      './BRAINUP/social/fit_geo_17.html': true,
      './BRAINUP/social/fit_geo_18.html': true,
      './BRAINUP/social/fit_geo_19.html': true,
      './BRAINUP/social/fit_geo_20.html': true,
      './BRAINUP/social/fit_law_01.html': true,
      './BRAINUP/social/fit_law_02.html': true,
      './BRAINUP/social/fit_law_03.html': true,
      './BRAINUP/social/fit_law_04.html': true,
      './BRAINUP/social/fit_law_05.html': true,
      './BRAINUP/social/fit_law_06.html': true,
      './BRAINUP/social/fit_law_07.html': true,
      './BRAINUP/social/fit_law_08.html': true,
      './BRAINUP/social/fit_law_09.html': true,
      './BRAINUP/social/fit_law_10.html': true,
      './BRAINUP/social/fit_law_11.html': true,
      './BRAINUP/social/fit_law_12.html': true,
      './BRAINUP/social/fit_law_13.html': true,
      './BRAINUP/social/fit_law_14.html': true,
      './BRAINUP/social/fit_law_15.html': true,
      './BRAINUP/social/fit_law_16.html': true,
      './BRAINUP/social/fit_law_17.html': true,
      './BRAINUP/social/fit_law_18.html': true,
      './BRAINUP/social/fit_law_19.html': true,
      './BRAINUP/social/fit_law_20.html': true,
      './BRAINUP/social/fit_pol_01.html': true,
      './BRAINUP/social/fit_pol_02.html': true,
      './BRAINUP/social/fit_pol_03.html': true,
      './BRAINUP/social/fit_pol_04.html': true,
      './BRAINUP/social/fit_pol_05.html': true,
      './BRAINUP/social/fit_pol_06.html': true,
      './BRAINUP/social/fit_pol_07.html': true,
      './BRAINUP/social/fit_pol_08.html': true,
      './BRAINUP/social/fit_pol_09.html': true,
      './BRAINUP/social/fit_pol_10.html': true,
      './BRAINUP/social/fit_pol_11.html': true,
      './BRAINUP/social/fit_pol_12.html': true,
      './BRAINUP/social/fit_pol_13.html': true,
      './BRAINUP/social/fit_pol_14.html': true,
      './BRAINUP/social/fit_pol_15.html': true,
      './BRAINUP/social/fit_pol_16.html': true,
      './BRAINUP/social/fit_pol_17.html': true,
      './BRAINUP/social/fit_pol_18.html': true,
      './BRAINUP/social/fit_pol_19.html': true,
      './BRAINUP/social/fit_pol_20.html': true,
      './BRAINUP/social/fit_soc_01.html': true,
      './BRAINUP/social/fit_soc_02.html': true,
      './BRAINUP/social/fit_soc_03.html': true,
      './BRAINUP/social/fit_soc_04.html': true,
      './BRAINUP/social/fit_soc_05.html': true,
      './BRAINUP/social/fit_soc_06.html': true,
      './BRAINUP/social/fit_soc_07.html': true,
      './BRAINUP/social/fit_soc_08.html': true,
      './BRAINUP/social/fit_soc_09.html': true,
      './BRAINUP/social/fit_soc_10.html': true,
      './BRAINUP/social/fit_soc_11.html': true,
      './BRAINUP/social/fit_soc_12.html': true,
      './BRAINUP/social/fit_soc_13.html': true,
      './BRAINUP/social/fit_soc_14.html': true,
      './BRAINUP/social/fit_soc_15.html': true,
      './BRAINUP/social/fit_soc_16.html': true,
      './BRAINUP/social/fit_soc_17.html': true,
      './BRAINUP/social/fit_soc_18.html': true,
      './BRAINUP/social/fit_soc_19.html': true,
      './BRAINUP/social/fit_soc_20.html': true,
      './BRAINUP/worldlit/fit_world1_01.html': true,
      './BRAINUP/worldlit/fit_world1_02.html': true,
      './BRAINUP/worldlit/fit_world1_03.html': true,
      './BRAINUP/worldlit/fit_world1_04.html': true,
      './BRAINUP/worldlit/fit_world1_05.html': true,
      './BRAINUP/worldlit/fit_world1_06.html': true,
      './BRAINUP/worldlit/fit_world1_07.html': true,
      './BRAINUP/worldlit/fit_world1_08.html': true,
      './BRAINUP/worldlit/fit_world1_09.html': true,
      './BRAINUP/worldlit/fit_world1_10.html': true,
      './BRAINUP/worldlit/fit_world1_11.html': true,
      './BRAINUP/worldlit/fit_world1_12.html': true,
      './BRAINUP/worldlit/fit_world1_13.html': true,
      './BRAINUP/worldlit/fit_world1_14.html': true,
      './BRAINUP/worldlit/fit_world1_15.html': true,
      './BRAINUP/worldlit/fit_world1_16.html': true,
      './BRAINUP/worldlit/fit_world1_17.html': true,
      './BRAINUP/worldlit/fit_world1_18.html': true,
      './BRAINUP/worldlit/fit_world1_19.html': true,
      './BRAINUP/worldlit/fit_world1_20.html': true,
      './BRAINUP/worldlit/fit_world1_21.html': true,
      './BRAINUP/worldlit/fit_world1_22.html': true,
      './BRAINUP/worldlit/fit_world1_23.html': true,
      './BRAINUP/worldlit/fit_world1_24.html': true,
      './BRAINUP/worldlit/fit_world1_25.html': true,
      './BRAINUP/worldlit/fit_world1_26.html': true,
      './BRAINUP/worldlit/fit_world1_27.html': true,
      './BRAINUP/worldlit/fit_world1_28.html': true,
      './BRAINUP/worldlit/fit_world1_29.html': true,
      './BRAINUP/worldlit/fit_world1_30.html': true,
      './BRAINUP/worldlit/fit_world1_31.html': true,
      './BRAINUP/worldlit/fit_world1_32.html': true,
      './BRAINUP/worldlit/fit_world1_33.html': true,
      './BRAINUP/worldlit/fit_world1_34.html': true,
      './BRAINUP/worldlit/fit_world1_35.html': true,
      './BRAINUP/worldlit/fit_world1_36.html': true,
      './BRAINUP/worldlit/fit_world1_37.html': true,
      './BRAINUP/worldlit/fit_world1_38.html': true,
      './BRAINUP/worldlit/fit_world1_39.html': true,
      './BRAINUP/worldlit/fit_world1_40.html': true,
      './BRAINUP/worldlit/fit_world2_01.html': true,
      './BRAINUP/worldlit/fit_world2_02.html': true,
      './BRAINUP/worldlit/fit_world2_03.html': true,
      './BRAINUP/worldlit/fit_world2_04.html': true,
      './BRAINUP/worldlit/fit_world2_05.html': true,
      './BRAINUP/worldlit/fit_world2_06.html': true,
      './BRAINUP/worldlit/fit_world2_07.html': true,
      './BRAINUP/worldlit/fit_world2_08.html': true,
      './BRAINUP/worldlit/fit_world2_09.html': true,
      './BRAINUP/worldlit/fit_world2_10.html': true,
      './BRAINUP/worldlit/fit_world2_11.html': true,
      './BRAINUP/worldlit/fit_world2_12.html': true,
      './BRAINUP/worldlit/fit_world2_13.html': true,
      './BRAINUP/worldlit/fit_world2_14.html': true,
      './BRAINUP/worldlit/fit_world2_15.html': true,
      './BRAINUP/worldlit/fit_world2_16.html': true,
      './BRAINUP/worldlit/fit_world2_17.html': true,
      './BRAINUP/worldlit/fit_world2_18.html': true,
      './BRAINUP/worldlit/fit_world2_19.html': true,
      './BRAINUP/worldlit/fit_world2_20.html': true,
      './BRAINUP/worldlit/fit_world2_21.html': true,
      './BRAINUP/worldlit/fit_world2_22.html': true,
      './BRAINUP/worldlit/fit_world2_23.html': true,
      './BRAINUP/worldlit/fit_world2_24.html': true,
      './BRAINUP/worldlit/fit_world2_25.html': true,
      './BRAINUP/worldlit/fit_world2_26.html': true,
      './BRAINUP/worldlit/fit_world2_27.html': true,
      './BRAINUP/worldlit/fit_world2_28.html': true,
      './BRAINUP/worldlit/fit_world2_29.html': true,
      './BRAINUP/worldlit/fit_world2_30.html': true,
      './BRAINUP/worldlit/fit_world2_31.html': true,
      './BRAINUP/worldlit/fit_world2_32.html': true,
      './BRAINUP/worldlit/fit_world2_33.html': true,
      './BRAINUP/worldlit/fit_world2_34.html': true,
      './BRAINUP/worldlit/fit_world2_35.html': true,
      './BRAINUP/worldlit/fit_world2_36.html': true,
      './BRAINUP/worldlit/fit_world2_37.html': true,
      './BRAINUP/worldlit/fit_world2_38.html': true,
      './BRAINUP/worldlit/fit_world2_39.html': true,
      './BRAINUP/worldlit/fit_world2_40.html': true,
      './BRAINUP/korlit/deep_classic_01.html': true,
      './BRAINUP/korlit/deep_classic_02.html': true,
      './BRAINUP/korlit/deep_classic_03.html': true,
      './BRAINUP/korlit/deep_classic_04.html': true,
      './BRAINUP/korlit/deep_classic_05.html': true,
      './BRAINUP/korlit/deep_classic_06.html': true,
      './BRAINUP/korlit/deep_classic_07.html': true,
      './BRAINUP/korlit/deep_classic_08.html': true,
      './BRAINUP/korlit/deep_classic_09.html': true,
      './BRAINUP/korlit/deep_classic_10.html': true,
      './BRAINUP/korlit/deep_classic_11.html': true,
      './BRAINUP/korlit/deep_classic_12.html': true,
      './BRAINUP/korlit/deep_classic_13.html': true,
      './BRAINUP/korlit/deep_classic_14.html': true,
      './BRAINUP/korlit/deep_classic_15.html': true,
      './BRAINUP/korlit/deep_classic_16.html': true,
      './BRAINUP/korlit/deep_classic_17.html': true,
      './BRAINUP/korlit/deep_classic_18.html': true,
      './BRAINUP/korlit/deep_classic_19.html': true,
      './BRAINUP/korlit/deep_classic_20.html': true,
      './BRAINUP/korlit/deep_classic_21.html': true,
      './BRAINUP/korlit/deep_classic_22.html': true,
      './BRAINUP/korlit/deep_classic_23.html': true,
      './BRAINUP/korlit/deep_classic_24.html': true,
      './BRAINUP/korlit/deep_classic_25.html': true,
      './BRAINUP/korlit/deep_classic_26.html': true,
      './BRAINUP/korlit/deep_classic_27.html': true,
      './BRAINUP/korlit/deep_classic_28.html': true,
      './BRAINUP/korlit/deep_classic_29.html': true,
      './BRAINUP/korlit/deep_classic_30.html': true,
      './BRAINUP/korlit/deep_classic_31.html': true,
      './BRAINUP/korlit/deep_classic_32.html': true,
      './BRAINUP/korlit/deep_classic_33.html': true,
      './BRAINUP/korlit/deep_classic_34.html': true,
      './BRAINUP/korlit/deep_classic_35.html': true,
      './BRAINUP/korlit/deep_classic_36.html': true,
      './BRAINUP/korlit/deep_classic_37.html': true,
      './BRAINUP/korlit/deep_classic_38.html': true,
      './BRAINUP/korlit/deep_classic_39.html': true,
      './BRAINUP/korlit/deep_classic_40.html': true,
      './BRAINUP/korlit/deep_modern_01.html': true,
      './BRAINUP/korlit/deep_modern_02.html': true,
      './BRAINUP/korlit/deep_modern_03.html': true,
      './BRAINUP/korlit/deep_modern_04.html': true,
      './BRAINUP/korlit/deep_modern_05.html': true,
      './BRAINUP/korlit/deep_modern_06.html': true,
      './BRAINUP/korlit/deep_modern_07.html': true,
      './BRAINUP/korlit/deep_modern_08.html': true,
      './BRAINUP/korlit/deep_modern_09.html': true,
      './BRAINUP/korlit/deep_modern_10.html': true,
      './BRAINUP/korlit/deep_modern_11.html': true,
      './BRAINUP/korlit/deep_modern_12.html': true,
      './BRAINUP/korlit/deep_modern_13.html': true,
      './BRAINUP/korlit/deep_modern_14.html': true,
      './BRAINUP/korlit/deep_modern_15.html': true,
      './BRAINUP/korlit/deep_modern_16.html': true,
      './BRAINUP/korlit/deep_modern_17.html': true,
      './BRAINUP/korlit/deep_modern_18.html': true,
      './BRAINUP/korlit/deep_modern_19.html': true,
      './BRAINUP/korlit/deep_modern_20.html': true,
      './BRAINUP/korlit/deep_modern_21.html': true,
      './BRAINUP/korlit/deep_modern_22.html': true,
      './BRAINUP/korlit/deep_modern_23.html': true,
      './BRAINUP/korlit/deep_modern_24.html': true,
      './BRAINUP/korlit/deep_modern_25.html': true,
      './BRAINUP/korlit/deep_modern_26.html': true,
      './BRAINUP/korlit/deep_modern_27.html': true,
      './BRAINUP/korlit/deep_modern_28.html': true,
      './BRAINUP/korlit/deep_modern_29.html': true,
      './BRAINUP/korlit/deep_modern_30.html': true,
      './BRAINUP/korlit/deep_modern_31.html': true,
      './BRAINUP/korlit/deep_modern_32.html': true,
      './BRAINUP/korlit/deep_modern_33.html': true,
      './BRAINUP/korlit/deep_modern_34.html': true,
      './BRAINUP/korlit/deep_modern_35.html': true,
      './BRAINUP/korlit/deep_modern_36.html': true,
      './BRAINUP/korlit/deep_modern_37.html': true,
      './BRAINUP/korlit/deep_modern_38.html': true,
      './BRAINUP/korlit/deep_modern_39.html': true,
      './BRAINUP/korlit/deep_modern_40.html': true,
      './BRAINUP/person/deep_people1_01.html': true,
      './BRAINUP/person/deep_people1_02.html': true,
      './BRAINUP/person/deep_people1_03.html': true,
      './BRAINUP/person/deep_people1_04.html': true,
      './BRAINUP/person/deep_people1_05.html': true,
      './BRAINUP/person/deep_people1_06.html': true,
      './BRAINUP/person/deep_people1_07.html': true,
      './BRAINUP/person/deep_people1_08.html': true,
      './BRAINUP/person/deep_people1_09.html': true,
      './BRAINUP/person/deep_people1_10.html': true,
      './BRAINUP/person/deep_people1_11.html': true,
      './BRAINUP/person/deep_people1_12.html': true,
      './BRAINUP/person/deep_people1_13.html': true,
      './BRAINUP/person/deep_people1_14.html': true,
      './BRAINUP/person/deep_people1_15.html': true,
      './BRAINUP/person/deep_people1_16.html': true,
      './BRAINUP/person/deep_people1_17.html': true,
      './BRAINUP/person/deep_people1_18.html': true,
      './BRAINUP/person/deep_people1_19.html': true,
      './BRAINUP/person/deep_people1_20.html': true,
      './BRAINUP/person/deep_people1_21.html': true,
      './BRAINUP/person/deep_people1_22.html': true,
      './BRAINUP/person/deep_people1_23.html': true,
      './BRAINUP/person/deep_people1_24.html': true,
      './BRAINUP/person/deep_people1_25.html': true,
      './BRAINUP/person/deep_people1_26.html': true,
      './BRAINUP/person/deep_people1_27.html': true,
      './BRAINUP/person/deep_people1_28.html': true,
      './BRAINUP/person/deep_people1_29.html': true,
      './BRAINUP/person/deep_people1_30.html': true,
      './BRAINUP/person/deep_people1_31.html': true,
      './BRAINUP/person/deep_people1_32.html': true,
      './BRAINUP/person/deep_people1_33.html': true,
      './BRAINUP/person/deep_people1_34.html': true,
      './BRAINUP/person/deep_people1_35.html': true,
      './BRAINUP/person/deep_people1_36.html': true,
      './BRAINUP/person/deep_people1_37.html': true,
      './BRAINUP/person/deep_people1_38.html': true,
      './BRAINUP/person/deep_people1_39.html': true,
      './BRAINUP/person/deep_people1_40.html': true,
      './BRAINUP/person/deep_people2_01.html': true,
      './BRAINUP/person/deep_people2_02.html': true,
      './BRAINUP/person/deep_people2_03.html': true,
      './BRAINUP/person/deep_people2_04.html': true,
      './BRAINUP/person/deep_people2_05.html': true,
      './BRAINUP/person/deep_people2_06.html': true,
      './BRAINUP/person/deep_people2_07.html': true,
      './BRAINUP/person/deep_people2_08.html': true,
      './BRAINUP/person/deep_people2_09.html': true,
      './BRAINUP/person/deep_people2_10.html': true,
      './BRAINUP/person/deep_people2_11.html': true,
      './BRAINUP/person/deep_people2_12.html': true,
      './BRAINUP/person/deep_people2_13.html': true,
      './BRAINUP/person/deep_people2_14.html': true,
      './BRAINUP/person/deep_people2_15.html': true,
      './BRAINUP/person/deep_people2_16.html': true,
      './BRAINUP/person/deep_people2_17.html': true,
      './BRAINUP/person/deep_people2_18.html': true,
      './BRAINUP/person/deep_people2_19.html': true,
      './BRAINUP/person/deep_people2_20.html': true,
      './BRAINUP/person/deep_people2_21.html': true,
      './BRAINUP/person/deep_people2_22.html': true,
      './BRAINUP/person/deep_people2_23.html': true,
      './BRAINUP/person/deep_people2_24.html': true,
      './BRAINUP/person/deep_people2_25.html': true,
      './BRAINUP/person/deep_people2_26.html': true,
      './BRAINUP/person/deep_people2_27.html': true,
      './BRAINUP/person/deep_people2_28.html': true,
      './BRAINUP/person/deep_people2_29.html': true,
      './BRAINUP/person/deep_people2_30.html': true,
      './BRAINUP/person/deep_people2_31.html': true,
      './BRAINUP/person/deep_people2_32.html': true,
      './BRAINUP/person/deep_people2_33.html': true,
      './BRAINUP/person/deep_people2_34.html': true,
      './BRAINUP/person/deep_people2_35.html': true,
      './BRAINUP/person/deep_people2_36.html': true,
      './BRAINUP/person/deep_people2_37.html': true,
      './BRAINUP/person/deep_people2_38.html': true,
      './BRAINUP/person/deep_people2_39.html': true,
      './BRAINUP/person/deep_people2_40.html': true,
      './BRAINUP/science/deep_bio_01.html': true,
      './BRAINUP/science/deep_bio_02.html': true,
      './BRAINUP/science/deep_bio_03.html': true,
      './BRAINUP/science/deep_bio_04.html': true,
      './BRAINUP/science/deep_bio_05.html': true,
      './BRAINUP/science/deep_bio_06.html': true,
      './BRAINUP/science/deep_bio_07.html': true,
      './BRAINUP/science/deep_bio_08.html': true,
      './BRAINUP/science/deep_bio_09.html': true,
      './BRAINUP/science/deep_bio_10.html': true,
      './BRAINUP/science/deep_bio_11.html': true,
      './BRAINUP/science/deep_bio_12.html': true,
      './BRAINUP/science/deep_bio_13.html': true,
      './BRAINUP/science/deep_bio_14.html': true,
      './BRAINUP/science/deep_bio_15.html': true,
      './BRAINUP/science/deep_bio_16.html': true,
      './BRAINUP/science/deep_bio_17.html': true,
      './BRAINUP/science/deep_bio_18.html': true,
      './BRAINUP/science/deep_bio_19.html': true,
      './BRAINUP/science/deep_bio_20.html': true,
      './BRAINUP/science/deep_chem_01.html': true,
      './BRAINUP/science/deep_chem_02.html': true,
      './BRAINUP/science/deep_chem_03.html': true,
      './BRAINUP/science/deep_chem_04.html': true,
      './BRAINUP/science/deep_chem_05.html': true,
      './BRAINUP/science/deep_chem_06.html': true,
      './BRAINUP/science/deep_chem_07.html': true,
      './BRAINUP/science/deep_chem_08.html': true,
      './BRAINUP/science/deep_chem_09.html': true,
      './BRAINUP/science/deep_chem_10.html': true,
      './BRAINUP/science/deep_chem_11.html': true,
      './BRAINUP/science/deep_chem_12.html': true,
      './BRAINUP/science/deep_chem_13.html': true,
      './BRAINUP/science/deep_chem_14.html': true,
      './BRAINUP/science/deep_chem_15.html': true,
      './BRAINUP/science/deep_chem_16.html': true,
      './BRAINUP/science/deep_chem_17.html': true,
      './BRAINUP/science/deep_chem_18.html': true,
      './BRAINUP/science/deep_chem_19.html': true,
      './BRAINUP/science/deep_chem_20.html': true,
      './BRAINUP/science/deep_earth_01.html': true,
      './BRAINUP/science/deep_earth_02.html': true,
      './BRAINUP/science/deep_earth_03.html': true,
      './BRAINUP/science/deep_earth_04.html': true,
      './BRAINUP/science/deep_earth_05.html': true,
      './BRAINUP/science/deep_earth_06.html': true,
      './BRAINUP/science/deep_earth_07.html': true,
      './BRAINUP/science/deep_earth_08.html': true,
      './BRAINUP/science/deep_earth_09.html': true,
      './BRAINUP/science/deep_earth_10.html': true,
      './BRAINUP/science/deep_earth_11.html': true,
      './BRAINUP/science/deep_earth_12.html': true,
      './BRAINUP/science/deep_earth_13.html': true,
      './BRAINUP/science/deep_earth_14.html': true,
      './BRAINUP/science/deep_earth_15.html': true,
      './BRAINUP/science/deep_earth_16.html': true,
      './BRAINUP/science/deep_earth_17.html': true,
      './BRAINUP/science/deep_earth_18.html': true,
      './BRAINUP/science/deep_earth_19.html': true,
      './BRAINUP/science/deep_earth_20.html': true,
      './BRAINUP/science/deep_physics_01.html': true,
      './BRAINUP/science/deep_physics_02.html': true,
      './BRAINUP/science/deep_physics_03.html': true,
      './BRAINUP/science/deep_physics_04.html': true,
      './BRAINUP/science/deep_physics_05.html': true,
      './BRAINUP/science/deep_physics_06.html': true,
      './BRAINUP/science/deep_physics_07.html': true,
      './BRAINUP/science/deep_physics_08.html': true,
      './BRAINUP/science/deep_physics_09.html': true,
      './BRAINUP/science/deep_physics_10.html': true,
      './BRAINUP/science/deep_physics_11.html': true,
      './BRAINUP/science/deep_physics_12.html': true,
      './BRAINUP/science/deep_physics_13.html': true,
      './BRAINUP/science/deep_physics_14.html': true,
      './BRAINUP/science/deep_physics_15.html': true,
      './BRAINUP/science/deep_physics_16.html': true,
      './BRAINUP/science/deep_physics_17.html': true,
      './BRAINUP/science/deep_physics_18.html': true,
      './BRAINUP/science/deep_physics_19.html': true,
      './BRAINUP/science/deep_physics_20.html': true,
      './BRAINUP/social/deep_geo_01.html': true,
      './BRAINUP/social/deep_geo_02.html': true,
      './BRAINUP/social/deep_geo_03.html': true,
      './BRAINUP/social/deep_geo_04.html': true,
      './BRAINUP/social/deep_geo_05.html': true,
      './BRAINUP/social/deep_geo_06.html': true,
      './BRAINUP/social/deep_geo_07.html': true,
      './BRAINUP/social/deep_geo_08.html': true,
      './BRAINUP/social/deep_geo_09.html': true,
      './BRAINUP/social/deep_geo_10.html': true,
      './BRAINUP/social/deep_geo_11.html': true,
      './BRAINUP/social/deep_geo_12.html': true,
      './BRAINUP/social/deep_geo_13.html': true,
      './BRAINUP/social/deep_geo_14.html': true,
      './BRAINUP/social/deep_geo_15.html': true,
      './BRAINUP/social/deep_geo_16.html': true,
      './BRAINUP/social/deep_geo_17.html': true,
      './BRAINUP/social/deep_geo_18.html': true,
      './BRAINUP/social/deep_geo_19.html': true,
      './BRAINUP/social/deep_geo_20.html': true,
      './BRAINUP/social/deep_law_01.html': true,
      './BRAINUP/social/deep_law_02.html': true,
      './BRAINUP/social/deep_law_03.html': true,
      './BRAINUP/social/deep_law_04.html': true,
      './BRAINUP/social/deep_law_05.html': true,
      './BRAINUP/social/deep_law_06.html': true,
      './BRAINUP/social/deep_law_07.html': true,
      './BRAINUP/social/deep_law_08.html': true,
      './BRAINUP/social/deep_law_09.html': true,
      './BRAINUP/social/deep_law_10.html': true,
      './BRAINUP/social/deep_law_11.html': true,
      './BRAINUP/social/deep_law_12.html': true,
      './BRAINUP/social/deep_law_13.html': true,
      './BRAINUP/social/deep_law_14.html': true,
      './BRAINUP/social/deep_law_15.html': true,
      './BRAINUP/social/deep_law_16.html': true,
      './BRAINUP/social/deep_law_17.html': true,
      './BRAINUP/social/deep_law_18.html': true,
      './BRAINUP/social/deep_law_19.html': true,
      './BRAINUP/social/deep_law_20.html': true,
      './BRAINUP/social/deep_pol_01.html': true,
      './BRAINUP/social/deep_pol_02.html': true,
      './BRAINUP/social/deep_pol_03.html': true,
      './BRAINUP/social/deep_pol_04.html': true,
      './BRAINUP/social/deep_pol_05.html': true,
      './BRAINUP/social/deep_pol_06.html': true,
      './BRAINUP/social/deep_pol_07.html': true,
      './BRAINUP/social/deep_pol_08.html': true,
      './BRAINUP/social/deep_pol_09.html': true,
      './BRAINUP/social/deep_pol_10.html': true,
      './BRAINUP/social/deep_pol_11.html': true,
      './BRAINUP/social/deep_pol_12.html': true,
      './BRAINUP/social/deep_pol_13.html': true,
      './BRAINUP/social/deep_pol_14.html': true,
      './BRAINUP/social/deep_pol_15.html': true,
      './BRAINUP/social/deep_pol_16.html': true,
      './BRAINUP/social/deep_pol_17.html': true,
      './BRAINUP/social/deep_pol_18.html': true,
      './BRAINUP/social/deep_pol_19.html': true,
      './BRAINUP/social/deep_pol_20.html': true,
      './BRAINUP/social/deep_soc_01.html': true,
      './BRAINUP/social/deep_soc_02.html': true,
      './BRAINUP/social/deep_soc_03.html': true,
      './BRAINUP/social/deep_soc_04.html': true,
      './BRAINUP/social/deep_soc_05.html': true,
      './BRAINUP/social/deep_soc_06.html': true,
      './BRAINUP/social/deep_soc_07.html': true,
      './BRAINUP/social/deep_soc_08.html': true,
      './BRAINUP/social/deep_soc_09.html': true,
      './BRAINUP/social/deep_soc_10.html': true,
      './BRAINUP/social/deep_soc_11.html': true,
      './BRAINUP/social/deep_soc_12.html': true,
      './BRAINUP/social/deep_soc_13.html': true,
      './BRAINUP/social/deep_soc_14.html': true,
      './BRAINUP/social/deep_soc_15.html': true,
      './BRAINUP/social/deep_soc_16.html': true,
      './BRAINUP/social/deep_soc_17.html': true,
      './BRAINUP/social/deep_soc_18.html': true,
      './BRAINUP/social/deep_soc_19.html': true,
      './BRAINUP/social/deep_soc_20.html': true,
      './BRAINUP/worldlit/deep_world1_01.html': true,
      './BRAINUP/worldlit/deep_world1_02.html': true,
      './BRAINUP/worldlit/deep_world1_03.html': true,
      './BRAINUP/worldlit/deep_world1_04.html': true,
      './BRAINUP/worldlit/deep_world1_05.html': true,
      './BRAINUP/worldlit/deep_world1_06.html': true,
      './BRAINUP/worldlit/deep_world1_07.html': true,
      './BRAINUP/worldlit/deep_world1_08.html': true,
      './BRAINUP/worldlit/deep_world1_09.html': true,
      './BRAINUP/worldlit/deep_world1_10.html': true,
      './BRAINUP/worldlit/deep_world1_11.html': true,
      './BRAINUP/worldlit/deep_world1_12.html': true,
      './BRAINUP/worldlit/deep_world1_13.html': true,
      './BRAINUP/worldlit/deep_world1_14.html': true,
      './BRAINUP/worldlit/deep_world1_15.html': true,
      './BRAINUP/worldlit/deep_world1_16.html': true,
      './BRAINUP/worldlit/deep_world1_17.html': true,
      './BRAINUP/worldlit/deep_world1_18.html': true,
      './BRAINUP/worldlit/deep_world1_19.html': true,
      './BRAINUP/worldlit/deep_world1_20.html': true,
      './BRAINUP/worldlit/deep_world1_21.html': true,
      './BRAINUP/worldlit/deep_world1_22.html': true,
      './BRAINUP/worldlit/deep_world1_23.html': true,
      './BRAINUP/worldlit/deep_world1_24.html': true,
      './BRAINUP/worldlit/deep_world1_25.html': true,
      './BRAINUP/worldlit/deep_world1_26.html': true,
      './BRAINUP/worldlit/deep_world1_27.html': true,
      './BRAINUP/worldlit/deep_world1_28.html': true,
      './BRAINUP/worldlit/deep_world1_29.html': true,
      './BRAINUP/worldlit/deep_world1_30.html': true,
      './BRAINUP/worldlit/deep_world1_31.html': true,
      './BRAINUP/worldlit/deep_world1_32.html': true,
      './BRAINUP/worldlit/deep_world1_33.html': true,
      './BRAINUP/worldlit/deep_world1_34.html': true,
      './BRAINUP/worldlit/deep_world1_35.html': true,
      './BRAINUP/worldlit/deep_world1_36.html': true,
      './BRAINUP/worldlit/deep_world1_37.html': true,
      './BRAINUP/worldlit/deep_world1_38.html': true,
      './BRAINUP/worldlit/deep_world1_39.html': true,
      './BRAINUP/worldlit/deep_world1_40.html': true,
      './BRAINUP/worldlit/deep_world2_01.html': true,
      './BRAINUP/worldlit/deep_world2_02.html': true,
      './BRAINUP/worldlit/deep_world2_03.html': true,
      './BRAINUP/worldlit/deep_world2_04.html': true,
      './BRAINUP/worldlit/deep_world2_05.html': true,
      './BRAINUP/worldlit/deep_world2_06.html': true,
      './BRAINUP/worldlit/deep_world2_07.html': true,
      './BRAINUP/worldlit/deep_world2_08.html': true,
      './BRAINUP/worldlit/deep_world2_09.html': true,
      './BRAINUP/worldlit/deep_world2_10.html': true,
      './BRAINUP/worldlit/deep_world2_11.html': true,
      './BRAINUP/worldlit/deep_world2_12.html': true,
      './BRAINUP/worldlit/deep_world2_13.html': true,
      './BRAINUP/worldlit/deep_world2_14.html': true,
      './BRAINUP/worldlit/deep_world2_15.html': true,
      './BRAINUP/worldlit/deep_world2_16.html': true,
      './BRAINUP/worldlit/deep_world2_17.html': true,
      './BRAINUP/worldlit/deep_world2_18.html': true,
      './BRAINUP/worldlit/deep_world2_19.html': true,
      './BRAINUP/worldlit/deep_world2_20.html': true,
      './BRAINUP/worldlit/deep_world2_21.html': true,
      './BRAINUP/worldlit/deep_world2_22.html': true,
      './BRAINUP/worldlit/deep_world2_23.html': true,
      './BRAINUP/worldlit/deep_world2_24.html': true,
      './BRAINUP/worldlit/deep_world2_25.html': true,
      './BRAINUP/worldlit/deep_world2_26.html': true,
      './BRAINUP/worldlit/deep_world2_27.html': true,
      './BRAINUP/worldlit/deep_world2_28.html': true,
      './BRAINUP/worldlit/deep_world2_29.html': true,
      './BRAINUP/worldlit/deep_world2_30.html': true,
      './BRAINUP/worldlit/deep_world2_31.html': true,
      './BRAINUP/worldlit/deep_world2_32.html': true,
      './BRAINUP/worldlit/deep_world2_33.html': true,
      './BRAINUP/worldlit/deep_world2_34.html': true,
      './BRAINUP/worldlit/deep_world2_35.html': true,
      './BRAINUP/worldlit/deep_world2_36.html': true,
      './BRAINUP/worldlit/deep_world2_37.html': true,
      './BRAINUP/worldlit/deep_world2_38.html': true,
      './BRAINUP/worldlit/deep_world2_39.html': true,
      './BRAINUP/worldlit/deep_world2_40.html': true
};

    // === Ï§ÄÎπÑ Ï§ë ÌåùÏóÖ Ïó¥Í∏∞/Îã´Í∏∞ ===
    function showComingSoonPopup() {
      const overlay = document.getElementById('comingSoonOverlay');
      if (overlay) {
        overlay.classList.add('show');
      }
    }

    function closeComingSoonPopup() {
      const overlay = document.getElementById('comingSoonOverlay');
      if (overlay) {
        overlay.classList.remove('show');
      }
    }

    // === Îã®Ïõê IDÎ•º ÌååÏùº Í≤ΩÎ°úÎ°ú Î≥ÄÌôò ===
    function getUnitPath(unitId) {
      console.log('üîç getUnitPath called with:', unitId);

      // unitIdÍ∞Ä Ïù¥ÎØ∏ Í≤ΩÎ°úÏù∏ Í≤ΩÏö∞ Í∑∏ÎåÄÎ°ú Î∞òÌôò
      if (unitId && unitId.startsWith('./')) {
        console.log('‚úÖ unitId is already a path, returning:', unitId);
        return unitId;
      }

      // Íµ¨ ÌòïÏãù IDÎ•º ÏÉà ÌòïÏãùÏúºÎ°ú Î≥ÄÌôò (Í∏∞Ï°¥ Îç∞Ïù¥ÌÑ∞ Ìò∏ÌôòÏÑ±)
      // world_XX -> world1_XX ÎòêÎäî world2_XX (41~80ÏùÄ world2_01~40)
      // people_XX -> people1_XX ÎòêÎäî people2_XX (41~80ÏùÄ people2_01~40)
      if (unitId) {
        const legacyMatch = unitId.match(/^(world|people)_(\d+)$/i);
        if (legacyMatch) {
          const oldPrefix = legacyMatch[1].toLowerCase();
          const num = parseInt(legacyMatch[2], 10);

          // 41~80ÏùÄ ÏÑ∏Í≥ÑÎ¨∏Ìïô2/ÏÑ∏Í≥ÑÏù∏Î¨ºÏùò 1~40
          if (num >= 41 && num <= 80) {
            const newNum = (num - 40).toString().padStart(2, '0');
            unitId = `${oldPrefix}2_${newNum}`;
          } else {
            const paddedNum = num.toString().padStart(2, '0');
            unitId = `${oldPrefix}1_${paddedNum}`;
          }
          console.log(`üîÑ Converting legacy unitId: ${legacyMatch[0]} -> ${unitId}`);
        }
      }

      // fit_ Ï†ëÎëêÏñ¥ Ï≤òÎ¶¨ (Ïòà: fit_bio_01 -> bio_01 Í≥ºÎ™©ÏΩîÎìú Ï∂îÏ∂ú, fit_bio_01.html Í≤ΩÎ°ú ÏÉùÏÑ±)
      if (unitId && unitId.match(/^fit_[a-z]+\d?_\d+$/i)) {
        // fit_Í≥ºÎ™©ÏΩîÎìú_Î≤àÌò∏ ÌòïÏãù (Ïòà: fit_bio_01, fit_people2_03)
        const fitMatch = unitId.match(/^fit_([a-z]+\d?)_(\d+)$/i);
        if (fitMatch) {
          const subjectCode = fitMatch[1].toLowerCase();

          // Í≥ºÎ™© ÏΩîÎìú -> Ìè¥Îçî Îß§Ìïë
          const subjectToFolder = {
            // Í≥ºÌïô Î∂ÑÏïº
            'bio': 'science', 'earth': 'science', 'physics': 'science', 'chem': 'science',
            // ÏÇ¨Ìöå Î∂ÑÏïº
            'soc': 'social', 'geo': 'social', 'law': 'social', 'pol': 'social',
            // Íµ≠Ïñ¥ Î∂ÑÏïº
            'classic': 'korlit', 'modern': 'korlit',
            // ÏÑ∏Í≥ÑÎ¨∏Ìïô Î∂ÑÏïº
            'world': 'worldlit', 'world1': 'worldlit', 'world2': 'worldlit',
            // Ïù∏Î¨º Î∂ÑÏïº
            'people': 'person', 'people1': 'person', 'people2': 'person'
          };

          const folder = subjectToFolder[subjectCode] || 'social';
          const path = `./BRAINUP/${folder}/${unitId}.html`;
          console.log(`‚úÖ Converting fit_ unitId to BRAINUP/${folder} path:`, path);
          return path;
        }
      }

      // unitIdÎ•º ÌååÏùº Í≤ΩÎ°úÎ°ú Î≥ÄÌôò (Ïòà: "geo_01" -> "./BRAINUP/social/geo_01.html")
      if (unitId && unitId.match(/^[a-z]+\d?_\d+$/i)) {
        // Í≥ºÎ™© ÏΩîÎìú Ï∂îÏ∂ú (Ïòà: chem_01 -> chem, physics_01 -> physics)
        const subjectMatch = unitId.match(/^([a-z]+\d?)_\d+$/i);
        if (subjectMatch) {
          const subjectCode = subjectMatch[1].toLowerCase();

          // Í≥ºÎ™© ÏΩîÎìú -> Ìè¥Îçî Îß§Ìïë
          const subjectToFolder = {
            // Í≥ºÌïô Î∂ÑÏïº
            'bio': 'science', 'earth': 'science', 'physics': 'science', 'chem': 'science',
            // ÏÇ¨Ìöå Î∂ÑÏïº
            'soc': 'social', 'geo': 'social', 'law': 'social', 'pol': 'social',
            // Íµ≠Ïñ¥ Î∂ÑÏïº
            'classic': 'korlit', 'modern': 'korlit',
            // ÏÑ∏Í≥ÑÎ¨∏Ìïô Î∂ÑÏïº
            'world': 'worldlit', 'world1': 'worldlit', 'world2': 'worldlit',
            // Ïù∏Î¨º Î∂ÑÏïº
            'people': 'person', 'people1': 'person', 'people2': 'person'
          };

          const folder = subjectToFolder[subjectCode] || 'social';
          const path = `./BRAINUP/${folder}/${unitId}.html`;
          console.log(`‚úÖ Converting unitId to BRAINUP/${folder} path:`, path);
          return path;
        }
      }

      console.log('‚ùå Could not convert unitId to path, returning null');
      return null;
    }

    // === Îã®Ïõê ÌïôÏäµ Î™®Îã¨ Í¥ÄÎ†® ===
    function openUnitModal(unitIdOrPath) {
      // Î©îÎâ¥ ÌÅ¥Î¶≠ Ìö®Í≥ºÏùå Ïû¨ÏÉù
      playMenuClickSound();

      // Îã®Ïõê IDÎ•º ÌååÏùº Í≤ΩÎ°úÎ°ú Î≥ÄÌôò
      const unitPath = getUnitPath(unitIdOrPath);

      if (!unitPath) {
        console.log('‚ö†Ô∏è ÏûòÎ™ªÎêú Îã®Ïõê ID:', unitIdOrPath);
        showComingSoonPopup();
        return;
      }

      // ÌååÏùº Ï°¥Ïû¨ Ïó¨Î∂Ä ÌôïÏù∏
      if (!availableUnits[unitPath]) {
        console.log('‚ö†Ô∏è Ï§ÄÎπÑÎêòÏßÄ ÏïäÏùÄ Îã®Ïõê:', unitPath);
        showComingSoonPopup();
        return;
      }

      const unitModal = document.getElementById('unitModal');
      const unitIframe = document.getElementById('unitIframe');
      const loadingOverlay = document.getElementById('loading-overlay');

      if (unitModal && unitIframe) {
        // üé¨ Îí∑Î∞∞Í≤Ω ÎπÑÎîîÏò§ ÏùºÏãúÏ†ïÏßÄ (ÏÑ±Îä• ÏµúÏ†ÅÌôî)
        const bgVideo = document.querySelector('#tablet-fixed-bg video, .background-video video');
        if (bgVideo) {
          bgVideo.pause();
        }

        // Î™®Îã¨ÏùÑ Î®ºÏ†Ä ÌëúÏãú (ÍπúÎ∞ïÏûÑ Î∞©ÏßÄ)
        unitModal.classList.add('show');

        // iframe Î∞∞Í≤ΩÏùÑ Î∂àÌà¨Î™ÖÌïòÍ≤å ÏÑ§Ï†ï
        unitIframe.style.backgroundColor = '#f5f5f5';
        unitIframe.style.opacity = '0';

        // Î°úÎî© Ïò§Î≤ÑÎ†àÏù¥ ÌëúÏãú
        if (loadingOverlay) {
          loadingOverlay.style.display = 'flex';
          loadingOverlay.classList.remove('fade-out');
        }

        // iframe Î°úÎìú ÏôÑÎ£å Ïãú Ï≤òÎ¶¨
        unitIframe.onload = function() {
          // iframeÏùÑ Î∂ÄÎìúÎüΩÍ≤å ÌëúÏãú
          unitIframe.style.transition = 'opacity 0.3s ease';
          unitIframe.style.opacity = '1';

          if (loadingOverlay) {
            loadingOverlay.classList.add('fade-out');
            setTimeout(() => {
              loadingOverlay.style.display = 'none';
            }, 500);
          }
        };

        // Ï∫êÏãúÎ≤ÑÏä§ÌÑ∞ Ï∂îÍ∞Ä (iframe Ï∫êÏãú Î∞©ÏßÄ)
        const cacheBuster = unitPath.includes('?') ? `&_t=${Date.now()}` : `?_t=${Date.now()}`;

        // iframe src ÏÑ§Ï†ï Ï†ÑÏóê ÏïΩÍ∞ÑÏùò ÎîúÎ†àÏù¥ (Î™®Îã¨ Î†åÎçîÎßÅ ÏôÑÎ£å ÎåÄÍ∏∞)
        requestAnimationFrame(() => {
          unitIframe.src = unitPath + cacheBuster;
        });
        // sessionStorageÏóê ÌòÑÏû¨ Ïó¥Î¶∞ Îã®Ïõê Í≤ΩÎ°ú Ï†ÄÏû•
        sessionStorage.setItem('currentOpenUnit', unitPath);

        // ‚úÖ ÌòÑÏû¨ Î©îÎâ¥ ÏÉÅÌÉú Ï†ÄÏû• (ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Î≥µÏõêÏö©)
        const menuState = {
          series: currentSelectedSeries,
          domainId: currentSelectedDomain ? currentSelectedDomain.id : null,
          subjectId: currentSelectedSubject ? currentSelectedSubject.id : null,
          subjectOffset: currentSelectedSubject ? currentSelectedSubject.offset : null
        };
        sessionStorage.setItem('menuState', JSON.stringify(menuState));
        console.log('üíæ Î©îÎâ¥ ÏÉÅÌÉú Ï†ÄÏû•:', menuState);
      }
    }

    // ===== üéµ ÌÖåÏä§Ìä∏Ïö© Ìö®Í≥ºÏùå Î™®Ïùå (ÏΩòÏÜîÏóêÏÑú testSound1() ~ testSound5() Ìò∏Ï∂ú) =====

    // 1. ÎΩÄÎ°úÎ°ù~ (Í∑ÄÏó¨Ïö¥ Î¨ºÎ∞©Ïö∏)
    window.testSound1 = function() {
      const ctx = new AudioContext();
      const notes = [800, 1000, 1200, 1400, 1600];
      notes.forEach((freq, i) => {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'sine';
        osc.frequency.value = freq;
        osc.connect(gain);
        gain.connect(ctx.destination);
        gain.gain.setValueAtTime(0.3, ctx.currentTime + i * 0.08);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + i * 0.08 + 0.15);
        osc.start(ctx.currentTime + i * 0.08);
        osc.stop(ctx.currentTime + i * 0.08 + 0.15);
      });
      console.log('ü´ß 1Î≤à: ÎΩÄÎ°úÎ°ù~ (Î¨ºÎ∞©Ïö∏)');
    };

    // 2. Îù†ÎßÅ‚ô™ (Î†àÎ≤®ÏóÖ Í∞ôÏùÄ ÎäêÎÇå)
    window.testSound2 = function() {
      const ctx = new AudioContext();
      const notes = [523, 659, 784, 1047];
      notes.forEach((freq, i) => {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'triangle';
        osc.frequency.value = freq;
        osc.connect(gain);
        gain.connect(ctx.destination);
        gain.gain.setValueAtTime(0.25, ctx.currentTime + i * 0.1);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + i * 0.1 + 0.25);
        osc.start(ctx.currentTime + i * 0.1);
        osc.stop(ctx.currentTime + i * 0.1 + 0.25);
      });
      console.log('‚ú® 2Î≤à: Îù†ÎßÅ‚ô™ (Î†àÎ≤®ÏóÖ)');
    };

    // 3. ÏÇêÏÇêÎπ†Îπ†~ (Í≤åÏûÑ ÌÅ¥Î¶¨Ïñ¥)
    window.testSound3 = function() {
      const ctx = new AudioContext();
      const melody = [
        { freq: 784, time: 0, dur: 0.1 },
        { freq: 988, time: 0.1, dur: 0.1 },
        { freq: 1175, time: 0.2, dur: 0.1 },
        { freq: 1568, time: 0.3, dur: 0.3 }
      ];
      melody.forEach(n => {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'square';
        osc.frequency.value = n.freq;
        osc.connect(gain);
        gain.connect(ctx.destination);
        gain.gain.setValueAtTime(0.15, ctx.currentTime + n.time);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + n.time + n.dur);
        osc.start(ctx.currentTime + n.time);
        osc.stop(ctx.currentTime + n.time + n.dur);
      });
      console.log('üéÆ 3Î≤à: ÏÇêÏÇêÎπ†Îπ†~ (Í≤åÏûÑ ÌÅ¥Î¶¨Ïñ¥)');
    };

    // 4. Ìå°! ÌêÅ! (ÏßßÍ≥† ÌÜµÌÜµÌïú) - Î©îÎâ¥ ÌÅ¥Î¶≠ Ìö®Í≥ºÏùå (ÎπÑÌôúÏÑ±Ìôî)
    function playMenuClickSound() {
      // Ìö®Í≥ºÏùå ÎπÑÌôúÏÑ±Ìôî
    }
    window.testSound4 = playMenuClickSound;

    // 5. Ï®ò~‚ô¨ (ÏßßÏùÄ Ï∂ïÌïò Î©úÎ°úÎîî)
    window.testSound5 = function() {
      const ctx = new AudioContext();
      const melody = [
        { freq: 659, time: 0, dur: 0.08 },
        { freq: 784, time: 0.08, dur: 0.08 },
        { freq: 988, time: 0.16, dur: 0.08 },
        { freq: 1319, time: 0.24, dur: 0.25 }
      ];
      melody.forEach(n => {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'sine';
        osc.frequency.value = n.freq;
        osc.connect(gain);
        gain.connect(ctx.destination);
        gain.gain.setValueAtTime(0.25, ctx.currentTime + n.time);
        gain.gain.setValueAtTime(0.25, ctx.currentTime + n.time + n.dur * 0.7);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + n.time + n.dur);
        osc.start(ctx.currentTime + n.time);
        osc.stop(ctx.currentTime + n.time + n.dur);
      });
      console.log('üéâ 5Î≤à: Ï®ò~‚ô¨ (Ï∂ïÌïò Î©úÎ°úÎîî)');
    };

    // 6. Îù†Î¶¨Î¶¨ÎßÅ~ (Ï¢ÖÏÜåÎ¶¨)
    window.testSound6 = function() {
      const ctx = new AudioContext();
      [0, 0.12, 0.24].forEach((t, i) => {
        const osc = ctx.createOscillator();
        const gain = ctx.createGain();
        osc.type = 'sine';
        osc.frequency.value = 1200 + i * 200;
        osc.connect(gain);
        gain.connect(ctx.destination);
        gain.gain.setValueAtTime(0.3, ctx.currentTime + t);
        gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + t + 0.2);
        osc.start(ctx.currentTime + t);
        osc.stop(ctx.currentTime + t + 0.2);
      });
      console.log('üîî 6Î≤à: Îù†Î¶¨Î¶¨ÎßÅ~ (Ï¢ÖÏÜåÎ¶¨)');
    };

    console.log('üéµ Ìö®Í≥ºÏùå ÌÖåÏä§Ìä∏: testSound1() ~ testSound6() Ï§ë ÏÑ†ÌÉùÌï¥ÏÑú Ìò∏Ï∂úÌïòÏÑ∏Ïöî!');

    // ===== ÌïôÏäµ ÏôÑÎ£å Ï∂ïÌïò Ìö®Í≥º (Ìè≠Ï£ΩÎßå) =====
    function playLearningCelebration() {
      // Ìè≠Ï£Ω Ìö®Í≥º
      if (typeof confetti === 'function') {
        confetti({ particleCount: 100, spread: 70, origin: { x: 0.5, y: 0.6 }, colors: ['#ff0000', '#ff7700', '#ffff00', '#00ff00', '#0099ff', '#6633ff'], zIndex: 999999 });
        setTimeout(() => { confetti({ particleCount: 50, angle: 60, spread: 55, origin: { x: 0, y: 0.6 }, colors: ['#ff69b4', '#ffd700', '#00ffff'], zIndex: 999999 }); }, 200);
        setTimeout(() => { confetti({ particleCount: 50, angle: 120, spread: 55, origin: { x: 1, y: 0.6 }, colors: ['#ff69b4', '#ffd700', '#00ffff'], zIndex: 999999 }); }, 200);
        setTimeout(() => { confetti({ particleCount: 80, spread: 100, origin: { x: 0.5, y: 0.5 }, shapes: ['star'], colors: ['#ffd700', '#ffec8b', '#fff8dc'], zIndex: 999999 }); }, 500);
      }
    }

    // iframe ÎÇ¥Î∂ÄÏóêÏÑú Ìò∏Ï∂úÌï† Ïàò ÏûàÎèÑÎ°ù window Í∞ùÏ≤¥Ïóê ÎÖ∏Ï∂ú
    window.closeUnitModal = function() {
      const unitModal = document.getElementById('unitModal');
      const unitIframe = document.getElementById('unitIframe');

      if (unitModal) {
        // Ï∂ïÌïò Ìö®Í≥º Î®ºÏ†Ä Ïã§Ìñâ!
        playLearningCelebration();

        unitModal.classList.remove('show');
        if (unitIframe) {
          unitIframe.src = ''; // iframe Ï¥àÍ∏∞Ìôî
        }
        // sessionStorageÏóêÏÑú ÌòÑÏû¨ Ïó¥Î¶∞ Îã®Ïõê Í≤ΩÎ°ú Ï†úÍ±∞
        sessionStorage.removeItem('currentOpenUnit');

        // üé¨ Îí∑Î∞∞Í≤Ω ÎπÑÎîîÏò§ Îã§Ïãú Ïû¨ÏÉù
        const bgVideo = document.querySelector('#tablet-fixed-bg video, .background-video video');
        if (bgVideo) {
          bgVideo.play().catch(e => console.log('ÎπÑÎîîÏò§ Ïû¨ÏÉù Ïã§Ìå®:', e));
        }

        // Î©îÎâ¥ ÌéòÏù¥ÏßÄ ÏÉàÎ°úÍ≥†Ïπ® (ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú Î∞òÏòÅ) - Ï∂ïÌïò Ìö®Í≥º Î≥¥Ïù¥ÎèÑÎ°ù ÎîúÎ†àÏù¥ Ï¶ùÍ∞Ä
        setTimeout(() => {
          location.reload();
        }, 1500);
      }
    };

    // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïù¥Ï†ÑÏóê Ïó¥Î†§ÏûàÎçò Î™®Îã¨ Î≥µÏõê
    function restoreUnitModal() {
      const savedUnitPath = sessionStorage.getItem('currentOpenUnit');
      if (savedUnitPath) {
        openUnitModal(savedUnitPath);
      }
    }

    // Îã®Ïõê Î™®Îã¨ Îã´Í∏∞ Î≤ÑÌäº Ïù¥Î≤§Ìä∏
    window.addEventListener('DOMContentLoaded', function() {
      const closeUnitBtn = document.getElementById('closeUnitModal');
      const unitModal = document.getElementById('unitModal');

      if (closeUnitBtn) {
        closeUnitBtn.addEventListener('click', window.closeUnitModal);
      }

      // Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Îã´Í∏∞
      if (unitModal) {
        unitModal.addEventListener('click', function(e) {
          if (e.target === unitModal) {
            window.closeUnitModal();
          }
        });
      }

      // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ïù¥Ï†ÑÏóê Ïó¥Î†§ÏûàÎçò Î™®Îã¨ Î≥µÏõê
      restoreUnitModal();
    });

    // === AI Ï±óÎ¥á ÌîåÎ°úÌåÖ Î≤ÑÌäº ===
    window.addEventListener('DOMContentLoaded', function() {
      const aiChatbotBtn = document.getElementById('aiChatbotBtn');
      const aiChatbotModal = document.getElementById('aiChatbotModal');
      const aiChatbotIframe = document.getElementById('aiChatbotIframe');
      const closeAiChatbotBtn = document.getElementById('closeAiChatbotModal');

      if (aiChatbotBtn && aiChatbotModal && aiChatbotIframe) {
        // ÌîåÎ°úÌåÖ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Ïó¥Í∏∞/Îã´Í∏∞ ÌÜ†Í∏Ä
        aiChatbotBtn.addEventListener('click', function() {
          if (aiChatbotModal.classList.contains('show')) {
            aiChatbotModal.classList.remove('show');
            aiChatbotIframe.src = ''; // iframe Ï¥àÍ∏∞Ìôî
          } else {
            aiChatbotIframe.src = '/demo-ai-korean-chatbot.html';
            aiChatbotModal.classList.add('show');
          }
        });

        // Îã´Í∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Îã´Í∏∞
        if (closeAiChatbotBtn) {
          closeAiChatbotBtn.addEventListener('click', function() {
            aiChatbotModal.classList.remove('show');
            aiChatbotIframe.src = ''; // iframe Ï¥àÍ∏∞Ìôî
          });
        }

        // ÎìúÎûòÍ∑∏ Í∏∞Îä• Íµ¨ÌòÑ
        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;

        aiChatbotModal.addEventListener('mousedown', dragStart);
        document.addEventListener('mousemove', drag);
        document.addEventListener('mouseup', dragEnd);

        // ÌÑ∞Ïπò Ïù¥Î≤§Ìä∏ÎèÑ ÏßÄÏõê
        aiChatbotModal.addEventListener('touchstart', dragStart);
        document.addEventListener('touchmove', drag);
        document.addEventListener('touchend', dragEnd);

        function dragStart(e) {
          // Îã´Í∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú ÎìúÎûòÍ∑∏ Î∞©ÏßÄ
          if (e.target.closest('.ai-chatbot-modal-close')) {
            return;
          }

          // iframe ÏòÅÏó≠ ÌÅ¥Î¶≠ Ïãú ÎìúÎûòÍ∑∏ Î∞©ÏßÄ
          if (e.target.closest('.ai-chatbot-modal-iframe')) {
            return;
          }

          if (e.type === 'touchstart') {
            initialX = e.touches[0].clientX - (aiChatbotModal.offsetLeft || 0);
            initialY = e.touches[0].clientY - (aiChatbotModal.offsetTop || 0);
          } else {
            initialX = e.clientX - (aiChatbotModal.offsetLeft || 0);
            initialY = e.clientY - (aiChatbotModal.offsetTop || 0);
          }

          isDragging = true;
        }

        function drag(e) {
          if (isDragging) {
            e.preventDefault();

            if (e.type === 'touchmove') {
              currentX = e.touches[0].clientX - initialX;
              currentY = e.touches[0].clientY - initialY;
            } else {
              currentX = e.clientX - initialX;
              currentY = e.clientY - initialY;
            }

            // ÌôîÎ©¥ Í≤ΩÍ≥Ñ Ï≤¥ÌÅ¨
            const maxX = window.innerWidth - aiChatbotModal.offsetWidth;
            const maxY = window.innerHeight - aiChatbotModal.offsetHeight;

            currentX = Math.max(0, Math.min(currentX, maxX));
            currentY = Math.max(0, Math.min(currentY, maxY));

            setPosition(currentX, currentY);
          }
        }

        function dragEnd(e) {
          isDragging = false;
        }

        function setPosition(xPos, yPos) {
          aiChatbotModal.style.left = xPos + 'px';
          aiChatbotModal.style.top = yPos + 'px';
          aiChatbotModal.style.right = 'auto';
          aiChatbotModal.style.bottom = 'auto';
        }
      }
    });

    // === ÏãúÎ¶¨Ï¶àÎ≥Ñ Î†àÏù¥Îçî Îì±Í∏â Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ ===
    async function updateRadarGradeBadgeForSeries(seriesKey) {
      // ‚úÖ localStorageÏùò currentStudentÎ•º Ïö∞ÏÑ† ÏÇ¨Ïö©
      let user = JSON.parse(localStorage.getItem('currentStudent') || '{}');
      if (!user.grade || !user.name) {
        user = JSON.parse(sessionStorage.getItem('user') || '{}');
      }

      const grade = user.grade || '';
      const name = user.name || '';

      if (!grade || !name) {
        console.log('‚ö†Ô∏è ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏóÜÏùå');
        return;
      }

      try {
        const url = `/api/learning-logs?grade=${encodeURIComponent(grade)}&name=${encodeURIComponent(name)}`;
        const response = await fetch(url);
        const logs = await response.json();

        if (!logs || logs.length === 0) {
          document.getElementById('radarGradeBadge').textContent = '-';
          // localStorageÏóêÎèÑ Ï†ÄÏû•
          localStorage.setItem('selectedSeriesBadge', JSON.stringify({
            series: seriesKey,
            avgScore: 0,
            progressPercent: 0
          }));
          return;
        }

        // ÏãúÎ¶¨Ï¶àÎ≥Ñ Îã®Ïõê ÌïÑÌÑ∞ÎßÅ
        const seriesPrefix = seriesKey === 'BRAINFIT' ? 'fit_' : (seriesKey === 'BRAINDEEP' ? 'deep_' : '');
        const filteredLogs = logs.filter(log => {
          if (!log.unit) return false;
          if (seriesKey === 'BRAINFIT') {
            return log.unit.includes('fit_');
          } else if (seriesKey === 'BRAINDEEP') {
            return log.unit.includes('deep_');
          } else if (seriesKey === 'BRAINUP') {
            return !log.unit.includes('fit_') && !log.unit.includes('deep_');
          }
          return true;
        });

        // ÏßÑÎèÑÏú® Í≥ÑÏÇ∞ (ÏãúÎ¶¨Ï¶àÎ≥Ñ 200Í∞ú Îã®Ïõê Í∏∞Ï§Ä)
        const completedUnits = new Set();
        filteredLogs.forEach(log => {
          if (log.unit) completedUnits.add(log.unit);
        });
        const totalUnits = 400; // Í∞Å ÏãúÎ¶¨Ï¶à 400Í∞ú Îã®Ïõê
        const progressPercent = Math.round((completedUnits.size / totalUnits) * 100);

        // radar Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî Î°úÍ∑∏Îßå ÌïÑÌÑ∞ÎßÅ
        const validLogs = filteredLogs.filter(log => log.radar);

        let avgScore = 0;
        let gradeClass = 'encourage';

        if (validLogs.length > 0) {
          let totalLiteral = 0, totalStructural = 0, totalLexical = 0;
          let totalInferential = 0, totalCritical = 0;
          let count = 0;

          validLogs.forEach(log => {
            totalLiteral += log.radar.literal || 0;
            totalStructural += log.radar.structural || 0;
            totalLexical += log.radar.lexical || 0;
            totalInferential += log.radar.inferential || 0;
            totalCritical += log.radar.critical || 0;
            count++;
          });

          const avgLiteral = Math.round((totalLiteral / count) * 10) / 10;
          const avgStructural = Math.round((totalStructural / count) * 10) / 10;
          const avgLexical = Math.round((totalLexical / count) * 10) / 10;
          const avgInferential = Math.round((totalInferential / count) * 10) / 10;
          const avgCritical = Math.round((totalCritical / count) * 10) / 10;

          const scores = [avgLiteral, avgStructural, avgLexical, avgInferential, avgCritical];
          avgScore = parseFloat((scores.reduce((a, b) => a + b, 0) / 5).toFixed(1));

          if (avgScore >= 9) gradeClass = 'excellent';
          else if (avgScore >= 8) gradeClass = 'good';
          else if (avgScore >= 7) gradeClass = 'average';
        }

        // Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
        const badge = document.getElementById('radarGradeBadge');
        if (validLogs.length > 0) {
          badge.textContent = avgScore + ' / ' + progressPercent;
        } else {
          badge.textContent = '- / ' + progressPercent;
        }
        badge.className = 'radar-grade-badge ' + gradeClass;

        // localStorageÏóê Ï†ÄÏû• (ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Î≥µÏõêÏö©)
        localStorage.setItem('selectedSeriesBadge', JSON.stringify({
          series: seriesKey,
          avgScore: avgScore,
          progressPercent: progressPercent
        }));

        console.log('‚úÖ ÏãúÎ¶¨Ï¶àÎ≥Ñ Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏:', seriesKey, avgScore || '-', 'Ï†ê / ÏßÑÎèÑÏú®:', progressPercent, '%');
      } catch (error) {
        console.error('‚ùå ÏãúÎ¶¨Ï¶àÎ≥Ñ Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ Ïã§Ìå®:', error);
      }
    }

    // === Î†àÏù¥Îçî Îì±Í∏â Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ (Ïã§ÏãúÍ∞Ñ Í≥ÑÏÇ∞) ===
    async function updateRadarGradeBadge() {
      // ‚úÖ localStorageÏùò currentStudentÎ•º Ïö∞ÏÑ† ÏÇ¨Ïö© (Í∞ÄÏû• ÏµúÏã† Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥)
      let user = JSON.parse(localStorage.getItem('currentStudent') || '{}');

      // localStorageÏóê ÏóÜÏúºÎ©¥ sessionStorage ÏÇ¨Ïö©
      if (!user.grade || !user.name) {
        user = JSON.parse(sessionStorage.getItem('user') || '{}');
      }

      const grade = user.grade || '';
      const name = user.name || '';
      const phone = user.phone || '';

      console.log('üîç Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ - ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥:', { grade, name, phone });

      if (!grade || !name) {
        console.log('‚ö†Ô∏è ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏóÜÏùå');
        document.getElementById('radarGradeBadge').textContent = '-';
        return;
      }

      try {
        // ‚úÖ ÌïôÏäµ Í∏∞Î°ù Ï°∞Ìöå (phone Ï†úÏô∏ - Í∏∞Ï°¥ Ï†ÄÏû• Îç∞Ïù¥ÌÑ∞ Ìò∏Ìôò)
        const url = `/api/learning-logs?grade=${encodeURIComponent(grade)}&name=${encodeURIComponent(name)}`;

        console.log('üì° ÌïôÏäµ Í∏∞Î°ù API Ìò∏Ï∂ú:', url);
        const response = await fetch(url);
        const logs = await response.json();

        if (!logs || logs.length === 0) {
          console.log('‚ö†Ô∏è ÌïôÏäµ Í∏∞Î°ù ÏóÜÏùå');
          document.getElementById('radarGradeBadge').textContent = '-';
          return;
        }

        console.log('üìö Ï¥ù ÌïôÏäµ Í∏∞Î°ù:', logs.length, 'Í∞ú');

        // ÏßÑÎèÑÏú® Í≥ÑÏÇ∞ (Ï†ÑÏ≤¥ ÏãúÎ¶¨Ï¶à Í∏∞Ï§Ä 400Í∞ú Îã®Ïõê)
        const completedUnits = new Set();
        logs.forEach(log => {
          if (log.unit) {
            completedUnits.add(log.unit);
          }
        });
        const progressPercent = Math.round((completedUnits.size / 400) * 100);

        // radar Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî Î°úÍ∑∏Îßå ÌïÑÌÑ∞ÎßÅ
        const validLogs = logs.filter(log => log.radar);
        console.log('üìä radar Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÎäî Í∏∞Î°ù:', validLogs.length, 'Í∞ú');

        let avgScore = 0;
        let gradeClass = 'encourage';

        if (validLogs.length > 0) {
          // ÏãúÎ¶¨Ï¶à Ï¢ÖÌï© Î†àÏù¥ÎçîÏôÄ ÎèôÏùºÌïú ÌèâÍ∑† Í≥ÑÏÇ∞ (5Í∞ú ÏòÅÏó≠ ÌèâÍ∑†)
          let totalLiteral = 0, totalStructural = 0, totalLexical = 0;
          let totalInferential = 0, totalCritical = 0;
          let count = 0;

          validLogs.forEach(log => {
            totalLiteral += log.radar.literal || 0;
            totalStructural += log.radar.structural || 0;
            totalLexical += log.radar.lexical || 0;
            totalInferential += log.radar.inferential || 0;
            totalCritical += log.radar.critical || 0;
            count++;
          });

          const avgLiteral = Math.round((totalLiteral / count) * 10) / 10;
          const avgStructural = Math.round((totalStructural / count) * 10) / 10;
          const avgLexical = Math.round((totalLexical / count) * 10) / 10;
          const avgInferential = Math.round((totalInferential / count) * 10) / 10;
          const avgCritical = Math.round((totalCritical / count) * 10) / 10;

          const scores = [avgLiteral, avgStructural, avgLexical, avgInferential, avgCritical];
          avgScore = parseFloat((scores.reduce((a, b) => a + b, 0) / 5).toFixed(1));

          // Îì±Í∏â Í≥ÑÏÇ∞ (ÏÉâÏÉÅ Í≤∞Ï†ïÏö©)
          if (avgScore >= 9) {
            gradeClass = 'excellent';
          } else if (avgScore >= 8) {
            gradeClass = 'good';
          } else if (avgScore >= 7) {
            gradeClass = 'average';
          } else {
            gradeClass = 'encourage';
          }

          // ‚úÖ AI ÏûêÎèô Í≥ºÏ†ú Ïä§ÏºÄÏ§Ñ ÏÉùÏÑ±ÏùÄ Ïù¥Ï†ú ÏÑúÎ≤ÑÏùò assignAITasksDaily()ÏóêÏÑú LearningLog Í∏∞Î∞òÏúºÎ°ú Ï≤òÎ¶¨Îê®
          // (Í∏∞Ï°¥ AITaskSchedule Í∏∞Î∞ò Î°úÏßÅ Ï†úÍ±∞Îê®)
        }

        // Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ (ÌèâÏ†ê / ÏßÑÎèÑÏú® ÌëúÏãú)
        const badge = document.getElementById('radarGradeBadge');
        if (validLogs.length > 0) {
          // radar Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏúºÎ©¥: ÌèâÏ†ê / ÏßÑÎèÑÏú®
          badge.textContent = avgScore + ' / ' + progressPercent;
        } else {
          // radar Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÏúºÎ©¥: ÏßÑÎèÑÏú®Îßå ÌëúÏãú
          badge.textContent = '- / ' + progressPercent;
        }
        badge.className = 'radar-grade-badge ' + gradeClass;

        console.log('‚úÖ Î†àÏù¥Îçî Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏:', avgScore || '-', 'Ï†ê / ÏßÑÎèÑÏú®:', progressPercent, '%');
      } catch (error) {
        console.error('‚ùå Î†àÏù¥Îçî Îì±Í∏â Ï°∞Ìöå Ïã§Ìå®:', error);
      }
    }

    // === Î†àÏù¥Îçî Ï∞®Ìä∏ ÏïÑÏù¥ÏΩò ÌÅ¥Î¶≠ Ïù¥Î≤§Ìä∏ (Î™®Îã¨Î°ú ÌëúÏãú) ===
    window.addEventListener('DOMContentLoaded', function() {
      const radarIcon = document.getElementById('radarChartIcon');
      const learningModal = document.getElementById('learningModal');
      const learningIframe = document.getElementById('learningIframe');
      const closeModalBtn = document.getElementById('closeLearningModal');

      // Î†àÏù¥Îçî Îì±Í∏â Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ (Ï¥àÍ∏∞ Î°úÎìú) - Ï†ÄÏû•Îêú ÏãúÎ¶¨Ï¶àÍ∞Ä ÏûàÏúºÎ©¥ Ìï¥Îãπ ÏãúÎ¶¨Ï¶àÎ°ú ÏÉàÎ°ú Í≥ÑÏÇ∞
      const savedMenuSeries = localStorage.getItem('selectedMenuSeries');
      if (savedMenuSeries && (savedMenuSeries === 'BRAINUP' || savedMenuSeries === 'BRAINFIT' || savedMenuSeries === 'BRAINDEEP')) {
        // Ï†ÄÏû•Îêú ÏãúÎ¶¨Ï¶àÎ°ú ÏÉàÎ°ú Í≥ÑÏÇ∞ (Ìï≠ÏÉÅ ÏµúÏã† Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©)
        updateRadarGradeBadgeForSeries(savedMenuSeries);
        console.log('‚úÖ ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÏãúÎ¶¨Ï¶àÎ≥Ñ Î±ÉÏßÄ ÏÉàÎ°ú Í≥ÑÏÇ∞:', savedMenuSeries);
      } else {
        // Ï†ÄÏû•Îêú ÏãúÎ¶¨Ï¶àÍ∞Ä ÏóÜÏúºÎ©¥ Í∏∞Î≥∏ ÏóÖÎç∞Ïù¥Ìä∏
        updateRadarGradeBadge();
      }

      // ÌéòÏù¥ÏßÄÍ∞Ä Î≥¥Ïùº ÎïåÎßàÎã§ Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ (ÌïôÏäµ ÏôÑÎ£å ÌõÑ ÎèåÏïÑÏôîÏùÑ Îïå)
      // Debounce timer to prevent duplicate calls
      let visibilityDebounceTimer = null;

      document.addEventListener('visibilitychange', async function() {
        if (!document.hidden) {
          // Clear existing timer
          if (visibilityDebounceTimer) {
            clearTimeout(visibilityDebounceTimer);
          }

          // Set new timer - only execute after 500ms of no new events
          visibilityDebounceTimer = setTimeout(async () => {
            console.log('üîÑ ÌéòÏù¥ÏßÄ ÌôúÏÑ±Ìôî - Î±ÉÏßÄ Î∞è ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏');

            // üî• unit-grades Ï∫êÏãú Î¨¥Ìö®Ìôî (ÌïôÏäµ ÌéòÏù¥ÏßÄÏóêÏÑú ÎèåÏïÑÏò¨ Îïå ÏµúÏã† Î≥ÑÌëú Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞)
            if (window.ApiCache && typeof window.ApiCache.invalidate === 'function') {
              ApiCache.invalidate('unit-grades');
              console.log('üóëÔ∏è [Menu] unit-grades Ï∫êÏãú Î¨¥Ìö®Ìôî ÏôÑÎ£å');
            }

            // ÌòÑÏû¨ ÌôúÏÑ±ÌôîÎêú ÏãúÎ¶¨Ï¶àÎ°ú Î±ÉÏßÄ ÏÉàÎ°ú Í≥ÑÏÇ∞
            const activeSeriesItem = document.querySelector('#seriesList .series-item.active');
            if (activeSeriesItem) {
              const activeSeries = activeSeriesItem.dataset.series;
              if (activeSeries === 'BRAINUP' || activeSeries === 'BRAINFIT' || activeSeries === 'BRAINDEEP') {
                updateRadarGradeBadgeForSeries(activeSeries);
              } else {
                updateRadarGradeBadge();
              }
            } else {
              updateRadarGradeBadge();
            }

            // Î©îÏù∏ Î©îÎâ¥Ïùò ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú Î∞è Î≥ÑÏ†ê ÏóÖÎç∞Ïù¥Ìä∏
            await updateAllLessonStatus();

            visibilityDebounceTimer = null;
          }, 500);
        }
      });

      // Ï¢ÖÌï©Î¶¨Ìè¨Ìä∏(iframe)ÏóêÏÑú ÏãúÎ¶¨Ï¶à Î≥ÄÍ≤Ω Ïãú Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
      window.addEventListener('message', function(event) {
        if (event.data && event.data.type === 'seriesChanged') {
          const { series, avgScore, progressPercent, completedCount, totalUnits } = event.data;
          console.log('üì• ÏãúÎ¶¨Ï¶à Î≥ÄÍ≤Ω Î©îÏãúÏßÄ ÏàòÏã†:', series, avgScore, progressPercent + '%');

          // ‚úÖ ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉùÏùÑ localStorageÏóê Ï†ÄÏû• (ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Î≥µÏõêÏö©)
          localStorage.setItem('selectedMenuSeries', series);
          console.log('‚úÖ ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉù Ï†ÄÏû• (Ï¢ÖÌï©Î¶¨Ìè¨Ìä∏ÏóêÏÑú):', series);

          const badge = document.getElementById('radarGradeBadge');
          if (badge) {
            // Îì±Í∏â ÌÅ¥ÎûòÏä§ Í≤∞Ï†ï
            let gradeClass = 'encourage';
            if (avgScore >= 9) {
              gradeClass = 'excellent';
            } else if (avgScore >= 8) {
              gradeClass = 'good';
            } else if (avgScore >= 7) {
              gradeClass = 'average';
            }

            // Î±ÉÏßÄ ÌÖçÏä§Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
            if (avgScore > 0) {
              badge.textContent = avgScore + ' / ' + progressPercent;
            } else {
              badge.textContent = '- / ' + progressPercent;
            }
            badge.className = 'radar-grade-badge ' + gradeClass;
            console.log('‚úÖ Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å:', badge.textContent, gradeClass);
          }
        }
      });

      // Î™®Îã¨ Îã´ÏùÑ Îïå Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ (ÏÑ†ÌÉùÎêú ÏãúÎ¶¨Ï¶à Îç∞Ïù¥ÌÑ∞ Ïö∞ÏÑ† ÏÇ¨Ïö©)
      if (closeModalBtn) {
        closeModalBtn.addEventListener('click', function() {
          console.log('üîÑ Î™®Îã¨ Îã´Í∏∞ - Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏');

          // localStorageÏóê Ï†ÄÏû•Îêú ÏÑ†ÌÉù ÏãúÎ¶¨Ï¶à Îç∞Ïù¥ÌÑ∞Í∞Ä ÏûàÏúºÎ©¥ Í∑∏Í≤ÉÏùÑ ÏÇ¨Ïö©
          const savedBadge = localStorage.getItem('selectedSeriesBadge');
          if (savedBadge) {
            try {
              const data = JSON.parse(savedBadge);
              const badge = document.getElementById('radarGradeBadge');
              if (badge && data.series !== 'all') {
                // Îì±Í∏â ÌÅ¥ÎûòÏä§ Í≤∞Ï†ï
                let gradeClass = 'encourage';
                if (data.avgScore >= 9) gradeClass = 'excellent';
                else if (data.avgScore >= 8) gradeClass = 'good';
                else if (data.avgScore >= 7) gradeClass = 'average';

                // Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
                if (data.avgScore > 0) {
                  badge.textContent = data.avgScore + ' / ' + data.progressPercent;
                } else {
                  badge.textContent = '- / ' + data.progressPercent;
                }
                badge.className = 'radar-grade-badge ' + gradeClass;
                console.log('‚úÖ Ï†ÄÏû•Îêú ÏãúÎ¶¨Ï¶à Î±ÉÏßÄ Î≥µÏõê:', data.series, badge.textContent);
                return; // Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞Î°ú ÏóÖÎç∞Ïù¥Ìä∏ÌñàÏúºÎØÄÎ°ú Ï¢ÖÎ£å
              }
            } catch (e) {
              console.log('Ï†ÄÏû•Îêú Î±ÉÏßÄ Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïò§Î•ò:', e);
            }
          }

          // Ï†ÄÏû•Îêú Îç∞Ïù¥ÌÑ∞Í∞Ä ÏóÜÍ±∞ÎÇò Ï†ÑÏ≤¥ ÏãúÎ¶¨Ï¶àÏù∏ Í≤ΩÏö∞ Í∏∞Î≥∏ ÏóÖÎç∞Ïù¥Ìä∏
          updateRadarGradeBadge();
        });
      }

      if (radarIcon && learningModal && learningIframe) {
        // ‚úÖ ÌïôÏäµ Î∂ÑÏÑù Î™®Îã¨ Ïó¥Í∏∞ Ìï®Ïàò
        function openLearningModal() {
          const user = JSON.parse(sessionStorage.getItem('user') || '{}');
          console.log('üîç sessionStorage user:', user);
          const grade = user.grade || 'ÌïôÎÖÑÎØ∏ÏßÄÏ†ï';
          const name = user.name || 'Ïù¥Î¶ÑÎØ∏ÏßÄÏ†ï';
          console.log('üìä Opening learning page:', { grade, name });

          // ‚úÖ ÌòÑÏû¨ ÏÑ†ÌÉùÎêú ÏãúÎ¶¨Ï¶à Í∞ÄÏ†∏Ïò§Í∏∞ (Ïã§ÏãúÍ∞ÑÏúºÎ°ú ÌôúÏÑ±ÌôîÎêú ÏãúÎ¶¨Ï¶à ÌôïÏù∏)
          let selectedSeries = 'BRAINUP';
          const activeSeriesItem = document.querySelector('#seriesList .series-item.active');
          if (activeSeriesItem) {
            selectedSeries = activeSeriesItem.dataset.series || 'BRAINUP';
          }
          // ÏãúÎ¶¨Ï¶àÎ≥Ñ ÌååÎùºÎØ∏ÌÑ∞ ÏÑ§Ï†ï (up, fit, deep)
          let seriesParam = 'up';
          if (selectedSeries === 'BRAINFIT') {
            seriesParam = 'fit';
          } else if (selectedSeries === 'BRAINDEEP') {
            seriesParam = 'deep';
          }

          const url = `/my-learning?grade=${encodeURIComponent(grade)}&name=${encodeURIComponent(name)}&series=${seriesParam}`;
          console.log('üîó URL:', url, '(ÏãúÎ¶¨Ï¶à:', selectedSeries, ')');

          // iframeÏóê URL ÏÑ§Ï†ïÌïòÍ≥† Î™®Îã¨ Ïó¥Í∏∞
          learningIframe.src = url;
          learningModal.classList.add('show');

          // ‚úÖ Î™®Îã¨ Ïó¥Î¶º ÏÉÅÌÉú Ï†ÄÏû• (ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Î≥µÏõêÏö©)
          sessionStorage.setItem('learningModalOpen', 'true');
        }

        // ‚úÖ ÌïôÏäµ Î∂ÑÏÑù Î™®Îã¨ Îã´Í∏∞ Ìï®Ïàò
        function closeLearningModal() {
          learningModal.classList.remove('show');
          learningIframe.src = ''; // iframe Ï¥àÍ∏∞Ìôî

          // ‚úÖ Î™®Îã¨ Ïó¥Î¶º ÏÉÅÌÉú Ï†úÍ±∞
          sessionStorage.removeItem('learningModalOpen');
        }

        // ÏïÑÏù¥ÏΩò ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Ïó¥Í∏∞
        radarIcon.addEventListener('click', openLearningModal);

        // Îã´Í∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Îã´Í∏∞
        if (closeModalBtn) {
          closeModalBtn.addEventListener('click', closeLearningModal);
        }

        // Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Î™®Îã¨ Îã´Í∏∞
        learningModal.addEventListener('click', function(e) {
          if (e.target === learningModal) {
            closeLearningModal();
          }
        });

        // ‚úÖ ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Î™®Îã¨ ÏÉÅÌÉú Î≥µÏõê
        if (sessionStorage.getItem('learningModalOpen') === 'true') {
          console.log('üîÑ ÌïôÏäµ Î∂ÑÏÑù Î™®Îã¨ ÏÉÅÌÉú Î≥µÏõê');
          openLearningModal();
        }

        // Ï†ÑÏÜ°ÌïòÍ∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú Ïù¥Î©îÏùº Ïó¥Í∏∞
        const sendBtn = document.getElementById('sendLearningBtn');
        if (sendBtn) {
          console.log('‚úÖ Ï†ÑÏÜ°ÌïòÍ∏∞ Î≤ÑÌäº Ï∞æÏùå:', sendBtn);
          sendBtn.addEventListener('click', function() {
            console.log('üìß Ï†ÑÏÜ°ÌïòÍ∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠Îê®');

            // iframeÏóêÏÑú ÌïôÏÉù Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
            const iframeSrc = learningIframe.src;
            const urlParams = new URLSearchParams(iframeSrc.split('?')[1]);
            const grade = urlParams.get('grade') || '';
            const name = urlParams.get('name') || '';

            // Ïù¥Î©îÏùº Ï†úÎ™©Í≥º Î≥∏Î¨∏ ÏÑ§Ï†ï
            const subject = `[Îã®Îã®Íµ≠Ïñ¥] ${grade} ${name} ÌïôÏÉù ÌïôÏäµ Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏`;
            const body = `ÏïàÎÖïÌïòÏÑ∏Ïöî,

${grade} ${name} ÌïôÏÉùÏùò ÌïôÏäµ Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏Î•º Ï†ÑÏÜ°Ìï©ÎãàÎã§.

üìä ÌïôÏäµ Î∂ÑÏÑù ÎÇ¥Ïö©:
- ÌïôÏäµ Í∏∞Î°ù Î∞è Ï†êÏàò
- Îã®ÏõêÎ≥Ñ Î¨∏Ìï¥Î†• Î†àÏù¥Îçî Ï∞®Ìä∏
- Ï¢ÖÌï© Î∂ÑÏÑù Í≤∞Í≥º

ÏûêÏÑ∏Ìïú ÎÇ¥Ïö©ÏùÄ Ï≤®Î∂ÄÎêú PDF ÌååÏùºÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.

‚Äª PDF ÌååÏùºÏùÄ 'Îã§Ïö¥Î°úÎìú' Î≤ÑÌäºÏùÑ ÌÅ¥Î¶≠ÌïòÏó¨ Î®ºÏ†Ä Ï†ÄÏû•Ìïú ÌõÑ Ïù¥Î©îÏùºÏóê Ï≤®Î∂ÄÌï¥Ï£ºÏÑ∏Ïöî.

Í∞êÏÇ¨Ìï©ÎãàÎã§.`;

            // mailto ÎßÅÌÅ¨ ÏÉùÏÑ±
            const mailtoLink = 'mailto:?subject=' + encodeURIComponent(subject) + '&body=' + encodeURIComponent(body);

            console.log('üìß Ïù¥Î©îÏùº Ïï± Ïó¥Í∏∞:', mailtoLink);
            window.location.href = mailtoLink;
          });
        } else {
          console.error('‚ùå Ï†ÑÏÜ°ÌïòÍ∏∞ Î≤ÑÌäºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
        }

        // Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú† Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú
        const kakaoShareBtn = document.getElementById('kakaoShareBtn');
        if (kakaoShareBtn) {
          console.log('‚úÖ Ïπ¥Ïπ¥Ïò§ÌÜ° Ï†ÑÏÜ° Î≤ÑÌäº Ï∞æÏùå:', kakaoShareBtn);
          kakaoShareBtn.addEventListener('click', function() {
            console.log('üí¨ Ïπ¥Ïπ¥Ïò§ÌÜ° Ï†ÑÏÜ° Î≤ÑÌäº ÌÅ¥Î¶≠Îê®');

            // iframeÏóêÏÑú ÌïôÏÉù Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
            const iframeSrc = learningIframe.src;
            const urlParams = new URLSearchParams(iframeSrc.split('?')[1]);
            const grade = urlParams.get('grade') || '';
            const name = urlParams.get('name') || '';

            // Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú†ÌïòÍ∏∞
            if (typeof Kakao !== 'undefined' && Kakao.isInitialized()) {
              try {
                // Î∞∞Ìè¨ ÌôòÍ≤ΩÏóêÏÑúÎäî Render ÏÑúÎ≤Ñ URL ÏÇ¨Ïö© (ÏÑúÎ≤Ñ ÎùºÏö∞Ìä∏ /my-learning Ï†ëÍ∑º ÌïÑÏöî)
                const baseUrl = window.location.hostname === 'localhost'
                  ? window.location.origin
                  : 'https://dan-dan-app.onrender.com';

                const reportPath = iframeSrc.replace(window.location.origin, '');
                const fullUrl = baseUrl + reportPath;

                Kakao.Share.sendDefault({
                  objectType: 'feed',
                  content: {
                    title: `üìä ${grade} ${name} ÌïôÏÉù ÌïôÏäµ Î∂ÑÏÑù Î¶¨Ìè¨Ìä∏`,
                    description: 'Îã®Îã®Íµ≠Ïñ¥ ÌïôÏäµ Î∂ÑÏÑù Í≤∞Í≥ºÎ•º ÌôïÏù∏ÌïòÏÑ∏Ïöî!\n\nüìà ÌïôÏäµ Í∏∞Î°ù Î∞è Ï†êÏàò\nüìä Îã®ÏõêÎ≥Ñ Î¨∏Ìï¥Î†• Î†àÏù¥Îçî Ï∞®Ìä∏\n‚ú® Ï¢ÖÌï© Î∂ÑÏÑù Í≤∞Í≥º',
                    imageUrl: 'https://project-2516060862411225169.web.app/images/report-share-thumbnail.png',
                    link: {
                      mobileWebUrl: fullUrl,
                      webUrl: fullUrl
                    }
                  },
                  buttons: [
                    {
                      title: 'Î¶¨Ìè¨Ìä∏ Î≥¥Í∏∞',
                      link: {
                        mobileWebUrl: fullUrl,
                        webUrl: fullUrl
                      }
                    }
                  ]
                });
                console.log('‚úÖ Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú†ÌïòÍ∏∞ Ïã§ÌñâÎê®:', fullUrl);
              } catch (error) {
                console.error('‚ùå Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú† Ïò§Î•ò:', error);
                alert('Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú† Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.\nÏπ¥Ïπ¥Ïò§ÌÜ°Ïù¥ ÏÑ§ÏπòÎêòÏñ¥ ÏûàÎäîÏßÄ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.');
              }
            } else {
              console.error('‚ùå Kakao SDKÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§');
              alert('Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú† Í∏∞Îä•ÏùÑ ÏÇ¨Ïö©Ìï† Ïàò ÏóÜÏäµÎãàÎã§.\nÌéòÏù¥ÏßÄÎ•º ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
            }
          });
        } else {
          console.error('‚ùå Ïπ¥Ïπ¥Ïò§ÌÜ° Ï†ÑÏÜ° Î≤ÑÌäºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
        }

        // Îã§Ïö¥Î°úÎìú Î≤ÑÌäº ÌÅ¥Î¶≠ Ïãú PDF ÏÉùÏÑ±
        const downloadBtn = document.getElementById('downloadLearningBtn');
        if (downloadBtn) {
          console.log('‚úÖ Îã§Ïö¥Î°úÎìú Î≤ÑÌäº Ï∞æÏùå:', downloadBtn);
          downloadBtn.addEventListener('click', function() {
            console.log('üì• Îã§Ïö¥Î°úÎìú Î≤ÑÌäº ÌÅ¥Î¶≠Îê®');
            console.log('iframe:', learningIframe);
            console.log('iframe.contentWindow:', learningIframe.contentWindow);
            if (learningIframe && learningIframe.contentWindow) {
              console.log('üí¨ iframeÏóê Î©îÏãúÏßÄ Ï†ÑÏÜ° Ï§ë...');
              learningIframe.contentWindow.postMessage({ action: 'downloadPDF' }, '*');
            } else {
              console.error('‚ùå iframe.contentWindowÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
              alert('ÌéòÏù¥ÏßÄÎ•º Î®ºÏ†Ä Î°úÎìúÌï¥Ï£ºÏÑ∏Ïöî.');
            }
          });
        } else {
          console.error('‚ùå Îã§Ïö¥Î°úÎìú Î≤ÑÌäºÏùÑ Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
        }
      }
    });

    // ÎÖ∏Ìä∏ ÏïÑÏù¥ÏΩò ÌÅ¥Î¶≠ Í∏∞Îä• - Ïñ¥ÌúòÎ†• ÌÄ¥Ï¶àÏáº Î™®Îã¨
    document.addEventListener('DOMContentLoaded', () => {
      const noteIcon = document.getElementById('noteIcon');
      const vocabModal = document.getElementById('vocabQuizModal');
      const vocabIframe = document.getElementById('vocabQuizIframe');
      const closeVocabModal = document.getElementById('closeVocabModal');

      if (noteIcon) {
        noteIcon.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation();

          // Î™®Îã¨ Ïó¥Í∏∞
          vocabIframe.src = '/demo-vocabulary-quiz.html';
          vocabModal.classList.add('show');
        });
      }

      // Îã´Í∏∞ Î≤ÑÌäº
      if (closeVocabModal) {
        closeVocabModal.addEventListener('click', () => {
          vocabModal.classList.remove('show');
          vocabIframe.src = '';
        });
      }

      // Î∞∞Í≤Ω ÌÅ¥Î¶≠ÏúºÎ°ú Îã´Í∏∞
      if (vocabModal) {
        vocabModal.addEventListener('click', (e) => {
          if (e.target === vocabModal) {
            vocabModal.classList.remove('show');
            vocabIframe.src = '';
          }
        });
      }

      // iframeÏóêÏÑú ÌïôÏäµÏôÑÎ£å Î©îÏãúÏßÄÎ•º Î∞õÏúºÎ©¥ Î™®Îã¨ Îã´Í∏∞ Î∞è ÌïôÏäµÏã§ ÏÉàÎ°úÍ≥†Ïπ®
      window.addEventListener('message', async (event) => {
        if (event.data && event.data.type === 'vocabularyQuizCompleted') {
          console.log('‚úÖ Ïñ¥Ìúò ÌÄ¥Ï¶à ÏôÑÎ£å - Î™®Îã¨ Îã´Í∏∞ Î∞è ÌïôÏäµÏã§ ÏÉàÎ°úÍ≥†Ïπ®');
          vocabModal.classList.remove('show');
          vocabIframe.src = '';

          // ÎÇòÏùò ÌïôÏäµÏã§Ïù¥ Ïó¥Î†§ÏûàÏúºÎ©¥ Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ®
          const studyRoomPopup = document.getElementById('studyRoomPopup');
          if (studyRoomPopup && studyRoomPopup.classList.contains('show')) {
            await renderStudyRoomList();
            console.log('‚úÖ ÎÇòÏùò ÌïôÏäµÏã§ Î™©Î°ù ÏÉàÎ°úÍ≥†Ïπ® ÏôÑÎ£å');
          }
        }
      });
    });

    // ========================================
    // ÌïôÏäµÏã§ (Study Room) Í∏∞Îä•
    // ========================================

    // Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏ (ÌÜµÌï© ÎπÑÎ∞ÄÎ≤àÌò∏)
    const ADMIN_PASSWORD = '1234';

    // ÌòÑÏû¨ Î°úÍ∑∏Ïù∏Ìïú ÌïôÏÉù Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞
    function getCurrentStudentKey() {
      return localStorage.getItem('currentStudentKey') || 'guest';
    }

    // ÌïôÏäµÏã§ Îç∞Ïù¥ÌÑ∞ ÌÇ§ ÏÉùÏÑ±
    function getStudyRoomKey() {
      return `studyRoom_${getCurrentStudentKey()}`;
    }

    // ÌïôÏäµÏã§ Í≥ºÏ†ú Î™©Î°ù Î∂àÎü¨Ïò§Í∏∞ (ÏÑúÎ≤Ñ DBÏóêÏÑú)
    async function getStudyRoomTasks() {
      try {
        const user = JSON.parse(localStorage.getItem('currentStudent') || '{}');
        if (!user.grade || !user.name) {
          console.log('‚ö†Ô∏è ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏóÜÏùå - localStorage ÏÇ¨Ïö©');
          const key = getStudyRoomKey();
          const data = localStorage.getItem(key);
          return data ? JSON.parse(data) : [];
        }

        // ÏÑúÎ≤ÑÏóêÏÑú ÌïôÏäµÏã§ Îç∞Ïù¥ÌÑ∞ Ï°∞Ìöå (Ï∫êÏãú ÏÇ¨Ïö©)
        const result = await ApiCache.fetch(`/api/user-progress/study-room?grade=${encodeURIComponent(user.grade)}&name=${encodeURIComponent(user.name)}`);

        if (result.ok && result.data?.studyRoom?.assignedTasks) {
          console.log('‚úÖ ÏÑúÎ≤ÑÏóêÏÑú ÌïôÏäµÏã§ Îç∞Ïù¥ÌÑ∞ Î°úÎìú:', result.data.studyRoom.assignedTasks.length, 'Í∞ú');
          return result.data.studyRoom.assignedTasks;
        }

        // ÏÑúÎ≤ÑÏóê Îç∞Ïù¥ÌÑ∞ ÏóÜÏúºÎ©¥ localStorage fallback
        console.log('‚ö†Ô∏è ÏÑúÎ≤Ñ Îç∞Ïù¥ÌÑ∞ ÏóÜÏùå - localStorage ÏÇ¨Ïö©');
        const key = getStudyRoomKey();
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : [];
      } catch (error) {
        console.error('‚ùå ÌïôÏäµÏã§ Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïò§Î•ò:', error);
        // Ïò§Î•ò Ïãú localStorage fallback
        const key = getStudyRoomKey();
        const data = localStorage.getItem(key);
        return data ? JSON.parse(data) : [];
      }
    }

    // ÌïôÏäµÏã§ Í≥ºÏ†ú Î™©Î°ù Ï†ÄÏû•ÌïòÍ∏∞ (ÏÑúÎ≤Ñ DBÏóê)
    async function saveStudyRoomTasks(tasks) {
      try {
        const user = JSON.parse(localStorage.getItem('currentStudent') || '{}');
        if (!user.grade || !user.name) {
          console.log('‚ö†Ô∏è ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥ ÏóÜÏùå - localStorageÏóêÎßå Ï†ÄÏû•');
          const key = getStudyRoomKey();
          localStorage.setItem(key, JSON.stringify(tasks));
          updateStudyRoomBadge();
          return;
        }

        // ÏÑúÎ≤ÑÏóê Ï†ÄÏû•
        const response = await fetch('/api/user-progress/study-room', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify({
            grade: user.grade,
            name: user.name,
            assignedTasks: tasks
          })
        });

        const result = await response.json();
        if (result.ok) {
          console.log('‚úÖ ÌïôÏäµÏã§ Îç∞Ïù¥ÌÑ∞ ÏÑúÎ≤Ñ Ï†ÄÏû• ÏôÑÎ£å');
        } else {
          console.error('‚ùå ÏÑúÎ≤Ñ Ï†ÄÏû• Ïã§Ìå®:', result.message);
          // fallback to localStorage
          const key = getStudyRoomKey();
          localStorage.setItem(key, JSON.stringify(tasks));
        }
      } catch (error) {
        console.error('‚ùå ÌïôÏäµÏã§ Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû• Ïò§Î•ò:', error);
        // fallback to localStorage
        const key = getStudyRoomKey();
        localStorage.setItem(key, JSON.stringify(tasks));
      }

      updateStudyRoomBadge();
    }

    // Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
    async function updateStudyRoomBadge() {
      const badge = document.getElementById('studyRoomBadge');
      if (badge) {
        const tasks = await getStudyRoomTasks();

        // ÏôÑÎ£åÎêú Í≥ºÏ†ú Í∞úÏàò Í≥ÑÏÇ∞ (ÌïôÏäµÏôÑÎ£å + Î≥µÏäµÏôÑÎ£å)
        // - AI Í≥ºÏ†ú: task.status === 'completed' (Î≥µÏäµÏôÑÎ£å)
        // - ÏùºÎ∞ò Í≥ºÏ†ú: isUnitCompleted()Î°ú ÌïôÏäµ ÏôÑÎ£å ÌôïÏù∏ (ÌïôÏäµÏôÑÎ£å)
        const completedCount = tasks.filter(task => {
          if (task.isAI) {
            // AI Í≥ºÏ†úÎäî statusÍ∞Ä 'completed'Ïù∏ Í≤ΩÏö∞ (Î≥µÏäµÏôÑÎ£å)
            return task.status === 'completed';
          } else {
            // ÏùºÎ∞ò Í≥ºÏ†úÎäî LearningLogÏóê Í∏∞Î°ùÎêú Í≤ΩÏö∞ (ÌïôÏäµÏôÑÎ£å)
            const unitId = task.id || task.unitId;
            return isUnitCompleted(unitId);
          }
        }).length;

        // Ïñ¥ÌúòÌÄ¥Ï¶à ÏôÑÎ£å Ïó¨Î∂Ä ÌôïÏù∏
        const vocabCompleted = await checkVocabularyCompletedToday();

        // Ï†ÑÏ≤¥ Í≥ºÏ†ú Í∞úÏàò = Í∏∞Ï°¥ Í≥ºÏ†ú + Ïñ¥ÌúòÌÄ¥Ï¶à(1Í∞ú)
        const totalCount = tasks.length + 1;

        // ÏôÑÎ£å Í∞úÏàò = Í∏∞Ï°¥ ÏôÑÎ£å + Ïñ¥ÌúòÌÄ¥Ï¶à ÏôÑÎ£å Ïó¨Î∂Ä
        const totalCompletedCount = completedCount + (vocabCompleted ? 1 : 0);

        badge.textContent = `${totalCompletedCount}/${totalCount}`;
      }
    }

    // Ïñ¥ÌúòÌÄ¥Ï¶à Ïñ¥ÌúòÎ†• ÏßÄÏàò Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
    function updateVocabAvgBadge() {
      const badge = document.getElementById('vocabAvgBadge');
      console.log('üéØ updateVocabAvgBadge Ïã§Ìñâ, badge ÏöîÏÜå:', badge);

      if (badge) {
        const userStr = sessionStorage.getItem('user');
        let storageKey = 'vocabRatingScore'; // Ïñ¥ÌúòÎ†• ÏßÄÏàò
        if (userStr) {
          try {
            const user = JSON.parse(userStr);
            // Ïñ¥ÌúòÌÄ¥Ï¶àÏôÄ ÎèôÏùºÌïú ÌòïÏãù: baseKey_grade_name
            storageKey = `vocabRatingScore_${user.grade}_${user.name}`;
            console.log('üë§ ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥:', user, 'ÌÇ§:', storageKey);
          } catch(e) {
            console.error('‚ùå User parse error:', e);
          }
        }

        const ratingScore = localStorage.getItem(storageKey);
        console.log('üìä localStorage ÌÇ§:', storageKey, 'Í∞í:', ratingScore);

        badge.textContent = ratingScore ? ratingScore : '0';
        console.log('‚úÖ Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å:', badge.textContent);
      } else {
        console.error('‚ùå vocabAvgBadge ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
      }
    }

    // ========== ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ Í¥ÄÎ†® Ìï®Ïàò ==========
    // ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ ÏÉÅÌÉú Í¥ÄÎ¶¨
    let autoTaskSettings = {
      series: [],          // ÏÑ†ÌÉùÎêú ÏãúÎ¶¨Ï¶à ('up', 'fit')
      days: [],            // ÏÑ†ÌÉùÎêú ÏöîÏùº (0=Ïùº, 1=Ïõî, ..., 6=ÌÜ†, 'everyday')
      taskCount: 1,        // Í≥ºÏ†ú Í∞úÏàò
      status: 'stopped'    // 'running', 'paused', 'stopped'
    };

    // Í≥ºÎ™© Ïö∞ÏÑ†ÏàúÏúÑ ÏàúÏÑú
    const SUBJECT_PRIORITY = ['bio', 'chem', 'physics', 'earth', 'geo', 'soc', 'law', 'pol', 'econ', 'classic', 'modern', 'world1', 'world2', 'people1', 'people2'];

    // ÎìúÎ°≠Îã§Ïö¥ ÌÜ†Í∏Ä
    function toggleAutoTaskDropdown(event) {
      event.stopPropagation();
      const dropdown = document.getElementById('autoTaskDropdown');
      const btn = document.getElementById('autoTaskBtn');
      if (dropdown.classList.contains('show')) {
        dropdown.classList.remove('show');
        btn.classList.remove('active');
      } else {
        // Î≤ÑÌäº ÏúÑÏπò Í∏∞Ï§ÄÏúºÎ°ú ÎìúÎ°≠Îã§Ïö¥ ÏúÑÏπò ÏÑ§Ï†ï
        const rect = btn.getBoundingClientRect();
        dropdown.style.top = (rect.bottom + 8) + 'px';
        dropdown.style.left = rect.left + 'px';

        dropdown.classList.add('show');
        btn.classList.add('active');
        // ÏÑ§Ï†ï Î∂àÎü¨Ïò§Í∏∞
        loadAutoTaskSettings();
      }
    }

    // ÎìúÎ°≠Îã§Ïö¥ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
    document.addEventListener('click', function(e) {
      const dropdown = document.getElementById('autoTaskDropdown');
      const btn = document.getElementById('autoTaskBtn');
      if (dropdown && !dropdown.contains(e.target) && e.target !== btn && !btn.contains(e.target)) {
        dropdown.classList.remove('show');
        btn.classList.remove('active');
      }
    });

    // ÏãúÎ¶¨Ï¶à Î≤ÑÌäº ÌÅ¥Î¶≠ Ìï∏Îì§Îü¨
    function initSeriesButtons() {
      const seriesBtns = document.querySelectorAll('#seriesBtnGroup .series-btn:not([disabled])');
      seriesBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          this.classList.toggle('selected');
          updateAutoTaskSettings();
        });
      });
    }

    // ÏöîÏùº Î≤ÑÌäº ÌÅ¥Î¶≠ Ìï∏Îì§Îü¨
    function initDayButtons() {
      const dayBtns = document.querySelectorAll('#dayBtnGroup .day-btn');
      dayBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const day = this.dataset.day;

          if (day === 'everyday') {
            // Îß§Ïùº ÏÑ†ÌÉù Ïãú: Îã§Î•∏ ÏöîÏùº Î™®Îëê Ìï¥Ï†ú, Îß§ÏùºÎßå ÏÑ†ÌÉù
            if (!this.classList.contains('selected')) {
              dayBtns.forEach(b => b.classList.remove('selected'));
              this.classList.add('selected');
            } else {
              this.classList.remove('selected');
            }
          } else {
            // Í∞úÎ≥Ñ ÏöîÏùº ÏÑ†ÌÉù Ïãú: Îß§Ïùº Ìï¥Ï†ú
            const everydayBtn = document.querySelector('#dayBtnGroup .day-btn[data-day="everyday"]');
            if (everydayBtn) everydayBtn.classList.remove('selected');
            this.classList.toggle('selected');
          }
          updateAutoTaskSettings();
        });
      });
    }

    // Í≥ºÏ†ú Í∞úÏàò ÏûÖÎ†• Ìï∏Îì§Îü¨
    function initTaskCountInput() {
      const input = document.getElementById('autoTaskCount');
      if (input) {
        input.addEventListener('change', function() {
          let val = parseInt(this.value) || 3;
          if (val < 1) val = 1;
          if (val > 15) val = 15;
          this.value = val;
          updateAutoTaskSettings();
        });
      }
    }

    // ÏÑ§Ï†ï ÏóÖÎç∞Ïù¥Ìä∏ (UIÏóêÏÑú Í∞í ÏàòÏßë)
    function updateAutoTaskSettings() {
      // ÏãúÎ¶¨Ï¶à
      const selectedSeries = [];
      document.querySelectorAll('#seriesBtnGroup .series-btn.selected').forEach(btn => {
        selectedSeries.push(btn.dataset.series);
      });
      autoTaskSettings.series = selectedSeries;

      // ÏöîÏùº
      const selectedDays = [];
      document.querySelectorAll('#dayBtnGroup .day-btn.selected').forEach(btn => {
        selectedDays.push(btn.dataset.day);
      });
      autoTaskSettings.days = selectedDays;

      // Í≥ºÏ†ú Í∞úÏàò
      const countInput = document.getElementById('autoTaskCount');
      autoTaskSettings.taskCount = parseInt(countInput?.value) || 1;
    }

    // ÏÑúÎ≤ÑÏóêÏÑú ÏÑ§Ï†ï Î∂àÎü¨Ïò§Í∏∞
    async function loadAutoTaskSettings() {
      try {
        const userStr = sessionStorage.getItem('user');
        if (!userStr) return;
        const user = JSON.parse(userStr);

        const response = await fetch(`/api/auto-task-settings?grade=${encodeURIComponent(user.grade)}&name=${encodeURIComponent(user.name)}`);
        const result = await response.json();

        if (result.ok && result.settings) {
          autoTaskSettings = { ...autoTaskSettings, ...result.settings };
          applySettingsToUI();
        }
      } catch (error) {
        console.error('ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ ÏÑ§Ï†ï Î∂àÎü¨Ïò§Í∏∞ Ïã§Ìå®:', error);
      }
    }

    // ÏÑ§Ï†ïÏùÑ UIÏóê Ï†ÅÏö©
    function applySettingsToUI() {
      // ÏãúÎ¶¨Ï¶à Î≤ÑÌäº
      document.querySelectorAll('#seriesBtnGroup .series-btn').forEach(btn => {
        btn.classList.remove('selected');
        if (autoTaskSettings.series.includes(btn.dataset.series)) {
          btn.classList.add('selected');
        }
      });

      // ÏöîÏùº Î≤ÑÌäº
      document.querySelectorAll('#dayBtnGroup .day-btn').forEach(btn => {
        btn.classList.remove('selected');
        if (autoTaskSettings.days.includes(btn.dataset.day)) {
          btn.classList.add('selected');
        }
      });

      // Í≥ºÏ†ú Í∞úÏàò
      const countInput = document.getElementById('autoTaskCount');
      if (countInput) {
        countInput.value = autoTaskSettings.taskCount || 1;
      }

      // Î≤ÑÌäº ÏÉÅÌÉú
      updateActionButtons();

      // ÏÉÅÌÉú ÌëúÏãú
      updateStatusDisplay();
    }

    // Ïï°ÏÖò Î≤ÑÌäº ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
    function updateActionButtons() {
      const startBtn = document.getElementById('autoTaskStartBtn');
      const pauseBtn = document.getElementById('autoTaskPauseBtn');
      const stopBtn = document.getElementById('autoTaskStopBtn');

      switch (autoTaskSettings.status) {
        case 'running':
          startBtn.disabled = true;
          pauseBtn.disabled = false;
          stopBtn.disabled = false;
          break;
        case 'paused':
          startBtn.disabled = false;
          pauseBtn.disabled = true;
          stopBtn.disabled = false;
          break;
        case 'stopped':
        default:
          startBtn.disabled = false;
          pauseBtn.disabled = true;
          stopBtn.disabled = true;
          break;
      }
    }

    // ÏÉÅÌÉú ÌëúÏãú ÏóÖÎç∞Ïù¥Ìä∏
    function updateStatusDisplay() {
      const statusEl = document.getElementById('autoTaskStatus');
      if (!statusEl) return;

      statusEl.classList.remove('running', 'paused', 'stopped');

      switch (autoTaskSettings.status) {
        case 'running':
          statusEl.classList.add('running');
          const seriesText = autoTaskSettings.series.map(s => {
            if (s === 'up') return 'BRIANÏóÖ';
            if (s === 'fit') return 'BRIANÌïè';
            return s;
          }).join(', ') || 'ÎØ∏ÏÑ†ÌÉù';
          const daysText = autoTaskSettings.days.includes('everyday') ? 'Îß§Ïùº' :
            autoTaskSettings.days.map(d => ['Ïùº','Ïõî','Ìôî','Ïàò','Î™©','Í∏à','ÌÜ†'][d] || d).join(', ') || 'ÎØ∏ÏÑ†ÌÉù';
          statusEl.innerHTML = `‚ñ∂Ô∏è ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ Ïã§Ìñâ Ï§ë<br><small style="opacity: 0.8;">${seriesText} / ${daysText} / ${autoTaskSettings.taskCount}Í∞ú</small>`;
          break;
        case 'paused':
          statusEl.classList.add('paused');
          statusEl.innerHTML = `‚è∏Ô∏è ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ ÏùºÏãúÏ†ïÏßÄ ÏÉÅÌÉú`;
          break;
        case 'stopped':
        default:
          statusEl.classList.add('stopped');
          statusEl.innerHTML = `‚èπÔ∏è ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨Í∞Ä ÎπÑÌôúÏÑ±Ìôî ÏÉÅÌÉúÏûÖÎãàÎã§`;
          break;
      }
    }

    // ÏÑúÎ≤ÑÏóê ÏÑ§Ï†ï Ï†ÄÏû•
    async function saveAutoTaskSettings() {
      try {
        const userStr = sessionStorage.getItem('user');
        if (!userStr) {
          showErrorMessage('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§', '‚ö†Ô∏è', 'ÏïåÎ¶º');
          return false;
        }
        const user = JSON.parse(userStr);

        const response = await fetch('/api/auto-task-settings', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            grade: user.grade,
            name: user.name,
            settings: autoTaskSettings
          })
        });

        const result = await response.json();
        return result.ok;
      } catch (error) {
        console.error('ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ ÏÑ§Ï†ï Ï†ÄÏû• Ïã§Ìå®:', error);
        return false;
      }
    }

    // ÏãúÏûë Î≤ÑÌäº
    async function startAutoTask() {
      // Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
      updateAutoTaskSettings();

      if (autoTaskSettings.series.length === 0) {
        showErrorMessage('ÏãúÎ¶¨Ï¶àÎ•º 1Í∞ú Ïù¥ÏÉÅ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî', '‚ö†Ô∏è', 'ÏïåÎ¶º');
        return;
      }
      if (autoTaskSettings.days.length === 0) {
        showErrorMessage('ÏöîÏùºÏùÑ 1Í∞ú Ïù¥ÏÉÅ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî', '‚ö†Ô∏è', 'ÏïåÎ¶º');
        return;
      }

      autoTaskSettings.status = 'running';
      const saved = await saveAutoTaskSettings();

      if (saved) {
        updateActionButtons();
        updateStatusDisplay();
        showErrorMessage('ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨Í∞Ä ÏãúÏûëÎêòÏóàÏäµÎãàÎã§!<br>Îß§Ïùº 00:00Ïóê Í≥ºÏ†úÍ∞Ä ÏûêÎèô Î∂ÄÏó¨Îê©ÎãàÎã§.', '‚úÖ', 'ÏÑ±Í≥µ');
      } else {
        autoTaskSettings.status = 'stopped';
        showErrorMessage('ÏÑ§Ï†ï Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§', '‚ùå', 'Ïò§Î•ò');
      }
    }

    // ÏùºÏãúÏ†ïÏßÄ Î≤ÑÌäº
    async function pauseAutoTask() {
      autoTaskSettings.status = 'paused';
      const saved = await saveAutoTaskSettings();

      if (saved) {
        updateActionButtons();
        updateStatusDisplay();
        showErrorMessage('ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨Í∞Ä ÏùºÏãúÏ†ïÏßÄÎêòÏóàÏäµÎãàÎã§', '‚è∏Ô∏è', 'ÏïåÎ¶º');
      }
    }

    // Ï§ëÎã® Î≤ÑÌäº
    async function stopAutoTask() {
      // ÏÑ§Ï†ï Ï¥àÍ∏∞Ìôî
      autoTaskSettings.series = [];
      autoTaskSettings.days = [];
      autoTaskSettings.taskCount = 1;
      autoTaskSettings.status = 'stopped';

      const saved = await saveAutoTaskSettings();

      if (saved) {
        applySettingsToUI();
        showErrorMessage('ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨Í∞Ä Ï§ëÎã®ÎêòÍ≥† ÏÑ§Ï†ïÏù¥ Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§', '‚èπÔ∏è', 'ÏïåÎ¶º');
      }
    }

    // ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ Î≤ÑÌäº Ï¥àÍ∏∞Ìôî
    document.addEventListener('DOMContentLoaded', function() {
      initSeriesButtons();
      initDayButtons();
      initTaskCountInput();
    });

    // ÌïôÏäµÏã§ Î™®Îã¨ Ïó¥Í∏∞
    async function openStudyRoomModal() {
      const modal = document.getElementById('studyRoomModal');
      if (modal) {
        // üé¨ Îí∑Î∞∞Í≤Ω ÎπÑÎîîÏò§ ÏùºÏãúÏ†ïÏßÄ (ÏÑ±Îä• ÏµúÏ†ÅÌôî)
        const bgVideo = document.querySelector('#tablet-fixed-bg video, .background-video video');
        if (bgVideo) {
          bgVideo.pause();
        }

        modal.classList.add('show');
        // Í≥ºÏ†ú Î™©Î°ù Î†åÎçîÎßÅ
        await renderStudyRoomList();
        // ‚úÖ Î™®Îã¨ Ïó¥Î¶º ÏÉÅÌÉú Ï†ÄÏû• (ÏÉàÎ°úÍ≥†Ïπ® ÌõÑ Î≥µÏõêÏö©)
        sessionStorage.setItem('studyRoomModalOpen', 'true');
      }
    }

    // ÌïôÏäµÏã§ Î™®Îã¨ Îã´Í∏∞
    async function closeStudyRoomModal() {
      console.log('üö™ ÌïôÏäµÏã§ Î™®Îã¨ Îã´Í∏∞ ÏãúÏûë');
      const modal = document.getElementById('studyRoomModal');
      if (modal) {
        modal.classList.remove('show');
        // ‚úÖ Î™®Îã¨ Ïó¥Î¶º ÏÉÅÌÉú Ï†úÍ±∞
        sessionStorage.removeItem('studyRoomModalOpen');
        console.log('‚úÖ Î™®Îã¨ Ïà®ÍπÄ ÏôÑÎ£å, ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÏûë');

        // üé¨ Îí∑Î∞∞Í≤Ω ÎπÑÎîîÏò§ Îã§Ïãú Ïû¨ÏÉù
        const bgVideo = document.querySelector('#tablet-fixed-bg video, .background-video video');
        if (bgVideo) {
          bgVideo.play().catch(e => console.log('ÎπÑÎîîÏò§ Ïû¨ÏÉù Ïã§Ìå®:', e));
        }

        // Î©îÏù∏ Î©îÎâ¥Ïùò ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        await updateAllLessonStatus();
        console.log('‚úÖ ÌïôÏäµÏã§ Î™®Îã¨ Îã´Í∏∞ ÏôÑÎ£å');
      } else {
        console.error('‚ùå studyRoomModal ÏöîÏÜåÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏäµÎãàÎã§');
      }
    }

    // ‚úÖ ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÌïôÏäµÏã§ Î™®Îã¨ ÏÉÅÌÉú Î≥µÏõê
    function restoreStudyRoomModal() {
      if (sessionStorage.getItem('studyRoomModalOpen') === 'true') {
        console.log('üîÑ ÌïôÏäµÏã§ Î™®Îã¨ ÏÉÅÌÉú Î≥µÏõê');
        openStudyRoomModal();
      }
    }

    // Î©îÏù∏ Î©îÎâ¥Ïùò Î™®Îì† Îã®Ïõê ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú Î∞è Î≥ÑÏ†ê ÏóÖÎç∞Ïù¥Ìä∏
    async function updateAllLessonStatus() {
      console.log('üîÑ ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú Î∞è Î≥ÑÏ†ê ÏóÖÎç∞Ïù¥Ìä∏ ÏãúÏûë');

      // ÌòÑÏû¨ Î†åÎçîÎßÅÎêú Îã®Ïõê Î™©Î°ùÏù¥ ÏûàÏúºÎ©¥ Îã§Ïãú Î†åÎçîÎßÅ (Îì±Í∏â Îç∞Ïù¥ÌÑ∞ Ìè¨Ìï®)
      if (currentUnits && currentUnits.length > 0) {
        console.log('üìö ÌòÑÏû¨ Îã®Ïõê Î™©Î°ù Îã§Ïãú Î†åÎçîÎßÅ:', currentUnits.length, 'Í∞ú');
        await renderUnitList(currentUnits);
        console.log('‚úÖ Î©îÏù∏ Î©îÎâ¥ ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú Î∞è Î≥ÑÏ†ê ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å');
        return; // Ïû¨Î†åÎçîÎßÅ ÏôÑÎ£å, Ìï®Ïàò Ï¢ÖÎ£å
      }

      console.log('‚ö†Ô∏è currentUnitsÍ∞Ä ÎπÑÏñ¥ÏûàÏùå, DOM ÏöîÏÜå ÏßÅÏ†ë ÏóÖÎç∞Ïù¥Ìä∏');

      // ÏµúÏã† Îì±Í∏â Îç∞Ïù¥ÌÑ∞ Î°úÎìú
      unitGradesData = await fetchUnitGrades();
      console.log('‚≠ê fetchUnitGrades ÏôÑÎ£å, unitGradesData:', Object.keys(unitGradesData).length, 'Í∞ú');

      // DOMÏóêÏÑú ÌòÑÏû¨ Î≥¥Ïù¥Îäî Îã®ÏõêÎì§ÏùÑ Ï∞æÏïÑÏÑú ÏóÖÎç∞Ïù¥Ìä∏
      const allUnits = document.querySelectorAll('.unit-item[data-page]');
      console.log('üìã DOMÏóêÏÑú Ï∞æÏùÄ Îã®Ïõê Ïàò:', allUnits.length);

      allUnits.forEach(unit => {
        const pageKey = unit.dataset.page;
        if (!pageKey) return;

        // pageKeyÏóêÏÑú Îã®Ïõê ÏΩîÎìú Ï∂îÏ∂ú
        let unitCode = pageKey;
        const match = pageKey.match(/\/([^\/]+)\.html$/);
        if (match) {
          unitCode = match[1];
        }

        // ‚úÖ world2_XX, people2_XX ÌòïÏãù Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö© (ÏÑúÎ≤Ñ APIÏôÄ ÎèôÏùºÌïòÍ≤å)
        // ÏÑúÎ≤ÑÏóêÏÑú world2_XX ÌòïÏãù Í∑∏ÎåÄÎ°ú Ï†ÄÏû•ÌïòÎØÄÎ°ú Î≥ÄÌôòÌïòÏßÄ ÏïäÏùå

        // ÏôÑÎ£å Ïó¨Î∂Ä ÌôïÏù∏
        const completed = isUnitCompleted(pageKey);

        // Î∞∞ÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
        const badge = unit.querySelector('.status-badge');
        if (badge) {
          badge.classList.remove('status-default', 'status-done');
          if (completed) {
            badge.classList.add('status-done');
            badge.textContent = 'üèÜ ÌïôÏäµÏôÑÎ£å';
          } else {
            badge.classList.add('status-default');
            badge.textContent = '‚úèÔ∏è ÎØ∏ÏôÑÎ£å';
          }
        }

        // Î≥ÑÏ†ê ÏóÖÎç∞Ïù¥Ìä∏
        const unitRight = unit.querySelector('.unit-right');
        if (unitRight) {
          // Í∏∞Ï°¥ Î≥ÑÏ†ê Ï†úÍ±∞
          const existingStars = unitRight.querySelector('.unit-stars');
          if (existingStars) {
            existingStars.remove();
          }

          // ÏÉàÎ°úÏö¥ Î≥ÑÏ†ê Ï∂îÍ∞Ä (ÏôÑÎ£åÎêú Í≤ΩÏö∞Îßå)
          if (completed) {
            const gradeInfo = unitGradesData[unitCode];
            const stars = gradeInfo ? getStarsForGrade(gradeInfo.grade) : '';

            console.log(`‚≠ê [${unitCode}] completed=${completed}, gradeInfo=`, gradeInfo, 'stars=', stars);

            if (stars) {
              const starsSpan = document.createElement('span');
              starsSpan.className = 'unit-stars';
              starsSpan.textContent = stars;
              // Î∞∞ÏßÄ ÏïûÏóê Î≥ÑÏ†ê ÏÇΩÏûÖ
              if (badge) {
                unitRight.insertBefore(starsSpan, badge);
              } else {
                unitRight.appendChild(starsSpan);
              }
            }
          }
        }
      });
      console.log('‚úÖ Î©îÏù∏ Î©îÎâ¥ ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú Î∞è Î≥ÑÏ†ê ÏóÖÎç∞Ïù¥Ìä∏ ÏôÑÎ£å');
    }

    // Ïò§Îäò Ïñ¥ÌúòÌÄ¥Ï¶à ÏôÑÎ£å Ïó¨Î∂Ä ÌôïÏù∏
    async function checkVocabularyCompletedToday() {
      try {
        const userStr = sessionStorage.getItem('user');
        if (!userStr) {
          console.error('ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Í∞Ä ÏóÜÏäµÎãàÎã§');
          return false;
        }

        const user = JSON.parse(userStr);

        const response = await fetch(
          `/api/user-progress/vocabulary-history/today?grade=${encodeURIComponent(user.grade)}&name=${encodeURIComponent(user.name)}`
        );

        const result = await response.json();
        if (result.ok) {
          return result.completedToday;
        }
        return false;
      } catch (error) {
        console.error('Ïñ¥ÌúòÌÄ¥Ï¶à ÏôÑÎ£å Ïó¨Î∂Ä ÌôïÏù∏ Ïò§Î•ò:', error);
        return false;
      }
    }

    // Ïñ¥ÌúòÌÄ¥Ï¶à ÌåùÏóÖ Ïó¥Í∏∞
    function openVocabularyQuiz() {
      const existingOverlay = document.getElementById('vocabularyQuizOverlay');
      if (existingOverlay) {
        existingOverlay.remove();
      }

      const overlay = document.createElement('div');
      overlay.id = 'vocabularyQuizOverlay';
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.7);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10003;
      `;

      // Ïª®ÌÖåÏù¥ÎÑà (iframe + X Î≤ÑÌäºÏùÑ Ìè¨Ìï®)
      const container = document.createElement('div');
      container.style.cssText = `
        position: relative;
        width: 1000px;
        height: 700px;
        max-width: 90%;
        max-height: 90%;
      `;

      // X Î≤ÑÌäº
      const closeBtn = document.createElement('button');
      closeBtn.innerHTML = '&times;';
      closeBtn.style.cssText = `
        position: absolute;
        top: -15px;
        right: -15px;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: #ff4444;
        color: white;
        border: 3px solid white;
        font-size: 28px;
        font-weight: bold;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10004;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        transition: all 0.2s ease;
      `;
      closeBtn.onmouseover = () => {
        closeBtn.style.background = '#cc0000';
        closeBtn.style.transform = 'scale(1.1)';
      };
      closeBtn.onmouseout = () => {
        closeBtn.style.background = '#ff4444';
        closeBtn.style.transform = 'scale(1)';
      };
      closeBtn.onclick = closeVocabularyQuiz;

      // iframe
      const iframe = document.createElement('iframe');
      iframe.id = 'vocabularyQuizIframe';
      iframe.src = '/demo-vocabulary-quiz.html';
      iframe.style.cssText = `
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 12px;
        background: white;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
      `;

      container.appendChild(closeBtn);
      container.appendChild(iframe);
      overlay.appendChild(container);
      document.body.appendChild(overlay);

      // Ïò§Î≤ÑÎ†àÏù¥ ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞ (iframe Ïô∏Î∂Ä ÌÅ¥Î¶≠)
      overlay.addEventListener('click', (e) => {
        if (e.target === overlay) {
          closeVocabularyQuiz();
        }
      });
    }

    // Ïñ¥ÌúòÌÄ¥Ï¶à ÌåùÏóÖ Îã´Í∏∞
    function closeVocabularyQuiz() {
      const overlay = document.getElementById('vocabularyQuizOverlay');
      if (overlay) {
        overlay.remove();
      }
    }

    // Íµ¨ ÌòïÏãù unitIdÎ•º ÏÉà ÌòïÏãùÏúºÎ°ú Ï†ïÍ∑úÌôî (world_02 -> world1_02, people_02 -> people1_02)
    function normalizeUnitId(unitId) {
      if (!unitId) return unitId;
      const legacyMatch = unitId.match(/^(world|people)_(\d+)$/i);
      if (legacyMatch) {
        const oldPrefix = legacyMatch[1].toLowerCase();
        const num = parseInt(legacyMatch[2], 10);
        // 41~80ÏùÄ world2/people2Ïùò 01~40ÏúºÎ°ú Î≥ÄÌôò
        if (num >= 41 && num <= 80) {
          const newNum = (num - 40).toString().padStart(2, '0');
          return `${oldPrefix}2_${newNum}`;
        }
        // 1~40ÏùÄ world1/people1Ïùò 01~40ÏúºÎ°ú Î≥ÄÌôò
        const paddedNum = num.toString().padStart(2, '0');
        return `${oldPrefix}1_${paddedNum}`;
      }
      return unitId;
    }

    // Î∂ÄÏó¨ ÏãúÍ∞Ñ Ìè¨Îß∑ Ìï®Ïàò (11Ïõî 25Ïùº 14:30 ÌòïÌÉú)
    function formatAssignedTime(dateString) {
      if (!dateString) return '';
      const date = new Date(dateString);
      const month = date.getMonth() + 1;
      const day = date.getDate();
      const hours = String(date.getHours()).padStart(2, '0');
      const minutes = String(date.getMinutes()).padStart(2, '0');
      return `${month}Ïõî ${day}Ïùº ${hours}:${minutes}`;
    }

    // unitIdÏóêÏÑú ÌïúÍ∏Ä Í≥ºÎ™©/Î∂ÑÏïº/Ï†úÎ™© Ï†ïÎ≥¥ Ï∂îÏ∂ú (AI Ï∂îÏ≤ú Í≥ºÏ†úÏö©)
    function getUnitInfoFromId(unitId) {
      // Í≥ºÎ™© ÏΩîÎìú -> ÌïúÍ∏Ä Îß§Ìïë
      const subjectMap = {
        'bio': 'ÏÉùÎ¨º', 'earth': 'ÏßÄÍµ¨Í≥ºÌïô', 'physics': 'Î¨ºÎ¶¨', 'chem': 'ÌôîÌïô',
        'soc': 'ÏÇ¨ÌöåÎ¨∏Ìôî', 'geo': 'ÏßÄÎ¶¨', 'law': 'Î≤ï', 'pol': 'Ï†ïÏπòÍ≤ΩÏ†ú',
        'classic': 'Í≥†Ï†ÑÎ¨∏Ìïô', 'modern': 'ÌòÑÎåÄÎ¨∏Ìïô',
        'world': 'ÏÑ∏Í≥ÑÎ¨∏Ìïô', 'world1': 'ÏÑ∏Í≥ÑÎ¨∏Ìïô1', 'world2': 'ÏÑ∏Í≥ÑÎ¨∏Ìïô2',
        'people': 'Ïù∏Î¨º', 'people1': 'ÌïúÍµ≠Ïù∏Î¨º', 'people2': 'ÏÑ∏Í≥ÑÏù∏Î¨º'
      };

      // Î∂ÑÏïº ÏΩîÎìú -> ÌïúÍ∏Ä Îß§Ìïë
      const fieldMap = {
        'science': 'Í≥ºÌïôÎ∂ÑÏïº', 'social': 'ÏÇ¨ÌöåÎ∂ÑÏïº', 'korlit': 'Íµ≠Ïñ¥Î∂ÑÏïº',
        'worldlit': 'ÏÑ∏Í≥ÑÎ¨∏ÌïôÎ∂ÑÏïº', 'person': 'Ïù∏Î¨ºÎ∂ÑÏïº'
      };

      // Í≥ºÎ™© ÏΩîÎìúÏóêÏÑú Î∂ÑÏïº Ïú†Ï∂î
      const subjectToField = {
        'bio': 'science', 'earth': 'science', 'physics': 'science', 'chem': 'science',
        'soc': 'social', 'geo': 'social', 'law': 'social', 'pol': 'social',
        'classic': 'korlit', 'modern': 'korlit',
        'world': 'worldlit', 'world1': 'worldlit', 'world2': 'worldlit',
        'people': 'person', 'people1': 'person', 'people2': 'person'
      };

      // unitIdÏóêÏÑú Í≥ºÎ™©ÏΩîÎìúÏôÄ Î≤àÌò∏ Ï∂îÏ∂ú (Ïòà: "chem_01", "physics_12", "./BRAINUP/science/chem_01.html", "fit_bio_01", "deep_bio_01")
      let subjectCode = '';
      let unitNo = '';
      let isDeep = false;

      // deep_ Ï†ëÎëêÏñ¥ Í≤ΩÎ°ú ÌòïÏãùÏù∏ Í≤ΩÏö∞ (./BRAINUP/science/deep_bio_01.html)
      const deepPathMatch = unitId.match(/\/deep_([a-z]+\d?)_(\d+)\.html$/i);
      if (deepPathMatch) {
        subjectCode = deepPathMatch[1].toLowerCase();
        unitNo = deepPathMatch[2];
        isDeep = true;
      } else {
        // deep_ Ï†ëÎëêÏñ¥ Îã®Ïàú ÏΩîÎìú ÌòïÏãùÏù∏ Í≤ΩÏö∞ (deep_bio_01)
        const deepCodeMatch = unitId.match(/^deep_([a-z]+\d?)_(\d+)$/i);
        if (deepCodeMatch) {
          subjectCode = deepCodeMatch[1].toLowerCase();
          unitNo = deepCodeMatch[2];
          isDeep = true;
        } else {
          // fit_ Ï†ëÎëêÏñ¥ Í≤ΩÎ°ú ÌòïÏãùÏù∏ Í≤ΩÏö∞ (./BRAINUP/science/fit_chem_01.html)
          const fitPathMatch = unitId.match(/\/fit_([a-z]+\d?)_(\d+)\.html$/i);
          if (fitPathMatch) {
            subjectCode = fitPathMatch[1].toLowerCase();
            unitNo = fitPathMatch[2];
          } else {
            // fit_ Ï†ëÎëêÏñ¥ Îã®Ïàú ÏΩîÎìú ÌòïÏãùÏù∏ Í≤ΩÏö∞ (fit_chem_01, fit_people2_03)
            const fitCodeMatch = unitId.match(/^fit_([a-z]+\d?)_(\d+)$/i);
            if (fitCodeMatch) {
              subjectCode = fitCodeMatch[1].toLowerCase();
              unitNo = fitCodeMatch[2];
            } else {
              // ÌååÏùº Í≤ΩÎ°ú ÌòïÏãùÏù∏ Í≤ΩÏö∞ (./BRAINUP/science/chem_01.html)
              const pathMatch = unitId.match(/\/([a-z]+\d?)_(\d+)\.html$/i);
              if (pathMatch) {
                subjectCode = pathMatch[1].toLowerCase();
                unitNo = pathMatch[2];
              } else {
                // Îã®Ïàú ÏΩîÎìú ÌòïÏãùÏù∏ Í≤ΩÏö∞ (chem_01)
                const codeMatch = unitId.match(/^([a-z]+\d?)_(\d+)$/i);
                if (codeMatch) {
                  subjectCode = codeMatch[1].toLowerCase();
                  unitNo = codeMatch[2];
                }
              }
            }
          }
        }
      }

      const subjectLabel = subjectMap[subjectCode] || subjectCode;
      const fieldCode = subjectToField[subjectCode] || 'social';
      const fieldLabel = fieldMap[fieldCode] || 'Î∂ÑÏïº';

      // unitNoÏóêÏÑú ÏïûÏùò 0 Ï†úÍ±∞ (01 -> 1)
      const displayNo = unitNo ? parseInt(unitNo, 10).toString() : '';

      // ‚úÖ BRAINDEEP (deep_bio Îì±)Ïù∏ Í≤ΩÏö∞ CONTENTSÏóêÏÑú Ïã§Ï†ú Ï†úÎ™© Í∞ÄÏ†∏Ïò§Í∏∞
      let displayTitle = displayNo ? `${subjectLabel} ${displayNo}` : subjectLabel;

      if (isDeep && window.CONTENTS) {
        const contentKey = `deep_${subjectCode}_${unitNo}`;
        if (window.CONTENTS[contentKey] && window.CONTENTS[contentKey].title) {
          displayTitle = window.CONTENTS[contentKey].title;
        }
      }

      return {
        subjectCode: subjectCode,
        subjectLabel: subjectLabel,
        fieldCode: fieldCode,
        fieldLabel: fieldLabel,
        unitNo: unitNo,
        displayTitle: displayTitle
      };
    }

    // ÌïôÏäµÏã§ Î™©Î°ù Î†åÎçîÎßÅ
    async function renderStudyRoomList() {
      const list = document.getElementById('studyRoomList');
      if (!list) return;

      // Îã®ÏõêÎ≥Ñ Îì±Í∏â Îç∞Ïù¥ÌÑ∞ Î°úÎìú
      unitGradesData = await fetchUnitGrades();

      const allTasks = await getStudyRoomTasks();

      // AI Í≥ºÏ†úÏôÄ ÏùºÎ∞ò Í≥ºÏ†ú Î∂ÑÎ¶¨ ÌõÑ Í∞ÅÍ∞Å ÏãúÍ∞ÑÏàú Ï†ïÎ†¨
      const aiTasks = allTasks.filter(t => t.isAI).sort((a, b) => {
        const dateA = new Date(a.assignedAt || 0);
        const dateB = new Date(b.assignedAt || 0);
        return dateB - dateA; // ÎÇ¥Î¶ºÏ∞®Ïàú (ÏµúÏã† Ïàú)
      });

      const normalTasks = allTasks.filter(t => !t.isAI).sort((a, b) => {
        const dateA = new Date(a.assignedAt || 0);
        const dateB = new Date(b.assignedAt || 0);
        return dateB - dateA; // ÎÇ¥Î¶ºÏ∞®Ïàú (ÏµúÏã† Ïàú)
      });

      // AI Í≥ºÏ†úÎ•º Î®ºÏ†Ä, ÏùºÎ∞ò Í≥ºÏ†úÎ•º ÎÇòÏ§ëÏóê
      const tasks = [...aiTasks, ...normalTasks];

      list.innerHTML = '';

      // ========== Ïñ¥ÌúòÎ†• Îç∞ÏùºÎ¶¨ Í≥ºÏ†ú ÏÑπÏÖò (ÏµúÏÉÅÎã® Í≥†Ï†ï) ==========
      const vocabDailyHeader = document.createElement('li');
      vocabDailyHeader.className = 'study-room-divider';
      vocabDailyHeader.innerHTML = `
        <div style="display: flex; align-items: center; gap: 12px; padding: 16px 0;">
          <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #10b981, transparent);"></div>
          <span style="color: #10b981; font-size: 13px; font-weight: 600; white-space: nowrap;">üìñ Ïñ¥ÌúòÎ†• Îç∞ÏùºÎ¶¨ Í≥ºÏ†ú</span>
          <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #10b981, transparent);"></div>
        </div>
      `;
      list.appendChild(vocabDailyHeader);

      // Ïò§Îäò Ïñ¥ÌúòÌÄ¥Ï¶à ÏôÑÎ£å Ïó¨Î∂Ä Ï≤¥ÌÅ¨
      const vocabCompletedToday = await checkVocabularyCompletedToday();

      // Ïñ¥ÌúòÎ†• Ìñ•ÏÉÅ ÌÄ¥Ï¶à Ìï≠Î™©
      const vocabItem = document.createElement('li');
      vocabItem.className = 'study-room-item';
      vocabItem.style.cursor = 'pointer';
      vocabItem.dataset.isVocabQuiz = 'true';

      const vocabBadgeClass = vocabCompletedToday ? 'status-done' : 'status-default';
      const vocabBadgeText = vocabCompletedToday ? 'üèÜ ÌïôÏäµÏôÑÎ£å' : '‚úèÔ∏è ÎØ∏ÏôÑÎ£å';

      vocabItem.innerHTML = `
        <div class="task-info">
          <div class="task-title" style="font-weight: 600;">Ïñ¥ÌúòÎ†• Ìñ•ÏÉÅ ÌÄ¥Ï¶à</div>
          <div class="task-meta" style="font-size: 12px; color: #6b7280; margin-top: 4px;">
            Îß§Ïùº ÌïôÏäµÏúºÎ°ú Ïñ¥ÌúòÎ†•ÏùÑ ÌÇ§ÏõåÎ≥¥ÏÑ∏Ïöî!
          </div>
        </div>
        <div class="task-status">
          <span class="status-badge ${vocabBadgeClass}">${vocabBadgeText}</span>
        </div>
      `;

      // ÌÅ¥Î¶≠ Ïãú Ïñ¥ÌúòÌÄ¥Ï¶à ÌåùÏóÖ Ïó¥Í∏∞
      vocabItem.addEventListener('click', openVocabularyQuiz);

      list.appendChild(vocabItem);

      // ========== ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ ÏõîÍ∞Ñ Í≥ºÏ†ú ÏÑπÏÖò ==========
      const readingReportHeader = document.createElement('li');
      readingReportHeader.className = 'study-room-divider';
      readingReportHeader.innerHTML = `
        <div style="display: flex; align-items: center; gap: 12px; padding: 16px 0;">
          <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #f59e0b, transparent);"></div>
          <span style="color: #f59e0b; font-size: 13px; font-weight: 600; white-space: nowrap;">üìù ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ ÏõîÍ∞Ñ Í≥ºÏ†ú</span>
          <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #f59e0b, transparent);"></div>
        </div>
      `;
      list.appendChild(readingReportHeader);

      // Ïù¥Î≤à Îã¨ Ï†úÏ∂ú Í∞úÏàò ÌôïÏù∏
      const monthlyReportCount = await getMonthlyReportCount();

      // ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ìï≠Î™©
      const reportItem = document.createElement('li');
      reportItem.className = 'study-room-item';
      reportItem.style.cursor = 'pointer';
      reportItem.dataset.isReadingReport = 'true';

      const reportBadgeClass = monthlyReportCount > 0 ? 'status-done' : 'status-default';
      const reportBadgeText = monthlyReportCount > 0 ? `üèÜ Ïù¥Î≤à Îã¨ ${monthlyReportCount}Í∞ú Ï†úÏ∂úÏôÑÎ£å` : '‚úèÔ∏è ÎØ∏Ï†úÏ∂ú';

      reportItem.innerHTML = `
        <div class="task-info">
          <div class="task-title" style="font-weight: 600;">Í≥†Îûò ÎèÑÏÑúÍ¥Ä ÎèÖÏÑú Í∞êÏÉÅÎ¨∏</div>
          <div class="task-meta" style="font-size: 12px; color: #6b7280; margin-top: 4px;">
            Ïã†ÎÇòÎäî Í≥†ÎûòÎèÑÏÑúÍ¥Ä Ïù¥ÏïºÍ∏∞Î•º ÏùΩÍ≥† Í∞êÏÉÅÎ¨∏ÏùÑ Ï†úÏ∂úÌï¥Î≥¥ÏÑ∏Ïöî!
          </div>
        </div>
        <div class="task-status">
          <span class="status-badge ${reportBadgeClass}">${reportBadgeText}</span>
        </div>
      `;

      // ÌÅ¥Î¶≠ Ïãú ÌïôÏäµÏã§ Î™®Îã¨ Îã´Í≥† Í≥†Îûò ÎèÑÏÑúÍ¥Ä ÌåùÏóÖ Ïó¥Í∏∞
      reportItem.addEventListener('click', () => {
        // ÌïôÏäµÏã§ Î™®Îã¨ Îã´Í∏∞
        const studyRoomModal = document.getElementById('studyRoomModal');
        if (studyRoomModal) {
          studyRoomModal.classList.remove('show');
        }
        // Í≥†Îûò ÎèÑÏÑúÍ¥Ä ÌåùÏóÖ Ïó¥Í∏∞
        goToWhaleStory();
      });

      list.appendChild(reportItem);

      // AI Ï∂îÏ≤ú Í≥ºÏ†ú Ìó§Îçî Ï∂îÍ∞Ä (AI Í≥ºÏ†úÍ∞Ä ÏûàÏùÑ ÎïåÎßå)
      if (aiTasks.length > 0) {
        const aiHeader = document.createElement('li');
        aiHeader.className = 'study-room-divider';
        aiHeader.innerHTML = `
          <div style="display: flex; align-items: center; gap: 12px; padding: 16px 0;">
            <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #a855f7, transparent);"></div>
            <span style="color: #a855f7; font-size: 13px; font-weight: 600; white-space: nowrap;">ü§ñ AI Ï∂îÏ≤ú Í≥ºÏ†ú</span>
            <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #a855f7, transparent);"></div>
          </div>
        `;
        list.appendChild(aiHeader);
      }

      // ÏùºÎ∞ò Í≥ºÏ†ú Ìó§Îçî Ï∂îÍ∞Ä (AI Í≥ºÏ†úÍ∞Ä ÏóÜÍ≥† ÏùºÎ∞ò Í≥ºÏ†úÎßå ÏûàÏùÑ Îïå)
      if (aiTasks.length === 0 && normalTasks.length > 0) {
        const normalHeader = document.createElement('li');
        normalHeader.className = 'study-room-divider';
        normalHeader.innerHTML = `
          <div style="display: flex; align-items: center; gap: 12px; padding: 16px 0;">
            <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #e5e7eb, transparent);"></div>
            <span style="color: #9ca3af; font-size: 13px; font-weight: 500; white-space: nowrap;">üìö ÏùºÎ∞ò Í≥ºÏ†ú</span>
            <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #e5e7eb, transparent);"></div>
          </div>
        `;
        list.appendChild(normalHeader);
      }

      // Î™®Îì† Í≥ºÏ†úÎ•º ÏàúÌöåÌïòÎ©∞ Î†åÎçîÎßÅ (Ï†úÌïú ÏóÜÏùå)
      tasks.forEach((task, i) => {
        // AI Í≥ºÏ†úÏôÄ ÏùºÎ∞ò Í≥ºÏ†ú ÏÇ¨Ïù¥Ïóê Íµ¨Î∂ÑÏÑ† Ï∂îÍ∞Ä (Îëò Îã§ ÏûàÏùÑ ÎïåÎßå)
        if (i === aiTasks.length && aiTasks.length > 0 && normalTasks.length > 0) {
          const divider = document.createElement('li');
          divider.className = 'study-room-divider';
          divider.innerHTML = `
            <div style="display: flex; align-items: center; gap: 12px; padding: 16px 0;">
              <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #e5e7eb, transparent);"></div>
              <span style="color: #9ca3af; font-size: 13px; font-weight: 500; white-space: nowrap;">üìö ÏùºÎ∞ò Í≥ºÏ†ú</span>
              <div style="flex: 1; height: 2px; background: linear-gradient(to right, transparent, #e5e7eb, transparent);"></div>
            </div>
          `;
          list.appendChild(divider);
        }
        const li = document.createElement('li');
        li.className = 'study-room-item';

        // AI Í≥ºÏ†úÎäî id, Í¥ÄÎ¶¨Ïûê Í≥ºÏ†úÎäî unitId ÏÇ¨Ïö©
        const rawUnitId = task.id || task.unitId;
        // Íµ¨ ÌòïÏãù IDÎ•º ÏÉà ÌòïÏãùÏúºÎ°ú Ï†ïÍ∑úÌôî (world_02 -> world1_02)
        const unitId = normalizeUnitId(rawUnitId);
        const isCompleted = isUnitCompleted(unitId);

        li.dataset.unitId = unitId;  // Ï†ïÍ∑úÌôîÎêú ID Ï†ÄÏû•
        li.dataset.taskIndex = i; // Í≥ºÏ†ú Ïù∏Îç±Ïä§ Ï†ÄÏû• (Î≥µÏäµ ÏôÑÎ£å Ï≤òÎ¶¨Ïö©)
        li.style.cursor = 'pointer';

        // unitIdÏóêÏÑú Îã®Ïõê ÏΩîÎìú Ï∂îÏ∂ú (./BRAINUP/social/geo_03.html -> geo_03)
        let unitCode = unitId;
        const match = unitId.match(/\/([^\/]+)\.html$/);
        if (match) {
          unitCode = match[1];
        }
        // unitCodeÎèÑ Ï†ïÍ∑úÌôî (world_02 -> world1_02)
        unitCode = normalizeUnitId(unitCode);

        // AI Í≥ºÏ†úÏôÄ ÏùºÎ∞ò Í≥ºÏ†úÏùò Î∞∞ÏßÄ Íµ¨Î∂Ñ
        let badgeClass = '';
        let badgeText = '';

        if (task.isAI) {
          // AI Ï∂îÏ≤ú Í≥ºÏ†ú - task.statusÎ°ú Î≥µÏäµ ÏôÑÎ£å Ïó¨Î∂Ä ÌôïÏù∏
          if (task.status === 'completed') {
            badgeClass = 'status-ai-done';
            badgeText = '‚úÖ Î≥µÏäµÏôÑÎ£å';
          } else {
            badgeClass = 'status-ai-pending';
            badgeText = 'üîÑ Î≥µÏäµÌïÑÏöî';
          }
        } else {
          // ÏùºÎ∞ò Í≥ºÏ†ú - LearningLogÎ°ú ÌïôÏäµ ÏôÑÎ£å Ïó¨Î∂Ä ÌôïÏù∏
          if (isCompleted) {
            badgeClass = 'status-done';
            badgeText = 'üèÜ ÌïôÏäµÏôÑÎ£å';
          } else {
            badgeClass = 'status-default';
            badgeText = '‚úèÔ∏è ÎØ∏ÏôÑÎ£å';
          }
        }

        // ÌïôÏäµÏù¥ ÏôÑÎ£åÎêú Í≥ºÏ†úÎäî Î≥ÑÏ†ê Ï∂îÍ∞Ä (unitCode ÏÇ¨Ïö©)
        // AI Ï∂îÏ≤ú Í≥ºÏ†ú: task.status === 'completed' (Î≥µÏäµÏôÑÎ£å)Ïùº ÎïåÎßå Î≥ÑÏ†ê ÌëúÏãú
        // ÏùºÎ∞ò Í≥ºÏ†ú: isCompleted (ÌïôÏäµÏôÑÎ£å)Ïùº Îïå Î≥ÑÏ†ê ÌëúÏãú
        const gradeInfo = unitGradesData[unitCode];
        const showStars = task.isAI ? (task.status === 'completed') : isCompleted;
        const stars = showStars && gradeInfo
          ? getStarsForGrade(gradeInfo.grade)
          : '';

        // ÎîîÎ≤ÑÍπÖ: Î≥ÑÏù¥ Ïïà ÎÇòÏò§Îäî Ïù¥Ïú† ÌôïÏù∏
        if ((task.status === 'completed' || isCompleted) && !stars) {
          console.log(`‚≠ê [ÎîîÎ≤ÑÍπÖ] Î≥ÑÏù¥ ÏóÜÎäî ÏôÑÎ£å Í≥ºÏ†ú:`, {
            title: task.title,
            unitId: unitId,
            unitCode: unitCode,
            isCompleted: isCompleted,
            taskStatus: task.status,
            hasGradeInfo: !!gradeInfo,
            gradeInfo: gradeInfo
          });
        }

        const assignedTimeText = formatAssignedTime(task.assignedAt);

        // AI Í≥ºÏ†úÏù∏ Í≤ΩÏö∞ unitIdÏóêÏÑú ÌïúÍ∏Ä Ï†ïÎ≥¥ Ï∂îÏ∂ú
        let displayTitle = task.title;
        let displayMeta = `${task.series} > ${task.field || task.domain} > ${task.subject}`;

        if (task.isAI) {
          const unitInfo = getUnitInfoFromId(unitId);
          if (unitInfo.subjectLabel && unitInfo.unitNo) {
            // unitInfoÏóêÏÑú ÏßÅÏ†ë Ï†úÎ™© ÏÉùÏÑ± (fit NaN Î¨∏Ï†ú Ìï¥Í≤∞)
            displayTitle = unitInfo.displayTitle;
            displayMeta = `${task.series || 'BRAINÌïè'} > ${unitInfo.fieldLabel} > ${unitInfo.subjectLabel}`;
          } else if (task.title && !task.title.includes('NaN')) {
            // DBÏóê Ï†ÄÏû•Îêú task.title Î≥ÄÌôò (people1 1 -> ÌïúÍµ≠Ïù∏Î¨º 1, people2 1 -> ÏÑ∏Í≥ÑÏù∏Î¨º 1)
            let convertedTitle = task.title;
            // people1 X -> ÌïúÍµ≠Ïù∏Î¨º X
            const people1Match = convertedTitle.match(/^people1\s+(\d+)$/);
            if (people1Match) {
              convertedTitle = `ÌïúÍµ≠Ïù∏Î¨º ${people1Match[1]}`;
            }
            // people2 X -> ÏÑ∏Í≥ÑÏù∏Î¨º X
            const people2Match = convertedTitle.match(/^people2\s+(\d+)$/);
            if (people2Match) {
              convertedTitle = `ÏÑ∏Í≥ÑÏù∏Î¨º ${people2Match[1]}`;
            }
            displayTitle = convertedTitle;
          }
        }

        li.innerHTML = `
          <div class="study-room-item-left">
            <div class="study-room-item-title">
              ${task.isAI ? 'ü§ñ ' : ''}${displayTitle}${task.isAI ? ' <span style="color: #667eea; font-size: 12px;">(AI Ï∂îÏ≤ú)</span>' : ''}
            </div>
            <div class="study-room-item-meta">${displayMeta}</div>
            ${assignedTimeText ? `<div class="study-room-item-assigned-time" style="font-size: 11px; color: #9ca3af; margin-top: 4px;">üìÖ Î∂ÄÏó¨ÏãúÍ∞Ñ: ${assignedTimeText}</div>` : ''}
          </div>
          <div class="study-room-item-right">
            ${stars ? `<span class="unit-stars">${stars}</span>` : ''}
            <span class="status-badge ${badgeClass}">${badgeText}</span>
            <button class="trash-btn" data-task-id="${task.id || task.unitId || task.taskId}" title="ÏÇ≠Ï†ú">üóëÔ∏è</button>
          </div>
        `;

        // Í≥ºÏ†ú ÌÅ¥Î¶≠ Ïãú ÌïôÏäµ ÌéòÏù¥ÏßÄ Ïó¥Í∏∞
        li.addEventListener('click', (e) => {
          // Ìú¥ÏßÄÌÜµ Î≤ÑÌäº ÌÅ¥Î¶≠ ÏãúÏóêÎäî Ïó¥Î¶¨ÏßÄ ÏïäÎèÑÎ°ù
          if (e.target.classList.contains('trash-btn') || e.target.closest('.trash-btn')) {
            return;
          }
          // ÌïôÏäµÏã§ Î™®Îã¨ Î®ºÏ†Ä Îã´Í∏∞
          closeStudyRoomModal();
          // ÏïΩÍ∞ÑÏùò ÎîúÎ†àÏù¥ ÌõÑ ÌïôÏäµ ÌéòÏù¥ÏßÄ Ïó¥Í∏∞
          setTimeout(() => {
            openUnitModal(unitId);
          }, 200);
        });

        list.appendChild(li);
      });

      // Ìú¥ÏßÄÌÜµ Î≤ÑÌäº Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
      list.querySelectorAll('.trash-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.stopPropagation();
          const taskId = btn.getAttribute('data-task-id');
          showAdminPasswordModal(taskId);
        });
      });
    }

    // Í≥ºÏ†ú Ï∂îÍ∞Ä
    async function addTaskToStudyRoom(taskData) {
      const tasks = await getStudyRoomTasks();

      // Ï§ëÎ≥µ Ï≤¥ÌÅ¨ (AI Í≥ºÏ†úÎäî id, Í¥ÄÎ¶¨Ïûê Í≥ºÏ†úÎäî unitId ÏÇ¨Ïö©)
      const isDuplicate = tasks.some(t =>
        (t.id && t.id === taskData.unitId) ||
        (t.unitId && t.unitId === taskData.unitId)
      );
      if (isDuplicate) {
        showMessage('‚ö†Ô∏è', 'Ï§ëÎ≥µÎêú Í≥ºÏ†úÏûÖÎãàÎã§', 'Ïù¥ÎØ∏ ÌïôÏäµÏã§Ïóê Ï∂îÍ∞ÄÎêú Í≥ºÏ†úÏûÖÎãàÎã§.');
        return false;
      }

      // Í≥ºÏ†ú Ï∂îÍ∞Ä
      tasks.push(taskData);
      await saveStudyRoomTasks(tasks);

      // ÌïôÏäµÏã§ Î™®Îã¨Ïù¥ Ïó¥Î†§ÏûàÏúºÎ©¥ Î™©Î°ù Í∞±Ïã†
      const modal = document.getElementById('studyRoomModal');
      if (modal && modal.classList.contains('show')) {
        renderStudyRoomList();
      }

      showMessage('‚úÖ', 'Í≥ºÏ†úÍ∞Ä Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§', `"${taskData.title}"Ïù¥(Í∞Ä) ÌïôÏäµÏã§Ïóê Ï∂îÍ∞ÄÎêòÏóàÏäµÎãàÎã§.`);
      return true;
    }

    // Í≥ºÏ†ú ÏÇ≠Ï†ú
    async function removeTaskFromStudyRoom(taskId) {
      const tasks = await getStudyRoomTasks();
      const taskIndex = tasks.findIndex(t =>
        (t.id && t.id === taskId) ||
        (t.unitId && t.unitId === taskId) ||
        (t.taskId && t.taskId === taskId)
      );

      if (taskIndex >= 0) {
        const removedTask = tasks.splice(taskIndex, 1)[0];
        await saveStudyRoomTasks(tasks);
        renderStudyRoomList();
        // ÌïúÍ∏Ä Ï†úÎ™©ÏúºÎ°ú Î≥ÄÌôò (physics_01 -> Î¨ºÎ¶¨ 01)
        const taskIdForDisplay = removedTask.id || removedTask.unitId || removedTask.taskId || removedTask.title;
        const unitInfo = getUnitInfoFromId(taskIdForDisplay);
        const displayName = unitInfo.displayTitle || removedTask.title;
        showMessage('‚úÖ', 'Í≥ºÏ†úÍ∞Ä ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§', `"${displayName}"Ïù¥(Í∞Ä) ÌïôÏäµÏã§ÏóêÏÑú ÏÇ≠Ï†úÎêòÏóàÏäµÎãàÎã§.`);
      }
    }

    // Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏ Î™®Îã¨ ÌëúÏãú
    let pendingDeleteTaskId = null;
    function showAdminPasswordModal(taskId) {
      pendingDeleteTaskId = taskId;
      const overlay = document.getElementById('adminPasswordOverlay');
      const input = document.getElementById('adminPasswordInput');
      if (overlay && input) {
        input.value = '';
        overlay.classList.add('show');
        setTimeout(() => input.focus(), 100);
      }
    }

    // Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏
    function verifyAdminPassword() {
      const input = document.getElementById('adminPasswordInput');
      const overlay = document.getElementById('adminPasswordOverlay');

      if (input && overlay) {
        const password = input.value.trim();
        if (password === ADMIN_PASSWORD) {
          overlay.classList.remove('show');
          input.value = '';
          // ÎπÑÎ∞ÄÎ≤àÌò∏ Ïù∏Ï¶ù ÏÑ±Í≥µ ÌõÑ ÏµúÏ¢Ö ÌôïÏù∏ ÌåùÏóÖ
          showDeleteConfirmModal();
        } else {
          showMessage('üö´', 'ÎπÑÎ∞ÄÎ≤àÌò∏ Ïò§Î•ò', 'Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏Í∞Ä Ïò¨Î∞îÎ•¥ÏßÄ ÏïäÏäµÎãàÎã§.');
          input.value = '';
          input.focus();
        }
      }
    }

    // ÏÇ≠Ï†ú ÏµúÏ¢Ö ÌôïÏù∏ Î™®Îã¨
    function showDeleteConfirmModal() {
      const overlay = document.getElementById('deleteConfirmOverlay');
      if (overlay) {
        overlay.classList.add('show');
      }
    }

    function confirmDeleteTask() {
      const overlay = document.getElementById('deleteConfirmOverlay');
      if (overlay) {
        overlay.classList.remove('show');
      }
      if (pendingDeleteTaskId !== null) {
        removeTaskFromStudyRoom(pendingDeleteTaskId);
        pendingDeleteTaskId = null;
      }
    }

    function cancelDeleteTask() {
      const overlay = document.getElementById('deleteConfirmOverlay');
      if (overlay) {
        overlay.classList.remove('show');
      }
      pendingDeleteTaskId = null;
    }

    // Î©îÏãúÏßÄ ÌëúÏãú (Ïò§Î•ò ÏïåÎ¶º ÌåùÏóÖ)
    function showMessage(emoji, title, msg) {
      const overlay = document.getElementById('errorMessageOverlay');
      const emojiEl = document.getElementById('errorEmoji');
      const titleEl = document.getElementById('errorTitle');
      const msgEl = document.getElementById('errorMsg');

      if (overlay && emojiEl && titleEl && msgEl) {
        emojiEl.textContent = emoji;
        titleEl.textContent = title;
        msgEl.textContent = msg;
        overlay.classList.add('show');
      }
    }

    function closeErrorMessage() {
      const overlay = document.getElementById('errorMessageOverlay');
      if (overlay) {
        overlay.classList.remove('show');
      }
    }

    // Îã®Ïõê ÏôÑÎ£å ÏÉÅÌÉú ÌôïÏù∏
    function isUnitCompleted(unitId) {
      // unitIdÍ∞Ä ÏóÜÏúºÎ©¥ false Î∞òÌôò
      if (!unitId) return false;

      // ÌïôÏÉù Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ (sessionStorage Ïö∞ÏÑ†, localStorage fallback)
      let stu = JSON.parse(sessionStorage.getItem('user') || '{}');
      if (!stu.grade || !stu.name) {
        stu = getCurrentStudent();
      }
      if (!stu || !stu.grade || !stu.name) return false;

      // unitIdÏóêÏÑú Îã®Ïõê ÏΩîÎìú Ï∂îÏ∂ú (./BRAINUP/social/geo_02.html -> geo_02)
      let unitCode = unitId;
      const match = unitId.match(/\/([^\/]+)\.html$/);
      if (match) {
        unitCode = match[1];
      }

      // ‚úÖ world2_XX, people2_XX ÌòïÏãù Í∑∏ÎåÄÎ°ú ÏÇ¨Ïö© (ÏÑúÎ≤Ñ APIÏôÄ ÎèôÏùºÌïòÍ≤å)
      // ÏÑúÎ≤ÑÏóêÏÑú world2_XX ÌòïÏãù Í∑∏ÎåÄÎ°ú Ï†ÄÏû•ÌïòÎØÄÎ°ú Î≥ÄÌôòÌïòÏßÄ ÏïäÏùå

      // ‚úÖ Îëê Í∞ÄÏßÄ ÌÇ§ ÌòïÏãù Î™®Îëê ÌôïÏù∏ (ÌïòÏúÑ Ìò∏Ìôò)
      // 1. buildStudentKey ÌòïÏãù (Ï†ÑÌôîÎ≤àÌò∏ Ìè¨Ìï®): 1ÌïôÎÖÑ_ÌôçÍ∏∏Îèô_11
      // 2. Í∏∞Ï°¥ ÌòïÏãù (Ï†ÑÌôîÎ≤àÌò∏ ÏóÜÏùå): 1ÌïôÎÖÑ_ÌôçÍ∏∏Îèô
      const stuKeyWithPhone = buildStudentKey(stu);
      const gradeNum = String(stu.grade).replace('ÌïôÎÖÑ', '');
      const stuKeyWithoutPhone = `${gradeNum}ÌïôÎÖÑ_${stu.name}`;

      // Îëê ÌÇ§ Î™®Îëê ÌôïÏù∏
      for (const stuKey of [stuKeyWithPhone, stuKeyWithoutPhone]) {
        const storageKey = `dan-progress:${stuKey}:${unitCode}`;
        try {
          const data = localStorage.getItem(storageKey);
          if (data) {
            // ‚úÖ Ïó¨Îü¨ ÌòïÏãù ÏßÄÏõê: Î∞∞Ïó¥, Î¨∏ÏûêÏó¥ '1', Í∏∞ÌÉÄ truthy Í∞í
            let saved;
            try {
              saved = JSON.parse(data);
            } catch(parseErr) {
              // JSON ÌååÏã± Ïã§Ìå® ‚Üí Îã®Ïàú Î¨∏ÏûêÏó¥Î°ú Ï≤òÎ¶¨
              saved = data;
            }

            // Î∞∞Ïó¥Ïù∏ Í≤ΩÏö∞
            if (Array.isArray(saved) && saved.length > 0) {
              console.log(`[isUnitCompleted] ‚úÖ ÏôÑÎ£å(Î∞∞Ïó¥)! unitCode=${unitCode}, stuKey=${stuKey}`);
              return true;
            }
            // Î¨∏ÏûêÏó¥ '1' ÎòêÎäî Îã§Î•∏ truthy Í∞íÏù∏ Í≤ΩÏö∞ (Í≥ºÌïô Î∂ÑÏïº Îì±)
            if (saved && saved !== 'false' && saved !== '0') {
              console.log(`[isUnitCompleted] ‚úÖ ÏôÑÎ£å(Îã®ÏàúÍ∞í)! unitCode=${unitCode}, stuKey=${stuKey}, value=${data}`);
              return true;
            }
          }
        } catch(e) {}
      }

      // ‚úÖ Fallback: localStorageÏóêÏÑú ÌïôÏÉù Ïù¥Î¶ÑÍ≥º unitCodeÍ∞Ä Î™®Îëê Ìè¨Ìï®Îêú ÌÇ§ Í≤ÄÏÉâ
      // (ÌÇ§ ÌòïÏãùÏù¥ Îã§Î•∏ Í≤ΩÏö∞ÏóêÎèÑ ÏôÑÎ£å ÏÉÅÌÉúÎ•º Ï∞æÏùÑ Ïàò ÏûàÎèÑÎ°ù)
      const studentName = stu.name;
      for (let i = 0; i < localStorage.length; i++) {
        const key = localStorage.key(i);
        if (key && key.startsWith('dan-progress:') && key.includes(studentName) && key.endsWith(`:${unitCode}`)) {
          try {
            const data = localStorage.getItem(key);
            if (data) {
              // ‚úÖ Ïó¨Îü¨ ÌòïÏãù ÏßÄÏõê
              let saved;
              try {
                saved = JSON.parse(data);
              } catch(parseErr) {
                saved = data;
              }

              // Î∞∞Ïó¥Ïù∏ Í≤ΩÏö∞
              if (Array.isArray(saved) && saved.length > 0) {
                console.log(`[isUnitCompleted] ‚úÖ Fallback ÏôÑÎ£å(Î∞∞Ïó¥)! unitCode=${unitCode}, key=${key}`);
                return true;
              }
              // Îã®ÏàúÍ∞íÏù∏ Í≤ΩÏö∞
              if (saved && saved !== 'false' && saved !== '0') {
                console.log(`[isUnitCompleted] ‚úÖ Fallback ÏôÑÎ£å(Îã®ÏàúÍ∞í)! unitCode=${unitCode}, key=${key}, value=${data}`);
                return true;
              }
            }
          } catch(e) {}
        }
      }

      console.log(`[isUnitCompleted] ‚ùå ÎØ∏ÏôÑÎ£å unitCode=${unitCode}`);
      return false;
    }

    // Í≥ºÏ†úÎ∂ÄÏó¨ Î™®Îã¨ ÌëúÏãú (Î™®Î∞îÏùºÏö©)
    let pendingTaskData = null;
    function showAssignTaskModal(taskDataStr) {
      try {
        pendingTaskData = JSON.parse(taskDataStr);
        const overlay = document.getElementById('assignTaskOverlay');
        const msgEl = document.getElementById('assignTaskMsg');

        if (overlay && msgEl) {
          msgEl.textContent = `"${pendingTaskData.title}"ÏùÑ(Î•º) ÌïôÏäµÏã§Ïóê Ï∂îÍ∞ÄÌïòÏãúÍ≤†ÏäµÎãàÍπå?`;
          overlay.classList.add('show');
        }
      } catch (err) {
        console.error('Í≥ºÏ†ú Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïò§Î•ò:', err);
      }
    }

    // Í≥ºÏ†úÎ∂ÄÏó¨ ÌôïÏù∏
    function confirmAssignTask() {
      if (pendingTaskData) {
        addTaskToStudyRoom(pendingTaskData);
        pendingTaskData = null;
      }
      const overlay = document.getElementById('assignTaskOverlay');
      if (overlay) {
        overlay.classList.remove('show');
      }
    }

    // ÌïôÏäµÏã§ Î™®Îã¨ Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà
    document.addEventListener('DOMContentLoaded', () => {
      // ‚úÖ ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú ÌïôÏäµÏã§ Î™®Îã¨ ÏÉÅÌÉú Î≥µÏõê
      restoreStudyRoomModal();

      // ÌïôÏäµÏã§ ÏïÑÏù¥ÏΩò ÌÅ¥Î¶≠
      const studyRoomIcon = document.getElementById('studyRoomIcon');
      if (studyRoomIcon) {
        studyRoomIcon.addEventListener('click', openStudyRoomModal);

        // ÌïôÏäµÏã§ ÏïÑÏù¥ÏΩòÏóê ÎìúÎûòÍ∑∏ Ïï§ ÎìúÎ°≠ Í∏∞Îä• Ï∂îÍ∞Ä
        studyRoomIcon.addEventListener('dragover', (e) => {
          e.preventDefault();
          e.dataTransfer.dropEffect = 'copy';
          studyRoomIcon.style.transform = 'scale(1.15)';
          studyRoomIcon.style.filter = 'drop-shadow(0 8px 24px rgba(255, 107, 107, 0.6))';
        });

        studyRoomIcon.addEventListener('dragleave', (e) => {
          studyRoomIcon.style.transform = '';
          studyRoomIcon.style.filter = '';
        });

        studyRoomIcon.addEventListener('drop', (e) => {
          e.preventDefault();
          studyRoomIcon.style.transform = '';
          studyRoomIcon.style.filter = '';

          const taskDataStr = e.dataTransfer.getData('text/plain');
          if (taskDataStr) {
            try {
              const taskData = JSON.parse(taskDataStr);
              addTaskToStudyRoom(taskData);
            } catch (err) {
              console.error('Í≥ºÏ†ú Îç∞Ïù¥ÌÑ∞ ÌååÏã± Ïò§Î•ò:', err);
            }
          }
        });
      }

      // ÌïôÏäµÏã§ Î™®Îã¨ Îã´Í∏∞ Î≤ÑÌäº
      const closeBtn = document.getElementById('closeStudyRoomModal');
      if (closeBtn) {
        closeBtn.addEventListener('click', closeStudyRoomModal);
      }

      // Î™®Îã¨ Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞ - ÎπÑÌôúÏÑ±Ìôî (Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Îã´ÌûàÏßÄ ÏïäÎèÑÎ°ù)
      // const modal = document.getElementById('studyRoomModal');
      // if (modal) {
      //   modal.addEventListener('click', (e) => {
      //     if (e.target === modal) {
      //       closeStudyRoomModal();
      //     }
      //   });
      // }

      // Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏ Î™®Îã¨ Î≤ÑÌäº
      const cancelPasswordBtn = document.getElementById('cancelPasswordBtn');
      const confirmPasswordBtn = document.getElementById('confirmPasswordBtn');

      if (cancelPasswordBtn) {
        cancelPasswordBtn.addEventListener('click', () => {
          document.getElementById('adminPasswordOverlay').classList.remove('show');
          pendingDeleteIndex = null;
        });
      }

      if (confirmPasswordBtn) {
        confirmPasswordBtn.addEventListener('click', verifyAdminPassword);
      }

      // Enter ÌÇ§Î°ú ÎπÑÎ∞ÄÎ≤àÌò∏ ÌôïÏù∏
      const passwordInput = document.getElementById('adminPasswordInput');
      if (passwordInput) {
        passwordInput.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            verifyAdminPassword();
          }
        });
      }

      // Í≥ºÏ†úÎ∂ÄÏó¨ Î™®Îã¨ Î≤ÑÌäº
      const cancelAssignBtn = document.getElementById('cancelAssignBtn');
      const confirmAssignBtn = document.getElementById('confirmAssignBtn');

      if (cancelAssignBtn) {
        cancelAssignBtn.addEventListener('click', () => {
          document.getElementById('assignTaskOverlay').classList.remove('show');
          pendingTaskData = null;
        });
      }

      if (confirmAssignBtn) {
        confirmAssignBtn.addEventListener('click', confirmAssignTask);
      }

      // ÏÇ≠Ï†ú ÏµúÏ¢Ö ÌôïÏù∏ Î™®Îã¨ Î≤ÑÌäº
      const cancelDeleteBtn = document.getElementById('cancelDeleteBtn');
      const confirmDeleteBtn = document.getElementById('confirmDeleteBtn');

      if (cancelDeleteBtn) {
        cancelDeleteBtn.addEventListener('click', cancelDeleteTask);
      }

      if (confirmDeleteBtn) {
        confirmDeleteBtn.addEventListener('click', confirmDeleteTask);
      }

      // Ï§ÄÎπÑ Ï§ë ÌåùÏóÖ Îã´Í∏∞ Î≤ÑÌäº
      const closeComingSoonBtn = document.getElementById('closeComingSoonBtn');
      if (closeComingSoonBtn) {
        closeComingSoonBtn.addEventListener('click', closeComingSoonPopup);
      }

      // Ï§ÄÎπÑ Ï§ë ÌåùÏóÖ Î∞∞Í≤Ω ÌÅ¥Î¶≠ÏúºÎ°ú Îã´Í∏∞ - ÎπÑÌôúÏÑ±Ìôî (Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Îã´ÌûàÏßÄ ÏïäÎèÑÎ°ù)
      // const comingSoonOverlay = document.getElementById('comingSoonOverlay');
      // if (comingSoonOverlay) {
      //   comingSoonOverlay.addEventListener('click', (e) => {
      //     if (e.target === comingSoonOverlay) {
      //       closeComingSoonPopup();
      //     }
      //   });
      // }

      // Ïò§Î•ò Î©îÏãúÏßÄ Î™®Îã¨ Îã´Í∏∞ Î≤ÑÌäº
      const closeErrorBtn = document.getElementById('closeErrorBtn');
      if (closeErrorBtn) {
        closeErrorBtn.addEventListener('click', closeErrorMessage);
      }

      // Ïò§Î•ò Î©îÏãúÏßÄ Î∞∞Í≤Ω ÌÅ¥Î¶≠ÏúºÎ°ú Îã´Í∏∞ - ÎπÑÌôúÏÑ±Ìôî (Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Îã´ÌûàÏßÄ ÏïäÎèÑÎ°ù)
      // const errorOverlay = document.getElementById('errorMessageOverlay');
      // if (errorOverlay) {
      //   errorOverlay.addEventListener('click', (e) => {
      //     if (e.target === errorOverlay) {
      //       closeErrorMessage();
      //     }
      //   });
      // }

      // Ï¥àÍ∏∞ Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏
      updateStudyRoomBadge();

      // ‚úÖ ÏÑ∏ÏÖòÏù¥ Ïù¥ÎØ∏ Ï§ÄÎπÑÎêêÏúºÎ©¥ Î∞îÎ°ú ÏóÖÎç∞Ïù¥Ìä∏, ÏïÑÎãàÎ©¥ Ïù¥Î≤§Ìä∏ ÎåÄÍ∏∞
      if (window.sessionReady) {
        console.log('üîÑ ÏÑ∏ÏÖò Ïù¥ÎØ∏ Ï§ÄÎπÑÎê® - Ïñ¥ÌúòÏßÄÏàò Î±ÉÏßÄ ÏóÖÎç∞Ïù¥Ìä∏');
        updateVocabAvgBadge();
      } else {
        updateVocabAvgBadge(); // ÏùºÎã® ÏãúÎèÑ
        window.addEventListener('sessionReady', () => {
          console.log('üîÑ ÏÑ∏ÏÖò Ï§ÄÎπÑ ÏôÑÎ£å - Ïñ¥ÌúòÏßÄÏàò Î±ÉÏßÄ Ïû¨ÏóÖÎç∞Ïù¥Ìä∏');
          updateVocabAvgBadge();
        });
      }

      // storage Ïù¥Î≤§Ìä∏Î°ú Ïã§ÏãúÍ∞Ñ ÎèôÍ∏∞Ìôî
      window.addEventListener('storage', (e) => {
        if (e.key && e.key.startsWith('studyRoom_')) {
          updateStudyRoomBadge();
          const modal = document.getElementById('studyRoomModal');
          if (modal && modal.classList.contains('show')) {
            renderStudyRoomList();
          }
        }
        // ÌïôÏäµ ÏôÑÎ£å ÏÉÅÌÉú Î≥ÄÍ≤Ω ÏãúÏóêÎèÑ ÌïôÏäµÏã§ Î™©Î°ù ÏóÖÎç∞Ïù¥Ìä∏
        if (e.key && (e.key.startsWith('completed_') || e.key.startsWith('dan-progress:'))) {
          const modal = document.getElementById('studyRoomModal');
          if (modal && modal.classList.contains('show')) {
            renderStudyRoomList();
          }
        }
      });
    });

    // Ìë∏Î•∏ Í≥†ÎûòÏÑ¨ Ïù¥ÏïºÍ∏∞ ÌåùÏóÖ Ïó¥Í∏∞
    function goToWhaleStory() {
      const modal = document.getElementById('whaleStoryModal');
      modal.classList.add('show');
      // Reset carousel to first slide
      currentSlide = 0;
      updateCarousel();
    }

    // ÏãúÏ¶å ÏÑ†ÌÉù ÌåùÏóÖ Îã´Í∏∞ Ìï®Ïàò
    function closeWhaleStoryModal() {
      const modal = document.getElementById('whaleStoryModal');
      console.log('ÏãúÏ¶å ÏÑ†ÌÉù ÌåùÏóÖ Îã´Í∏∞');
      modal.classList.remove('show');
    }

    // ÏãúÏ¶å ÏÑ†ÌÉù - ÌåùÏóÖÏúºÎ°ú Ïó¥Í∏∞
    // Carousel state
    let currentSlide = 0;
    const totalSlides = 11;

    function updateCarousel() {
      const carousel = document.getElementById('storyCarousel');
      const prevBtn = document.getElementById('carouselPrev');
      const nextBtn = document.getElementById('carouselNext');

      carousel.style.transform = `translateX(-${currentSlide * 100}%)`;

      // Update button states
      prevBtn.disabled = currentSlide === 0;
      nextBtn.disabled = currentSlide === totalSlides - 1;
    }

    function moveCarousel(direction) {
      currentSlide += direction;
      if (currentSlide < 0) currentSlide = 0;
      if (currentSlide >= totalSlides) currentSlide = totalSlides - 1;
      updateCarousel();
    }

    function goToSeason(storyType, season) {
      const urls = {
        whale: {
          1: '/whale_island_journey.html',
          2: '/whale_island_season2_quiz.html',
          3: '/whale_island_season3_quiz.html'
        },
        jungle: {
          1: '/jungle_journey_season1.html',
          2: '/jungle_season2_quiz.html',
          3: '/jungle_season3_quiz.html'
        },
        library: {
          1: '/library/library_season1.html',
          2: '/library_season2_quiz.html',
          3: '/library_season3_quiz.html'
        },
        timeLibrary: {
          1: '/time-library/time_library_season1.html',
          2: '/time_library_season2_quiz.html',
          3: '/time_library_season3_quiz.html'
        },
        catIsland: {
          1: '/cat-island/cat_island_season1.html',
          2: '/cat-island/cat_island_season2.html',
          3: '/cat-island/cat_island_season3.html'
        },
        catTransform: {
          1: '/cat-transform/cat_transform_season1.html',
          2: '/cat-transform/cat_transform_season2_quiz.html',
          3: '/cat-transform/cat_transform_season3_quiz.html'
        },
        sonagi: {
          1: '/rain/sonagi_season1.html'
        },
        goodday: {
          1: '/good/goodday_season1.html'
        },
        dongbaek: {
          1: '/flower/dongbaek_season1.html'
        },
        samdae: {
          1: '/three/samdae_season1.html'
        },
        chunhyang: {
          1: '/girl/chunhyang_season1.html'
        }
      };

      if (urls[storyType] && urls[storyType][season]) {
        // ÏãúÏ¶å ÏÑ†ÌÉù Î™®Îã¨ Îã´Í∏∞
        document.getElementById('whaleStoryModal').classList.remove('show');

        // Ïä§ÌÜ†Î¶¨ ÏΩòÌÖêÏ∏† Î™®Îã¨ Ïó¥Í∏∞
        const storyModal = document.getElementById('storyContentModal');
        const storyIframe = document.getElementById('storyContentIframe');

        storyIframe.src = urls[storyType][season];
        storyModal.classList.add('show');
      }
    }

    // Ïä§ÌÜ†Î¶¨ ÏΩòÌÖêÏ∏† Î™®Îã¨ Îã´Í∏∞ Ìï®Ïàò
    function closeStoryModal() {
      const storyModal = document.getElementById('storyContentModal');
      const storyIframe = document.getElementById('storyContentIframe');

      console.log('Îã´Í∏∞ Î≤ÑÌäº ÌÅ¥Î¶≠Îê®');
      storyModal.classList.remove('show');

      // iframe Ï†ïÎ¶¨
      setTimeout(() => {
        storyIframe.src = '';
      }, 300);

      // Í≥†Îûò Ïù¥ÏïºÍ∏∞ Ïä¨ÎùºÏù¥Îìú(ÏãúÏ¶å ÏÑ†ÌÉù ÌôîÎ©¥)Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞
      const whaleStoryModal = document.getElementById('whaleStoryModal');
      if (whaleStoryModal) {
        whaleStoryModal.classList.add('show');
      }
    }

    // DOMContentLoaded ÌõÑ Ïù¥Î≤§Ìä∏ Îì±Î°ù
    document.addEventListener('DOMContentLoaded', function() {
      // ÏãúÏ¶å ÏÑ†ÌÉù ÌåùÏóÖ Îã´Í∏∞ Î≤ÑÌäº
      const closeWhaleBtn = document.getElementById('closeWhaleStoryModal');
      if (closeWhaleBtn) {
        closeWhaleBtn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          console.log('ÏãúÏ¶å ÏÑ†ÌÉù X Î≤ÑÌäº ÌÅ¥Î¶≠');
          closeWhaleStoryModal();
        });
      }

      // ÏãúÏ¶å ÏÑ†ÌÉù ÌåùÏóÖ Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
      const whaleModal = document.getElementById('whaleStoryModal');
      if (whaleModal) {
        whaleModal.addEventListener('click', function(e) {
          if (e.target === this) {
            closeWhaleStoryModal();
          }
        });
      }

      // Ïä§ÌÜ†Î¶¨ ÏΩòÌÖêÏ∏† Î™®Îã¨ Îã´Í∏∞ Î≤ÑÌäº
      const closeBtn = document.getElementById('closeStoryContentModal');
      if (closeBtn) {
        closeBtn.addEventListener('click', function(e) {
          e.preventDefault();
          e.stopPropagation();
          console.log('Ïä§ÌÜ†Î¶¨ X Î≤ÑÌäº ÌÅ¥Î¶≠');
          closeStoryModal();
        });
      }

      // Ïä§ÌÜ†Î¶¨ Î™®Îã¨ Î∞∞Í≤Ω ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
      const storyModal = document.getElementById('storyContentModal');
      if (storyModal) {
        storyModal.addEventListener('click', function(e) {
          if (e.target === this) {
            closeStoryModal();
          }
        });
      }

      // ESC ÌÇ§Î°ú Î™®Îã¨ Îã´Í∏∞
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
          const storyModal = document.getElementById('storyContentModal');
          const whaleModal = document.getElementById('whaleStoryModal');
          const readingModal = document.getElementById('readingReportModal');

          if (storyModal && storyModal.classList.contains('show')) {
            closeStoryModal();
          } else if (whaleModal && whaleModal.classList.contains('show')) {
            closeWhaleStoryModal();
          } else if (readingModal && readingModal.classList.contains('show')) {
            closeReadingReportModal();
          }
        }
      });
    });

    // ========== ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Í∏∞Îä• ==========
    let currentEditingReport = null; // ÌòÑÏû¨ Ìé∏Ïßë Ï§ëÏù∏ Î¶¨Ìè¨Ìä∏ ID
    let autoSaveTimer = null;
    let historyDisplayLimit = 5; // Ï¥àÍ∏∞ ÌëúÏãú Í∞úÏàò

    // Ïä§ÌÜ†Î¶¨ Îç∞Ïù¥ÌÑ∞ Ï†ïÏùò (Ï§ëÏïô Í¥ÄÎ¶¨)
    const STORY_DATA = {
      whale: {
        title: 'üêã Ìë∏Î•∏ Í≥†ÎûòÏÑ¨Ïùò ÎπÑÎ∞Ä Î™®ÌóòÎã®',
        seasons: [
          { id: 'whale_island', season: 1, subtitle: 'Ìë∏Î•∏ Í≥†ÎûòÏÑ¨ ÌÉêÌóò' },
          { id: 'whale_island_season2', season: 2, subtitle: 'ÌååÎèÑ Í≥®ÏßúÍ∏∞Ïùò ÎπÑÎ∞Ä' },
          { id: 'whale_island_season3', season: 3, subtitle: 'ÎπõÏùò Í∏∞Ïñµ' }
        ]
      },
      jungle: {
        title: 'üåø ÍπäÏùÄ Ï†ïÍ∏ÄÏùò ÏûäÌûå ÎèÑÏãú',
        seasons: [
          { id: 'jungle_journey', season: 1, subtitle: 'ÏûäÌûå ÎèÑÏãú Î∞úÍ≤¨' },
          { id: 'jungle_journey_season2', season: 2, subtitle: 'ÎèÑÏãúÏùò Í∑†Ìòï ÌöåÎ≥µ' },
          { id: 'jungle_journey_season3', season: 3, subtitle: 'ÏïîÎÖπÎ¶ºÏùò ÏàòÌò∏Ïûê' }
        ]
      },
      library: {
        title: 'üìö ÏÇ¥ÏïÑ ÏûàÎäî Ïã†ÎπÑÏùò ÎèÑÏÑúÍ¥Ä',
        seasons: [
          { id: 'library_season1', season: 1, subtitle: 'ÏßÄÌòúÏôÄ Ïö©Í∏∞Î°ú Í∞ÄÎìùÌïú ÎèÑÏÑúÍ¥Ä Ïó¨Ï†ïÏùò ÏãúÏûë' },
          { id: 'library_season2', season: 2, subtitle: 'ÎπõÍ≥º Ïñ¥Îë†Ïùò Í∑†ÌòïÏùÑ Ï∞æÎäî Î™®Ìóò' },
          { id: 'library_season3', season: 3, subtitle: 'ÌååÍ¥¥ÏôÄ ÎßàÎ≤ïÏùÑ ÎÑòÎÇòÎìúÎäî ÎåÄ Î™®Ìóò' }
        ]
      },
      timeLibrary: {
        title: '‚è∞ ÏãúÍ∞ÑÎèÑÏÑúÍ¥Ä',
        seasons: [
          { id: 'time_library_season1', season: 1, subtitle: 'Í≥ºÍ±∞Ïùò Î¨∏ÏùÑ Ïó¥Îã§ - ÏûäÌûå ÏãúÎåÄÏùò ÏàòÌò∏ÏûêÎì§' },
          { id: 'time_library_season2', season: 2, subtitle: 'ÌòÑÏû¨Ïùò Í∑†Ïó¥ - ÏãúÍ∞ÑÏù¥ Îí§ÌãÄÎ¶∞ ÎèÑÏÑúÍ¥Ä' },
          { id: 'time_library_season3', season: 3, subtitle: 'ÎØ∏ÎûòÏùò Ïã¨Ïû• - ÏãúÍ∞ÑÏùÑ ÏßÄÌÇ§Îäî ÎßàÏßÄÎßâ ÏïÑÏù¥Îì§' }
        ]
      },
      catIsland: {
        title: 'üê± ÎØ∏ÏßÄÏùò Í≥†ÏñëÏù¥ ÏÑ¨ ÌëúÎ•òÍ∏∞',
        seasons: [
          { id: 'cat_island_season1', season: 1, subtitle: 'Î∞îÎûåÏù¥ Îç∞Î†§Ïò® ÏÑ¨' },
          { id: 'cat_island_season2', season: 2, subtitle: 'Î∞îÎûåÍ≥†ÏñëÏù¥Îì§Ïùò Ïà®Í≤®ÏßÑ ÎÇ†Í∞ú' },
          { id: 'cat_island_season3', season: 3, subtitle: 'ÎßàÏùåÏùò ÏôïÍµ≠Í≥º Í∞êÏ†ïÏùò Î∂àÍΩÉ' }
        ]
      },
      catTransform: {
        title: 'üêà Í≥†ÏñëÏù¥Í∞Ä ÎêòÏñ¥Î≤ÑÎ¶∞ ÎÇ†',
        seasons: [
          { id: 'cat_transform_season1', season: 1, subtitle: 'Í≥†ÏñëÏù¥Ïùò ÎààÏúºÎ°ú Î≥∏ Ï≤´ ÏÑ∏Í≥Ñ' },
          { id: 'cat_transform_season2', season: 2, subtitle: 'Î™©Í±∏Ïù¥Ïùò ÎπÑÎ∞ÄÍ≥º Í∑∏Î¶ºÏûê ÏôïÍµ≠' },
          { id: 'cat_transform_season3', season: 3, subtitle: 'Í∑∏Î¶ºÏûêÏôïÍµ≠Ïùò Ïã¨Ïû•' }
        ]
      },
      sonagi: {
        title: 'üåßÔ∏è ÏÜåÎÇòÍ∏∞',
        seasons: [
          { id: 'sonagi_season1', season: 1, subtitle: 'Ìô©ÏàúÏõê ÏõêÏûë - ÏÜåÎÖÑÍ≥º ÏÜåÎÖÄÏùò ÏßßÏùÄ ÎßåÎÇ®' }
        ]
      },
      goodday: {
        title: '‚òî Ïö¥Ïàò Ï¢ãÏùÄ ÎÇ†',
        seasons: [
          { id: 'goodday_season1', season: 1, subtitle: 'ÌòÑÏßÑÍ±¥ ÏõêÏûë - ÎπÑÍ∑πÏ†Å ÏïÑÏù¥Îü¨Îãà' }
        ]
      },
      dongbaek: {
        title: 'üå∏ ÎèôÎ∞±ÍΩÉ',
        seasons: [
          { id: 'dongbaek_season1', season: 1, subtitle: 'ÍπÄÏú†Ï†ï ÏõêÏûë - ÏàúÏàòÌïú ÏãúÍ≥® Ï≤´ÏÇ¨Îûë' }
        ]
      },
      samdae: {
        title: 'üèõÔ∏è ÏÇºÎåÄ',
        seasons: [
          { id: 'samdae_season1', season: 1, subtitle: 'ÏóºÏÉÅÏÑ≠ ÏõêÏûë - ÏÑ∏ ÏÑ∏ÎåÄÏùò Í∞àÎì±' }
        ]
      },
      chunhyang: {
        title: 'üå∏ Ï∂òÌñ•Ï†Ñ',
        seasons: [
          { id: 'chunhyang_season1', season: 1, subtitle: 'Ïã†Î∂ÑÏùÑ Ï¥àÏõîÌïú ÏÇ¨Îûë Ïù¥ÏïºÍ∏∞' }
        ]
      }
    };

    // Ïä§ÌÜ†Î¶¨ ÎìúÎ°≠Îã§Ïö¥ Ï¥àÍ∏∞Ìôî
    function initStoryDropdown() {
      const storySelect = document.getElementById('reportStory');
      if (!storySelect) return;

      // Í∏∞Ï°¥ ÏòµÏÖò Ï†úÍ±∞ (Ï≤´ Î≤àÏß∏ placeholder Ï†úÏô∏)
      while (storySelect.options.length > 1) {
        storySelect.remove(1);
      }

      // Ïä§ÌÜ†Î¶¨ Îç∞Ïù¥ÌÑ∞Î°úÎ∂ÄÌÑ∞ ÏòµÏÖò ÏÉùÏÑ±
      Object.values(STORY_DATA).forEach(story => {
        story.seasons.forEach(season => {
          const option = document.createElement('option');
          option.value = season.id;
          option.textContent = `${story.title} ÏãúÏ¶å ${season.season}: ${season.subtitle}`;
          option.setAttribute('data-title', `${story.title} ÏãúÏ¶å ${season.season}: ${season.subtitle}`);
          storySelect.appendChild(option);
        });
      });
    }

    // ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Î™®Îã¨ Ïó¥Í∏∞
    async function openReadingReportModal() {
      const modal = document.getElementById('readingReportModal');
      modal.classList.add('show');

      // Ïä§ÌÜ†Î¶¨ ÎìúÎ°≠Îã§Ïö¥ Ï¥àÍ∏∞Ìôî
      initStoryDropdown();

      // ÏÇ¨Ïö©Ïûê Ï†ïÎ≥¥Î°ú ÌïôÎÖÑ/Ïù¥Î¶Ñ ÏûêÎèô ÏûÖÎ†•
      const userStr = sessionStorage.getItem('user');
      if (userStr) {
        const user = JSON.parse(userStr);
        document.getElementById('reportGrade').value = user.grade || '';
        document.getElementById('reportName').value = user.name || '';
      }

      // localStorageÏóêÏÑú ÏûÑÏãú Ï†ÄÏû•Îêú ÎÇ¥Ïö© Î∂àÎü¨Ïò§Í∏∞
      loadDraft();

      // ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú
      await loadReadingHistory();

      // ÏûêÎèô Ï†ÄÏû• ÏãúÏûë
      startAutoSave();
    }

    // ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Î™®Îã¨ Îã´Í∏∞
    function closeReadingReportModal() {
      const modal = document.getElementById('readingReportModal');
      modal.classList.remove('show');

      // ÏûêÎèô Ï†ÄÏû• Ï§ëÏßÄ
      stopAutoSave();
    }

    // ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Î™®Îã¨ Ïó¥Í∏∞ (Ïù¥ÏïºÍ∏∞Î≥Ñ Î∞îÎ°úÍ∞ÄÍ∏∞ Î≤ÑÌäºÏö©)
    async function openBookReportModal(storyType) {
      // Í∏∞Ï°¥ openReadingReportModal Ìò∏Ï∂ú
      await openReadingReportModal();

      // Ïä§ÌÜ†Î¶¨ ÎìúÎ°≠Îã§Ïö¥ÏóêÏÑú Ìï¥Îãπ Ïù¥ÏïºÍ∏∞ ÏÑ†ÌÉù
      const storyDropdown = document.getElementById('reportStory');
      if (storyDropdown && storyType) {
        // Ïä§ÌÜ†Î¶¨ ÌÉÄÏûÖÏóê Îî∞Î•∏ value Îß§Ïπ≠
        const storyMap = {
          'whale': 'whale_season1',
          'jungle': 'jungle_season1',
          'library': 'library_season1',
          'timeLibrary': 'time_library_season1',
          'catIsland': 'cat_island_season1',
          'catTransform': 'cat_transform_season1'
        };

        const selectedValue = storyMap[storyType];
        if (selectedValue) {
          // ÏïΩÍ∞ÑÏùò ÎîúÎ†àÏù¥ ÌõÑ ÏÑ†ÌÉù (ÎìúÎ°≠Îã§Ïö¥ Ï¥àÍ∏∞Ìôî ÏôÑÎ£å ÎåÄÍ∏∞)
          setTimeout(() => {
            storyDropdown.value = selectedValue;
          }, 100);
        }
      }
    }

    // Ïù¥Î≤à Îã¨ Ï†úÏ∂ú Í∞úÏàò ÌôïÏù∏
    async function getMonthlyReportCount() {
      try {
        const userStr = sessionStorage.getItem('user');
        if (!userStr) return 0;

        const user = JSON.parse(userStr);
        const response = await fetch(
          `/api/user-progress/reading-reports/monthly-count?grade=${encodeURIComponent(user.grade)}&name=${encodeURIComponent(user.name)}`
        );

        const result = await response.json();
        return result.ok ? result.count : 0;
      } catch (error) {
        console.error('ÏõîÍ∞Ñ Ï†úÏ∂ú Í∞úÏàò ÌôïÏù∏ Ïò§Î•ò:', error);
        return 0;
      }
    }

    // ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú
    async function loadReadingHistory(showAll = false) {
      try {
        const userStr = sessionStorage.getItem('user');
        if (!userStr) return;

        const user = JSON.parse(userStr);
        const response = await fetch(
          `/api/user-progress/reading-reports/history?grade=${encodeURIComponent(user.grade)}&name=${encodeURIComponent(user.name)}`
        );

        const result = await response.json();
        if (!result.ok) return;

        const historyList = document.getElementById('readingHistoryList');
        historyList.innerHTML = '';

        const reports = result.reports || [];
        const limit = showAll ? reports.length : historyDisplayLimit;
        const displayReports = reports.slice(0, limit);

        // Î¶¨Ìè¨Ìä∏ Ìï≠Î™© Î†åÎçîÎßÅ
        displayReports.forEach(report => {
          const item = document.createElement('div');
          item.className = 'history-item';

          const date = new Date(report.submittedAt);
          const dateStr = `${date.getFullYear()}.${String(date.getMonth() + 1).padStart(2, '0')}.${String(date.getDate()).padStart(2, '0')}`;
          const monthStr = `${date.getFullYear()}ÎÖÑ ${date.getMonth() + 1}Ïõî`;

          // Ïä§ÌÜ†Î¶¨ Ï†ïÎ≥¥ Í∞ÄÏ†∏Ïò§Í∏∞ (Í∏∞Î≥∏Í∞í: ÏãúÏ¶å1)
          const storyId = report.storyId || 'whale_island';
          const storyInfo = report.storyTitle || 'Ìë∏Î•∏ Í≥†ÎûòÏÑ¨Ïùò ÎπÑÎ∞Ä Î™®ÌóòÎã® ÏãúÏ¶å 1: Ìë∏Î•∏ Í≥†ÎûòÏÑ¨ ÌÉêÌóò';

          console.log('üìö Report:', report.title, '| storyId:', storyId, '| storyTitle:', storyInfo);

          item.innerHTML = `
            <div class="history-item-title">${report.title}</div>
            <div class="history-item-date">${dateStr}</div>
            <div class="history-item-month">${monthStr}</div>
            <div class="history-item-story">${storyInfo}</div>
          `;

          // ÌÅ¥Î¶≠ Ïãú Ìï¥Îãπ Î¶¨Ìè¨Ìä∏ Î°úÎìú
          item.addEventListener('click', () => loadReport(report));

          historyList.appendChild(item);
        });

        // "ÎçîÎ≥¥Í∏∞" Î≤ÑÌäº Ï∂îÍ∞Ä
        if (!showAll && reports.length > historyDisplayLimit) {
          const loadMoreBtn = document.createElement('button');
          loadMoreBtn.className = 'history-load-more';
          loadMoreBtn.textContent = `ÎçîÎ≥¥Í∏∞ (${reports.length - historyDisplayLimit}Í∞ú Îçî)`;
          loadMoreBtn.onclick = () => loadReadingHistory(true);
          historyList.appendChild(loadMoreBtn);
        }
      } catch (error) {
        console.error('ÌûàÏä§ÌÜ†Î¶¨ Î°úÎìú Ïò§Î•ò:', error);
      }
    }

    // Î¶¨Ìè¨Ìä∏ Î°úÎìú (Ìé∏Ïßë/Ïû¨Í≥µÏú†Ïö©)
    function loadReport(report) {
      document.getElementById('reportStory').value = report.storyId || 'whale_island';
      document.getElementById('reportTitle').value = report.title;
      document.getElementById('reportContent').value = report.content;
      currentEditingReport = report._id;
    }

    // localStorage ÏûÑÏãú Ï†ÄÏû•
    function saveDraft() {
      const userStr = sessionStorage.getItem('user');
      if (!userStr) return;

      const user = JSON.parse(userStr);
      const draft = {
        title: document.getElementById('reportTitle').value,
        content: document.getElementById('reportContent').value,
        timestamp: new Date().toISOString()
      };

      const key = `readingReportDraft_${user.grade}_${user.name}`;
      localStorage.setItem(key, JSON.stringify(draft));

      // ÏûêÎèô Ï†ÄÏû• ÌëúÏãú
      const indicator = document.getElementById('autoSaveIndicator');
      indicator.textContent = '‚úì ÏûêÎèô Ï†ÄÏû•Îê®';
      setTimeout(() => {
        indicator.textContent = '';
      }, 2000);
    }

    // localStorageÏóêÏÑú ÏûÑÏãú Ï†ÄÏû• Î∂àÎü¨Ïò§Í∏∞
    function loadDraft() {
      const userStr = sessionStorage.getItem('user');
      if (!userStr) return;

      const user = JSON.parse(userStr);
      const key = `readingReportDraft_${user.grade}_${user.name}`;
      const draftStr = localStorage.getItem(key);

      if (draftStr) {
        const draft = JSON.parse(draftStr);
        document.getElementById('reportTitle').value = draft.title || '';
        document.getElementById('reportContent').value = draft.content || '';
      }
    }

    // ÏûêÎèô Ï†ÄÏû• ÏãúÏûë
    function startAutoSave() {
      const titleInput = document.getElementById('reportTitle');
      const contentInput = document.getElementById('reportContent');

      titleInput.addEventListener('input', saveDraft);
      contentInput.addEventListener('input', saveDraft);
    }

    // ÏûêÎèô Ï†ÄÏû• Ï§ëÏßÄ
    function stopAutoSave() {
      const titleInput = document.getElementById('reportTitle');
      const contentInput = document.getElementById('reportContent');

      titleInput.removeEventListener('input', saveDraft);
      contentInput.removeEventListener('input', saveDraft);
    }

    // Ìèº Ï¥àÍ∏∞Ìôî
    function clearForm() {
      if (!confirm('ÏûëÏÑ± Ï§ëÏù∏ ÎÇ¥Ïö©ÏùÑ ÏßÄÏö∞Í≥† ÏÉàÎ°ú ÏûëÏÑ±ÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
        return;
      }

      document.getElementById('reportStory').value = '';
      document.getElementById('reportTitle').value = '';
      document.getElementById('reportContent').value = '';
      currentEditingReport = null;

      // localStorage ÏûÑÏãú Ï†ÄÏû•ÎèÑ ÏÇ≠Ï†ú
      const userStr = sessionStorage.getItem('user');
      if (userStr) {
        const user = JSON.parse(userStr);
        const key = `readingReportDraft_${user.grade}_${user.name}`;
        localStorage.removeItem(key);
      }
    }

    // PDF Îã§Ïö¥Î°úÎìú (html2canvas ÏÇ¨Ïö©ÌïòÏó¨ ÌïúÍ∏Ä ÏßÄÏõê)
    async function downloadPDF() {
      const storySelect = document.getElementById('reportStory');
      const title = document.getElementById('reportTitle').value.trim();
      const content = document.getElementById('reportContent').value.trim();

      if (!storySelect.value) {
        alert('Ïù¥ÏïºÍ∏∞Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
        return;
      }

      if (!title || !content) {
        alert('Ï†úÎ™©Í≥º ÎÇ¥Ïö©ÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
      }

      // ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Î®ºÏ†Ä ÏàòÌñâ
      await checkSpelling(content);
      return; // ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Î™®Îã¨ÏóêÏÑú "Ï†úÏ∂úÌïòÍ∏∞" Î≤ÑÌäºÏùÑ ÎàÑÎ•¥Î©¥ submitFinal()Ïù¥ Ìò∏Ï∂úÎê©ÎãàÎã§
    }

    // ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ ÌõÑ Ïã§Ï†ú Ï†úÏ∂ú Ìï®Ïàò
    async function submitFinal() {
      const storySelect = document.getElementById('reportStory');
      const title = document.getElementById('reportTitle').value.trim();
      const content = document.getElementById('reportContent').value.trim();

      // Ïú†Ìö®ÏÑ± Í≤ÄÏÇ¨
      if (!storySelect.value) {
        alert('Ïù¥ÏïºÍ∏∞Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
        return;
      }

      if (!title || !content) {
        alert('Ï†úÎ™©Í≥º ÎÇ¥Ïö©ÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
      }

      const selectedOption = storySelect.options[storySelect.selectedIndex];
      const storyId = storySelect.value;
      const storyTitle = selectedOption.getAttribute('data-title');

      const userStr = sessionStorage.getItem('user');
      if (!userStr) {
        alert('Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
        return;
      }

      const user = JSON.parse(userStr);
      const today = new Date();
      const dateStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;

      // ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Ïù∏ÎùºÏù∏ Îã´Í∏∞
      closeSpellCheckInline();

      // ÏûÑÏãú PDF ÌÖúÌîåÎ¶ø ÏÉùÏÑ±
      const pdfTemplate = document.createElement('div');
      pdfTemplate.style.cssText = `
        width: 794px;
        min-height: 1123px;
        background: #fcfaf5;
        padding: 60px;
        font-family: 'Noto Sans KR', 'Malgun Gothic', sans-serif;
        position: absolute;
        left: -9999px;
        top: 0;
      `;

      pdfTemplate.innerHTML = `
        <div style="text-align: center; margin-bottom: 40px;">
          <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/rudolph.png" style="width: 80px; height: 80px; margin-bottom: 20px;" crossorigin="anonymous">
          <h1 style="font-size: 32px; color: #2c3e50; margin: 0 0 10px 0;">Í≥†Îûò ÎèÑÏÑúÍ¥Ä ÎèÖÏÑú Í∞êÏÉÅÎ¨∏</h1>
          <p style="font-size: 18px; color: #6b7280; margin: 0;">${user.grade} ${user.name}</p>
          <p style="font-size: 14px; color: #9ca3af; margin: 5px 0 0 0;">${dateStr}</p>
        </div>

        <div style="margin-bottom: 30px;">
          <h2 style="font-size: 24px; color: #2c3e50; text-align: center; margin: 0 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #e9ecef;">${title}</h2>
        </div>

        <div style="background: white; padding: 30px; border-radius: 10px; position: relative; min-height: 600px;">
          <!-- ÏõêÍ≥†ÏßÄ ÏÑ† -->
          <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none;">
            ${Array.from({length: 40}, (_, i) => `<div style="position: absolute; left: 30px; right: 30px; top: ${30 + i * 20}px; height: 1px; background: #e9ecef;"></div>`).join('')}
          </div>

          <!-- ÎÇ¥Ïö© -->
          <div style="position: relative; z-index: 1; line-height: 2; font-size: 16px; color: #2c3e50; white-space: pre-wrap; word-wrap: break-word;">
${content}
          </div>

          <!-- ÏõåÌÑ∞ÎßàÌÅ¨ -->
          <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/rudolph.png" style="position: absolute; bottom: 50px; right: 50px; width: 200px; height: 200px; opacity: 0.05; z-index: 0;" crossorigin="anonymous">
        </div>
      `;

      document.body.appendChild(pdfTemplate);

      try {
        // html2canvasÎ°ú Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±
        const canvas = await html2canvas(pdfTemplate, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#fcfaf5'
        });

        // PDF ÏÉùÏÑ±
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({
          orientation: 'portrait',
          unit: 'mm',
          format: 'a4'
        });

        const imgData = canvas.toDataURL('image/png');
        const pdfWidth = 210;
        const pdfHeight = (canvas.height * pdfWidth) / canvas.width;

        pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);

        // ÌååÏùºÎ™Ö ÏÉùÏÑ± Î∞è Ï†ÄÏû•
        const filename = `Í≥†ÎûòÎèÑÏÑúÍ¥Ä_Í∞êÏÉÅÎ¨∏_${user.name}_${dateStr}.pdf`;
        pdf.save(filename);

        // ÏÑúÎ≤ÑÏóê Ï†úÏ∂ú Í∏∞Î°ù Ï†ÄÏû•
        console.log('üìù Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú ÏãúÏûë...');
        console.log('üîç storyId:', storyId, '| storyTitle:', storyTitle);
        const saved = await saveReportToServer({
          grade: user.grade,
          name: user.name,
          title: title,
          content: content,
          type: 'pdf',
          storyId: storyId,
          storyTitle: storyTitle
        });

        console.log('üìù Ï†úÏ∂ú Í≤∞Í≥º:', saved);

        if (saved) {
          alert('Í∞êÏÉÅÎ¨∏Ïù¥ Ï†úÏ∂úÎêòÏóàÏäµÎãàÎã§!\nPDFÍ∞Ä Îã§Ïö¥Î°úÎìúÎêòÏóàÏäµÎãàÎã§.');

          // ÌûàÏä§ÌÜ†Î¶¨ ÏÉàÎ°úÍ≥†Ïπ®
          console.log('üìù ÌûàÏä§ÌÜ†Î¶¨ ÏÉàÎ°úÍ≥†Ïπ® ÏãúÏûë...');
          await loadReadingHistory();
          console.log('üìù ÌûàÏä§ÌÜ†Î¶¨ ÏÉàÎ°úÍ≥†Ïπ® ÏôÑÎ£å');

          // ÌïôÏäµÏã§ ÏÉàÎ°úÍ≥†Ïπ®
          console.log('üìù ÌïôÏäµÏã§ ÏÉàÎ°úÍ≥†Ïπ® ÏãúÏûë...');
          await renderStudyRoomList();
          console.log('üìù ÌïôÏäµÏã§ ÏÉàÎ°úÍ≥†Ïπ® ÏôÑÎ£å');
        } else {
          alert('Ï†úÏ∂úÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.');
        }
      } catch (error) {
        console.error('PDF ÏÉùÏÑ± Ïò§Î•ò:', error);
        alert('PDF ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
      } finally {
        // ÏûÑÏãú ÏöîÏÜå Ï†úÍ±∞
        document.body.removeChild(pdfTemplate);
      }
    }

    // Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú† (Ïù¥ÎØ∏ÏßÄÎ°ú Í≥µÏú†)
    async function shareKakao() {
      const storySelect = document.getElementById('reportStory');
      const title = document.getElementById('reportTitle').value.trim();
      const content = document.getElementById('reportContent').value.trim();

      if (!storySelect.value) {
        alert('Ïù¥ÏïºÍ∏∞Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî.');
        return;
      }

      if (!title || !content) {
        alert('Ï†úÎ™©Í≥º ÎÇ¥Ïö©ÏùÑ Î™®Îëê ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
      }

      const selectedOption = storySelect.options[storySelect.selectedIndex];
      const storyId = storySelect.value;
      const storyTitle = selectedOption.getAttribute('data-title');

      const userStr = sessionStorage.getItem('user');
      if (!userStr) {
        alert('Î°úÍ∑∏Ïù∏ Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï† Ïàò ÏóÜÏäµÎãàÎã§.');
        return;
      }

      const user = JSON.parse(userStr);
      const today = new Date();
      const dateStr = `${today.getFullYear()}-${String(today.getMonth() + 1).padStart(2, '0')}-${String(today.getDate()).padStart(2, '0')}`;

      // ÏûÑÏãú Ïù¥ÎØ∏ÏßÄ ÌÖúÌîåÎ¶ø ÏÉùÏÑ± (PDFÏôÄ ÎèôÏùº)
      const imageTemplate = document.createElement('div');
      imageTemplate.style.cssText = `
        width: 794px;
        min-height: 1123px;
        background: #fcfaf5;
        padding: 60px;
        font-family: 'Noto Sans KR', 'Malgun Gothic', sans-serif;
        position: absolute;
        left: -9999px;
        top: 0;
      `;

      imageTemplate.innerHTML = `
        <div style="text-align: center; margin-bottom: 40px;">
          <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/rudolph.png" style="width: 80px; height: 80px; margin-bottom: 20px;" crossorigin="anonymous">
          <h1 style="font-size: 32px; color: #2c3e50; margin: 0 0 10px 0;">Í≥†Îûò ÎèÑÏÑúÍ¥Ä ÎèÖÏÑú Í∞êÏÉÅÎ¨∏</h1>
          <p style="font-size: 18px; color: #6b7280; margin: 0;">${user.grade} ${user.name}</p>
          <p style="font-size: 14px; color: #9ca3af; margin: 5px 0 0 0;">${dateStr}</p>
        </div>

        <div style="margin-bottom: 30px;">
          <h2 style="font-size: 24px; color: #2c3e50; text-align: center; margin: 0 0 20px 0; padding-bottom: 10px; border-bottom: 2px solid #e9ecef;">${title}</h2>
        </div>

        <div style="background: white; padding: 30px; border-radius: 10px; position: relative; min-height: 600px;">
          <!-- ÏõêÍ≥†ÏßÄ ÏÑ† -->
          <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none;">
            ${Array.from({length: 40}, (_, i) => `<div style="position: absolute; left: 30px; right: 30px; top: ${30 + i * 20}px; height: 1px; background: #e9ecef;"></div>`).join('')}
          </div>

          <!-- ÎÇ¥Ïö© -->
          <div style="position: relative; z-index: 1; line-height: 2; font-size: 16px; color: #2c3e50; white-space: pre-wrap; word-wrap: break-word;">
${content}
          </div>

          <!-- ÏõåÌÑ∞ÎßàÌÅ¨ -->
          <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/rudolph.png" style="position: absolute; bottom: 50px; right: 50px; width: 200px; height: 200px; opacity: 0.05; z-index: 0;" crossorigin="anonymous">
        </div>
      `;

      document.body.appendChild(imageTemplate);

      try {
        // html2canvasÎ°ú Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±
        const canvas = await html2canvas(imageTemplate, {
          scale: 2,
          useCORS: true,
          allowTaint: true,
          backgroundColor: '#fcfaf5'
        });

        // Ïù¥ÎØ∏ÏßÄÎ•º BlobÏúºÎ°ú Î≥ÄÌôò
        canvas.toBlob(async (blob) => {
          // ÏûÑÏãú ÏöîÏÜå Ï†úÍ±∞
          document.body.removeChild(imageTemplate);

          if (!blob) {
            alert('Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ±Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
            return;
          }

          // Ïù¥ÎØ∏ÏßÄÎ•º ÏÑúÎ≤ÑÏóê ÏóÖÎ°úÎìú (ÏûÑÏãú Ï†ÄÏû•ÏÜå)
          const formData = new FormData();
          formData.append('image', blob, `reading-report-${user.name}-${Date.now()}.png`);

          try {
            const uploadResponse = await fetch('/api/upload-temp-image', {
              method: 'POST',
              body: formData
            });

            if (!uploadResponse.ok) {
              throw new Error('Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Ïã§Ìå®');
            }

            const { imageUrl } = await uploadResponse.json();

            // Ïπ¥Ïπ¥Ïò§ÌÜ°ÏúºÎ°ú Ïù¥ÎØ∏ÏßÄ Í≥µÏú† (Ïù¥ÎØ∏ÏßÄÎßå Í≥µÏú†, ÎßÅÌÅ¨ ÏóÜÏùå)
            if (typeof Kakao !== 'undefined' && Kakao.isInitialized()) {
              Kakao.Share.sendDefault({
                objectType: 'feed',
                content: {
                  title: `üìñ ${title}`,
                  description: `${user.name}ÎãòÏùò ÎèÖÏÑú Í∞êÏÉÅÎ¨∏`,
                  imageUrl: imageUrl,
                  link: {
                    mobileWebUrl: imageUrl,
                    webUrl: imageUrl
                  }
                }
              });
              console.log('‚úÖ Ïπ¥Ïπ¥Ïò§ÌÜ° Ïù¥ÎØ∏ÏßÄ Í≥µÏú† ÏÑ±Í≥µ');

              // ÏÑúÎ≤ÑÏóê Ï†úÏ∂ú Í∏∞Î°ù Ï†ÄÏû•
              console.log('üìù Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú ÏãúÏûë...');
              const saved = await saveReportToServer({
                grade: user.grade,
                name: user.name,
                title: title,
                content: content,
                type: 'kakao',
                storyId: storyId,
                storyTitle: storyTitle
              });

              console.log('üìù Ï†úÏ∂ú Í≤∞Í≥º:', saved);

              if (saved) {
                alert('Ïπ¥Ïπ¥Ïò§ÌÜ°ÏúºÎ°ú Í∞êÏÉÅÎ¨∏ Ïù¥ÎØ∏ÏßÄÍ∞Ä Í≥µÏú†ÎêòÏóàÏäµÎãàÎã§!');

                // ÌûàÏä§ÌÜ†Î¶¨ ÏÉàÎ°úÍ≥†Ïπ®
                console.log('üìù ÌûàÏä§ÌÜ†Î¶¨ ÏÉàÎ°úÍ≥†Ïπ® ÏãúÏûë...');
                await loadReadingHistory();
                console.log('üìù ÌûàÏä§ÌÜ†Î¶¨ ÏÉàÎ°úÍ≥†Ïπ® ÏôÑÎ£å');

                // ÌïôÏäµÏã§ ÏÉàÎ°úÍ≥†Ïπ®
                console.log('üìù ÌïôÏäµÏã§ ÏÉàÎ°úÍ≥†Ïπ® ÏãúÏûë...');
                await renderStudyRoomList();
                console.log('üìù ÌïôÏäµÏã§ ÏÉàÎ°úÍ≥†Ïπ® ÏôÑÎ£å');
              } else {
                alert('Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú†Îäî ÏÑ±Í≥µÌñàÏúºÎÇò Ï†úÏ∂ú Í∏∞Î°ù Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.');
              }
            } else {
              // Fallback: Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú
              const link = document.createElement('a');
              link.href = URL.createObjectURL(blob);
              link.download = `Í≥†ÎûòÎèÑÏÑúÍ¥Ä_Í∞êÏÉÅÎ¨∏_${user.name}_${dateStr}.png`;
              link.click();
              alert('Ïπ¥Ïπ¥Ïò§ÌÜ° SDKÎ•º Ï∞æÏùÑ Ïàò ÏóÜÏñ¥ Ïù¥ÎØ∏ÏßÄÎ•º Îã§Ïö¥Î°úÎìúÌñàÏäµÎãàÎã§.');
            }
          } catch (uploadError) {
            console.error('Ïù¥ÎØ∏ÏßÄ ÏóÖÎ°úÎìú Ïò§Î•ò:', uploadError);
            // Fallback: Ïù¥ÎØ∏ÏßÄ Îã§Ïö¥Î°úÎìú
            const link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            link.download = `Í≥†ÎûòÎèÑÏÑúÍ¥Ä_Í∞êÏÉÅÎ¨∏_${user.name}_${dateStr}.png`;
            link.click();
            alert('ÏÑúÎ≤Ñ ÏóÖÎ°úÎìúÏóê Ïã§Ìå®ÌïòÏó¨ Ïù¥ÎØ∏ÏßÄÎ•º Îã§Ïö¥Î°úÎìúÌñàÏäµÎãàÎã§.');
          }
        }, 'image/png');

      } catch (error) {
        console.error('Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± Ïò§Î•ò:', error);
        document.body.removeChild(imageTemplate);
        alert('Ïù¥ÎØ∏ÏßÄ ÏÉùÏÑ± Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
      }
    }

    // ÏÑúÎ≤ÑÏóê Î¶¨Ìè¨Ìä∏ Ï†ÄÏû•
    async function saveReportToServer(data) {
      try {
        console.log('üì§ ÏÑúÎ≤ÑÏóê Î¶¨Ìè¨Ìä∏ Ï†ÑÏÜ° Ï§ë...', data);

        const response = await fetch('/api/user-progress/reading-reports/submit', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        console.log('üì• ÏÑúÎ≤Ñ ÏùëÎãµ ÏÉÅÌÉú:', response.status);

        const result = await response.json();
        console.log('üì• ÏÑúÎ≤Ñ ÏùëÎãµ Í≤∞Í≥º:', result);

        if (result.ok) {
          console.log('‚úÖ ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú ÏôÑÎ£å');

          // localStorage ÏûÑÏãú Ï†ÄÏû• ÏÇ≠Ï†ú
          const key = `readingReportDraft_${data.grade}_${data.name}`;
          localStorage.removeItem(key);
          console.log('üóëÔ∏è localStorage ÏûÑÏãú Ï†ÄÏû• ÏÇ≠Ï†ú:', key);

          return true;
        } else {
          console.error('‚ùå ÏÑúÎ≤Ñ Ï†úÏ∂ú Ïã§Ìå®:', result.message);
          return false;
        }
      } catch (error) {
        console.error('‚ùå Î¶¨Ìè¨Ìä∏ Ï†ÄÏû• Ïò§Î•ò:', error);
        return false;
      }
    }

    // ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Î≤ÑÌäºÏö© Ìï®Ïàò (ÏûêÎèô Ï†úÏ∂ú ÏóÜÏù¥ Í≤∞Í≥ºÎßå ÌëúÏãú)
    async function checkSpellingOnly() {
      const content = document.getElementById('reportContent').value.trim();

      if (!content) {
        alert('ÎÇ¥Ïö©ÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî.');
        return;
      }

      const loadingDiv = document.getElementById('spellCheckLoading');
      const inlineContainer = document.getElementById('spellCheckInline');

      try {
        console.log('üîç ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ ÏãúÏûë...');

        // Í∏∞Ï°¥ Í≤∞Í≥º Ïà®Í∏∞Í∏∞
        inlineContainer.style.display = 'none';

        // Î°úÎî© ÌëúÏãú
        loadingDiv.style.display = 'block';

        const response = await fetch('/api/spell-check', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text: content })
        });

        const result = await response.json();
        console.log('‚úÖ ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ ÏôÑÎ£å:', result);

        // Î°úÎî© Ïà®Í∏∞Í∏∞
        loadingDiv.style.display = 'none';

        // Í≤∞Í≥º Ïù∏ÎùºÏù∏ ÌëúÏãú (ÏûêÎèô Ï†úÏ∂ú ÏóÜÏù¥)
        showSpellCheckResultOnly(result);
      } catch (error) {
        console.error('‚ùå ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Ïò§Î•ò:', error);

        // Î°úÎî© Ïà®Í∏∞Í∏∞
        loadingDiv.style.display = 'none';

        alert('ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Ï§ë Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.');
      }
    }

    // ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Í≤∞Í≥º ÌëúÏãú (ÏûêÎèô Ï†úÏ∂ú ÏóÜÏùå)
    function showSpellCheckResultOnly(result) {
      const inlineContainer = document.getElementById('spellCheckInline');

      inlineContainer.innerHTML = '';

      if (result.errata_count === 0) {
        // Ïò§Î•ò ÏóÜÏùå
        inlineContainer.innerHTML = `
          <div class="no-error-message">
            ‚úÖ ÎßûÏ∂§Î≤ï Î∞è ÎùÑÏñ¥Ïì∞Í∏∞ Ïò§Î•òÍ∞Ä Î∞úÍ≤¨ÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§!
          </div>
        `;
      } else {
        // Ïò§Î•ò Î∞úÍ≤¨
        let errorsHTML = `
          <div class="error-section">
            <h4>ÎßûÏ∂§Î≤ï/ÎùÑÏñ¥Ïì∞Í∏∞ Ïò§Î•ò ${result.errata_count}Í∞ú Î∞úÍ≤¨</h4>
        `;

        if (result.errors && result.errors.length > 0) {
          result.errors.forEach((error, index) => {
            errorsHTML += `
              <div class="error-item">
                ÏòàÏãú ${index + 1}) <span class="wrong-text">${error.wrong}</span> ‚Üí <strong>${error.correct}</strong>
              </div>
            `;
          });
        }

        errorsHTML += `</div>`;

        let correctHTML = `
          <div class="correct-section">
            <h4>‚úì Ïò¨Î∞îÎ•∏ ÎßûÏ∂§Î≤ï</h4>
            <div class="correct-text">${result.corrected_html || result.notag_html}</div>
          </div>
        `;

        inlineContainer.innerHTML = errorsHTML + correctHTML;
      }

      // Ïù∏ÎùºÏù∏ Ïª®ÌÖåÏù¥ÎÑà ÌëúÏãú
      inlineContainer.style.display = 'block';

      // Ïä§ÌÅ¨Î°§ÌïòÏó¨ Í≤∞Í≥º Î≥¥Ïó¨Ï£ºÍ∏∞
      setTimeout(() => {
        inlineContainer.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      }, 100);
    }

    // ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Ïù∏ÎùºÏù∏ Îã´Í∏∞
    function closeSpellCheckInline() {
      const inlineContainer = document.getElementById('spellCheckInline');
      inlineContainer.style.display = 'none';
    }
  </script>

  <!-- Î†àÏù¥Îçî Ï∞®Ìä∏ ÏïÑÏù¥ÏΩò -->
  <div class="radar-chart-icon" id="radarChartIcon" title="ÎÇòÏùò ÌïôÏäµ Î∂ÑÏÑù Î≥¥Í∏∞">
    <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/total-radar-chart-v2.png" alt="ÌïôÏäµ Î∂ÑÏÑù Î†àÏù¥Îçî Ï∞®Ìä∏">
    <div class="radar-grade-badge" id="radarGradeBadge">-</div>
  </div>

  <!-- ÎÖ∏Ìä∏ ÏïÑÏù¥ÏΩò -->
  <div class="note-icon" id="noteIcon" title="ÌïôÏäµ ÎÖ∏Ìä∏">
    <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/note-icon-v2.png" alt="ÌïôÏäµ ÎÖ∏Ìä∏">
    <div class="vocab-avg-badge" id="vocabAvgBadge">0</div>
  </div>

  <!-- ÌïôÏäµ Î∂ÑÏÑù Î™®Îã¨ -->
  <div class="learning-modal" id="learningModal">
    <div class="learning-modal-content">
      <div class="learning-modal-header">
        <div class="learning-modal-title">ÎÇòÏùò ÌïôÏäµ Î∂ÑÏÑù</div>
        <button class="learning-modal-close" id="closeLearningModal">&times;</button>
      </div>
      <iframe class="learning-modal-iframe" id="learningIframe"></iframe>
      <div class="learning-modal-footer">
        <button class="learning-action-btn send-btn" id="sendLearningBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
          </svg>
          Ïù¥Î©îÏùº Ï†ÑÏÜ°
        </button>
        <button class="learning-action-btn kakao-btn" id="kakaoShareBtn" style="background: linear-gradient(135deg, #FEE500 0%, #FFCD00 100%); color: #3C1E1E;">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 3C6.5 3 2 6.6 2 11c0 2.8 1.9 5.3 4.7 6.7-.2.8-.7 2.8-.8 3.2-.1.5.2.5.4.4.3-.1 3.5-2.3 4-2.7.5.1 1 .1 1.7.1 5.5 0 10-3.6 10-8S17.5 3 12 3z"/>
          </svg>
          Ïπ¥Ïπ¥Ïò§ÌÜ° Ï†ÑÏÜ°
        </button>
        <button class="learning-action-btn download-btn" id="downloadLearningBtn">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/>
          </svg>
          Îã§Ïö¥Î°úÎìú
        </button>
      </div>
    </div>
  </div>

  <!-- Îã®Ïõê ÌïôÏäµ Î™®Îã¨ -->
  <div class="unit-modal" id="unitModal">
    <div class="unit-modal-content">
      <div class="unit-modal-header">
        <button class="unit-modal-close" id="closeUnitModal">&times;</button>
      </div>
      <iframe class="unit-modal-iframe" id="unitIframe"></iframe>
    </div>
  </div>

  <!-- AI Ï±óÎ¥á ÌîåÎ°úÌåÖ Î≤ÑÌäº -->
  <div class="ai-chatbot-floating-btn" id="aiChatbotBtn">
    <div class="ai-chatbot-speech-bubble">...</div>
    <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/whale-ai-teacher-v2.png" alt="AI Íµ≠Ïñ¥ Ï±óÎ¥á">
  </div>

  <!-- AI Ï±óÎ¥á Î™®Îã¨ -->
  <div class="ai-chatbot-modal" id="aiChatbotModal">
    <div class="ai-chatbot-modal-content">
      <div class="ai-chatbot-modal-header">
        <button class="ai-chatbot-modal-close" id="closeAiChatbotModal">&times;</button>
      </div>
      <iframe class="ai-chatbot-modal-iframe" id="aiChatbotIframe"></iframe>
    </div>
  </div>

  <!-- Ïñ¥ÌúòÎ†• ÌÄ¥Ï¶àÏáº Î™®Îã¨ -->
  <div class="vocab-quiz-modal" id="vocabQuizModal">
    <div class="vocab-quiz-modal-content">
      <div class="vocab-quiz-modal-header">
        <button class="vocab-quiz-modal-close" id="closeVocabModal">&times;</button>
      </div>
      <iframe class="vocab-quiz-modal-iframe" id="vocabQuizIframe"></iframe>
    </div>
  </div>

  <!-- ÌïôÏäµÏã§ ÏïÑÏù¥ÏΩò (Ï¢åÏ∏° ÌïòÎã®) -->
  <div class="study-room-icon" id="studyRoomIcon">
    <img src="https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/student-study-room.png" alt="ÌïôÏäµÏã§">
    <div class="study-room-badge" id="studyRoomBadge">0/1</div>
  </div>

  <!-- ÌïôÏäµÏã§ Î™®Îã¨ -->
  <div class="study-room-modal" id="studyRoomModal">
    <div class="study-room-modal-content">
      <div class="study-room-modal-header">
        <div style="display: flex; align-items: center;">
          <h2>üìö ÎÇòÏùò ÌïôÏäµÏã§</h2>
          <div class="auto-task-dropdown-wrapper">
            <button class="auto-task-btn" id="autoTaskBtn" onclick="toggleAutoTaskDropdown(event)">
              ‚öôÔ∏è ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ <span class="arrow">‚ñº</span>
            </button>
            <div class="auto-task-dropdown" id="autoTaskDropdown">
              <div class="auto-task-dropdown-header">ü§ñ ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨ ÏÑ§Ï†ï</div>
              <div class="auto-task-dropdown-body">
                <!-- ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉù -->
                <div class="auto-task-section">
                  <div class="auto-task-section-title">üìö ÏãúÎ¶¨Ï¶à ÏÑ†ÌÉù</div>
                  <div class="auto-task-btn-group" id="seriesBtnGroup">
                    <button class="series-btn" data-series="on" disabled>BRIANÏò®</button>
                    <button class="series-btn" data-series="up">BRIANÏóÖ</button>
                    <button class="series-btn" data-series="fit">BRIANÌïè</button>
                    <button class="series-btn" data-series="deep" disabled>BRIANÎî•</button>
                  </div>
                </div>

                <!-- ÏöîÏùº ÏÑ†ÌÉù -->
                <div class="auto-task-section">
                  <div class="auto-task-section-title">üìÖ ÏöîÏùº ÏÑ†ÌÉù</div>
                  <div class="auto-task-btn-group" id="dayBtnGroup">
                    <button class="day-btn" data-day="everyday">Îß§Ïùº</button>
                    <button class="day-btn" data-day="1">Ïõî</button>
                    <button class="day-btn" data-day="2">Ìôî</button>
                    <button class="day-btn" data-day="3">Ïàò</button>
                    <button class="day-btn" data-day="4">Î™©</button>
                    <button class="day-btn" data-day="5">Í∏à</button>
                    <button class="day-btn" data-day="6">ÌÜ†</button>
                    <button class="day-btn" data-day="0">Ïùº</button>
                  </div>
                </div>

                <!-- Í≥ºÏ†ú Í∞úÏàò -->
                <div class="auto-task-section">
                  <div class="auto-task-section-title">üéØ ÎûúÎç§Í≥ºÏ†úÍ∞úÏàò</div>
                  <div class="task-count-input">
                    <input type="number" id="autoTaskCount" min="1" max="15" value="1">
                    <span>Í∞ú (ÏµúÏÜå 1Í∞ú ~ ÏµúÎåÄ 15Í∞ú)</span>
                  </div>
                </div>

                <!-- Ïï°ÏÖò Î≤ÑÌäº -->
                <div class="auto-task-actions">
                  <button class="auto-task-action-btn start" id="autoTaskStartBtn" onclick="startAutoTask()">
                    ÏãúÏûë
                  </button>
                  <button class="auto-task-action-btn pause" id="autoTaskPauseBtn" onclick="pauseAutoTask()" disabled>
                    ÏùºÏãúÏ†ïÏßÄ
                  </button>
                  <button class="auto-task-action-btn stop" id="autoTaskStopBtn" onclick="stopAutoTask()" disabled>
                    Ï§ëÎã®
                  </button>
                </div>

                <!-- ÏÉÅÌÉú ÌëúÏãú -->
                <div class="auto-task-status stopped" id="autoTaskStatus">
                  ‚èπÔ∏è ÏûêÎèôÍ≥ºÏ†úÎ∂ÄÏó¨Í∞Ä ÎπÑÌôúÏÑ±Ìôî ÏÉÅÌÉúÏûÖÎãàÎã§
                </div>
              </div>
            </div>
          </div>
        </div>
        <button class="study-room-modal-close" id="closeStudyRoomModal" onclick="closeStudyRoomModal()">&times;</button>
      </div>
      <div class="study-room-modal-body">
        <ul class="study-room-list" id="studyRoomList">
          <!-- Í≥ºÏ†ú Î™©Î°ùÏù¥ Ïó¨Í∏∞Ïóê Î†åÎçîÎßÅÎê©ÎãàÎã§ -->
        </ul>
      </div>
    </div>
  </div>

  <!-- Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏ ÏûÖÎ†• Î™®Îã¨ -->
  <div class="overlay" id="adminPasswordOverlay">
    <div class="password-modal">
      <div class="password-modal-header">
        <h3>üîí Í¥ÄÎ¶¨Ïûê Ïù∏Ï¶ù</h3>
      </div>
      <div class="password-modal-body">
        <p>Í≥ºÏ†úÎ•º ÏÇ≠Ï†úÌïòÎ†§Î©¥ Í¥ÄÎ¶¨Ïûê ÎπÑÎ∞ÄÎ≤àÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî</p>
        <input type="password" id="adminPasswordInput" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏ ÏûÖÎ†•" maxlength="4">
      </div>
      <div class="password-modal-footer">
        <button class="btn-cancel" id="cancelPasswordBtn">Ï∑®ÏÜå</button>
        <button class="btn-confirm" id="confirmPasswordBtn">ÌôïÏù∏</button>
      </div>
    </div>
  </div>

  <!-- Í≥ºÏ†ú Ï∂îÍ∞Ä ÌôïÏù∏ ÌåùÏóÖ -->
  <div class="overlay" id="assignTaskOverlay">
    <div class="assign-modal">
      <div class="assign-modal-header">
        <h3>üìù Í≥ºÏ†ú Ï∂îÍ∞Ä</h3>
      </div>
      <div class="assign-modal-body">
        <p id="assignTaskMessage">Ïù¥ Í≥ºÏ†úÎ•º ÌïôÏäµÏã§Ïóê Ï∂îÍ∞ÄÌïòÏãúÍ≤†ÏäµÎãàÍπå?</p>
      </div>
      <div class="assign-modal-footer">
        <button class="btn-cancel" id="cancelAssignBtn">Ï∑®ÏÜå</button>
        <button class="btn-confirm" id="confirmAssignBtn">Ï∂îÍ∞ÄÌïòÍ∏∞</button>
      </div>
    </div>
  </div>

  <!-- ÏÇ≠Ï†ú ÏµúÏ¢Ö ÌôïÏù∏ ÌåùÏóÖ -->
  <div class="overlay" id="deleteConfirmOverlay">
    <div class="assign-modal">
      <div class="assign-modal-header">
        <h3>‚ö†Ô∏è ÏÇ≠Ï†ú ÌôïÏù∏</h3>
      </div>
      <div class="assign-modal-body">
        <p>ÏÇ≠Ï†ú ÌõÑ Î≥µÍµ¨Í∞Ä ÏïàÎê©ÎãàÎã§.<br>Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?</p>
      </div>
      <div class="assign-modal-footer">
        <button class="btn-cancel" id="cancelDeleteBtn">Ï∑®ÏÜå</button>
        <button class="btn-confirm" id="confirmDeleteBtn">ÏÇ≠Ï†úÌïòÍ∏∞</button>
      </div>
    </div>
  </div>

  <!-- Ï§ÄÎπÑ Ï§ë ÌåùÏóÖ -->
  <div class="overlay" id="comingSoonOverlay">
    <div class="assign-modal">
      <div class="assign-modal-header">
        <h3>üìö‚ú® ÏïÑÏßÅ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§</h3>
      </div>
      <div class="assign-modal-body">
        <p>Í≥ß ÏßÄÎ¨∏Ïù¥ Ïò§ÌîàÎê©ÎãàÎã§. Í∏∞ÎåÄÌï¥Ï£ºÏÑ∏Ïöî!</p>
      </div>
      <div class="assign-modal-footer">
        <button class="btn-confirm" id="closeComingSoonBtn">ÌôïÏù∏</button>
      </div>
    </div>
  </div>

  <!-- Ïò§Î•ò Î©îÏãúÏßÄ ÌåùÏóÖ -->
  <div class="overlay" id="errorMessageOverlay">
    <div class="assign-modal">
      <div class="assign-modal-header">
        <h3><span id="errorEmoji">üö´</span> <span id="errorTitle">Ïò§Î•ò</span></h3>
      </div>
      <div class="assign-modal-body">
        <p id="errorMsg">Ïò§Î•òÍ∞Ä Î∞úÏÉùÌñàÏäµÎãàÎã§.</p>
      </div>
      <div class="assign-modal-footer">
        <button class="btn-confirm" id="closeErrorBtn">ÌôïÏù∏</button>
      </div>
    </div>
  </div>

  <!-- Í≥†ÎûòÏÑ¨ Ïù¥ÏïºÍ∏∞ ÌåùÏóÖ Î™®Îã¨ -->
  <div class="whale-story-modal" id="whaleStoryModal">
    <div class="whale-story-modal-content">
      <button class="whale-story-modal-close" id="closeWhaleStoryModal" onclick="closeWhaleStoryModal()" type="button">&times;</button>

      <!-- Carousel Navigation Arrows -->
      <button class="carousel-nav prev" id="carouselPrev" onclick="moveCarousel(-1)" type="button">‚Äπ</button>
      <button class="carousel-nav next" id="carouselNext" onclick="moveCarousel(1)" type="button">‚Ä∫</button>

      <!-- Carousel Wrapper -->
      <div class="story-carousel-wrapper">
        <div class="story-carousel-container" id="storyCarousel">

          <!-- Slide 1: Whale Island Story -->
          <div class="story-slide whale-story">
            <div class="whale-story-header">
              <h2>üêã Ìë∏Î•∏ Í≥†ÎûòÏÑ¨Ïùò ÎπÑÎ∞Ä Î™®ÌóòÎã®</h2>
              <p>Ïñ¥Îñ§ ÏãúÏ¶åÏúºÎ°ú Î™®ÌóòÏùÑ Îñ†ÎÇòÏãúÍ≤†ÏäµÎãàÍπå?</p>
            </div>

            <div class="whale-story-seasons">
              <!-- ÏãúÏ¶å 1 -->
              <div class="season-card" onclick="goToSeason('whale', 1)">
                <div class="season-number">üèùÔ∏è</div>
                <div class="season-title">ÏãúÏ¶å 1</div>
                <div class="season-subtitle">Ìë∏Î•∏ Í≥†ÎûòÏÑ¨ ÌÉêÌóò</div>
                <div class="season-desc">Ïã†ÎπÑÎ°úÏö¥ ÏÑ¨ÏóêÏÑú ÏãúÏûëÎêòÎäî Ï≤´ Î≤àÏß∏ Î™®Ìóò</div>
              </div>

              <!-- ÏãúÏ¶å 2 -->
              <div class="season-card" onclick="goToSeason('whale', 2)">
                <div class="season-number">üåä</div>
                <div class="season-title">ÏãúÏ¶å 2</div>
                <div class="season-subtitle">ÌååÎèÑ Í≥®ÏßúÍ∏∞Ïùò ÎπÑÎ∞Ä</div>
                <div class="season-desc">Í≥†Îûò ÏôïÍµ≠Ïùò Í∏∞ÏñµÏùÑ ÎêòÏ∞æÎäî Ïó¨Ï†ï</div>
              </div>

              <!-- ÏãúÏ¶å 3 -->
              <div class="season-card" onclick="goToSeason('whale', 3)">
                <div class="season-number">‚ú®</div>
                <div class="season-title">ÏãúÏ¶å 3</div>
                <div class="season-subtitle">ÎπõÏùò Í∏∞Ïñµ</div>
                <div class="season-desc">Í∏∞ÏñµÏùò ÏàòÌò∏ÏûêÍ∞Ä ÎêòÎäî ÎßàÏßÄÎßâ Î™®Ìóò</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('whale')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 2: Jungle Story -->
          <div class="story-slide jungle-story">
            <div class="whale-story-header">
              <h2>üåø ÍπäÏùÄ Ï†ïÍ∏ÄÏùò ÏûäÌûå ÎèÑÏãú</h2>
              <p>Ïñ¥Îñ§ ÏãúÏ¶åÏúºÎ°ú Î™®ÌóòÏùÑ Îñ†ÎÇòÏãúÍ≤†ÏäµÎãàÍπå?</p>
            </div>

            <div class="whale-story-seasons">
              <!-- ÏãúÏ¶å 1 -->
              <div class="season-card" onclick="goToSeason('jungle', 1)">
                <div class="season-number">üèùÔ∏è</div>
                <div class="season-title">ÏãúÏ¶å 1</div>
                <div class="season-subtitle">ÏûäÌûå ÎèÑÏãú Î∞úÍ≤¨</div>
                <div class="season-desc">Ïã†ÎπÑÎ°úÏö¥ Ï†ïÍ∏ÄÏóêÏÑú ÏãúÏûëÎêòÎäî Ï≤´ Î≤àÏß∏ Î™®Ìóò</div>
              </div>

              <!-- ÏãúÏ¶å 2 -->
              <div class="season-card" onclick="goToSeason('jungle', 2)">
                <div class="season-number">üåø</div>
                <div class="season-title">ÏãúÏ¶å 2</div>
                <div class="season-subtitle">ÎèÑÏãúÏùò Í∑†Ìòï ÌöåÎ≥µ</div>
                <div class="season-desc">Í≥†ÎåÄ Ïû•ÏπòÏùò ÎπÑÎ∞ÄÏùÑ Ìë∏Îäî Ïó¨Ï†ï</div>
              </div>

              <!-- ÏãúÏ¶å 3 -->
              <div class="season-card" onclick="goToSeason('jungle', 3)">
                <div class="season-number">üêâ</div>
                <div class="season-title">ÏãúÏ¶å 3</div>
                <div class="season-subtitle">ÏïîÎÖπÎ¶ºÏùò ÏàòÌò∏Ïûê</div>
                <div class="season-desc">Ï†ïÍ∏ÄÏùò ÏßÑÏ†ïÌïú Í∑†ÌòïÏùÑ ÏßÄÌÇ§Îäî ÎßàÏßÄÎßâ Î™®Ìóò</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('jungle')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 3: Library Story -->
          <div class="story-slide library-story">
            <div class="whale-story-header">
              <h2>üìö ÏÇ¥ÏïÑ ÏûàÎäî Ïã†ÎπÑÏùò ÎèÑÏÑúÍ¥Ä</h2>
              <p>Ïñ¥Îñ§ ÏãúÏ¶åÏúºÎ°ú Î™®ÌóòÏùÑ Îñ†ÎÇòÏãúÍ≤†ÏäµÎãàÍπå?</p>
            </div>

            <div class="whale-story-seasons">
              <!-- ÏãúÏ¶å 1 -->
              <div class="season-card" onclick="goToSeason('library', 1)">
                <div class="season-number">üèõÔ∏è</div>
                <div class="season-title">ÏãúÏ¶å 1</div>
                <div class="season-subtitle">Ïã†ÎπÑÌïú ÎèÑÏÑúÍ¥ÄÏùò Î∞úÍ≤¨</div>
                <div class="season-desc">ÏßÄÌòúÏôÄ Ïö©Í∏∞Î°ú Í∞ÄÎìùÌïú ÎèÑÏÑúÍ¥Ä Ïó¨Ï†ïÏùò ÏãúÏûë</div>
              </div>

              <!-- ÏãúÏ¶å 2 -->
              <div class="season-card" onclick="goToSeason('library', 2)">
                <div class="season-number">üîê</div>
                <div class="season-title">ÏãúÏ¶å 2</div>
                <div class="season-subtitle">Í∏àÏßÄÎêú ÏÑúÍ≥†Ïùò ÎπÑÎ∞Ä</div>
                <div class="season-desc">ÎπõÍ≥º Ïñ¥Îë†Ïùò Í∑†ÌòïÏùÑ Ï∞æÎäî Î™®Ìóò</div>
              </div>

              <!-- ÏãúÏ¶å 3 -->
              <div class="season-card" onclick="goToSeason('library', 3)">
                <div class="season-number">‚è≥</div>
                <div class="season-title">ÏãúÏ¶å 3</div>
                <div class="season-subtitle">ÏãúÍ∞Ñ Ïó¨ÌñâÏûêÏùò ÎèÑÏÑúÍ¥Ä</div>
                <div class="season-desc">ÌååÍ¥¥ÏôÄ ÎßàÎ≤ïÏùÑ ÎÑòÎÇòÎìúÎäî ÎåÄ Î™®Ìóò</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('library')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 4: Time Library Story -->
          <div class="story-slide time-library-story">
            <div class="whale-story-header">
              <h2>‚è∞ ÏãúÍ∞ÑÎèÑÏÑúÍ¥Ä</h2>
              <p>Ïñ¥Îñ§ ÏãúÏ¶åÏúºÎ°ú Î™®ÌóòÏùÑ Îñ†ÎÇòÏãúÍ≤†ÏäµÎãàÍπå?</p>
            </div>

            <div class="whale-story-seasons">
              <!-- ÏãúÏ¶å 1 -->
              <div class="season-card" onclick="goToSeason('timeLibrary', 1)">
                <div class="season-number">üï∞Ô∏è</div>
                <div class="season-title">ÏãúÏ¶å 1</div>
                <div class="season-subtitle">Í≥ºÍ±∞Ïùò Î¨∏ÏùÑ Ïó¥Îã§</div>
                <div class="season-desc">ÏûäÌûå ÏãúÎåÄÏùò ÏàòÌò∏ÏûêÎì§</div>
              </div>

              <!-- ÏãúÏ¶å 2 -->
              <div class="season-card" onclick="goToSeason('timeLibrary', 2)">
                <div class="season-number">‚ö°</div>
                <div class="season-title">ÏãúÏ¶å 2</div>
                <div class="season-subtitle">ÌòÑÏû¨Ïùò Í∑†Ïó¥</div>
                <div class="season-desc">ÏãúÍ∞ÑÏù¥ Îí§ÌãÄÎ¶∞ ÎèÑÏÑúÍ¥Ä</div>
              </div>

              <!-- ÏãúÏ¶å 3 -->
              <div class="season-card" onclick="goToSeason('timeLibrary', 3)">
                <div class="season-number">üí´</div>
                <div class="season-title">ÏãúÏ¶å 3</div>
                <div class="season-subtitle">ÎØ∏ÎûòÏùò Ïã¨Ïû•</div>
                <div class="season-desc">ÏãúÍ∞ÑÏùÑ ÏßÄÌÇ§Îäî ÎßàÏßÄÎßâ ÏïÑÏù¥Îì§</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('timeLibrary')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 5: Cat Island Story -->
          <div class="story-slide cat-island-story">
            <div class="whale-story-header">
              <h2>üê± ÎØ∏ÏßÄÏùò Í≥†ÏñëÏù¥ ÏÑ¨ ÌëúÎ•òÍ∏∞</h2>
              <p>Ïñ¥Îñ§ ÏãúÏ¶åÏúºÎ°ú Î™®ÌóòÏùÑ Îñ†ÎÇòÏãúÍ≤†ÏäµÎãàÍπå?</p>
            </div>

            <div class="whale-story-seasons">
              <!-- ÏãúÏ¶å 1 -->
              <div class="season-card" onclick="goToSeason('catIsland', 1)">
                <div class="season-number">üåä</div>
                <div class="season-title">ÏãúÏ¶å 1</div>
                <div class="season-subtitle">Î∞îÎûåÏù¥ Îç∞Î†§Ïò® ÏÑ¨</div>
                <div class="season-desc">ÎßêÌïòÎäî Í≥†ÏñëÏù¥Îì§Ïùò Ïã†ÎπÑÌïú ÏÑ¨</div>
              </div>

              <!-- ÏãúÏ¶å 2 -->
              <div class="season-card" onclick="goToSeason('catIsland', 2)">
                <div class="season-number">üå™Ô∏è</div>
                <div class="season-title">ÏãúÏ¶å 2</div>
                <div class="season-subtitle">Î∞îÎûåÍ≥†ÏñëÏù¥Îì§Ïùò Ïà®Í≤®ÏßÑ ÎÇ†Í∞ú</div>
                <div class="season-desc">ÏûÉÏñ¥Î≤ÑÎ¶∞ Í≥†ÏñëÏù¥Îì§ÏùÑ Ï∞æÏïÑÏÑú</div>
              </div>

              <!-- ÏãúÏ¶å 3 -->
              <div class="season-card" onclick="goToSeason('catIsland', 3)">
                <div class="season-number">üíñ</div>
                <div class="season-title">ÏãúÏ¶å 3</div>
                <div class="season-subtitle">ÎßàÏùåÏùò ÏôïÍµ≠Í≥º Í∞êÏ†ïÏùò Î∂àÍΩÉ</div>
                <div class="season-desc">Ïû†Îì† ÏôïÍµ≠ÏùÑ Íπ®Ïö∞Îäî ÎßàÏßÄÎßâ Î™®Ìóò</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('catIsland')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 6: Cat Transform Story -->
          <div class="story-slide cat-transform-story">
            <div class="whale-story-header">
              <h2>üêà Í≥†ÏñëÏù¥Í∞Ä ÎêòÏñ¥Î≤ÑÎ¶∞ ÎÇ†</h2>
              <p>Ïñ¥Îñ§ ÏãúÏ¶åÏúºÎ°ú Î™®ÌóòÏùÑ Îñ†ÎÇòÏãúÍ≤†ÏäµÎãàÍπå?</p>
            </div>

            <div class="whale-story-seasons">
              <!-- ÏãúÏ¶å 1 -->
              <div class="season-card" onclick="goToSeason('catTransform', 1)">
                <div class="season-number">üí´</div>
                <div class="season-title">ÏãúÏ¶å 1</div>
                <div class="season-subtitle">Í≥†ÏñëÏù¥Ïùò ÎààÏúºÎ°ú Î≥∏ Ï≤´ ÏÑ∏Í≥Ñ</div>
                <div class="season-desc">ÎÇØÏÑ§ÏßÄÎßå ÏïÑÎ¶ÑÎã§Ïö¥ ÏÉàÎ°úÏö¥ ÏÇ∂</div>
              </div>

              <!-- ÏãúÏ¶å 2 -->
              <div class="season-card" onclick="goToSeason('catTransform', 2)">
                <div class="season-number">üèõÔ∏è</div>
                <div class="season-title">ÏãúÏ¶å 2</div>
                <div class="season-subtitle">Î™©Í±∏Ïù¥Ïùò ÎπÑÎ∞ÄÍ≥º Í∑∏Î¶ºÏûê ÏôïÍµ≠</div>
                <div class="season-desc">ÏûÉÏñ¥Î≤ÑÎ¶∞ ÏôïÍµ≠Ïùò ÎπÑÎ∞ÄÏù¥ ÎìúÎü¨ÎÇúÎã§</div>
              </div>

              <!-- ÏãúÏ¶å 3 -->
              <div class="season-card" onclick="goToSeason('catTransform', 3)">
                <div class="season-number">‚öñÔ∏è</div>
                <div class="season-title">ÏãúÏ¶å 3</div>
                <div class="season-subtitle">Í∑∏Î¶ºÏûêÏôïÍµ≠Ïùò Ïã¨Ïû•</div>
                <div class="season-desc">ÎπõÍ≥º Í∑∏Î¶ºÏûêÏùò ÎßàÏßÄÎßâ Í∑†ÌòïÏùÑ Ï∞æÏïÑÏÑú</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('catTransform')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 7: Sonagi Story (Îã®ÎèÖ ÏãúÏ¶å) -->
          <div class="story-slide sonagi-story">
            <div class="whale-story-header">
              <h2>üåßÔ∏è ÏÜåÎÇòÍ∏∞</h2>
              <p>Ìô©ÏàúÏõê ÏõêÏûë - ÏàúÏàòÌïú Ï≤´ÏÇ¨Îûë Ïù¥ÏïºÍ∏∞</p>
            </div>

            <div class="whale-story-seasons single-season-container">
              <!-- Îã®ÎèÖ ÏãúÏ¶å -->
              <div class="season-card single-season" onclick="goToSeason('sonagi', 1)">
                <div class="season-number">üåæ</div>
                <div class="season-title">Îã®ÎèÖ ÏãúÏ¶å</div>
                <div class="season-subtitle">10ÌååÌä∏ Íµ¨ÏÑ±</div>
                <div class="season-desc">ÏÜåÎÖÑÍ≥º ÏÜåÎÖÄÏùò ÏïÑÎ¶ÑÎãµÍ≥† Ïä¨Ìîà Ïó¨Î¶Ñ Ïù¥ÏïºÍ∏∞</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('sonagi')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 8: Good Day Story (Ïö¥Ïàò Ï¢ãÏùÄ ÎÇ† - Îã®ÎèÖ ÏãúÏ¶å) -->
          <div class="story-slide goodday-story">
            <div class="whale-story-header">
              <h2>üåßÔ∏è Ïö¥Ïàò Ï¢ãÏùÄ ÎÇ†</h2>
              <p>ÌòÑÏßÑÍ±¥ ÏõêÏûë - ÎπÑÍ∑πÏ†Å ÏïÑÏù¥Îü¨ÎãàÏùò Í±∏Ïûë</p>
            </div>

            <div class="whale-story-seasons single-season-container">
              <!-- Îã®ÎèÖ ÏãúÏ¶å -->
              <div class="season-card single-season" onclick="goToSeason('goodday', 1)">
                <div class="season-number">üöó</div>
                <div class="season-title">Îã®ÎèÖ ÏãúÏ¶å</div>
                <div class="season-subtitle">10ÌååÌä∏ Íµ¨ÏÑ±</div>
                <div class="season-desc">ÍπÄÏ≤®ÏßÄÏùò Ïö¥Ïàò Ï¢ãÏùÄ ÎÇ†, Í∑∏Îü¨ÎÇò...</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('goodday')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 9: Dongbaek Story (ÎèôÎ∞±ÍΩÉ - Îã®ÎèÖ ÏãúÏ¶å) -->
          <div class="story-slide dongbaek-story">
            <div class="whale-story-header">
              <h2>üå∏ ÎèôÎ∞±ÍΩÉ</h2>
              <p>ÍπÄÏú†Ï†ï ÏõêÏûë - ÏàúÏàòÌïú ÏãúÍ≥® Ï≤´ÏÇ¨Îûë Ïù¥ÏïºÍ∏∞</p>
            </div>

            <div class="whale-story-seasons single-season-container">
              <!-- Îã®ÎèÖ ÏãúÏ¶å -->
              <div class="season-card single-season" onclick="goToSeason('dongbaek', 1)">
                <div class="season-number">üêì</div>
                <div class="season-title">Îã®ÎèÖ ÏãúÏ¶å</div>
                <div class="season-subtitle">10ÌååÌä∏ Íµ¨ÏÑ±</div>
                <div class="season-desc">'ÎÇò'ÏôÄ Ï†êÏàúÏù¥Ïùò Ìã∞Í≤©ÌÉúÍ≤© Ï≤´ÏÇ¨Îûë</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('dongbaek')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 10: Samdae Story (ÏÇºÎåÄ - Îã®ÎèÖ ÏãúÏ¶å) -->
          <div class="story-slide samdae-story">
            <div class="whale-story-header">
              <h2>üèõÔ∏è ÏÇºÎåÄ</h2>
              <p>ÏóºÏÉÅÏÑ≠ ÏõêÏûë - ÏÑ∏ ÏÑ∏ÎåÄÏùò Í∞àÎì±Í≥º Í∑ºÎåÄÌôîÏùò Î¨ºÍ≤∞</p>
            </div>

            <div class="whale-story-seasons single-season-container">
              <!-- Îã®ÎèÖ ÏãúÏ¶å -->
              <div class="season-card single-season" onclick="goToSeason('samdae', 1)">
                <div class="season-number">üë¥</div>
                <div class="season-title">Îã®ÎèÖ ÏãúÏ¶å</div>
                <div class="season-subtitle">10ÌååÌä∏ Íµ¨ÏÑ±</div>
                <div class="season-desc">Ï°∞ÏùòÍ¥Ä ÏßëÏïà ÏÇºÎåÄÏùò Î™∞ÎùΩÍ≥º Ìù¨Îßù</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('samdae')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

          <!-- Slide 11: Chunhyang Story (Ï∂òÌñ•Ï†Ñ - Îã®ÎèÖ ÏãúÏ¶å) -->
          <div class="story-slide chunhyang-story">
            <div class="whale-story-header">
              <h2>üå∏ Ï∂òÌñ•Ï†Ñ</h2>
              <p>Ï°∞ÏÑ†ÏãúÎåÄ ÌåêÏÜåÎ¶¨Í≥Ñ ÏÜåÏÑ§ - Ïã†Î∂ÑÏùÑ Ï¥àÏõîÌïú ÏÇ¨Îûë Ïù¥ÏïºÍ∏∞</p>
            </div>

            <div class="whale-story-seasons single-season-container">
              <!-- Îã®ÎèÖ ÏãúÏ¶å -->
              <div class="season-card single-season" onclick="goToSeason('chunhyang', 1)">
                <div class="season-number">üíï</div>
                <div class="season-title">Îã®ÎèÖ ÏãúÏ¶å</div>
                <div class="season-subtitle">10ÌååÌä∏ Íµ¨ÏÑ±</div>
                <div class="season-desc">Ïù¥Î™ΩÎ£°Í≥º ÏÑ±Ï∂òÌñ•Ïùò ÏÇ¨ÎûëÍ≥º Ï†àÍ∞ú</div>
              </div>
            </div>

            <div class="book-report-btn-container">
              <button class="book-report-btn" onclick="openBookReportModal('chunhyang')">
                <span>ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ Ï†úÏ∂ú</span>
              </button>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <!-- Ïä§ÌÜ†Î¶¨ ÏΩòÌÖêÏ∏† ÌåùÏóÖ Î™®Îã¨ -->
  <div class="story-content-modal" id="storyContentModal">
    <div class="story-content-modal-inner">
      <button class="story-content-close" id="closeStoryContentModal" onclick="closeStoryModal()" type="button">&times;</button>
      <iframe class="story-content-iframe" id="storyContentIframe"></iframe>
    </div>
  </div>

  <!-- ÎèÖÏÑú Í∞êÏÉÅÎ¨∏ ÌåùÏóÖ Î™®Îã¨ -->
  <div class="reading-report-modal" id="readingReportModal">
    <div class="reading-report-container">
      <button class="reading-report-close" onclick="closeReadingReportModal()" type="button">&times;</button>

      <!-- ÏôºÏ™Ω ÌûàÏä§ÌÜ†Î¶¨ ÏÇ¨Ïù¥ÎìúÎ∞î -->
      <div class="reading-history-sidebar">
        <div class="history-header">
          üìö Ï†úÏ∂ú Ïù¥Î†•
        </div>
        <div class="history-list" id="readingHistoryList">
          <!-- ÌûàÏä§ÌÜ†Î¶¨ Ìï≠Î™©Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
        </div>
      </div>

      <!-- Ïò§Î•∏Ï™Ω Î©îÏù∏ ÏûëÏÑ± ÏòÅÏó≠ -->
      <div class="reading-report-main">
        <div class="report-form-header">
          <h2>üêã Í≥†Îûò ÎèÑÏÑúÍ¥Ä ÎèÖÏÑú Í∞êÏÉÅÎ¨∏</h2>
          <p>Ïã†ÎÇòÎäî Í≥†ÎûòÎèÑÏÑúÍ¥Ä Ïù¥ÏïºÍ∏∞Î•º ÏùΩÍ≥† Í∞êÏÉÅÎ¨∏ÏùÑ ÏûëÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî!</p>
        </div>

        <form class="report-form" id="reportForm">
          <div class="form-row">
            <div class="form-group">
              <label for="reportGrade">ÌïôÎÖÑ</label>
              <input type="text" id="reportGrade" disabled>
            </div>
            <div class="form-group">
              <label for="reportName">Ïù¥Î¶Ñ</label>
              <input type="text" id="reportName" disabled>
            </div>
          </div>

          <div class="form-group">
            <label for="reportStory">üìö Ïù¥ÏïºÍ∏∞ ÏÑ†ÌÉù</label>
            <select id="reportStory" required>
              <option value="">ÏùΩÏùÄ Ïù¥ÏïºÍ∏∞Î•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî</option>
            </select>
          </div>

          <div class="form-group">
            <label for="reportTitle">Ï†úÎ™©</label>
            <input type="text" id="reportTitle" placeholder="Í∞êÏÉÅÎ¨∏ Ï†úÎ™©ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî" required>
          </div>

          <div class="form-group" style="position: relative;">
            <label for="reportContent">ÎÇ¥Ïö©</label>
            <textarea id="reportContent" placeholder="Í≥†ÎûòÎèÑÏÑúÍ¥Ä Ïù¥ÏïºÍ∏∞Î•º ÏùΩÍ≥† ÎäêÎÇÄ Ï†êÏùÑ ÏûêÏú†Î°≠Í≤å ÏûëÏÑ±Ìï¥Î≥¥ÏÑ∏Ïöî..." required></textarea>
            <button type="button" onclick="checkSpellingOnly()" style="position: absolute; right: 8px; bottom: 8px; background: linear-gradient(135deg, #8b5cf6, #7c3aed); color: white; border: none; padding: 6px 12px; border-radius: 8px; font-size: 12px; font-weight: 500; cursor: pointer; opacity: 0.9;">üîç ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨</button>
          </div>

          <!-- ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Î°úÎî© -->
          <div class="spell-check-loading" id="spellCheckLoading" style="display: none;">
            <div class="loading-spinner"></div>
            <p>ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Ï§ë...</p>
          </div>

          <!-- ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Í≤∞Í≥º Ïù∏ÎùºÏù∏ ÌëúÏãú (Î∞ïÏä§ ÏóÜÏù¥) -->
          <div class="spell-check-inline" id="spellCheckInline" style="display: none;">
            <!-- ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÌëúÏãúÎê©ÎãàÎã§ -->
          </div>

          <div class="auto-save-indicator" id="autoSaveIndicator"></div>

          <div class="form-actions">
            <button type="button" class="btn-submit" onclick="submitFinal()">üìÑ Ï†úÏ∂úÌïòÍ∏∞</button>
            <button type="button" class="btn-kakao" onclick="shareKakao()">üí¨ Ïπ¥Ïπ¥Ïò§ÌÜ° Í≥µÏú†</button>
            <button type="button" class="btn-new" onclick="clearForm()">üîÑ ÏÉàÎ°ú ÏûëÏÑ±</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Í≤∞Í≥º Î™®Îã¨ -->
  <div class="spell-check-modal" id="spellCheckModal">
    <div class="spell-check-modal-content">
      <div class="spell-check-header">
        <h3>ÎßûÏ∂§Î≤ï Í≤ÄÏÇ¨ Í≤∞Í≥º</h3>
        <button class="spell-check-close" onclick="closeSpellCheckModal()">&times;</button>
      </div>

      <div class="spell-check-body" id="spellCheckBody">
        <!-- Í≤∞Í≥ºÍ∞Ä Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê©ÎãàÎã§ -->
      </div>

      <div class="spell-check-footer">
        <button class="btn-recheck" onclick="closeSpellCheckModal()">Ïû¨Ï†êÌïòÍ∏∞</button>
        <button class="btn-submit-final" onclick="submitFinal()">Ï†úÏ∂úÌïòÍ∏∞</button>
      </div>
    </div>
  </div>

  <!-- üîî Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ Ïä§ÌÉÄÏùº -->
  <style>
    /* Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ Ïò§Î≤ÑÎ†àÏù¥ */
    .notice-popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100000;
      animation: fadeIn 0.3s ease;
    }
    .notice-popup-overlay.active {
      display: flex;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ Ïπ¥Îìú */
    .notice-popup-card {
      width: min(500px, 92vw);
      max-height: 85vh;
      background: linear-gradient(145deg, #fff9f0 0%, #fff3e0 50%, #ffe8cc 100%);
      border-radius: 24px;
      box-shadow:
        0 25px 60px rgba(0, 0, 0, 0.35),
        0 0 0 1px rgba(255, 180, 100, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.8);
      overflow: hidden;
      animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    @keyframes popIn {
      from {
        opacity: 0;
        transform: scale(0.9) translateY(20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    /* Í≥µÏßÄÏÇ¨Ìï≠ Ìó§Îçî */
    .notice-popup-header {
      background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
      padding: 20px 24px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .notice-popup-header .whale-icon {
      font-size: 36px;
      animation: bounce 2s infinite;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-6px); }
    }
    .notice-popup-header h2 {
      margin: 0;
      color: #fff;
      font-size: 22px;
      font-weight: 700;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    .notice-popup-header .bell-icon {
      margin-left: auto;
      font-size: 24px;
      animation: ring 1.5s ease-in-out infinite;
    }
    @keyframes ring {
      0%, 100% { transform: rotate(0); }
      10%, 30% { transform: rotate(15deg); }
      20%, 40% { transform: rotate(-15deg); }
      50% { transform: rotate(0); }
    }

    /* Í≥µÏßÄÏÇ¨Ìï≠ Î≥∏Î¨∏ */
    .notice-popup-body {
      padding: 24px;
      max-height: 50vh;
      overflow-y: auto;
    }
    .notice-item {
      display: flex;
      gap: 12px;
      padding: 14px 16px;
      margin-bottom: 12px;
      background: rgba(255, 255, 255, 0.8);
      border-radius: 14px;
      border-left: 4px solid #ff9800;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      transition: all 0.2s ease;
    }
    .notice-item:hover {
      transform: translateX(4px);
      box-shadow: 0 4px 12px rgba(255, 152, 0, 0.2);
    }
    .notice-item:last-child {
      margin-bottom: 0;
    }
    .notice-num {
      flex-shrink: 0;
      width: 28px;
      height: 28px;
      background: linear-gradient(135deg, #ff9800, #f57c00);
      color: #fff;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 14px;
      box-shadow: 0 2px 6px rgba(255, 152, 0, 0.4);
    }
    .notice-text {
      flex: 1;
      font-size: 14px;
      line-height: 1.6;
      color: #4a3728;
    }
    .notice-text .highlight {
      color: #e65100;
      font-weight: 600;
    }
    .notice-text .sub-note {
      display: block;
      font-size: 12px;
      color: #8d6e5a;
      margin-top: 4px;
    }

    /* Í≥µÏßÄÏÇ¨Ìï≠ Ìë∏ÌÑ∞ */
    .notice-popup-footer {
      padding: 16px 24px 24px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      background: rgba(255, 248, 240, 0.5);
      border-top: 1px solid rgba(255, 180, 100, 0.3);
    }
    .notice-checkbox-wrap {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
    }
    .notice-checkbox-wrap input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: #ff9800;
      cursor: pointer;
    }
    .notice-checkbox-wrap label {
      font-size: 14px;
      color: #6d5a4a;
      cursor: pointer;
      user-select: none;
    }
    .notice-confirm-btn {
      width: 100%;
      padding: 14px 24px;
      background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
      color: #fff;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
      transition: all 0.2s ease;
    }
    .notice-confirm-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 152, 0, 0.5);
    }
    .notice-confirm-btn:active {
      transform: translateY(0);
    }
  </style>

  <!-- üîî Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ HTML -->
  <div class="notice-popup-overlay" id="noticePopup">
    <div class="notice-popup-card">
      <div class="notice-popup-header">
        <span class="whale-icon">üê≥</span>
        <h2>Í≥µÏßÄÏÇ¨Ìï≠</h2>
        <span class="bell-icon">üîî</span>
      </div>
      <div class="notice-popup-body">
        <div class="notice-item">
          <span class="notice-num">1</span>
          <p class="notice-text">
            <span class="highlight">Ïñ¥ÌúòÌïôÏäµ</span>ÏùÄ ÏµúÏ¥à 1Ìöå ÏôÑÎ£å ÌõÑÏóê Ïñ¥ÌúòÎ†• ÏßÄÏàòÍ∞Ä Î∞òÏòÅÎê©ÎãàÎã§!
          </p>
        </div>
        <div class="notice-item">
          <span class="notice-num">2</span>
          <p class="notice-text">
            <span class="highlight">AIÍ≥†ÎûòÏå§</span> ÌïòÎ£® Í≥†ÎûòÎ±ÉÏßÄÎäî Îß§Ïùº <span class="highlight">10Î±ÉÏßÄ</span>Í∞Ä ÏßÄÍ∏âÎê©ÎãàÎã§!
            <span class="sub-note">*Ï∂îÍ∞Ä Í≥†ÎûòÎ±ÉÏßÄ ÌöçÎìùÏùÄ Ïñ¥ÌúòÌïôÏäµÏùÑ ÌÜµÌï¥ Í∞ÄÎä•</span>
          </p>
        </div>
        <div class="notice-item">
          <span class="notice-num">3</span>
          <p class="notice-text">
            ÌïôÏäµÏã§Ïùò <span class="highlight">AIÏ∂îÏ≤úÍ≥ºÏ†ú</span>Îäî ÎØ∏Ìù°Ìïú Îã®ÏõêÏùÑ AIÍ≥†ÎûòÏå§Ïù¥ ÌôïÏù∏ÌïòÏó¨ Î∂ÄÏó¨ÎêòÎäî Í≥ºÏ†úÏûÖÎãàÎã§!
          </p>
        </div>
        <div class="notice-item">
          <span class="notice-num">4</span>
          <p class="notice-text">
            <span class="highlight">Í≥†Îûò ÎèÖÏÑú Í∞êÏÉÅÎ¨∏</span>ÏùÄ ÏµúÏÜå Ïõî 1Ìöå Ï†úÏ∂úÏù¥ÏßÄÎßå ÏñºÎßàÎì†ÏßÄ Ï∂îÍ∞ÄÎ°ú Ï†úÏ∂úÏù¥ Í∞ÄÎä•Ìï©ÎãàÎã§!
          </p>
        </div>
        <div class="notice-item">
          <span class="notice-num">5</span>
          <p class="notice-text">
            ÌïôÏäµÏã§Ïùò <span class="highlight">ÏôÑÎ£åÎêú ÌïôÏäµÍ≥ºÏ†ú</span>Îäî ÏÑ†ÏÉùÎãò ÌôïÏù∏ ÌõÑ ÏÇ≠Ï†úÍ∞Ä Í∞ÄÎä•Ìï©ÎãàÎã§!
          </p>
        </div>
        <div class="notice-item">
          <span class="notice-num">6</span>
          <p class="notice-text">
            <span class="highlight">Ï¢ÖÌï©Î¶¨Ìè¨Ìä∏</span>Îäî ÏµúÏã† ÏôÑÎ£åÎêú Í≥ºÏ†ú ÏàúÏúºÎ°ú Í∏∞Î°ùÎê©ÎãàÎã§!
          </p>
        </div>
      </div>
      <div class="notice-popup-footer">
        <div class="notice-checkbox-wrap">
          <input type="checkbox" id="noShowToday">
          <label for="noShowToday">Ïò§Îäò ÌïòÎ£® Îçî Ïù¥ÏÉÅ Î≥¥ÏßÄ ÏïäÍ∏∞</label>
        </div>
        <button class="notice-confirm-btn" onclick="closeNoticePopup()">ÌôïÏù∏</button>
      </div>
    </div>
  </div>

  <!-- üîî Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ Ïä§ÌÅ¨Î¶ΩÌä∏ -->
  <script>
    // Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ Îã´Í∏∞
    function closeNoticePopup() {
      const popup = document.getElementById('noticePopup');
      const checkbox = document.getElementById('noShowToday');

      // "Ïò§Îäò ÌïòÎ£® Î≥¥ÏßÄ ÏïäÍ∏∞" Ï≤¥ÌÅ¨ Ïãú localStorageÏóê Ï†ÄÏû•
      if (checkbox && checkbox.checked) {
        const today = new Date().toDateString();
        localStorage.setItem('noticePopup_noShowDate', today);
      }

      // ÌåùÏóÖ Îã´Í∏∞ Ïï†ÎãàÎ©îÏù¥ÏÖò
      popup.style.animation = 'fadeOut 0.3s ease forwards';
      setTimeout(() => {
        popup.classList.remove('active');
        popup.style.animation = '';
      }, 300);
    }

    // Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ ÌëúÏãú Ïó¨Î∂Ä ÌôïÏù∏
    function shouldShowNoticePopup() {
      const noShowDate = localStorage.getItem('noticePopup_noShowDate');
      const today = new Date().toDateString();

      // Ïò§Îäò ÎÇ†ÏßúÏôÄ Ï†ÄÏû•Îêú ÎÇ†ÏßúÍ∞Ä Í∞ôÏúºÎ©¥ ÌëúÏãú ÏïàÌï®
      if (noShowDate === today) {
        return false;
      }
      return true;
    }

    // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ ÌëúÏãú
    document.addEventListener('DOMContentLoaded', function() {
      if (shouldShowNoticePopup()) {
        // ÏïΩÍ∞ÑÏùò ÎîúÎ†àÏù¥ ÌõÑ ÌëúÏãú (Î°úÎî© ÏôÑÎ£å ÌõÑ)
        setTimeout(() => {
          const popup = document.getElementById('noticePopup');
          if (popup) {
            popup.classList.add('active');
          }
        }, 1000);
      }
    });

    // fadeOut Ïï†ÎãàÎ©îÏù¥ÏÖò Ï∂îÍ∞Ä
    const styleSheet = document.createElement('style');
    styleSheet.textContent = `
      @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
      }
    `;
    document.head.appendChild(styleSheet);
  </script>

  <!-- üìù ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ ÏãúÏä§ÌÖú Ïä§ÌÉÄÏùº -->
  <style>
    /* Í¥ÄÎ¨∏ ÌåùÏóÖ Ïò§Î≤ÑÎ†àÏù¥ */
    .gate-popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(8px);
      z-index: 100000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .gate-popup-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    /* Í¥ÄÎ¨∏ ÌåùÏóÖ Ïπ¥Îìú */
    .gate-popup-card {
      background: linear-gradient(135deg, #fff 0%, #faf8f6 100%);
      border-radius: 24px;
      width: 90%;
      max-width: 400px;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
      overflow: hidden;
      animation: gatePopIn 0.4s ease-out;
      text-align: center;
    }
    @keyframes gatePopIn {
      from {
        opacity: 0;
        transform: scale(0.85) translateY(20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    /* Í¥ÄÎ¨∏ ÌåùÏóÖ Ìó§Îçî */
    .gate-popup-header {
      background: linear-gradient(135deg, #8b2f2f 0%, #c0392b 100%);
      padding: 24px;
      color: #fff;
    }
    .gate-popup-header .trophy-icon {
      font-size: 48px;
      display: block;
      margin-bottom: 12px;
      animation: bounce 1s ease infinite;
    }
    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }
    .gate-popup-header h2 {
      font-size: 22px;
      font-weight: 700;
      margin: 0 0 8px 0;
    }
    .gate-popup-header p {
      font-size: 14px;
      opacity: 0.9;
      margin: 0;
    }

    /* Í¥ÄÎ¨∏ ÌåùÏóÖ Î∞îÎîî */
    .gate-popup-body {
      padding: 24px;
    }
    .gate-popup-body .gate-message {
      font-size: 16px;
      color: #4a3728;
      line-height: 1.7;
      margin-bottom: 20px;
    }
    .gate-popup-body .gate-message strong {
      color: #8b2f2f;
    }
    .gate-completed-count {
      background: #fef5f5;
      border: 2px solid #8b2f2f;
      border-radius: 12px;
      padding: 16px;
      margin-bottom: 20px;
    }
    .gate-completed-count .count-num {
      font-size: 36px;
      font-weight: 700;
      color: #8b2f2f;
    }
    .gate-completed-count .count-label {
      font-size: 14px;
      color: #666;
      display: block;
      margin-top: 4px;
    }

    /* Í¥ÄÎ¨∏ ÌåùÏóÖ Î≤ÑÌäº */
    .gate-popup-footer {
      padding: 0 24px 24px;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .gate-start-btn {
      width: 100%;
      padding: 16px 24px;
      background: linear-gradient(135deg, #8b2f2f 0%, #c0392b 100%);
      color: #fff;
      border: none;
      border-radius: 14px;
      font-size: 17px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 6px 20px rgba(139, 47, 47, 0.4);
      transition: all 0.2s ease;
    }
    .gate-start-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(139, 47, 47, 0.5);
    }
    .gate-skip-btn {
      background: transparent;
      border: 2px solid #ddd;
      color: #888;
      padding: 12px 20px;
      border-radius: 12px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .gate-skip-btn:hover {
      border-color: #aaa;
      color: #666;
    }
  </style>

  <!-- üìù ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ ÌåùÏóÖ HTML -->
  <div class="gate-popup-overlay" id="gatePopup">
    <div class="gate-popup-card">
      <div class="gate-popup-header">
        <span class="trophy-icon">üèÜ</span>
        <h2>ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ <span id="gateLevel">1</span></h2>
        <p>10Í∞ú Îã®Ïõê ÌïôÏäµ ÏôÑÎ£å!</p>
      </div>
      <div class="gate-popup-body">
        <div class="gate-completed-count">
          <span class="count-num" id="gateCompletedCount">10</span>
          <span class="count-label">ÏôÑÎ£å Îã®Ïõê</span>
        </div>
        <p class="gate-message">
          Ï∂ïÌïòÌï©ÎãàÎã§! <strong id="gateRequiredCount">10</strong>Í∞ú Îã®ÏõêÏùÑ Î™®Îëê ÏôÑÎ£åÌñàÏäµÎãàÎã§.<br><br>
          Îã§Ïùå Îã®ÏõêÏùÑ ÌïôÏäµÌïòÎ†§Î©¥<br>
          <strong>ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ ÏãúÌóò</strong>ÏùÑ ÌÜµÍ≥ºÌï¥Ïïº Ìï©ÎãàÎã§.
        </p>
      </div>
      <div class="gate-popup-footer">
        <button class="gate-start-btn" onclick="startGateQuiz()">
          üìù ÌòïÏÑ±ÌèâÍ∞Ä ÏãúÏûëÌïòÍ∏∞
        </button>
        <button class="gate-skip-btn" onclick="closeGatePopup()">
          ÎÇòÏ§ëÏóê ÌïòÍ∏∞
        </button>
      </div>
    </div>
  </div>

  <!-- üîí ÌïôÏäµ Ïû†Í∏à Î™®Îã¨ -->
  <style>
    .lock-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(8px);
      z-index: 100001;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }
    .lock-modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }
    .lock-modal-card {
      background: linear-gradient(135deg, #fff 0%, #faf8f6 100%);
      border-radius: 24px;
      width: 90%;
      max-width: 380px;
      box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
      overflow: hidden;
      animation: lockPopIn 0.4s ease-out;
      text-align: center;
    }
    @keyframes lockPopIn {
      from { opacity: 0; transform: scale(0.85) translateY(20px); }
      to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .lock-modal-header {
      background: linear-gradient(135deg, #5a5a5a 0%, #3d3d3d 100%);
      padding: 24px;
      color: #fff;
    }
    .lock-modal-header .lock-icon {
      font-size: 48px;
      display: block;
      margin-bottom: 12px;
    }
    .lock-modal-header h2 {
      font-size: 20px;
      font-weight: 700;
      margin: 0;
    }
    .lock-modal-body {
      padding: 24px;
    }
    .lock-modal-body p {
      font-size: 15px;
      color: #4a3728;
      line-height: 1.7;
      margin: 0 0 20px 0;
    }
    .lock-modal-body .gate-link {
      color: #8b2f2f;
      font-weight: 700;
      text-decoration: underline;
      cursor: pointer;
    }
    .lock-modal-footer {
      padding: 0 24px 24px;
    }
    .lock-modal-footer button {
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .lock-go-gate-btn {
      background: linear-gradient(135deg, #8b2f2f 0%, #c0392b 100%);
      color: #fff;
      margin-bottom: 10px;
    }
    .lock-go-gate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(139, 47, 47, 0.3);
    }
    .lock-close-btn {
      background: #f0ebe5;
      color: #4a3728;
    }
    .lock-close-btn:hover {
      background: #e5ded6;
    }

    /* ===== ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ Î™®Îã¨ ===== */
    .gate-quiz-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 100001;
      padding: 20px;
    }
    .gate-quiz-modal.active {
      display: flex;
    }
    .gate-quiz-container {
      background: linear-gradient(145deg, #fffaf5, #fff5eb);
      border-radius: 24px;
      padding: 30px;
      max-width: 700px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: 0 30px 80px rgba(0, 0, 0, 0.4);
      animation: gateSlideIn 0.4s ease-out;
      position: relative;
    }
    @keyframes gateSlideIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .gate-quiz-close-btn {
      position: absolute;
      top: 15px;
      right: 15px;
      width: 36px;
      height: 36px;
      border: none;
      background: #f5f0eb;
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: #8b2f2f;
      transition: all 0.2s ease;
      z-index: 10;
    }
    .gate-quiz-close-btn:hover {
      background: #8b2f2f;
      color: #fff;
      transform: scale(1.1);
    }
    .gate-quiz-header {
      text-align: center;
      margin-bottom: 20px;
    }
    .gate-quiz-header h1 {
      font-size: 24px;
      color: #8b2f2f;
      margin: 0 0 8px 0;
    }
    .gate-quiz-header .gate-number {
      font-size: 16px;
      color: #666;
    }
    .gate-quiz-header .gate-info {
      font-size: 13px;
      color: #999;
      margin-top: 5px;
    }
    .gate-progress-bar {
      height: 8px;
      background: #e8e0d8;
      border-radius: 4px;
      margin-bottom: 20px;
      overflow: hidden;
    }
    .gate-progress-bar .fill {
      height: 100%;
      background: linear-gradient(90deg, #8b2f2f, #c0392b);
      border-radius: 4px;
      transition: width 0.3s ease;
    }
    .gate-unit-btn {
      background: #fff8f0;
      border: 2px solid #e8d4c4;
      padding: 12px 16px;
      border-radius: 12px;
      margin-bottom: 12px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: space-between;
      transition: all 0.3s ease;
    }
    .gate-unit-btn:hover {
      background: #fff0e0;
      border-color: #d4b8a0;
    }
    .gate-unit-btn .title-text {
      font-size: 14px;
      color: #8b2f2f;
      font-weight: 600;
    }
    .gate-unit-btn .title-hint {
      font-size: 11px;
      color: #999;
      margin-left: 6px;
    }
    .gate-unit-btn .arrow {
      font-size: 12px;
      color: #8b2f2f;
      transition: transform 0.3s ease;
    }
    .gate-unit-btn.open .arrow {
      transform: rotate(180deg);
    }
    .gate-passage {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease, padding 0.3s ease;
      background: #fffaf5;
      border-radius: 12px;
      margin-bottom: 12px;
    }
    .gate-passage.open {
      max-height: 300px;
      padding: 16px;
      border: 1px solid #f0e0d0;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    .gate-passage p {
      font-size: 13px;
      color: #4a3728;
      line-height: 1.7;
      margin-bottom: 10px;
      text-align: justify;
    }
    .gate-passage p:last-child { margin-bottom: 0; }
    .gate-passage b { color: #8b2f2f; font-weight: 600; }
    .gate-question-box {
      background: #faf8f6;
      padding: 20px;
      border-radius: 14px;
      margin-bottom: 20px;
      border-left: 4px solid #8b2f2f;
    }
    .gate-question-box .question-text {
      font-size: 15px;
      color: #3b2a1a;
      font-weight: 600;
      line-height: 1.6;
    }
    .gate-options {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 20px;
    }
    .gate-option-btn {
      background: #fff;
      border: 2px solid #e8d4c4;
      padding: 14px 18px;
      border-radius: 12px;
      font-size: 14px;
      color: #3b2a1a;
      text-align: left;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .gate-option-btn:hover {
      border-color: #d4b8a0;
      background: #fffaf5;
    }
    .gate-option-btn.selected {
      border-color: #8b2f2f;
      background: linear-gradient(135deg, #fff5f0, #fff0e8);
      color: #8b2f2f;
      font-weight: 600;
    }
    .gate-option-btn.correct {
      border-color: #27ae60;
      background: linear-gradient(135deg, #e8f8f0, #d5f5e3);
      color: #27ae60;
    }
    .gate-option-btn.wrong {
      border-color: #e74c3c;
      background: linear-gradient(135deg, #fdf2f2, #fdeaea);
      color: #e74c3c;
    }
    .gate-submit-btn {
      width: 100%;
      padding: 16px;
      background: linear-gradient(135deg, #8b2f2f 0%, #c0392b 100%);
      color: #fff;
      border: none;
      border-radius: 14px;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .gate-submit-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(139, 47, 47, 0.3);
    }
    .gate-submit-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .gate-loading {
      text-align: center;
      padding: 60px 20px;
    }
    .gate-loading-spinner {
      width: 50px;
      height: 50px;
      border: 4px solid #e8d4c4;
      border-top: 4px solid #8b2f2f;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }
    .gate-loading-text {
      color: #8b2f2f;
      font-size: 16px;
      font-weight: 600;
    }
    .gate-result {
      text-align: center;
      padding: 40px 20px;
    }
    .gate-result-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }
    .gate-result-title {
      font-size: 24px;
      font-weight: 700;
      margin-bottom: 12px;
    }
    .gate-result-title.success { color: #27ae60; }
    .gate-result-title.fail { color: #e74c3c; }
    .gate-result-msg {
      font-size: 15px;
      color: #666;
      line-height: 1.6;
      margin-bottom: 24px;
    }
    .gate-result-btn {
      padding: 14px 40px;
      border: none;
      border-radius: 12px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .gate-result-btn.primary {
      background: linear-gradient(135deg, #8b2f2f 0%, #c0392b 100%);
      color: #fff;
    }
    .gate-result-btn.primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 15px rgba(139, 47, 47, 0.3);
    }
    .gate-result-btn.secondary {
      background: #f0ebe5;
      color: #4a3728;
      margin-left: 10px;
    }
    .gate-result-btn.secondary:hover {
      background: #e5ded6;
    }
    @media (max-width: 600px) {
      .gate-quiz-container {
        padding: 20px;
        border-radius: 18px;
      }
      .gate-quiz-header h1 { font-size: 20px; }
      .gate-option-btn { padding: 12px 14px; font-size: 13px; }
    }
  </style>

  <!-- üìù ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ Î™®Îã¨ -->
  <div id="gateQuizModal" class="gate-quiz-modal">
    <div class="gate-quiz-container" id="gateQuizContainer">
      <button class="gate-quiz-close-btn" onclick="closeGateQuizModal()" title="Îã´Í∏∞">‚úï</button>
      <div class="gate-loading">
        <div class="gate-loading-spinner"></div>
        <p class="gate-loading-text">ÌòïÏÑ±ÌèâÍ∞Ä Î¨∏Ï†úÎ•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
      </div>
    </div>
  </div>

  <div id="lockModal" class="lock-modal-overlay">
    <div class="lock-modal-card">
      <div class="lock-modal-header">
        <span class="lock-icon">üîí</span>
        <h2>ÌïôÏäµ Ïû†Í∏à</h2>
      </div>
      <div class="lock-modal-body">
        <p>
          Ïù¥ Îã®ÏõêÏùÄ <strong>ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ <span id="lockGateLevel">1</span></strong>ÏùÑ<br>
          ÌÜµÍ≥ºÌï¥Ïïº ÌïôÏäµÌï† Ïàò ÏûàÏäµÎãàÎã§.<br><br>
          Í¥ÄÎ¨∏ ÏãúÌóòÏóê ÎèÑÏ†ÑÌï¥Î≥¥ÏÑ∏Ïöî!
        </p>
      </div>
      <div class="lock-modal-footer">
        <button class="lock-go-gate-btn" onclick="goToGateFromLock()">
          üìù ÌòïÏÑ±ÌèâÍ∞Ä ÏãúÌóò Î≥¥Îü¨ Í∞ÄÍ∏∞
        </button>
        <button class="lock-close-btn" onclick="closeLockModal()">
          Îã´Í∏∞
        </button>
      </div>
    </div>
  </div>

  <!-- üìù ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ ÏãúÏä§ÌÖú Ïä§ÌÅ¨Î¶ΩÌä∏ -->
  <script>
    // ===== ÌòïÏÑ±ÌèâÍ∞Ä Î™®Îã¨ Ï†ÑÏó≠ Î≥ÄÏàò =====
    let gateQuizData = [];
    let gateCurrentIndex = 0;
    let gateSelectedAnswer = null;
    let gateCurrentLevel = 1;

    // ===== Î≥¥Í∏∞ ÏÑûÍ∏∞ Ìï®Ïàò (Fisher-Yates ÏïåÍ≥†Î¶¨Ï¶ò) =====
    function shuffleQuizOptions(quizzes) {
      return quizzes.map(quiz => {
        // ÏõêÎ≥∏ Ï†ïÎãµ Ïù∏Îç±Ïä§ (1-based ‚Üí 0-based)
        const correctIdx = (quiz.correct || quiz.answer) - 1;
        const correctOption = quiz.options[correctIdx];

        // Î≥¥Í∏∞ Î∞∞Ïó¥ Î≥µÏÇ¨ ÌõÑ ÏÑûÍ∏∞
        const shuffledOptions = [...quiz.options];
        for (let i = shuffledOptions.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffledOptions[i], shuffledOptions[j]] = [shuffledOptions[j], shuffledOptions[i]];
        }

        // ÏÑûÏù∏ Î∞∞Ïó¥ÏóêÏÑú Ï†ïÎãµÏùò ÏÉàÎ°úÏö¥ ÏúÑÏπò Ï∞æÍ∏∞ (1-basedÎ°ú Ï†ÄÏû•)
        const newCorrectIdx = shuffledOptions.indexOf(correctOption) + 1;

        return {
          ...quiz,
          options: shuffledOptions,
          correct: newCorrectIdx,
          answer: newCorrectIdx
        };
      });
    }

    // ===== Í¥ÄÎ¨∏ ÌÜµÍ≥º Ï∂ïÌïò Ìö®Í≥º (Ìè≠Ï£ΩÎßå) =====
    function playGatePassCelebration() {
      // ÌôîÎ†§Ìïú Ìè≠Ï£Ω Ìö®Í≥º (Ïó¨Îü¨ Î≤à Ïó∞ÏÜç Î∞úÏÇ¨) - z-indexÎ•º Î™®Îã¨Î≥¥Îã§ ÎÜíÍ≤å ÏÑ§Ï†ï
      const confettiZIndex = 999999;
      if (typeof confetti === 'function') {
        // Ï≤´ Î≤àÏß∏ Ìè≠Ï£Ω - Ï§ëÏïôÏóêÏÑú ÏúÑÎ°ú
        confetti({
          particleCount: 100,
          spread: 70,
          origin: { x: 0.5, y: 0.6 },
          colors: ['#ff0000', '#ff7700', '#ffff00', '#00ff00', '#0099ff', '#6633ff'],
          zIndex: confettiZIndex
        });

        // Îëê Î≤àÏß∏ Ìè≠Ï£Ω - ÏôºÏ™ΩÏóêÏÑú
        setTimeout(() => {
          confetti({
            particleCount: 50,
            angle: 60,
            spread: 55,
            origin: { x: 0, y: 0.6 },
            colors: ['#ff69b4', '#ffd700', '#00ffff'],
            zIndex: confettiZIndex
          });
        }, 200);

        // ÏÑ∏ Î≤àÏß∏ Ìè≠Ï£Ω - Ïò§Î•∏Ï™ΩÏóêÏÑú
        setTimeout(() => {
          confetti({
            particleCount: 50,
            angle: 120,
            spread: 55,
            origin: { x: 1, y: 0.6 },
            colors: ['#ff69b4', '#ffd700', '#00ffff'],
            zIndex: confettiZIndex
          });
        }, 200);

        // ÎÑ§ Î≤àÏß∏ Ìè≠Ï£Ω - Î≥Ñ Î™®Ïñë
        setTimeout(() => {
          confetti({
            particleCount: 80,
            spread: 100,
            origin: { x: 0.5, y: 0.5 },
            shapes: ['star'],
            colors: ['#ffd700', '#ffec8b', '#fff8dc'],
            zIndex: confettiZIndex
          });
        }, 500);

        // Ï∂îÍ∞Ä ÌôîÎ†§Ìïú Ìö®Í≥º (ÏùºÎ∞ò: 2Ï¥à, 40Í¥ÄÎ¨∏: 5Ï¥à)
        setTimeout(() => {
          const duration = gateCurrentLevel === 40 ? 5000 : 2000;
          const end = Date.now() + duration;
          const colors = gateCurrentLevel === 40
            ? ['#bb0000', '#ffffff', '#ffd700', '#ff69b4']
            : ['#667eea', '#764ba2', '#f093fb', '#ffd700'];

          const frame = () => {
            confetti({
              particleCount: gateCurrentLevel === 40 ? 7 : 4,
              angle: 60,
              spread: 55,
              origin: { x: 0 },
              colors: colors,
              zIndex: confettiZIndex
            });
            confetti({
              particleCount: gateCurrentLevel === 40 ? 7 : 4,
              angle: 120,
              spread: 55,
              origin: { x: 1 },
              colors: colors,
              zIndex: confettiZIndex
            });

            if (Date.now() < end) {
              requestAnimationFrame(frame);
            }
          };
          frame();
        }, 800);
      }
    }

    // Í¥ÄÎ¨∏ ÏãúÌóò ÏãúÏûë (Î™®Îã¨ Ïó¥Í∏∞)
    function startGateQuiz() {
      const gateLevel = document.getElementById('gateLevel').textContent;
      // Í¥ÄÎ¨∏ ÏïàÎÇ¥ ÌåùÏóÖ Îã´Í∏∞
      closeGatePopup();
      // ÌòïÏÑ±ÌèâÍ∞Ä Î™®Îã¨ Ïó¥Í∏∞
      openGateQuizModal(parseInt(gateLevel));
    }

    // ÌòïÏÑ±ÌèâÍ∞Ä Î™®Îã¨ Ïó¥Í∏∞
    async function openGateQuizModal(level) {
      gateCurrentLevel = level;
      gateQuizData = [];
      gateCurrentIndex = 0;
      gateSelectedAnswer = null;

      const modal = document.getElementById('gateQuizModal');
      const container = document.getElementById('gateQuizContainer');

      // Î™®Îã¨ ÌëúÏãú (Î°úÎî© ÏÉÅÌÉú)
      container.innerHTML = `
        <button class="gate-quiz-close-btn" onclick="closeGateQuizModal()" title="Îã´Í∏∞">‚úï</button>
        <div class="gate-loading">
          <div class="gate-loading-spinner"></div>
          <p class="gate-loading-text">ÌòïÏÑ±ÌèâÍ∞Ä Î¨∏Ï†úÎ•º Î∂àÎü¨Ïò§Îäî Ï§ë...</p>
        </div>
      `;
      modal.classList.add('active');

      // API Ìò∏Ï∂úÌïòÏó¨ Î¨∏Ï†ú Í∞ÄÏ†∏Ïò§Í∏∞
      try {
        const saved = localStorage.getItem('currentStudent');
        if (!saved) {
          alert('Î°úÍ∑∏Ïù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.');
          closeGateQuizModal();
          return;
        }
        const student = JSON.parse(saved);
        const res = await fetch(`/api/gate-quiz/generate?grade=${encodeURIComponent(student.grade)}&name=${encodeURIComponent(student.name)}&gate=${level}`);
        const data = await res.json();

        if (!data.ok) {
          container.innerHTML = `
            <button class="gate-quiz-close-btn" onclick="closeGateQuizModal()" title="Îã´Í∏∞">‚úï</button>
            <div class="gate-result">
              <div class="gate-result-icon">‚ùå</div>
              <h2 class="gate-result-title fail">Î¨∏Ï†ú ÏÉùÏÑ± Ïã§Ìå®</h2>
              <p class="gate-result-msg">${data.error || 'Î¨∏Ï†úÎ•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.'}</p>
              <button class="gate-result-btn secondary" onclick="closeGateQuizModal()">Îã´Í∏∞</button>
            </div>
          `;
          return;
        }

        gateQuizData = data.quizzes || data.questions;
        // Í∞Å Î¨∏Ï†úÏùò Î≥¥Í∏∞Î•º ÎûúÎç§ÏúºÎ°ú ÏÑûÍ∏∞
        gateQuizData = shuffleQuizOptions(gateQuizData);
        renderGateQuiz();
      } catch (err) {
        console.error('[Gate Quiz Error]', err);
        container.innerHTML = `
          <button class="gate-quiz-close-btn" onclick="closeGateQuizModal()" title="Îã´Í∏∞">‚úï</button>
          <div class="gate-result">
            <div class="gate-result-icon">‚ùå</div>
            <h2 class="gate-result-title fail">Ïò§Î•ò Î∞úÏÉù</h2>
            <p class="gate-result-msg">ÏÑúÎ≤Ñ Ïó∞Í≤∞Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.</p>
            <button class="gate-result-btn secondary" onclick="closeGateQuizModal()">Îã´Í∏∞</button>
          </div>
        `;
      }
    }

    // ÌòïÏÑ±ÌèâÍ∞Ä Î™®Îã¨ Îã´Í∏∞
    function closeGateQuizModal() {
      if (gateQuizData.length > 0 && gateCurrentIndex < gateQuizData.length) {
        if (!confirm('ÌòïÏÑ±ÌèâÍ∞ÄÎ•º Ï¢ÖÎ£åÌïòÏãúÍ≤†ÏäµÎãàÍπå?\nÌÜµÍ≥ºÌïòÏßÄ Î™ªÌïòÎ©¥ Îã§Ïùå Îã®Ïõê ÌïôÏäµÏù¥ Ï†úÌïúÎê©ÎãàÎã§.')) {
          return;
        }
      }
      document.getElementById('gateQuizModal').classList.remove('active');
      gateQuizData = [];
      gateCurrentIndex = 0;
    }

    // ÌòïÏÑ±ÌèâÍ∞Ä Î¨∏Ï†ú Î†åÎçîÎßÅ
    function renderGateQuiz() {
      const container = document.getElementById('gateQuizContainer');
      const quiz = gateQuizData[gateCurrentIndex];
      const qNum = gateCurrentIndex + 1;

      const passageHTML = quiz.passage && quiz.passage.length > 0
        ? quiz.passage.map(p => `<p>${p}</p>`).join('')
        : '<p>Î≥∏Î¨∏ÏùÑ Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.</p>';

      container.innerHTML = `
        <button class="gate-quiz-close-btn" onclick="closeGateQuizModal()" title="Îã´Í∏∞">‚úï</button>
        <div class="gate-quiz-header">
          <h1>üìù ÌòïÏÑ±ÌèâÍ∞Ä Í¥ÄÎ¨∏ ${gateCurrentLevel}</h1>
          <p class="gate-number">10Í∞ú Î¨∏Ï†ú Ï§ë ${qNum}Î≤àÏß∏</p>
          <p class="gate-info">Î™®Îì† Î¨∏Ï†úÎ•º Ïó∞ÏÜçÏúºÎ°ú ÎßûÏ∂∞Ïïº ÌÜµÍ≥ºÌï©ÎãàÎã§</p>
        </div>

        <div class="gate-progress-bar">
          <div class="fill" style="width: ${(qNum / 10) * 100}%"></div>
        </div>

        <div class="gate-unit-btn" onclick="toggleGatePassage()">
          <div>
            <span class="title-text">üìñ ${quiz.unitTitle}</span>
            <span class="title-hint">ÏóêÏÑú Ï∂úÏ†ú (ÌÅ¥Î¶≠ÌïòÏó¨ Î≥∏Î¨∏ Î≥¥Í∏∞)</span>
          </div>
          <span class="arrow">‚ñº</span>
        </div>

        <div class="gate-passage" id="gatePassageContent">
          ${passageHTML}
        </div>

        <div class="gate-question-box">
          <p class="question-text">${quiz.question}</p>
        </div>

        <div class="gate-options">
          ${quiz.options.map((opt, idx) => `
            <button class="gate-option-btn" onclick="selectGateAnswer(${idx})">
              ${['‚ë†', '‚ë°', '‚ë¢', '‚ë£'][idx]} ${opt}
            </button>
          `).join('')}
        </div>

        <button class="gate-submit-btn" onclick="submitGateAnswer()" disabled>
          ÎãµÏïà Ï†úÏ∂ú
        </button>
      `;
      gateSelectedAnswer = null;
    }

    // Î≥∏Î¨∏ ÌÜ†Í∏Ä
    function toggleGatePassage() {
      const btn = document.querySelector('.gate-unit-btn');
      const content = document.getElementById('gatePassageContent');
      btn.classList.toggle('open');
      content.classList.toggle('open');
    }

    // ÎãµÏïà ÏÑ†ÌÉù
    function selectGateAnswer(index) {
      gateSelectedAnswer = index;
      const buttons = document.querySelectorAll('.gate-option-btn');
      buttons.forEach(btn => btn.classList.remove('selected'));
      buttons[index].classList.add('selected');
      document.querySelector('.gate-submit-btn').disabled = false;
    }

    // ÎãµÏïà Ï†úÏ∂ú
    async function submitGateAnswer() {
      if (gateSelectedAnswer === null) return;

      const quiz = gateQuizData[gateCurrentIndex];
      // APIÏóêÏÑú correctÎäî 1-4 Í∏∞Î∞ò, ÌôîÎ©¥ÏóêÏÑúÎäî 0-3 Í∏∞Î∞ò Ïù∏Îç±Ïä§ ÏÇ¨Ïö©
      const correctIndex = (quiz.correct || quiz.answer) - 1;
      const isCorrect = gateSelectedAnswer === correctIndex;

      const buttons = document.querySelectorAll('.gate-option-btn');
      buttons.forEach((btn, idx) => {
        btn.onclick = null;
        if (idx === correctIndex) btn.classList.add('correct');
        if (idx === gateSelectedAnswer && !isCorrect) btn.classList.add('wrong');
      });
      document.querySelector('.gate-submit-btn').disabled = true;

      if (isCorrect) {
        // Ï†ïÎãµ
        if (gateCurrentIndex < gateQuizData.length - 1) {
          // Îã§Ïùå Î¨∏Ï†úÎ°ú
          setTimeout(() => {
            gateCurrentIndex++;
            gateSelectedAnswer = null;
            renderGateQuiz();
          }, 1000);
        } else {
          // Î™®Îëê ÌÜµÍ≥º!
          setTimeout(() => saveGatePass(), 1000);
        }
      } else {
        // Ïò§Îãµ - Ïã§Ìå®
        setTimeout(() => showGateFail(), 1500);
      }
    }

    // Í¥ÄÎ¨∏ ÌÜµÍ≥º Ï†ÄÏû•
    async function saveGatePass() {
      const container = document.getElementById('gateQuizContainer');
      try {
        const saved = localStorage.getItem('currentStudent');
        const student = JSON.parse(saved);

        console.log('[Gate Pass] Ï†ÄÏû• ÏöîÏ≤≠:', { grade: student.grade, name: student.name, gateLevel: gateCurrentLevel });

        const res = await fetch('/api/gate-quiz/pass', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({
            grade: student.grade,
            name: student.name,
            gate: gateCurrentLevel  // ÏÑúÎ≤ÑÏóêÏÑú 'gate'Î•º Í∏∞ÎåÄÌï®
          })
        });
        const data = await res.json();
        console.log('[Gate Pass] ÏùëÎãµ:', data);

        if (!data.ok) {
          throw new Error(data.error || 'Ï†ÄÏû• Ïã§Ìå®');
        }

        // Ï†ÑÏó≠ Î≥ÄÏàò ÏóÖÎç∞Ïù¥Ìä∏
        passedGates = gateCurrentLevel;

        // ÌÜµÍ≥ºÌïú Í¥ÄÎ¨∏ÏùÄ dismissedÏóêÏÑú Ï†úÍ±∞ (Îã§Ïùå Í¥ÄÎ¨∏ ÌåùÏóÖÏù¥ Îú®ÎèÑÎ°ù)
        sessionStorage.removeItem('gatePopupDismissed');

        // ÌôîÎ†§Ìïú Ìè≠Ï£Ω Ìö®Í≥º + ÎπµÎπ†Î†à Ìö®Í≥ºÏùå
        playGatePassCelebration();

        // ÎßàÏßÄÎßâ Í¥ÄÎ¨∏(40) ÌÜµÍ≥º Ïãú ÌäπÎ≥Ñ Î©îÏãúÏßÄ
        const isFinalGate = gateCurrentLevel === 40;
        const resultMsg = isFinalGate
          ? `üéä Ï∂ïÌïòÌï©ÎãàÎã§! Î™®Îì† 400Í∞ú Îã®ÏõêÏùÑ ÏôÑÎ£åÌïòÏÖ®ÏäµÎãàÎã§!<br>ÎåÄÎã®Ìïú ÏÑ±Ï∑®ÏûÖÎãàÎã§!`
          : `Ï∂ïÌïòÌï©ÎãàÎã§! 10Î¨∏Ï†úÎ•º Î™®Îëê ÎßûÏ∂îÏÖ®ÏäµÎãàÎã§.<br>ÏÉàÎ°úÏö¥ Îã®ÏõêÏùò ÌïôÏäµÏù¥ Ìï¥Í∏àÎêòÏóàÏäµÎãàÎã§.`;
        const resultIcon = isFinalGate ? 'üèÜ' : 'üéâ';
        const buttonText = isFinalGate ? 'ÏôÑÎ£å' : 'ÌïôÏäµ Í≥ÑÏÜçÌïòÍ∏∞';

        container.innerHTML = `
          <button class="gate-quiz-close-btn" onclick="closeGateQuizModalForce()" title="Îã´Í∏∞">‚úï</button>
          <div class="gate-result">
            <div class="gate-result-icon">${resultIcon}</div>
            <h2 class="gate-result-title success">Í¥ÄÎ¨∏ ${gateCurrentLevel} ÌÜµÍ≥º!</h2>
            <p class="gate-result-msg">${resultMsg}</p>
            <button class="gate-result-btn primary" onclick="closeGateQuizModalForce()">${buttonText}</button>
          </div>
        `;
      } catch (err) {
        console.error('[Gate Pass Error]', err);
        container.innerHTML = `
          <button class="gate-quiz-close-btn" onclick="closeGateQuizModalForce()" title="Îã´Í∏∞">‚úï</button>
          <div class="gate-result">
            <div class="gate-result-icon">‚ö†Ô∏è</div>
            <h2 class="gate-result-title">Ï†ÄÏû• Ïò§Î•ò</h2>
            <p class="gate-result-msg">Í¥ÄÎ¨∏ ÌÜµÍ≥º Í∏∞Î°ù Ï†ÄÏû•Ïóê Ïã§Ìå®ÌñàÏäµÎãàÎã§.</p>
            <button class="gate-result-btn secondary" onclick="closeGateQuizModalForce()">Îã´Í∏∞</button>
          </div>
        `;
      }
    }

    // Ïã§Ìå® ÌôîÎ©¥
    function showGateFail() {
      const container = document.getElementById('gateQuizContainer');
      container.innerHTML = `
        <button class="gate-quiz-close-btn" onclick="closeGateQuizModalForce()" title="Îã´Í∏∞">‚úï</button>
        <div class="gate-result">
          <div class="gate-result-icon">üò¢</div>
          <h2 class="gate-result-title fail">ÏïÑÏâΩÍ≤åÎèÑ ÌÜµÍ≥ºÌïòÏßÄ Î™ªÌñàÏäµÎãàÎã§</h2>
          <p class="gate-result-msg">
            ${gateCurrentIndex + 1}Î≤àÏß∏ Î¨∏Ï†úÏóêÏÑú Ïò§ÎãµÏù¥ Î∞úÏÉùÌñàÏäµÎãàÎã§.<br>
            Î≥µÏäµ ÌõÑ Îã§Ïãú ÎèÑÏ†ÑÌï¥Ï£ºÏÑ∏Ïöî!
          </p>
          <div>
            <button class="gate-result-btn primary" onclick="openGateQuizModal(${gateCurrentLevel})">Îã§Ïãú ÎèÑÏ†ÑÌïòÍ∏∞</button>
            <button class="gate-result-btn secondary" onclick="closeGateQuizModalForce()">ÎÇòÏ§ëÏóê ÌïòÍ∏∞</button>
          </div>
        </div>
      `;
    }

    // Í∞ïÏ†ú Îã´Í∏∞ (ÌôïÏù∏ ÏóÜÏù¥)
    function closeGateQuizModalForce() {
      document.getElementById('gateQuizModal').classList.remove('active');
      gateQuizData = [];
      gateCurrentIndex = 0;
      // Í¥ÄÎ¨∏ ÏÉÅÌÉú ÏÉàÎ°úÍ≥†Ïπ®
      checkGateStatus();
    }

    // Í¥ÄÎ¨∏ ÌåùÏóÖ Îã´Í∏∞ (ÎÇòÏ§ëÏóê ÌïòÍ∏∞)
    function closeGatePopup() {
      const popup = document.getElementById('gatePopup');
      if (popup) popup.classList.remove('active');
      // ÏÑ∏ÏÖò ÎèôÏïà Ìï¥Îãπ Í¥ÄÎ¨∏ ÌåùÏóÖ Ïïà Îú®Í≤å
      const gateLevel = document.getElementById('gateLevel').textContent;
      sessionStorage.setItem('gatePopupDismissed', gateLevel);
    }

    // Í¥ÄÎ¨∏ ÏÉÅÌÉú ÌôïÏù∏ Î∞è ÌåùÏóÖ ÌëúÏãú (Ï∫êÏãú ÏÇ¨Ïö©)
    async function checkGateStatus() {
      const saved = localStorage.getItem('currentStudent');
      if (!saved) return;

      try {
        const student = JSON.parse(saved);
        const data = await ApiCache.fetch(`/api/gate-quiz/status?grade=${encodeURIComponent(student.grade)}&name=${encodeURIComponent(student.name)}`);

        if (!data || !data.ok) return;

        console.log('[Gate Status]', data);

        // üîí Ï†ÑÏó≠ Î≥ÄÏàò ÏÑ§Ï†ï (Ïû†Í∏à Ï≤¥ÌÅ¨Ïö©)
        passedGates = data.highestPassedGate || 0;
        completedUnitsCount = data.completedUnits || 0;
        completedUnitIds = data.completedUnitIds || [];

        // Í¥ÄÎ¨∏ ÏãúÌóòÏùÑ Î≥º Ïàò ÏûàÎäî ÏÉÅÌÉúÏù∏ÏßÄ ÌôïÏù∏
        if (data.canTakeGate) {
          // "ÎÇòÏ§ëÏóê ÌïòÍ∏∞"Î•º ÎàåÎ†ÄÎçò Í¥ÄÎ¨∏Ïù∏ÏßÄ ÌôïÏù∏
          const dismissedGate = sessionStorage.getItem('gatePopupDismissed');
          if (dismissedGate === String(data.nextGate)) {
            console.log('[Gate] ÌåùÏóÖ dismissed:', data.nextGate);
            return; // Ïù¥ÎØ∏ "ÎÇòÏ§ëÏóê ÌïòÍ∏∞"Î•º ÎàÑÎ•∏ Í¥ÄÎ¨∏Ïù¥Î©¥ ÌåùÏóÖ Ïïà ÎùÑÏõÄ
          }

          // ÌåùÏóÖ ÌëúÏãú
          document.getElementById('gateLevel').textContent = data.nextGate;
          document.getElementById('gateCompletedCount').textContent = data.completedUnits;
          document.getElementById('gateRequiredCount').textContent = data.requiredUnits;

          // Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖ ÌõÑÏóê ÌëúÏãú (2Ï¥à ÎîúÎ†àÏù¥)
          setTimeout(() => {
            const gatePopup = document.getElementById('gatePopup');
            const noticePopup = document.getElementById('noticePopup');

            // Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖÏù¥ ÌôúÏÑ±ÌôîÎêòÏñ¥ ÏûàÏßÄ ÏïäÏúºÎ©¥ Í¥ÄÎ¨∏ ÌåùÏóÖ ÌëúÏãú
            if (!noticePopup || !noticePopup.classList.contains('active')) {
              gatePopup.classList.add('active');
            } else {
              // Í≥µÏßÄÏÇ¨Ìï≠ ÌåùÏóÖÏù¥ Îã´Ìûê ÎïåÍπåÏßÄ Í∏∞Îã§Î¶º
              const observer = new MutationObserver((mutations) => {
                if (!noticePopup.classList.contains('active')) {
                  setTimeout(() => gatePopup.classList.add('active'), 500);
                  observer.disconnect();
                }
              });
              observer.observe(noticePopup, { attributes: true });
            }
          }, 1500);
        }
      } catch (err) {
        console.error('[Gate Status Error]', err);
      }
    }

    // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Í¥ÄÎ¨∏ ÏÉÅÌÉú ÌôïÏù∏
    document.addEventListener('DOMContentLoaded', function() {
      // Ï¶âÏãú Í¥ÄÎ¨∏ ÏÉÅÌÉú ÌôïÏù∏ (Ïû†Í∏à ÏÉÅÌÉú ÏÑ§Ï†ï)
      checkGateStatus();
      // 3Ï¥à ÌõÑÏóê Îã§Ïãú ÌôïÏù∏ (ÌåùÏóÖ ÌëúÏãúÏö©)
      setTimeout(checkGateStatus, 3000);
    });
  </script>

  <!-- üîÑ Î°úÎî© Ïä§ÌîºÎÑà Ï†úÏñ¥ Ïä§ÌÅ¨Î¶ΩÌä∏ -->
  <script>
    // ÌéòÏù¥ÏßÄ Î°úÎìú ÏôÑÎ£å Ïãú Ïä§ÌîºÎÑà Ïà®ÍπÄ (1.5Ï¥à ÌõÑ)
    window.addEventListener('load', function() {
      const loadingOverlay = document.getElementById('loading-overlay');
      if (loadingOverlay) {
        setTimeout(() => {
          loadingOverlay.classList.add('fade-out');
          setTimeout(() => {
            loadingOverlay.style.display = 'none';
          }, 500);
        }, 1500);
      }

      // üî• iPad/iOS ÎπÑÎîîÏò§ ÏûêÎèôÏû¨ÏÉù Í∞ïÏ†ú Ïã§Ìñâ
      const bgVideo = document.querySelector('.menu-bg-video');
      if (bgVideo) {
        // iOS SafariÏóêÏÑúÎäî autoplay ÏÜçÏÑ±ÎßåÏúºÎ°ú Î∂ÄÏ°±Ìï† Ïàò ÏûàÏñ¥ Î™ÖÏãúÏ†ÅÏúºÎ°ú play() Ìò∏Ï∂ú
        bgVideo.play().catch(err => {
          console.log('ÎπÑÎîîÏò§ ÏûêÎèôÏû¨ÏÉù Ïã§Ìå® (ÏÇ¨Ïö©Ïûê Ïù∏ÌÑ∞ÎûôÏÖò ÌïÑÏöî):', err);
          // ÏÇ¨Ïö©ÏûêÍ∞Ä ÌôîÎ©¥ÏùÑ ÌÑ∞ÏπòÌïòÎ©¥ Ïû¨ÏÉùÎêòÎèÑÎ°ù Ïù¥Î≤§Ìä∏ Î¶¨Ïä§ÎÑà Ï∂îÍ∞Ä
          document.body.addEventListener('click', function playOnce() {
            bgVideo.play();
            document.body.removeEventListener('click', playOnce);
          }, { once: true });
        });
      }
    });
  </script>

</body>
</html>
