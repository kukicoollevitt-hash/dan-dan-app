<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>진단테스트 시험지 보기</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Noto Sans KR", sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #667eea;
    }

    .header h1 {
      font-size: 24px;
      color: #2c3e50;
      margin-bottom: 15px;
    }

    .student-info {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-top: 15px;
    }

    .info-badge {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
    }

    .info-badge.name {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .info-badge.grade {
      background: #e8f4fd;
      color: #3498db;
    }

    .info-badge.score {
      background: #27ae60;
      color: white;
    }

    .info-badge.result-grade {
      font-size: 16px;
    }

    .grade-S { background: #ffd700; color: #333; }
    .grade-A { background: #ff6b6b; color: white; }
    .grade-B { background: #4ecdc4; color: white; }
    .grade-C { background: #95e1d3; color: #333; }
    .grade-D { background: #e0e0e0; color: #666; }

    .summary {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .summary-item {
      text-align: center;
      padding: 15px 25px;
      background: #f8f9fa;
      border-radius: 12px;
    }

    .summary-item .label {
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }

    .summary-item .value {
      font-size: 20px;
      font-weight: 700;
      color: #2c3e50;
    }

    .summary-item .value.correct {
      color: #27ae60;
    }

    .summary-item .value.wrong {
      color: #e74c3c;
    }

    .question-list {
      margin-top: 30px;
    }

    .question-item {
      background: #f8f9fa;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border-left: 4px solid #667eea;
    }

    .question-item.correct {
      border-left-color: #27ae60;
      background: #f0fff4;
    }

    .question-item.wrong {
      border-left-color: #e74c3c;
      background: #fff5f5;
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .question-number {
      font-size: 16px;
      font-weight: 700;
      color: #667eea;
    }

    .question-category {
      display: flex;
      gap: 8px;
    }

    .category-badge {
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 600;
      background: #e8f4fd;
      color: #3498db;
    }

    .skill-badge {
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 600;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .result-icon {
      font-size: 24px;
    }

    .passage-box {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 12px;
      line-height: 1.7;
      font-size: 14px;
      color: #555;
      border-left: 3px solid #667eea;
    }

    .question-text {
      font-size: 15px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 12px;
    }

    .options-list {
      list-style: none;
    }

    .option-item {
      padding: 10px 15px;
      margin-bottom: 8px;
      border-radius: 8px;
      font-size: 14px;
      color: #555;
      background: white;
      border: 2px solid transparent;
    }

    .option-item.correct-answer {
      background: #d4edda;
      border-color: #27ae60;
      color: #155724;
    }

    .option-item.user-wrong {
      background: #f8d7da;
      border-color: #e74c3c;
      color: #721c24;
    }

    .option-item.user-correct {
      background: #d4edda;
      border-color: #27ae60;
      color: #155724;
    }

    .option-marker {
      font-weight: 700;
      margin-right: 8px;
    }

    .answer-info {
      display: flex;
      gap: 20px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid #ddd;
      font-size: 14px;
    }

    .answer-info span {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .explanation-box {
      margin-top: 12px;
      padding: 12px;
      background: #e8f4fd;
      border-radius: 8px;
      font-size: 13px;
      color: #555;
      line-height: 1.6;
    }

    .explanation-box strong {
      color: #2c3e50;
    }

    .loading {
      text-align: center;
      padding: 50px;
      font-size: 18px;
      color: #667eea;
    }

    .error {
      text-align: center;
      padding: 50px;
      font-size: 18px;
      color: #e74c3c;
    }

    .print-btn {
      display: block;
      width: 100%;
      max-width: 300px;
      margin: 30px auto 0;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .print-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }
      .container {
        box-shadow: none;
        padding: 20px;
      }
      .print-btn {
        display: none;
      }
      .question-item {
        break-inside: avoid;
      }
    }

    @media (max-width: 600px) {
      .container {
        padding: 15px;
      }
      .header h1 {
        font-size: 20px;
      }
      .student-info {
        flex-direction: column;
        align-items: center;
      }
      .summary {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="loading" class="loading">시험지를 불러오는 중...</div>
    <div id="error" class="error" style="display: none;"></div>
    <div id="content" style="display: none;">
      <div class="header">
        <h1>문해력 진단테스트 결과지</h1>
        <div class="student-info" id="studentInfo"></div>
      </div>

      <div class="summary" id="summary"></div>

      <div class="question-list" id="questionList"></div>

      <button class="print-btn" onclick="window.print()">인쇄하기</button>
    </div>
  </div>

  <script>
    // 퀴즈 데이터 (25문항)
    const quizData = [
      // ========== 사회 (1-5) ==========
      {
        category: "사회",
        skill: "핵심 이해력",
        passage: "최근 우리나라는 저출산 고령화 사회로 급속히 진입하고 있다. 통계청에 따르면 2023년 합계출산율은 0.72명으로 역대 최저치를 기록했으며, 65세 이상 고령 인구는 전체 인구의 18%를 넘어섰다. 이러한 인구 구조의 변화는 경제 성장 둔화, 사회보장비용 증가, 노동력 감소 등 다양한 사회 문제를 야기할 것으로 예상된다. 정부는 출산 장려 정책과 고령층 일자리 창출을 통해 이 문제를 해결하려 노력하고 있지만, 구조적 문제 해결에는 장기적 접근이 필요하다.",
        question: "이 글의 중심 내용으로 가장 적절한 것은?",
        options: [
          "우리나라 통계청의 역할과 기능",
          "저출산 고령화의 원인과 해결 방안",
          "저출산 고령화 현상과 그로 인한 사회적 영향",
          "정부의 출산 장려 정책의 성공 사례"
        ],
        correct: 2,
        explanation: "이 글은 저출산 고령화 현상을 통계로 제시하고, 이로 인해 발생하는 경제 성장 둔화, 사회보장비용 증가, 노동력 감소 등의 사회적 영향을 설명하고 있습니다."
      },
      {
        category: "사회",
        skill: "구조 파악력",
        passage: "다문화 가정이 증가하면서 한국 사회의 문화적 다양성이 확대되고 있다. 2023년 기준 국내 다문화 가족 구성원은 약 130만 명에 달한다. 그러나 언어 장벽과 문화적 차이로 인한 갈등도 존재한다. 정부는 한국어 교육과 문화 적응 프로그램을 지원하고, 지역사회는 다문화 축제를 개최하여 상호 이해를 증진하고 있다. 전문가들은 다문화 공생 사회로 나아가기 위해서는 제도적 지원과 함께 시민들의 인식 개선이 필수적이라고 강조한다.",
        question: "이 글의 논리적 전개 방식은?",
        options: [
          "현상 제시 → 통계 제시 → 문제점 설명 → 해결 노력 및 한계 언급",
          "문제 제기 → 원인 분석 → 해결책 제시 → 결과 예측",
          "주장 제시 → 반론 제시 → 재반론 → 결론",
          "사례 나열 → 공통점 도출 → 일반화"
        ],
        correct: 0,
        explanation: "이 글은 다문화 가정 증가라는 현상을 제시한 후 통계(130만 명)를 제시하고, 언어 장벽과 문화적 차이라는 문제점을 설명합니다."
      },
      {
        category: "사회",
        skill: "어휘 맥락력",
        passage: "디지털 격차는 정보 접근 능력에 따라 사회적 불평등이 심화되는 현상을 말한다. 고령층과 저소득층은 스마트폰이나 컴퓨터 활용 능력이 부족해 온라인 금융, 행정 서비스 이용에 어려움을 겪는다. 이로 인해 일상생활에서 불편함을 느끼고, 경제적 기회도 제한받는다. 이를 완화하기 위해 정부는 무료 디지털 교육 프로그램을 운영하고, 공공기관은 오프라인 창구를 유지하는 등 다양한 노력을 기울이고 있다.",
        question: "문맥상 '완화하다'의 의미로 가장 적절한 것은?",
        options: [
          "강화하다",
          "줄이거나 약하게 만들다",
          "제거하다",
          "분석하다"
        ],
        correct: 1,
        explanation: "문맥상 '완화하다'는 디지털 격차로 인한 문제를 줄이거나 약하게 만든다는 의미입니다."
      },
      {
        category: "사회",
        skill: "추론 통합력",
        passage: "최근 청년 실업률이 높아지면서 청년층의 경제적 어려움이 사회 문제로 대두되고 있다. 취업 준비 기간이 길어지고, 비정규직 비율도 증가하는 추세다. 이로 인해 결혼과 출산을 미루는 청년들이 늘어나고, 주거 불안정성도 심화되고 있다. 정부는 청년 일자리 창출과 주거 지원 정책을 추진하고 있으나, 구조적 문제 해결을 위해서는 교육 시스템 개편과 기업의 채용 문화 변화가 동반되어야 한다는 지적이 나온다.",
        question: "이 글을 통해 추론할 수 있는 내용으로 가장 적절한 것은?",
        options: [
          "청년 실업 문제는 개인의 노력만으로 해결 가능하다",
          "청년 실업은 결혼, 출산, 주거 문제와 연결되어 있다",
          "정부 정책만으로 청년 실업 문제를 완전히 해결할 수 있다",
          "비정규직 비율 증가는 청년들에게 긍정적인 영향을 준다"
        ],
        correct: 1,
        explanation: "글에서 청년 실업으로 인해 결혼과 출산을 미루고, 주거 불안정성이 심화된다고 설명하고 있으므로 청년 실업과 이러한 문제들이 연결되어 있음을 추론할 수 있습니다."
      },
      {
        category: "사회",
        skill: "비판 적용력",
        passage: "SNS의 발달로 개인의 의견 표출이 자유로워졌지만, 동시에 가짜 뉴스와 악성 댓글 문제가 심각해지고 있다. 일부에서는 표현의 자유를 보장하기 위해 규제를 최소화해야 한다고 주장하는 반면, 다른 측에서는 피해 방지를 위해 강력한 법적 규제가 필요하다고 주장한다. 이 문제는 개인의 권리와 사회적 책임 사이에서 균형을 찾아야 하는 복잡한 쟁점이다.",
        question: "이 글의 관점에서 가장 적절한 해결 방향은?",
        options: [
          "모든 온라인 발언을 실명제로 전환한다",
          "표현의 자유와 피해 방지 사이에서 균형 잡힌 규제를 마련한다",
          "SNS 사용을 전면 금지한다",
          "악성 댓글 작성자에게 무조건 형사 처벌을 내린다"
        ],
        correct: 1,
        explanation: "글에서 개인의 권리(표현의 자유)와 사회적 책임(피해 방지) 사이에서 균형을 찾아야 한다고 언급했으므로, 균형 잡힌 규제가 가장 적절한 해결 방향입니다."
      },
      // ========== 과학 (6-10) ==========
      {
        category: "과학",
        skill: "핵심 이해력",
        passage: "지구 온난화는 온실가스 배출 증가로 인해 지구 평균 기온이 상승하는 현상이다. 산업혁명 이후 이산화탄소 농도는 약 50% 증가했으며, 이로 인해 빙하가 녹고 해수면이 상승하고 있다. 과학자들은 2050년까지 지구 평균 기온이 1.5°C 이상 상승할 것으로 예측하며, 이는 생태계 파괴, 이상 기후, 식량 위기 등 심각한 결과를 초래할 것으로 경고한다. 탄소 배출 감소와 재생에너지 전환이 시급하다.",
        question: "이 글의 핵심 주제로 가장 적절한 것은?",
        options: [
          "산업혁명의 역사와 의의",
          "지구 온난화의 원인, 현황, 그리고 예상되는 결과",
          "재생에너지의 종류와 장점",
          "빙하의 형성 과정과 특징"
        ],
        correct: 1,
        explanation: "이 글은 지구 온난화의 원인(온실가스 배출), 현황(이산화탄소 농도 증가, 빙하 융해), 그리고 예상되는 결과(생태계 파괴, 이상 기후, 식량 위기)를 종합적으로 설명하고 있습니다."
      },
      {
        category: "과학",
        skill: "구조 파악력",
        passage: "인체의 면역 체계는 다양한 방어 기제로 구성된다. 첫째, 피부와 점막은 외부 병원체의 침입을 물리적으로 차단한다. 둘째, 백혈구는 침입한 병원체를 포식하여 제거한다. 셋째, 항체는 특정 병원체를 인식하고 무력화시킨다. 마지막으로, 기억 세포는 과거에 접한 병원체를 기억하여 재감염 시 신속하게 대응한다. 이처럼 면역 체계는 여러 층위의 방어막으로 우리 몸을 보호한다.",
        question: "이 글의 서술 방식으로 가장 적절한 것은?",
        options: [
          "시간 순서에 따른 역사적 서술",
          "병렬적 나열을 통한 체계적 설명",
          "두 대상의 비교와 대조",
          "문제 제기와 해결책 제시"
        ],
        correct: 1,
        explanation: "이 글은 '첫째', '둘째', '셋째', '마지막으로'라는 표지어를 사용하여 면역 체계의 구성 요소들을 병렬적으로 나열하며 체계적으로 설명하고 있습니다."
      },
      {
        category: "과학",
        skill: "어휘 맥락력",
        passage: "광합성은 식물이 빛에너지를 화학에너지로 전환하는 과정이다. 엽록체 내의 엽록소가 빛을 흡수하면, 물과 이산화탄소가 포도당과 산소로 합성된다. 이 과정은 지구상 대부분의 생명체에게 필수적인 산소와 유기물을 공급한다. 광합성 효율을 높이기 위해 과학자들은 인공 광합성 기술 개발에 매진하고 있다.",
        question: "문맥상 '매진하다'의 의미로 가장 적절한 것은?",
        options: [
          "판매하다",
          "전력을 다해 노력하다",
          "포기하다",
          "비판하다"
        ],
        correct: 1,
        explanation: "'매진하다'는 문맥상 과학자들이 인공 광합성 기술 개발을 위해 '전력을 다해 노력하다'라는 의미로 사용되었습니다."
      },
      {
        category: "과학",
        skill: "추론 통합력",
        passage: "플라스틱 쓰레기가 해양 생태계를 위협하고 있다. 연간 약 800만 톤의 플라스틱이 바다로 유입되며, 이는 해양 생물의 서식지를 파괴하고 먹이 사슬에 진입한다. 미세 플라스틱은 어류의 체내에 축적되어 인간의 식탁까지 도달한다. 이에 따라 각국 정부는 일회용 플라스틱 사용 규제를 강화하고 있으며, 기업들도 친환경 포장재 개발에 투자하고 있다.",
        question: "이 글을 통해 추론할 수 있는 내용으로 가장 적절한 것은?",
        options: [
          "해양 플라스틱 문제는 인간 건강에도 영향을 미칠 수 있다",
          "플라스틱은 바다에서 자연 분해된다",
          "미세 플라스틱은 어류에게 유익하다",
          "일회용 플라스틱 규제는 불필요하다"
        ],
        correct: 0,
        explanation: "글에서 미세 플라스틱이 어류의 체내에 축적되어 인간의 식탁까지 도달한다고 언급했으므로, 해양 플라스틱 문제가 인간 건강에도 영향을 미칠 수 있음을 추론할 수 있습니다."
      },
      {
        category: "과학",
        skill: "비판 적용력",
        passage: "유전자 편집 기술인 크리스퍼(CRISPR)는 질병 치료에 혁명적 가능성을 제시한다. 암, 유전 질환 등의 치료에 활용될 수 있지만, 인간 배아 편집에 대한 윤리적 우려도 크다. 일부 국가에서는 연구 목적의 배아 편집을 허용하는 반면, 다른 국가에서는 전면 금지하고 있다. 과학 기술의 발전과 생명 윤리 사이의 균형이 요구된다.",
        question: "이 글의 관점에서 크리스퍼 기술에 대한 가장 적절한 태도는?",
        options: [
          "과학 발전을 위해 윤리적 논의 없이 연구를 추진해야 한다",
          "생명 윤리를 고려하면서 신중하게 기술을 발전시켜야 한다",
          "유전자 편집 기술을 전면 금지해야 한다",
          "배아 편집을 무조건 허용해야 한다"
        ],
        correct: 1,
        explanation: "글에서 '과학 기술의 발전과 생명 윤리 사이의 균형이 요구된다'고 언급했으므로, 윤리를 고려하면서 신중하게 기술을 발전시켜야 한다는 태도가 가장 적절합니다."
      },
      // ========== 문학 (11-15) ==========
      {
        category: "문학",
        skill: "핵심 이해력",
        passage: "황순원의 <소나기>는 소년과 소녀의 순수한 만남을 서정적으로 그린 작품이다. 소년은 개울가에서 만난 소녀에게 이끌리고, 둘은 자연 속에서 짧은 우정을 나눈다. 소나기가 쏟아지는 날, 소녀는 병에 걸려 세상을 떠난다. 이 작품은 인간의 순수한 감정과 자연의 아름다움, 그리고 상실의 아픔을 섬세하게 표현했다. 특히 '소나기'는 갑작스러운 이별과 영원한 기억의 상징으로 해석된다.",
        question: "이 글에서 설명하는 <소나기>의 주제로 가장 적절한 것은?",
        options: [
          "도시와 농촌의 갈등",
          "순수한 감정, 자연의 아름다움, 상실의 아픔",
          "가족 간의 세대 갈등",
          "사회 비판과 저항 의식"
        ],
        correct: 1,
        explanation: "글에서 <소나기>가 '순수한 감정과 자연의 아름다움, 그리고 상실의 아픔을 섬세하게 표현했다'고 직접적으로 언급하고 있습니다."
      },
      {
        category: "문학",
        skill: "구조 파악력",
        passage: "조지 오웰의 <1984>는 전체주의 사회를 배경으로 한 디스토피아 소설이다. 주인공 윈스턴은 당의 감시 아래 살면서 점차 체제에 의문을 품게 된다. 그는 줄리아와 사랑에 빠지고 저항 조직에 가담하지만, 결국 사상 경찰에 체포된다. 고문과 세뇌 끝에 윈스턴은 당을 사랑하게 되며, 개인의 자유의지가 완전히 파괴된다. 이 소설은 권력의 본질과 개인의 자유에 대한 경고를 담고 있다.",
        question: "이 글에 나타난 <1984> 줄거리의 서사 구조는?",
        options: [
          "평화로운 일상 → 갈등 발생 → 성공적 해결 → 행복한 결말",
          "체제 순응 → 의문과 저항 → 체포와 세뇌 → 굴복과 파멸",
          "영웅의 탄생 → 시련 극복 → 최종 승리",
          "과거 회상 → 현재 상황 설명 → 미래 전망"
        ],
        correct: 1,
        explanation: "글에서 윈스턴이 체제 아래 살다가(체제 순응) → 의문을 품고 저항(의문과 저항) → 체포되어 고문받음(체포와 세뇌) → 당을 사랑하게 됨(굴복과 파멸)의 순서로 진행됩니다."
      },
      {
        category: "문학",
        skill: "어휘 맥락력",
        passage: "김소월의 <진달래꽃>은 이별의 정한을 담은 대표적 서정시이다. 화자는 떠나는 임에게 원망 대신 축복을 건네며, '진달래꽃을 뿌리겠다'고 말한다. 이는 슬픔을 내면화하고 체념적 수용의 자세를 보여준다. 전통적인 한의 정서가 짙게 깔려 있으며, 민요적 율격이 서정성을 높인다.",
        question: "문맥상 '체념적 수용'의 의미로 가장 적절한 것은?",
        options: [
          "적극적으로 저항하는 것",
          "단념하고 현실을 받아들이는 것",
          "기쁘게 환영하는 것",
          "분노를 표출하는 것"
        ],
        correct: 1,
        explanation: "'체념적 수용'은 이별을 원망하지 않고 단념하며 현실로 받아들인다는 의미입니다. 화자가 원망 대신 축복을 건네는 태도에서 이를 확인할 수 있습니다."
      },
      {
        category: "문학",
        skill: "추론 통합력",
        passage: "이광수의 <무정>은 한국 근대 소설의 효시로 평가된다. 주인공 이형식은 개화기 지식인으로서 구시대와 신시대 사이에서 갈등한다. 그는 전통적 가치관과 근대적 사고방식 사이에서 방황하며, 결국 민족 계몽의 길을 선택한다. 이 작품은 개인의 성장과 함께 한국 사회의 근대화 과정을 반영하고 있다.",
        question: "이 글을 통해 <무정>에 대해 추론할 수 있는 내용으로 가장 적절한 것은?",
        options: [
          "순수 문학만을 추구한 작품이다",
          "개인의 내면과 시대적 배경이 결합된 작품이다",
          "판타지적 요소가 강한 작품이다",
          "외국 문학의 직접적인 번역 작품이다"
        ],
        correct: 1,
        explanation: "글에서 주인공의 개인적 갈등(내면)과 개화기라는 시대적 배경, 그리고 한국 사회의 근대화 과정이 함께 다뤄지고 있음을 알 수 있습니다."
      },
      {
        category: "문학",
        skill: "비판 적용력",
        passage: "현대 문학에서 포스트모더니즘 경향은 기존의 서사 구조와 권위에 대한 도전을 특징으로 한다. 작가의 절대적 권위를 부정하고, 독자의 해석에 열린 텍스트를 지향한다. 또한 장르의 경계를 허물고 다양한 형식 실험을 시도한다. 비평가들은 이러한 경향이 문학의 다양성을 확장했다고 평가하는 한편, 난해함으로 인해 대중과의 소통이 단절될 수 있다고 우려한다.",
        question: "이 글의 관점에서 포스트모더니즘 문학에 대한 균형 잡힌 평가는?",
        options: [
          "무조건 긍정적으로 수용해야 한다",
          "문학적 다양성 확장에 기여했으나 대중성 확보도 고려해야 한다",
          "완전히 배척해야 할 경향이다",
          "전통 문학만이 가치 있다"
        ],
        correct: 1,
        explanation: "글에서 비평가들의 견해로 다양성 확장(긍정)과 대중과의 소통 단절 우려(부정)를 함께 제시하고 있으므로, 균형 잡힌 평가가 적절합니다."
      },
      // ========== 역사 (16-20) ==========
      {
        category: "역사",
        skill: "핵심 이해력",
        passage: "삼국 통일은 신라가 당나라와 연합하여 백제와 고구려를 멸망시킨 후 이루어졌다. 660년 백제가 먼저 멸망하고, 668년 고구려가 뒤따랐다. 그러나 신라는 당나라의 한반도 지배 야욕에 맞서 나당 전쟁(670~676)을 치렀고, 결국 대동강 이남의 영토를 확보했다. 이로써 한반도 최초의 통일 국가가 성립되었으며, 이후 통일 신라는 불교와 유교 문화를 발전시켰다.",
        question: "이 글의 핵심 내용으로 가장 적절한 것은?",
        options: [
          "삼국시대 문화의 특징",
          "신라의 삼국 통일 과정과 그 의의",
          "당나라와 신라의 외교 관계",
          "불교의 전래와 발전"
        ],
        correct: 1,
        explanation: "이 글은 신라가 당나라와 연합하여 백제, 고구려를 멸망시킨 과정, 나당 전쟁, 그리고 한반도 최초 통일 국가 성립이라는 의의를 중심으로 설명하고 있습니다."
      },
      {
        category: "역사",
        skill: "구조 파악력",
        passage: "조선 후기 실학은 성리학의 관념적 한계를 극복하려는 학문 운동이다. 17세기에 등장한 실학은 크게 세 갈래로 나뉜다. 첫째, 유형원과 이익으로 대표되는 경세치용 학파는 토지 제도 개혁을 주장했다. 둘째, 박지원과 박제가의 이용후생 학파는 상공업 발전과 기술 혁신을 강조했다. 셋째, 김정호와 정약용의 실사구시 학파는 실증적 연구 방법을 중시했다. 실학은 근대 개혁 사상의 토대가 되었다.",
        question: "이 글의 서술 구조로 가장 적절한 것은?",
        options: [
          "시간 순서에 따른 사건 나열",
          "개념 정의 → 분류별 설명 → 역사적 의의 제시",
          "문제 제기 → 원인 분석 → 해결책 제안",
          "주장과 반론의 대립"
        ],
        correct: 1,
        explanation: "글의 구조는 실학의 정의(개념 정의) → 세 학파의 특징(분류별 설명) → 근대 개혁 사상의 토대(역사적 의의)로 구성되어 있습니다."
      },
      {
        category: "역사",
        skill: "어휘 맥락력",
        passage: "일제 강점기에 한국인들은 다양한 방식으로 독립운동을 전개했다. 의열 투쟁은 요인 암살과 주요 시설 파괴를 통해 일제에 타격을 주었고, 무장 독립군은 만주와 연해주에서 일본군과 직접 전투를 벌였다. 한편, 임시정부는 외교 활동을 통해 국제 사회에 독립의 당위성을 호소했다. 국내에서는 물산장려운동과 같은 경제적 저항도 이루어졌다.",
        question: "문맥상 '호소하다'의 의미로 가장 적절한 것은?",
        options: [
          "비난하다",
          "간절히 부탁하거나 알리다",
          "거부하다",
          "칭찬하다"
        ],
        correct: 1,
        explanation: "'호소하다'는 임시정부가 국제 사회에 독립의 당위성을 간절히 알리고 부탁한다는 의미로 사용되었습니다."
      },
      {
        category: "역사",
        skill: "추론 통합력",
        passage: "고려 시대는 불교가 국가 종교로서 번성한 시기다. 국가에서 사찰을 건립하고 승려에게 토지를 지급했으며, 과거제에 승과를 포함시켰다. 그러나 시간이 지나면서 사찰이 대토지를 소유하고 승려가 권력에 개입하는 폐단이 발생했다. 이로 인해 조선 건국 후 불교는 탄압받고 성리학이 새로운 국가 이념으로 채택되었다.",
        question: "이 글을 통해 추론할 수 있는 내용으로 가장 적절한 것은?",
        options: [
          "고려의 불교 융성이 조선의 성리학 채택과 관련이 있다",
          "조선에서도 불교는 계속 국가 종교였다",
          "고려 시대 승려는 권력에 전혀 관여하지 않았다",
          "성리학은 고려 시대에 이미 국가 이념이었다"
        ],
        correct: 0,
        explanation: "글에서 고려 말 불교의 폐단(대토지 소유, 권력 개입)이 발생하고, 이로 인해 조선에서 불교 탄압과 성리학 채택이 이루어졌다고 설명하므로 둘의 관련성을 추론할 수 있습니다."
      },
      {
        category: "역사",
        skill: "비판 적용력",
        passage: "역사 교과서 서술에 대한 논쟁은 계속되고 있다. 일부는 '국가 정체성 확립을 위해 민족사 중심으로 서술해야 한다'고 주장하고, 다른 일부는 '글로벌 시대에 맞게 세계사적 맥락에서 균형 있게 서술해야 한다'고 주장한다. 또한 역사적 사실에 대한 해석의 다양성을 인정할 것인지, 객관적 사실만을 강조할 것인지에 대해서도 의견이 나뉜다.",
        question: "이 글의 논점에 대해 균형 잡힌 입장은?",
        options: [
          "민족사만 중점적으로 가르쳐야 한다",
          "세계사만 가르쳐야 한다",
          "민족사와 세계사의 균형, 그리고 다양한 해석의 공존이 필요하다",
          "역사 교육을 폐지해야 한다"
        ],
        correct: 2,
        explanation: "글에서 민족사 vs 세계사, 해석의 다양성 vs 객관적 사실이라는 대립하는 견해를 제시하고 있으므로, 양측의 균형과 공존을 추구하는 입장이 가장 적절합니다."
      },
      // ========== 예술 (21-25) ==========
      {
        category: "예술",
        skill: "핵심 이해력",
        passage: "인상주의는 19세기 후반 프랑스에서 시작된 미술 운동으로, 빛과 색채의 순간적 인상을 포착하는 것을 목표로 했다. 모네, 르누아르, 드가 등이 대표적인 화가이다. 이들은 야외에서 직접 자연을 관찰하며 그림을 그렸고, 빠른 붓터치와 밝은 색조를 사용했다. 인상주의는 당시 아카데미 미술의 엄격한 규범에 대한 반발로 등장했으며, 이후 현대 미술 발전에 큰 영향을 미쳤다.",
        question: "이 글에서 설명하는 인상주의의 특징으로 적절하지 않은 것은?",
        options: [
          "빛과 색채의 순간적 인상 포착",
          "야외에서 직접 자연 관찰",
          "어두운 색조와 정밀한 묘사",
          "빠른 붓터치와 밝은 색조"
        ],
        correct: 2,
        explanation: "글에서 인상주의는 '밝은 색조'를 사용했다고 명시되어 있으므로, '어두운 색조'는 인상주의의 특징이 아닙니다."
      },
      {
        category: "예술",
        skill: "구조 파악력",
        passage: "베토벤의 교향곡 제9번 '합창'은 서양 음악사에서 기념비적인 작품이다. 전통적인 4악장 구조를 따르되, 마지막 악장에 합창을 도입한 혁신적인 시도를 보여준다. 1악장은 어둡고 긴장감 있게 시작하여, 2악장의 빠른 스케르초, 3악장의 서정적 아다지오를 거쳐, 4악장에서 '환희의 송가'가 장엄하게 울려 퍼진다. 이 곡은 인류의 화합과 평화를 노래한다.",
        question: "이 글에 나타난 교향곡 제9번의 구성 방식은?",
        options: [
          "점진적 고조: 어두움에서 밝음으로, 기악에서 합창으로 발전",
          "반복 구조: 동일한 주제가 계속 반복됨",
          "대비 없는 균일한 분위기 유지",
          "역순 구성: 밝음에서 어두움으로 진행"
        ],
        correct: 0,
        explanation: "글에서 1악장이 '어둡고 긴장감 있게' 시작하여 4악장에서 '환희의 송가'가 '장엄하게' 울려 퍼진다고 설명하고 있으므로, 어두움에서 밝음으로 점진적으로 고조되는 구성입니다."
      },
      {
        category: "예술",
        skill: "어휘 맥락력",
        passage: "팝아트는 1950년대 영국과 미국에서 등장한 미술 사조로, 대중문화의 이미지를 예술에 차용했다. 앤디 워홀의 캠벨 수프 캔, 로이 리히텐슈타인의 만화 형식 그림이 대표적이다. 팝아트는 '고급 예술'과 '저급 문화'의 경계를 허물었다는 평가를 받는다. 일상적이고 범속한 소재가 미술관에 등장함으로써 예술의 정의 자체에 의문을 제기했다.",
        question: "문맥상 '범속하다'의 의미로 가장 적절한 것은?",
        options: [
          "고상하고 우아하다",
          "평범하고 통속적이다",
          "희귀하고 특별하다",
          "전문적이고 학술적이다"
        ],
        correct: 1,
        explanation: "'범속하다'는 일상적이고 평범하다는 의미로, 캠벨 수프 캔이나 만화처럼 대중적이고 통속적인 소재를 가리킵니다."
      },
      {
        category: "예술",
        skill: "추론 통합력",
        passage: "한국의 전통 음악인 판소리는 한 명의 소리꾼이 북 반주에 맞춰 이야기를 노래하는 형식이다. 춘향가, 심청가, 흥보가 등이 대표적인 레퍼토리이다. 판소리는 긴 시간 동안 연행되며, 소리꾼의 즉흥적 변주와 청중과의 교감이 중요하다. 2003년 유네스코 인류무형문화유산에 등재되어 세계적으로 가치를 인정받았다.",
        question: "이 글을 통해 판소리에 대해 추론할 수 있는 내용은?",
        options: [
          "판소리는 고정된 대본을 그대로 따라야 한다",
          "판소리에서 청중의 역할은 중요하지 않다",
          "판소리는 연행자와 청중 간의 상호작용이 있는 예술이다",
          "판소리는 한국에서만 가치를 인정받는다"
        ],
        correct: 2,
        explanation: "글에서 '소리꾼의 즉흥적 변주와 청중과의 교감이 중요하다'고 언급했으므로, 연행자와 청중 간의 상호작용이 있는 예술임을 추론할 수 있습니다."
      },
      {
        category: "예술",
        skill: "비판 적용력",
        passage: "디지털 기술의 발전으로 AI가 창작한 예술 작품이 등장하고 있다. AI 화가가 그린 그림이 경매에서 수억 원에 낙찰되기도 했다. 이에 대해 '기술 발전의 자연스러운 결과이며 새로운 예술 장르'라는 긍정적 시각과 '인간의 창의성과 감정이 배제된 것은 진정한 예술이 아니다'라는 비판적 시각이 공존한다. 예술의 정의와 창작 주체에 대한 근본적인 질문이 제기되고 있다.",
        question: "이 글의 관점에서 AI 예술에 대한 균형 잡힌 평가는?",
        options: [
          "AI 예술을 무조건 수용해야 한다",
          "AI 예술을 완전히 배척해야 한다",
          "AI 예술의 가능성을 인정하되, 인간 창의성의 가치도 존중해야 한다",
          "예술의 정의에 대한 논의는 불필요하다"
        ],
        correct: 2,
        explanation: "글에서 긍정적 시각(새로운 예술 장르)과 비판적 시각(진정한 예술이 아니다)을 함께 제시하고 있으므로, AI 예술의 가능성과 인간 창의성의 가치를 모두 인정하는 균형 잡힌 평가가 적절합니다."
      }
    ];

    // URL 파라미터에서 ID 가져오기
    const urlParams = new URLSearchParams(window.location.search);
    const applicationId = urlParams.get('id');

    async function loadTestResult() {
      if (!applicationId) {
        showError('시험지 ID가 없습니다.');
        return;
      }

      try {
        const response = await fetch(`/api/course-application/${applicationId}`);
        const result = await response.json();

        if (!result.success) {
          showError(result.message || '시험지를 불러올 수 없습니다.');
          return;
        }

        const data = result.data;

        // 답안이 없는 경우
        if (!data.answers || data.answers.length === 0) {
          showError('저장된 답안 정보가 없습니다.');
          return;
        }

        renderResult(data);
      } catch (error) {
        console.error('시험지 로드 오류:', error);
        showError('시험지를 불러오는 중 오류가 발생했습니다.');
      }
    }

    function showError(message) {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('error').style.display = 'block';
      document.getElementById('error').textContent = message;
    }

    function renderResult(data) {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('content').style.display = 'block';

      // 학생 정보 표시
      const gradeClass = `grade-${data.grade}`;
      document.getElementById('studentInfo').innerHTML = `
        <span class="info-badge name">${data.studentName}</span>
        <span class="info-badge grade">${data.studentGrade}</span>
        <span class="info-badge result-grade ${gradeClass}">${data.grade}등급</span>
        <span class="info-badge score">${data.score}/25점</span>
      `;

      // 정답/오답 개수 계산
      let correctCount = 0;
      let wrongCount = 0;
      data.answers.forEach((userAnswer, index) => {
        if (index < quizData.length) {
          if (userAnswer === quizData[index].correct) {
            correctCount++;
          } else {
            wrongCount++;
          }
        }
      });

      // 요약 정보
      document.getElementById('summary').innerHTML = `
        <div class="summary-item">
          <div class="label">정답</div>
          <div class="value correct">${correctCount}개</div>
        </div>
        <div class="summary-item">
          <div class="label">오답</div>
          <div class="value wrong">${wrongCount}개</div>
        </div>
        <div class="summary-item">
          <div class="label">응시일</div>
          <div class="value">${new Date(data.createdAt).toLocaleDateString('ko-KR')}</div>
        </div>
      `;

      // 문제 목록 렌더링
      let questionsHTML = '';
      data.answers.forEach((userAnswer, index) => {
        if (index >= quizData.length) return;

        const q = quizData[index];
        const isCorrect = userAnswer === q.correct;
        const statusClass = isCorrect ? 'correct' : 'wrong';
        const statusIcon = isCorrect ? '✅' : '❌';

        let optionsHTML = '';
        q.options.forEach((option, optIdx) => {
          let optionClass = '';
          let marker = '';

          if (optIdx === q.correct && optIdx === userAnswer) {
            // 정답이면서 학생이 선택한 답
            optionClass = 'user-correct';
            marker = '✅ 정답 (내 선택)';
          } else if (optIdx === q.correct) {
            // 정답
            optionClass = 'correct-answer';
            marker = '✅ 정답';
          } else if (optIdx === userAnswer) {
            // 학생이 선택한 오답
            optionClass = 'user-wrong';
            marker = '❌ 내 선택';
          }

          optionsHTML += `
            <li class="option-item ${optionClass}">
              <span class="option-marker">${optIdx + 1}.</span>
              ${option}
              ${marker ? `<span style="float: right; font-weight: 600;">${marker}</span>` : ''}
            </li>
          `;
        });

        questionsHTML += `
          <div class="question-item ${statusClass}">
            <div class="question-header">
              <span class="question-number">문제 ${index + 1}</span>
              <div class="question-category">
                <span class="category-badge">${q.category}</span>
                <span class="skill-badge">${q.skill}</span>
              </div>
              <span class="result-icon">${statusIcon}</span>
            </div>
            <div class="passage-box">${q.passage}</div>
            <div class="question-text">${q.question}</div>
            <ul class="options-list">
              ${optionsHTML}
            </ul>
            <div class="explanation-box">
              <strong>해설:</strong> ${q.explanation}
            </div>
          </div>
        `;
      });

      document.getElementById('questionList').innerHTML = questionsHTML;
    }

    // 페이지 로드 시 실행
    window.addEventListener('DOMContentLoaded', loadTestResult);
  </script>
</body>
</html>
