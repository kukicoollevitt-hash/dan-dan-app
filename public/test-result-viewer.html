<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>진단테스트 시험지 보기</title>
  <!-- PDF 생성을 위한 라이브러리 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <!-- 카카오 SDK -->
  <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Noto Sans KR", sans-serif;
      background: #f5f5f5;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
      padding-bottom: 20px;
      border-bottom: 2px solid #667eea;
    }

    .header h1 {
      font-size: 24px;
      color: #2c3e50;
      margin-bottom: 15px;
    }

    .student-info {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-top: 15px;
    }

    .info-badge {
      display: inline-block;
      padding: 8px 16px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
    }

    .info-badge.name {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .info-badge.grade {
      background: #e8f4fd;
      color: #3498db;
    }

    .info-badge.score {
      background: #27ae60;
      color: white;
    }

    .info-badge.result-grade {
      font-size: 16px;
    }

    .grade-S { background: #ffd700; color: #333; }
    .grade-A { background: #ff6b6b; color: white; }
    .grade-B { background: #4ecdc4; color: white; }
    .grade-C { background: #95e1d3; color: #333; }
    .grade-D { background: #e0e0e0; color: #666; }

    .summary {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
      flex-wrap: wrap;
    }

    .summary-item {
      text-align: center;
      padding: 15px 25px;
      background: #f8f9fa;
      border-radius: 12px;
    }

    .summary-item .label {
      font-size: 14px;
      color: #666;
      margin-bottom: 5px;
    }

    .summary-item .value {
      font-size: 20px;
      font-weight: 700;
      color: #2c3e50;
    }

    .summary-item .value.correct {
      color: #27ae60;
    }

    .summary-item .value.wrong {
      color: #e74c3c;
    }

    /* 틀린 문항 바로가기 */
    .wrong-questions-nav {
      background: #fff5f5;
      border: 2px solid #e74c3c;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
    }

    .wrong-questions-nav h4 {
      color: #e74c3c;
      font-size: 16px;
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .wrong-badges {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .wrong-badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: #e74c3c;
      color: white;
      border-radius: 50%;
      font-size: 14px;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
    }

    .wrong-badge:hover {
      background: #c0392b;
      transform: scale(1.1);
    }

    /* 맨 위로 가기 버튼 */
    .scroll-to-top {
      position: fixed;
      bottom: 30px;
      right: 30px;
      width: 50px;
      height: 50px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 50%;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 1000;
    }

    .scroll-to-top.visible {
      opacity: 1;
      visibility: visible;
    }

    .scroll-to-top:hover {
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
    }

    /* AI 피드백 섹션 */
    .ai-feedback-section {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      padding: 25px;
      margin-bottom: 20px;
      color: white;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }

    .ai-feedback-section h4 {
      font-size: 20px;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .ai-feedback-loading {
      text-align: center;
      padding: 30px;
    }

    .ai-feedback-loading .spinner {
      width: 40px;
      height: 40px;
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top-color: white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .ai-feedback-content {
      display: none;
    }

    .feedback-card {
      background: rgba(255, 255, 255, 0.15);
      border-radius: 12px;
      padding: 18px;
      margin-bottom: 15px;
      backdrop-filter: blur(10px);
    }

    .feedback-card:last-child {
      margin-bottom: 0;
    }

    .feedback-card-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 10px;
      opacity: 0.9;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .feedback-card-content {
      font-size: 15px;
      line-height: 1.7;
      word-break: keep-all;
    }

    .ai-feedback-error {
      text-align: center;
      padding: 20px;
      display: none;
    }

    .ai-feedback-error button {
      background: rgba(255, 255, 255, 0.2);
      border: 2px solid white;
      color: white;
      padding: 10px 25px;
      border-radius: 25px;
      font-size: 14px;
      cursor: pointer;
      margin-top: 15px;
      transition: all 0.3s ease;
    }

    .ai-feedback-error button:hover {
      background: white;
      color: #667eea;
    }

    /* 과목별 정답률 막대 그래프 */
    .skill-bar-chart {
      background: white;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
    }

    .skill-bar-chart h4 {
      font-size: 18px;
      color: #2c3e50;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .skill-bar-item {
      margin-bottom: 15px;
    }

    .skill-bar-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 6px;
      font-size: 14px;
      font-weight: 600;
    }

    .skill-bar-label .name {
      color: #2c3e50;
    }

    .skill-bar-label .percent {
      color: #667eea;
    }

    .skill-bar-bg {
      width: 100%;
      height: 24px;
      background: #e9ecef;
      border-radius: 12px;
      overflow: visible;
      position: relative;
    }

    .skill-bar-fill {
      height: 100%;
      border-radius: 12px;
      transition: width 0.8s ease;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 8px;
      font-size: 12px;
      font-weight: 600;
      color: white;
    }

    .skill-bar-fill.excellent { background: linear-gradient(90deg, #27ae60, #2ecc71); }
    .skill-bar-fill.good { background: linear-gradient(90deg, #3498db, #5dade2); }
    .skill-bar-fill.average { background: linear-gradient(90deg, #f39c12, #f1c40f); }
    .skill-bar-fill.poor { background: linear-gradient(90deg, #e74c3c, #ec7063); }

    /* 학년 평균 기준선 */
    .grade-avg-line {
      position: absolute;
      top: -4px;
      height: 32px;
      width: 2px;
      background: #2c3e50;
      z-index: 10;
    }

    .grade-avg-label {
      position: absolute;
      top: -20px;
      transform: translateX(-50%);
      font-size: 10px;
      font-weight: 600;
      color: #2c3e50;
      white-space: nowrap;
      background: #fff;
      padding: 1px 4px;
      border-radius: 3px;
    }

    .grade-avg-info {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 15px;
      padding: 10px 15px;
      background: #f8f9fa;
      border-radius: 8px;
      font-size: 13px;
      color: #555;
    }

    .grade-avg-info .avg-marker {
      display: inline-block;
      width: 20px;
      height: 2px;
      background: #2c3e50;
      vertical-align: middle;
    }

    .question-list {
      margin-top: 30px;
    }

    .question-item {
      background: #f8f9fa;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border-left: 4px solid #667eea;
    }

    .question-item.correct {
      border-left-color: #27ae60;
      background: #f0fff4;
    }

    .question-item.wrong {
      border-left-color: #e74c3c;
      background: #fff5f5;
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .question-number {
      font-size: 16px;
      font-weight: 700;
      color: #667eea;
    }

    .question-category {
      display: flex;
      gap: 8px;
    }

    .category-badge {
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 600;
      background: #e8f4fd;
      color: #3498db;
    }

    .skill-badge {
      padding: 4px 12px;
      border-radius: 15px;
      font-size: 12px;
      font-weight: 600;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }

    .result-icon {
      font-size: 24px;
    }

    .passage-box {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 12px;
      line-height: 1.7;
      font-size: 14px;
      color: #555;
      border-left: 3px solid #667eea;
    }

    .question-text {
      font-size: 15px;
      font-weight: 600;
      color: #2c3e50;
      margin-bottom: 12px;
    }

    .options-list {
      list-style: none;
    }

    .option-item {
      padding: 10px 15px;
      margin-bottom: 8px;
      border-radius: 8px;
      font-size: 14px;
      color: #555;
      background: white;
      border: 2px solid transparent;
    }

    .option-item.correct-answer {
      background: #d4edda;
      border-color: #27ae60;
      color: #155724;
    }

    .option-item.user-wrong {
      background: #f8d7da;
      border-color: #e74c3c;
      color: #721c24;
    }

    .option-item.user-correct {
      background: #d4edda;
      border-color: #27ae60;
      color: #155724;
    }

    .option-marker {
      font-weight: 700;
      margin-right: 8px;
    }

    .answer-info {
      display: flex;
      gap: 20px;
      margin-top: 12px;
      padding-top: 12px;
      border-top: 1px solid #ddd;
      font-size: 14px;
    }

    .answer-info span {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .explanation-box {
      margin-top: 12px;
      padding: 12px;
      background: #e8f4fd;
      border-radius: 8px;
      font-size: 13px;
      color: #555;
      line-height: 1.6;
    }

    .explanation-box strong {
      color: #2c3e50;
    }

    .loading {
      text-align: center;
      padding: 50px;
      font-size: 18px;
      color: #667eea;
    }

    .error {
      text-align: center;
      padding: 50px;
      font-size: 18px;
      color: #e74c3c;
    }

    .print-btn {
      display: block;
      width: 100%;
      max-width: 300px;
      margin: 30px auto 0;
      padding: 15px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .print-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
    }

    .action-buttons {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }

    .pdf-btn, .kakao-btn {
      padding: 15px 30px;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      border: none;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pdf-btn {
      background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
      color: white;
    }

    .pdf-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(231, 76, 60, 0.4);
    }

    .kakao-btn {
      background: #FEE500;
      color: #191919;
    }

    .kakao-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(254, 229, 0, 0.6);
    }

    @media print {
      body {
        background: white;
        padding: 0;
      }
      .container {
        box-shadow: none;
        padding: 20px;
      }
      .print-btn, .action-buttons {
        display: none;
      }
      .question-item {
        break-inside: avoid;
      }
    }

    @media (max-width: 600px) {
      .container {
        padding: 15px;
      }
      .header h1 {
        font-size: 20px;
      }
      .student-info {
        flex-direction: column;
        align-items: center;
      }
      .summary {
        flex-direction: column;
      }
      .strength-weakness {
        grid-template-columns: 1fr;
      }
    }

    /* 레이더 차트 스타일 */
    .radar-chart-container {
      background: white;
      padding: 30px;
      border-radius: 20px;
      margin: 30px 0;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      text-align: center;
    }

    .radar-chart-container h3 {
      font-size: 24px;
      color: #2c3e50;
      margin-bottom: 25px;
      font-weight: 700;
    }

    .radar-chart-container canvas {
      max-width: 100%;
      height: auto;
      margin: 0 auto;
      display: block;
    }

    /* 추천 시리즈 박스 */
    .recommendation-box {
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      padding: 35px;
      border-radius: 20px;
      margin-bottom: 30px;
      border: 3px solid #667eea;
      text-align: center;
    }

    .recommendation-box h3 {
      font-size: 26px;
      color: #2c3e50;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .series-badge {
      display: inline-block;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 35px;
      border-radius: 30px;
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 20px;
    }

    .recommendation-text {
      font-size: 17px;
      color: #34495e;
      line-height: 1.8;
      margin-bottom: 15px;
    }

    /* 강점/성장 영역 */
    .strength-weakness {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 30px;
      margin-bottom: 30px;
    }

    .strength-box, .weakness-box {
      padding: 25px;
      border-radius: 15px;
      text-align: left;
    }

    .strength-box {
      background: #d4edda;
      border-left: 5px solid #28a745;
    }

    .weakness-box {
      background: #fff3cd;
      border-left: 5px solid #ffc107;
    }

    .strength-box h4, .weakness-box h4 {
      font-size: 18px;
      margin-bottom: 12px;
      font-weight: 600;
    }

    .strength-box h4 {
      color: #155724;
    }

    .weakness-box h4 {
      color: #856404;
    }

    .strength-box p, .weakness-box p {
      font-size: 15px;
      line-height: 1.6;
      margin: 0;
    }

    .strength-box p {
      color: #155724;
    }

    .weakness-box p {
      color: #856404;
    }

    /* 분석 섹션 구분선 */
    .analysis-section {
      margin: 30px 0;
      padding-top: 30px;
      border-top: 2px dashed #dee2e6;
    }

    .section-title {
      font-size: 20px;
      font-weight: 700;
      color: #2c3e50;
      margin-bottom: 20px;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="loading" class="loading">시험지를 불러오는 중...</div>
    <div id="error" class="error" style="display: none;"></div>
    <div id="content" style="display: none;">
      <div class="header">
        <h1>문해력 진단테스트 결과지</h1>
        <div class="student-info" id="studentInfo"></div>
      </div>

      <div class="summary" id="summary"></div>

      <!-- 레이더 그래프 -->
      <div class="radar-chart-container">
        <h3>📊 5가지 문해력 지수 분석</h3>
        <canvas id="radarChart" width="500" height="500"></canvas>
      </div>

      <!-- 추천 시리즈 -->
      <div class="recommendation-box">
        <h3>💡 추천 시리즈</h3>
        <div class="series-badge" id="recommendedSeries"></div>
        <p class="recommendation-text" id="recommendationText"></p>
      </div>

      <!-- 강점/성장 영역 -->
      <div class="strength-weakness">
        <div class="strength-box">
          <h4>✅ 강점 영역</h4>
          <p id="strengthText"></p>
        </div>
        <div class="weakness-box">
          <h4>💪 성장 영역</h4>
          <p id="weaknessText"></p>
        </div>
      </div>

      <!-- 문해력 지수별 정답률 막대 그래프 -->
      <div class="skill-bar-chart" id="skillBarChart">
        <h4>📊 문해력 지수별 정답률</h4>
        <div id="skillBarContainer"></div>
      </div>

      <!-- 과목별 정답률 막대 그래프 -->
      <div class="skill-bar-chart" id="categoryBarChart">
        <h4>📚 과목별 정답률</h4>
        <div id="categoryBarContainer"></div>
      </div>

      <!-- AI 맞춤 피드백 섹션 -->
      <div class="ai-feedback-section" id="aiFeedbackSection">
        <h4>🤖 AI 맞춤 분석 피드백</h4>

        <div class="ai-feedback-loading" id="aiFeedbackLoading">
          <div class="spinner"></div>
          <p>AI가 결과를 분석하고 있어요...</p>
        </div>

        <div class="ai-feedback-content" id="aiFeedbackContent">
          <div class="feedback-card">
            <div class="feedback-card-title">🎯 종합 평가</div>
            <div class="feedback-card-content" id="feedbackOverall"></div>
          </div>
          <div class="feedback-card">
            <div class="feedback-card-title">💪 강점 분석</div>
            <div class="feedback-card-content" id="feedbackStrengths"></div>
          </div>
          <div class="feedback-card">
            <div class="feedback-card-title">📈 성장 포인트</div>
            <div class="feedback-card-content" id="feedbackImprovements"></div>
          </div>
          <div class="feedback-card">
            <div class="feedback-card-title">💡 학습 TIP</div>
            <div class="feedback-card-content" id="feedbackTips"></div>
          </div>
        </div>

        <div class="ai-feedback-error" id="aiFeedbackError">
          <p>피드백을 불러오지 못했어요 😢</p>
          <button onclick="loadAIFeedback()">다시 시도</button>
        </div>
      </div>

      <!-- 틀린 문항 바로가기 -->
      <div class="wrong-questions-nav" id="wrongQuestionsNav" style="display: none;">
        <h4>❌ 틀린 문항 바로가기</h4>
        <div class="wrong-badges" id="wrongBadges"></div>
      </div>

      <!-- 문제 오답/정답 해설 섹션 -->
      <div class="analysis-section">
        <h3 class="section-title">📝 문제별 정답 및 해설</h3>
      </div>

      <div class="question-list" id="questionList"></div>

      <button class="print-btn" onclick="window.print()">인쇄하기</button>

      <div class="action-buttons">
        <button class="pdf-btn" onclick="downloadPDF()">
          📄 PDF 다운로드
        </button>
        <button class="kakao-btn" onclick="sendKakao()">
          💬 카카오톡 전송하기
        </button>
      </div>
    </div>
  </div>

  <script>
    // 퀴즈 데이터 (25문항 - 5개 지문 × 5개 문해력 지수)
    const quizData = [
      // ========== 사회 (1-5) ==========
      {
        category: "사회",
        skill: "핵심 이해력",
        passage: "최근 우리나라는 저출산 고령화 사회로 급속히 진입하고 있다. 통계청에 따르면 2023년 합계출산율은 0.72명으로 역대 최저치를 기록했으며, 65세 이상 고령 인구는 전체 인구의 18%를 넘어섰다. 이러한 인구 구조의 변화는 경제 성장 둔화, 사회보장비용 증가, 노동력 감소 등 다양한 사회 문제를 야기할 것으로 예상된다. 정부는 출산 장려 정책과 고령층 일자리 창출을 통해 이 문제를 해결하려 노력하고 있지만, 구조적 문제 해결에는 장기적 접근이 필요하다.",
        passageExtended: "최근 우리나라는 저출산 고령화 사회로 급속히 진입하고 있다. 통계청에 따르면 2023년 합계출산율은 0.72명으로 역대 최저치를 기록했으며, 이는 OECD 평균인 1.5명의 절반에도 미치지 못하는 수치다. 전문가들은 높은 양육비와 주거비, 결혼에 대한 가치관 변화, 일과 가정의 양립 어려움 등이 복합적으로 작용한 결과라고 분석한다. 65세 이상 고령 인구는 전체 인구의 18%를 넘어섰으며, 2025년에는 20%를 초과하여 초고령사회에 진입할 것으로 전망된다. 이러한 인구 구조의 변화는 경제 성장 둔화, 사회보장비용 증가, 노동력 감소 등 다양한 사회 문제를 야기할 것으로 예상된다. 특히 국민연금과 건강보험의 재정 지속가능성에 대한 우려가 커지고 있으며, 지방의 인구 감소로 인한 지역 소멸 위기도 현실화되고 있다. 정부는 출산 장려 정책과 고령층 일자리 창출을 통해 이 문제를 해결하려 노력하고 있지만, 구조적 문제 해결에는 사회 전반의 인식 변화와 함께 장기적이고 종합적인 접근이 필요하다는 지적이 이어지고 있다.",
        question: "이 글의 중심 내용으로 가장 적절한 것은?",
        options: [
          "저출산 고령화 문제 해결을 위한 정부의 다양한 정책과 그 성과",
          "인구 구조 변화가 가져오는 문제점과 이에 대한 종합적 해결 방안",
          "저출산 고령화 현상과 그로 인한 사회적 영향",
          "저출산 고령화 시대에 필요한 개인과 사회의 인식 전환"
        ],
        correct: 2,
        explanation: "이 글은 저출산 고령화 현상을 통계로 제시하고, 이로 인해 발생하는 경제 성장 둔화, 사회보장비용 증가, 노동력 감소 등의 사회적 영향을 설명하고 있습니다. 정부의 정책도 언급하지만 핵심은 현상과 그 영향입니다."
      },
      {
        category: "사회",
        skill: "구조 파악력",
        passage: "다문화 가정이 증가하면서 한국 사회의 문화적 다양성이 확대되고 있다. 2023년 기준 국내 다문화 가족 구성원은 약 130만 명에 달한다. 그러나 언어 장벽과 문화적 차이로 인한 갈등도 존재한다. 정부는 한국어 교육과 문화 적응 프로그램을 지원하고, 지역사회는 다문화 축제를 개최하여 상호 이해를 증진하고 있다. 전문가들은 다문화 공생 사회로 나아가기 위해서는 제도적 지원과 함께 시민들의 인식 개선이 필수적이라고 강조한다.",
        passageExtended: "다문화 가정이 증가하면서 한국 사회의 문화적 다양성이 확대되고 있다. 2023년 기준 국내 다문화 가족 구성원은 약 130만 명에 달하며, 이는 10년 전과 비교해 2배 이상 증가한 수치다. 결혼 이민자, 외국인 근로자, 유학생 등 다양한 배경의 외국인이 한국에 정착하면서 사회 구성이 다양해지고 있다. 그러나 언어 장벽과 문화적 차이로 인한 갈등도 존재한다. 특히 다문화 가정 자녀들이 학교에서 겪는 언어 발달 지연이나 정체성 혼란 문제가 사회적 관심을 받고 있다. 정부는 한국어 교육과 문화 적응 프로그램을 지원하고, 지역사회는 다문화 축제를 개최하여 상호 이해를 증진하고 있다. 일부 지자체에서는 다문화 가정 자녀를 위한 이중언어 교육 프로그램도 운영하고 있다. 전문가들은 다문화 공생 사회로 나아가기 위해서는 제도적 지원과 함께 시민들의 인식 개선이 필수적이라고 강조하며, 차별 없는 사회 통합이 국가 경쟁력 향상에도 기여할 수 있다고 말한다.",
        question: "이 글의 논리적 전개 방식은?",
        options: [
          "현상 제시 → 통계 제시 → 문제점 설명 → 해결 노력 및 한계 언급",
          "현상 제시 → 통계 제시 → 해결책 제시 → 전문가 의견 인용",
          "현상 제시 → 문제점 설명 → 해결 노력 제시 → 향후 전망 제시",
          "통계 제시 → 현상 설명 → 문제점 분석 → 해결 노력 소개"
        ],
        correct: 0,
        explanation: "이 글은 다문화 가정 증가라는 현상을 제시한 후 통계(130만 명)를 제시하고, 언어 장벽과 문화적 차이라는 문제점을 설명합니다. 이어서 정부와 지역사회의 해결 노력을 설명하며, 마지막으로 제도적 지원만으로는 부족하다는 한계를 언급하고 있습니다."
      },
      {
        category: "사회",
        skill: "어휘 맥락력",
        passage: "디지털 격차는 정보 접근 능력에 따라 사회적 불평등이 심화되는 현상을 말한다. 고령층과 저소득층은 스마트폰이나 컴퓨터 활용 능력이 부족해 온라인 금융, 행정 서비스 이용에 어려움을 겪는다. 이로 인해 일상생활에서 불편함을 느끼고, 경제적 기회도 제한받는다. 이를 완화하기 위해 정부는 무료 디지털 교육 프로그램을 운영하고, 공공기관은 오프라인 창구를 유지하는 등 다양한 노력을 기울이고 있다.",
        passageExtended: "디지털 격차는 정보 접근 능력에 따라 사회적 불평등이 심화되는 현상을 말한다. 정보화 사회가 가속화되면서 디지털 기기와 인터넷 활용 능력이 삶의 질을 결정하는 중요한 요소가 되었다. 고령층과 저소득층은 스마트폰이나 컴퓨터 활용 능력이 부족해 온라인 금융, 행정 서비스 이용에 어려움을 겪는다. 예를 들어 은행 업무의 비대면화, 코로나19 이후 확산된 온라인 예약 시스템, 키오스크 주문 등에서 소외감을 느끼는 경우가 많다. 이로 인해 일상생활에서 불편함을 느끼고, 온라인 쇼핑이나 정보 검색에서의 불리함으로 경제적 기회도 제한받는다. 이를 완화하기 위해 정부는 무료 디지털 교육 프로그램을 운영하고, 공공기관은 오프라인 창구를 유지하는 등 다양한 노력을 기울이고 있다. 또한 민간 기업들도 사회적 책임 차원에서 디지털 리터러시 교육에 참여하고 있으며, 사용자 친화적인 인터페이스 개발에도 힘쓰고 있다.",
        question: "문맥상 '완화하다'의 의미로 가장 적절한 것은?",
        options: [
          "문제의 심각성을 덜어주다",
          "줄이거나 약하게 만들다",
          "문제가 더 커지지 않게 막다",
          "상황을 개선하여 발전시키다"
        ],
        correct: 1,
        explanation: "문맥상 '완화하다'는 디지털 격차로 인한 문제를 줄이거나 약하게 만든다는 의미입니다. 정부가 교육 프로그램을 운영하고 오프라인 창구를 유지하는 것은 문제를 완전히 제거하는 것이 아니라 그 심각성을 줄이기 위한 노력입니다."
      },
      {
        category: "사회",
        skill: "추론 통합력",
        passage: "최근 청년 실업률이 높아지면서 청년층의 경제적 어려움이 사회 문제로 대두되고 있다. 취업 준비 기간이 길어지고, 비정규직 비율도 증가하는 추세다. 이로 인해 결혼과 출산을 미루는 청년들이 늘어나고, 주거 불안정성도 심화되고 있다. 정부는 청년 일자리 창출과 주거 지원 정책을 추진하고 있으나, 구조적 문제 해결을 위해서는 교육 시스템 개편과 기업의 채용 문화 변화가 동반되어야 한다는 지적이 나온다.",
        passageExtended: "최근 청년 실업률이 높아지면서 청년층의 경제적 어려움이 사회 문제로 대두되고 있다. 2023년 기준 청년(15~29세) 실업률은 7% 수준으로, 전체 실업률의 2배에 달한다. 취업 준비 기간이 평균 1년 이상으로 길어지고, 취업에 성공하더라도 비정규직 비율이 증가하는 추세다. 이른바 '이중 노동시장' 구조 속에서 대기업과 중소기업, 정규직과 비정규직 간의 임금 격차도 크게 벌어지고 있다. 이로 인해 결혼과 출산을 미루는 청년들이 늘어나고, 높은 주거비 부담으로 주거 불안정성도 심화되고 있다. '캥거루족', 'N포 세대' 등의 신조어가 청년들의 어려운 현실을 반영한다. 정부는 청년 일자리 창출과 청년 주택, 월세 지원 등의 정책을 추진하고 있으나, 구조적 문제 해결을 위해서는 직무 중심의 교육 시스템 개편과 스펙보다 능력을 보는 기업의 채용 문화 변화가 동반되어야 한다는 지적이 나온다.",
        question: "이 글을 통해 추론할 수 있는 내용으로 가장 적절한 것은?",
        options: [
          "청년 실업은 정부의 적극적인 일자리 정책으로 해결할 수 있다",
          "청년 실업 문제는 다양한 사회 문제와 연결되어 있다",
          "비정규직 확대는 청년들에게 다양한 경험의 기회를 제공한다",
          "교육 시스템과 기업 채용 문화가 함께 바뀌어야 문제가 해결된다"
        ],
        correct: 1,
        explanation: "글에서 청년 실업이 결혼, 출산, 주거 불안정성 등 다양한 사회 문제로 연결되어 있음을 보여줍니다. 또한 정부 정책만이 아니라 교육 시스템, 기업 문화 등 여러 요소가 함께 변화해야 한다는 점에서 문제의 복합성을 알 수 있습니다."
      },
      {
        category: "사회",
        skill: "비판 적용력",
        passage: "플라스틱 쓰레기 문제가 심각해지면서 환경 보호를 위한 실천이 강조되고 있다. 일회용 플라스틱 사용을 줄이고, 분리배출을 철저히 하며, 재활용품을 적극 활용하는 것이 중요하다. 기업들도 친환경 포장재 사용을 확대하고, 정부는 일회용품 규제를 강화하고 있다. 그러나 개인의 작은 실천이 모여야 큰 변화를 만들 수 있으며, 환경 문제 해결을 위해서는 모든 사회 구성원의 참여가 필수적이다.",
        passageExtended: "플라스틱 쓰레기 문제가 심각해지면서 환경 보호를 위한 실천이 강조되고 있다. 전 세계적으로 연간 3억 톤 이상의 플라스틱이 생산되며, 이 중 상당량이 바다로 유입되어 해양 생태계를 위협하고 있다. 미세플라스틱은 먹이사슬을 통해 인체에도 축적될 수 있어 건강 우려도 높아지고 있다. 일회용 플라스틱 사용을 줄이고, 분리배출을 철저히 하며, 재활용품을 적극 활용하는 것이 중요하다. 특히 올바른 분리배출은 재활용률을 높이는 핵심 요소로, 깨끗이 씻어 배출하고 재질별로 분류하는 것이 필요하다. 기업들도 친환경 포장재 사용을 확대하고, ESG 경영의 일환으로 플라스틱 저감 목표를 설정하고 있다. 정부는 일회용품 규제를 강화하고 생산자책임재활용제도(EPR)를 통해 기업의 환경 책임을 높이고 있다. 그러나 제도적 노력만으로는 한계가 있으며, 개인의 작은 실천이 모여야 큰 변화를 만들 수 있다. 환경 문제 해결을 위해서는 모든 사회 구성원의 인식 변화와 지속적인 참여가 필수적이다.",
        question: "이 글의 내용을 바탕으로 개인이 실천할 수 있는 방안으로 가장 적절하지 않은 것은?",
        options: [
          "장바구니와 텀블러를 사용하여 일회용품 사용 줄이기",
          "분리배출을 철저히 하여 재활용률 높이기",
          "배달 음식 주문 시 일회용 용기와 수저 받기",
          "친환경 소재로 만든 재활용 제품 구매하기"
        ],
        correct: 2,
        explanation: "글에서는 '일회용 플라스틱 사용을 줄이고'라고 명시하고 있으므로, 일회용품을 더 많이 사용하는 것은 환경 보호 실천과 정반대되는 행동입니다. 장바구니와 텀블러 사용, 분리배출, 재활용 제품 구매는 모두 글에서 권장하는 실천 방안입니다."
      },

      // ========== 과학 (6-10) ==========
      {
        category: "과학",
        skill: "핵심 이해력",
        passage: "광합성은 식물이 빛 에너지를 화학 에너지로 전환하는 과정이다. 엽록체 내의 엽록소가 태양 빛을 흡수하면, 물과 이산화탄소를 원료로 포도당과 산소를 만들어낸다. 이 과정은 명반응과 암반응 두 단계로 나뉘는데, 명반응에서는 빛 에너지로 ATP와 NADPH를 생성하고, 암반응에서는 이들을 이용해 탄수화물을 합성한다. 광합성으로 생산된 포도당은 식물의 성장에 필요한 에너지원이 되며, 배출된 산소는 지구 생명체의 호흡에 필수적이다.",
        passageExtended: "광합성은 식물이 빛 에너지를 화학 에너지로 전환하는 과정이다. 이는 지구 생태계를 지탱하는 가장 중요한 생화학 반응 중 하나로, 약 27억 년 전 시아노박테리아에 의해 처음 시작되었다. 엽록체 내의 엽록소가 태양 빛 중 주로 적색광과 청색광을 흡수하면, 물과 이산화탄소를 원료로 포도당과 산소를 만들어낸다. 이 과정은 명반응과 암반응 두 단계로 나뉘는데, 명반응에서는 엽록체의 틸라코이드 막에서 빛 에너지를 이용해 물을 분해하고 ATP와 NADPH를 생성한다. 암반응은 스트로마에서 일어나며, 캘빈 회로를 통해 이산화탄소를 고정하고 포도당을 합성한다. 온도, 빛의 세기, 이산화탄소 농도 등이 광합성 속도에 영향을 미치며, 이를 '광합성의 한정 요인'이라 한다. 광합성으로 생산된 포도당은 식물의 성장, 호흡, 저장에 필요한 에너지원이 되며, 배출된 산소는 대기 중 산소의 주요 공급원으로서 지구 생명체의 호흡에 필수적이다.",
        question: "이 글에서 설명하는 광합성의 핵심 기능은?",
        options: [
          "이산화탄소를 흡수하고 산소를 배출하는 과정",
          "빛 에너지를 화학 에너지로 전환하는 과정",
          "물과 이산화탄소로 포도당을 합성하는 과정",
          "엽록소가 빛을 흡수하여 ATP를 생성하는 과정"
        ],
        correct: 1,
        explanation: "글의 첫 문장에서 '광합성은 식물이 빛 에너지를 화학 에너지로 전환하는 과정'이라고 명확히 정의하고 있습니다. 빛 에너지를 받아 포도당(화학 에너지)을 만드는 것이 광합성의 핵심 기능입니다."
      },
      {
        category: "과학",
        skill: "구조 파악력",
        passage: "DNA는 유전 정보를 저장하는 생명체의 설계도이다. DNA는 이중나선 구조로 되어 있으며, 아데닌(A), 티민(T), 구아닌(G), 사이토신(C) 네 가지 염기로 구성된다. 이 염기들은 특정 규칙에 따라 쌍을 이룬다. A는 T와, G는 C와 결합한다. DNA 복제 과정에서는 이중나선이 풀리고, 각 가닥이 주형이 되어 새로운 가닥이 합성된다. 이러한 구조 덕분에 유전 정보가 정확하게 다음 세대로 전달될 수 있다.",
        passageExtended: "DNA는 유전 정보를 저장하는 생명체의 설계도로, 1953년 왓슨과 크릭에 의해 그 구조가 밝혀졌다. DNA는 이중나선 구조로 되어 있으며, 당-인산 골격이 바깥쪽을, 염기가 안쪽을 향하는 형태를 띤다. 아데닌(A), 티민(T), 구아닌(G), 사이토신(C) 네 가지 염기로 구성되며, 이 염기들은 특정 규칙에 따라 쌍을 이룬다. A는 T와 2개의 수소 결합으로, G는 C와 3개의 수소 결합으로 연결된다. 이를 상보적 염기 결합이라 한다. DNA 복제 과정에서는 헬리케이스라는 효소가 이중나선을 풀고, 각 가닥이 주형이 되어 DNA 중합효소에 의해 새로운 가닥이 합성된다. 이때 원래 가닥 하나와 새 가닥 하나가 결합하여 두 개의 동일한 DNA 분자가 만들어지는데, 이를 반보존적 복제라 한다. 이러한 정교한 구조와 복제 메커니즘 덕분에 유전 정보가 정확하게 다음 세대로 전달될 수 있으며, 생명의 연속성이 유지된다.",
        question: "DNA 복제 과정의 단계별 순서로 올바른 것은?",
        options: [
          "이중나선 풀림 → 새 가닥 합성 → 각 가닥이 주형이 됨",
          "각 가닥이 주형이 됨 → 이중나선 풀림 → 새 가닥 합성",
          "이중나선 풀림 → 각 가닥이 주형이 됨 → 새 가닥 합성",
          "새 가닥 합성 → 각 가닥이 주형이 됨 → 이중나선 풀림"
        ],
        correct: 2,
        explanation: "글에서 DNA 복제 과정을 순서대로 설명하고 있습니다. 먼저 '이중나선이 풀리고', 그 다음 '각 가닥이 주형이 되어', 마지막으로 '새로운 가닥이 합성된다'는 세 단계를 명확히 제시하고 있습니다."
      },
      {
        category: "과학",
        skill: "어휘 맥락력",
        passage: "지구 온난화는 대기 중 온실가스 농도가 증가하여 지구 평균 기온이 상승하는 현상이다. 이산화탄소, 메탄 등의 온실가스는 태양 복사열을 흡수하여 지구를 따뜻하게 유지하는 역할을 한다. 그러나 산업화 이후 화석 연료 사용이 급증하면서 온실가스 배출량이 과도하게 증가했다. 이로 인해 빙하가 녹고, 해수면이 상승하며, 이상 기후 현상이 빈번해지고 있다. 기후 변화를 억제하기 위해서는 탄소 배출을 줄이는 것이 시급하다.",
        passageExtended: "지구 온난화는 대기 중 온실가스 농도가 증가하여 지구 평균 기온이 상승하는 현상이다. 온실효과 자체는 지구의 생명 유지에 필수적인 자연 현상으로, 온실효과가 없다면 지구의 평균 온도는 영하 18도 정도로 떨어질 것이다. 이산화탄소, 메탄, 아산화질소 등의 온실가스는 태양 복사열을 흡수하여 지구를 따뜻하게 유지하는 역할을 한다. 그러나 18세기 산업혁명 이후 화석 연료 사용이 급증하면서 온실가스 배출량이 과도하게 증가했다. 특히 이산화탄소 농도는 산업화 이전 280ppm에서 현재 420ppm 이상으로 50% 이상 증가했다. 이로 인해 극지방의 빙하와 빙상이 녹고, 해수면이 상승하며, 폭염, 가뭄, 홍수, 강력한 태풍 등 이상 기후 현상이 빈번해지고 있다. 세계 각국은 파리협정을 통해 기온 상승폭을 1.5도 이내로 제한하기 위해 노력하고 있다. 기후 변화를 억제하기 위해서는 신재생 에너지 확대, 탄소 포집 기술 개발 등을 통해 탄소 배출을 줄이는 것이 시급하다.",
        question: "문맥상 '억제하다'의 의미로 가장 적절한 것은?",
        options: [
          "현상이 진행되지 않도록 완전히 멈추다",
          "막거나 줄이다",
          "변화의 속도를 늦추어 조절하다",
          "원인을 분석하여 해결책을 찾다"
        ],
        correct: 1,
        explanation: "문맥상 '기후 변화를 억제하기 위해 탄소 배출을 줄인다'고 했으므로, '억제하다'는 부정적인 현상을 막거나 줄인다는 의미입니다. 탄소 배출을 줄이는 것이 기후 변화를 억제하는 방법이라는 점에서 확인할 수 있습니다."
      },
      {
        category: "과학",
        skill: "추론 통합력",
        passage: "항생제는 세균 감염을 치료하는 약물이다. 그러나 항생제를 과도하게 사용하거나 처방된 기간보다 짧게 복용하면 내성균이 생길 수 있다. 내성균은 항생제에 저항성을 가진 세균으로, 일반 항생제로는 치료가 어렵다. 최근 항생제 내성 문제가 심각해지면서, 세계보건기구(WHO)는 항생제 오남용을 경고하고 있다. 항생제는 반드시 의사의 처방에 따라 정확한 용량과 기간을 지켜 복용해야 한다.",
        passageExtended: "항생제는 세균 감염을 치료하는 약물로, 1928년 알렉산더 플레밍의 페니실린 발견 이후 의학 역사의 획기적인 전환점이 되었다. 항생제는 세균의 세포벽 합성을 억제하거나 단백질 합성을 방해하는 등의 방식으로 세균을 죽이거나 증식을 막는다. 그러나 항생제를 과도하게 사용하거나 처방된 기간보다 짧게 복용하면 내성균이 생길 수 있다. 항생제 복용을 중도에 그만두면 약에 덜 민감한 세균이 살아남아 증식하며, 이 과정이 반복되면 항생제에 저항성을 가진 내성균이 된다. 내성균은 일반 항생제로는 치료가 어렵고, 더 강력하고 비싼 항생제가 필요하거나 아예 치료가 불가능할 수도 있다. 최근 MRSA(메티실린 내성 황색포도상구균), CRE(카바페넴 내성 장내세균) 등 다제내성균이 증가하면서, 세계보건기구(WHO)는 항생제 내성을 인류 건강에 대한 가장 큰 위협 중 하나로 규정하고 오남용을 경고하고 있다. 항생제는 반드시 의사의 처방에 따라 정확한 용량과 기간을 지켜 복용해야 하며, 바이러스 감염(감기, 독감 등)에는 항생제가 효과가 없다는 점도 알아야 한다.",
        question: "이 글을 바탕으로 추론할 수 있는 내용은?",
        options: [
          "항생제는 의사 처방 없이도 필요할 때 복용하면 된다",
          "처방 기간을 정확히 지키면 내성균이 생기지 않는다",
          "항생제를 잘못 사용하면 치료가 더 어려워질 수 있다",
          "내성균은 항생제를 많이 복용한 사람에게만 생긴다"
        ],
        correct: 2,
        explanation: "글에서 항생제를 잘못 사용하면 내성균이 생기고, 내성균은 일반 항생제로는 치료가 어렵다고 설명합니다. 따라서 항생제를 잘못 사용하면 나중에 질병 치료가 더 어려워질 수 있다는 것을 추론할 수 있습니다."
      },
      {
        category: "과학",
        skill: "비판 적용력",
        passage: "인공지능(AI) 기술이 발전하면서 의료, 교육, 산업 등 다양한 분야에서 활용되고 있다. AI는 방대한 데이터를 빠르게 분석하여 인간보다 정확한 예측을 할 수 있다. 그러나 AI의 판단 근거가 불투명하고, 편향된 데이터로 학습할 경우 잘못된 결과를 낼 수 있다는 우려도 있다. 또한 일자리 감소와 개인 정보 침해 문제도 제기된다. 따라서 AI 기술 발전과 함께 윤리적 기준과 규제 마련이 필요하다.",
        passageExtended: "인공지능(AI) 기술이 발전하면서 의료, 교육, 산업, 금융 등 다양한 분야에서 혁신적으로 활용되고 있다. 의료 분야에서는 영상 진단, 신약 개발에, 교육 분야에서는 개인 맞춤형 학습에, 산업 분야에서는 자동화와 품질 관리에 AI가 적용되고 있다. AI는 딥러닝 알고리즘을 통해 방대한 데이터를 빠르게 분석하여 인간보다 정확한 예측을 할 수 있으며, 24시간 피로 없이 작업할 수 있다는 장점도 있다. 그러나 AI의 판단 근거가 불투명한 '블랙박스' 문제가 있어 왜 그런 결론에 도달했는지 설명하기 어려운 경우가 많다. 또한 편향된 데이터로 학습할 경우 특정 인종이나 성별에 불리한 결과를 내는 등 알고리즘 편향 문제가 발생할 수 있다. 자동화로 인한 일자리 감소, AI 학습에 사용되는 개인 정보 침해 문제, 딥페이크와 같은 악용 사례도 제기된다. 따라서 AI 기술 발전과 함께 설명 가능한 AI(XAI) 개발, 윤리적 기준과 규제 마련, 그리고 기술의 사회적 영향에 대한 지속적인 논의가 필요하다.",
        question: "AI 기술 활용 시 고려해야 할 사항으로 적절하지 않은 것은?",
        options: [
          "AI 학습에 사용된 데이터의 편향성 점검",
          "AI 시스템 운영 과정에서의 개인정보 보호",
          "AI 의사결정에 대한 윤리 가이드라인 수립",
          "효율성을 위해 모든 의사결정을 AI에 위임"
        ],
        correct: 3,
        explanation: "글에서 AI의 판단 근거가 불투명하고 편향된 데이터로 잘못된 결과를 낼 수 있다고 경고하고 있습니다. 따라서 모든 결정을 AI에게만 맡기는 것은 위험하며, 인간의 검토와 윤리적 기준이 함께 필요합니다."
      },

      // ========== 인문 (11-15) ==========
      {
        category: "인문",
        skill: "핵심 이해력",
        passage: "칸트는 '순수이성비판'에서 인간의 인식 능력을 체계적으로 분석했다. 그는 경험론과 합리론의 대립을 극복하기 위해, 인간의 인식이 감각 경험과 선천적 인식 형식의 결합으로 이루어진다고 주장했다. 즉, 우리가 세계를 인식하는 방식은 대상 자체가 아니라 우리의 인식 구조에 의해 결정된다는 것이다. 이를 '코페르니쿠스적 전회'라 부르며, 이는 철학사에서 인식론의 패러다임을 전환시킨 혁명적 사고였다.",
        passageExtended: "칸트는 1781년 출간한 '순수이성비판'에서 인간의 인식 능력을 체계적으로 분석했다. 당시 철학계는 '모든 지식은 경험에서 온다'는 경험론(로크, 흄)과 '이성을 통해 선천적 진리에 도달할 수 있다'는 합리론(데카르트, 라이프니츠) 사이의 대립이 지속되고 있었다. 칸트는 이 대립을 극복하기 위해, 인간의 인식이 감각 경험과 선천적 인식 형식(시간, 공간, 인과관계 등)의 결합으로 이루어진다고 주장했다. 경험 없이는 인식이 시작될 수 없지만, 그 경험을 조직하는 것은 우리 마음의 선천적 형식이라는 것이다. 즉, 우리가 세계를 인식하는 방식은 대상 자체(물자체, Ding an sich)가 아니라 우리의 인식 구조에 의해 결정된다. 이를 '코페르니쿠스적 전회'라 부르는데, 코페르니쿠스가 지구가 태양 주위를 돈다고 관점을 바꾼 것처럼, 칸트는 대상이 인식을 결정하는 것이 아니라 인식이 대상을 구성한다고 관점을 전환했다. 이는 철학사에서 인식론의 패러다임을 전환시킨 혁명적 사고로 평가받으며, 이후 독일 관념론과 현대 인식론에 지대한 영향을 미쳤다.",
        question: "이 글이 설명하는 칸트 철학의 핵심 주장은?",
        options: [
          "인식은 오직 감각 경험을 통해서만 형성된다",
          "인식은 순수한 이성적 추론만으로 완성된다",
          "인식은 감각 경험과 선천적 형식의 결합으로 이루어진다",
          "인식은 대상의 본질을 있는 그대로 반영한다"
        ],
        correct: 2,
        explanation: "글에서 칸트는 경험론(감각 경험)과 합리론(순수 이성)의 대립을 극복하기 위해, 인식이 '감각 경험과 선천적 인식 형식의 결합'으로 이루어진다고 주장했다고 명확히 설명하고 있습니다. 이것이 칸트 철학의 핵심 주장입니다."
      },
      {
        category: "인문",
        skill: "구조 파악력",
        passage: "사르트르는 '실존은 본질에 앞선다'는 명제로 실존주의 철학을 정립했다. 그는 인간은 태어날 때 정해진 본질이 없으며, 스스로의 선택과 행동을 통해 자신의 본질을 만들어간다고 보았다. 따라서 인간은 자신의 삶에 대해 전적인 책임을 져야 한다. 이러한 자유와 책임은 불안을 동반하지만, 동시에 인간 존재의 위대함을 보여준다. 사르트르는 이를 통해 수동적 삶이 아닌 주체적 실존을 강조했다.",
        passageExtended: "사르트르는 '실존은 본질에 앞선다(L'existence précède l'essence)'는 명제로 20세기 실존주의 철학을 정립했다. 칼, 의자와 같은 도구는 만들어지기 전에 그 목적(본질)이 먼저 정해지지만, 인간은 다르다. 그는 인간은 태어날 때 정해진 본질이 없으며, 스스로의 선택과 행동을 통해 자신의 본질을 만들어간다고 보았다. 신이 존재하지 않는다면 인간의 본성을 규정해줄 보편적 기준도 없으므로, 인간은 '자유롭도록 선고받은' 존재다. 따라서 인간은 자신의 삶에 대해 전적인 책임을 져야 하며, 그 책임을 타인이나 환경, 본능 탓으로 돌리는 것을 사르트르는 '자기기만(mauvaise foi)'이라 비판했다. 이러한 절대적 자유와 책임은 불안(angoisse)을 동반하지만, 동시에 인간이 스스로를 창조할 수 있다는 점에서 인간 존재의 위대함을 보여준다. 사르트르는 이를 통해 운명에 순응하는 수동적 삶이 아닌, 매 순간 선택하고 책임지는 주체적 실존을 강조했으며, 이는 전후 유럽 지식인들에게 큰 영향을 미쳤다.",
        question: "이 글의 논리 전개 방식으로 가장 적절한 것은?",
        options: [
          "핵심 명제 제시 → 의미 설명 → 결론(강조점) 제시",
          "핵심 명제 제시 → 구체적 사례 → 일반화된 결론 도출",
          "문제 상황 제시 → 철학적 분석 → 실천적 대안 모색",
          "핵심 개념 정의 → 개념의 확장 → 사회적 함의 제시"
        ],
        correct: 0,
        explanation: "글은 먼저 '실존은 본질에 앞선다'는 핵심 명제를 제시하고, 이어서 그 의미(인간이 선택으로 본질을 만들어감, 자유와 책임)를 설명한 후, 마지막으로 주체적 실존이라는 강조점을 제시하는 구조입니다."
      },
      {
        category: "인문",
        skill: "어휘 맥락력",
        passage: "공자는 '논어'에서 인(仁)을 핵심 덕목으로 강조했다. 인은 타인에 대한 사랑과 배려를 의미하며, '자기가 원하지 않는 것을 남에게 베풀지 말라'는 서(恕)의 정신으로 구현된다. 또한 공자는 예(禮)를 통해 사회 질서를 유지하고, 학문을 통해 인격을 도야할 것을 주장했다. 이러한 유교 사상은 동아시아 문화에 깊은 영향을 미쳐 현재까지도 사회적 가치관의 기반이 되고 있다.",
        passageExtended: "공자(기원전 551~479)는 '논어'에서 인(仁)을 핵심 덕목으로 강조했다. 인은 타인에 대한 사랑과 배려를 의미하며, '자기가 원하지 않는 것을 남에게 베풀지 말라(己所不欲勿施於人)'는 서(恕)의 정신으로 구현된다. 이는 황금률이라고도 불리며 동서양 윤리의 보편적 원칙과 맞닿아 있다. 또한 공자는 예(禮)를 통해 사회 질서를 유지하고, 학문을 통해 인격을 도야할 것을 주장했다. 예는 단순한 의례가 아니라 사회적 관계에서 마땅히 지켜야 할 규범과 질서를 의미하며, 인을 외적으로 표현하는 형식이다. 공자는 또한 군자(君子)의 이상을 제시하여 지식인이 갖춰야 할 덕목과 사회적 책임을 강조했다. 이러한 유교 사상은 한국, 중국, 일본, 베트남 등 동아시아 문화에 깊은 영향을 미쳐, 효(孝)와 충(忠)의 가치, 교육 중시, 위계질서 존중 등 현재까지도 사회적 가치관의 기반이 되고 있다.",
        question: "문맥상 '도야하다'의 의미로 가장 적절한 것은?",
        options: [
          "내면을 살피며 깨닫다",
          "닦고 기르다",
          "꾸준히 연마하다",
          "배움을 체화하다"
        ],
        correct: 1,
        explanation: "문맥상 '학문을 통해 인격을 도야한다'는 것은 학문을 통해 인격을 발전시키고 향상시킨다는 긍정적 의미입니다. 따라서 '도야하다'는 '닦고 기르다'는 의미로, 인격을 수양하고 발전시키는 것을 뜻합니다."
      },
      {
        category: "인문",
        skill: "추론 통합력",
        passage: "르네상스는 14세기부터 16세기까지 유럽에서 일어난 문화 운동으로, '재생'을 의미한다. 중세 신 중심 사상에서 벗어나 인간 중심의 사고가 확산되었고, 고대 그리스·로마 문화가 재발견되었다. 예술에서는 원근법과 인체 표현이 발전했고, 학문에서는 실험과 관찰을 중시하는 과학적 방법이 등장했다. 르네상스는 근대 사회로 나아가는 중요한 전환점이 되었다.",
        passageExtended: "르네상스(Renaissance)는 14세기부터 16세기까지 유럽에서 일어난 문화 운동으로, 라틴어로 '재탄생(rinascita)'을 의미한다. 이탈리아 피렌체에서 시작되어 전 유럽으로 확산되었다. 중세 약 천 년간 지배적이었던 신 중심, 교회 중심 사상에서 벗어나 인간의 가치와 능력을 긍정하는 인문주의(휴머니즘)가 확산되었고, 고대 그리스·로마의 문화와 문헌이 재발견되었다. 예술에서는 레오나르도 다빈치, 미켈란젤로, 라파엘로 등 거장들이 활약하며 원근법과 해부학에 기초한 사실적 인체 표현이 발전했다. 학문에서는 권위에 의존하기보다 직접 실험과 관찰을 중시하는 과학적 방법이 등장하여 코페르니쿠스, 갈릴레오 등의 과학 혁명으로 이어졌다. 인쇄술의 발명은 지식의 대중화를 가속화했다. 르네상스는 중세와 근대를 잇는 다리로서, 종교개혁, 대항해시대, 과학혁명 등 근대 사회로 나아가는 중요한 전환점이 되었다.",
        question: "이 글을 바탕으로 추론할 수 있는 내용은?",
        options: [
          "르네상스는 고대 그리스·로마 문화를 현대적으로 계승했다",
          "르네상스는 인간의 이성과 창조성을 강조했다",
          "르네상스는 중세의 신 중심 사상을 발전시켰다",
          "르네상스는 예술과 과학 분야에 고르게 영향을 미쳤다"
        ],
        correct: 1,
        explanation: "글에서 르네상스는 신 중심에서 인간 중심 사고로 전환되었고, 예술에서 원근법과 인체 표현이 발전했으며, 실험과 관찰을 중시하는 과학적 방법이 등장했다고 설명합니다. 이를 통해 르네상스가 인간의 이성과 창조성을 강조한 시기였음을 추론할 수 있습니다."
      },
      {
        category: "인문",
        skill: "비판 적용력",
        passage: "플라톤은 '국가론'에서 이상 국가를 제시하며, 통치자는 철학자여야 한다고 주장했다. 그는 진리를 아는 자만이 올바른 통치를 할 수 있다고 보았다. 그러나 이러한 철인 통치론은 현실적으로 실현 가능성이 낮고, 권력 남용의 위험이 있다는 비판을 받는다. 현대 민주주의는 권력 분립과 견제를 통해 이러한 문제를 해결하려 한다. 그럼에도 플라톤의 사상은 통치자의 자질과 윤리에 대한 중요한 질문을 던진다.",
        passageExtended: "플라톤은 기원전 4세기에 저술한 '국가론(폴리테이아)'에서 이상 국가를 제시하며, 통치자는 철학자여야 한다고 주장했다. 그는 '철학자가 왕이 되거나 왕이 철학자가 되지 않는 한 국가와 인류에게 불행은 끝나지 않을 것'이라고 선언했다. 진리와 선의 이데아를 인식할 수 있는 자만이 개인의 이익이 아닌 공동선을 위해 올바른 통치를 할 수 있다고 보았다. 플라톤은 국가를 통치자(지혜), 수호자(용기), 생산자(절제) 세 계층으로 구분하고, 각자의 덕목에 맞는 역할을 수행할 때 정의가 실현된다고 보았다. 그러나 이러한 철인 통치론은 누가 진정한 철학자인지 판별할 기준이 모호하고, 현실적으로 실현 가능성이 낮으며, 권력이 소수에게 집중되어 남용될 위험이 있다는 비판을 받는다. 역사적으로도 엘리트 통치를 정당화하는 논거로 오용되기도 했다. 현대 민주주의는 입법, 사법, 행정의 권력 분립과 상호 견제를 통해 이러한 문제를 해결하려 한다. 그럼에도 플라톤의 사상은 통치자의 자질과 윤리에 대한 중요한 질문을 던지며, 리더십 교육과 공직자 윤리 논의에 여전히 영감을 준다.",
        question: "플라톤의 철인 통치론을 현대 사회에 적용할 때 시사점으로 적절한 것은?",
        options: [
          "지도자는 철학적 소양과 학문적 능력을 갖춰야 한다",
          "효율적인 통치를 위해 권력 집중이 필요하다",
          "리더의 도덕성과 전문성이 중요하다",
          "민주적 절차보다 통치자의 현명한 판단이 우선이다"
        ],
        correct: 2,
        explanation: "플라톤의 철인 통치론은 권력 집중의 위험성 때문에 그대로 적용할 수 없지만, 글의 마지막 문장에서 '통치자의 자질과 윤리에 대한 중요한 질문을 던진다'고 했듯이, 현대에도 리더의 도덕성과 전문성이 중요하다는 시사점을 얻을 수 있습니다."
      },

      // ========== 경제 (16-20) ==========
      {
        category: "경제",
        skill: "핵심 이해력",
        passage: "인플레이션은 물가가 지속적으로 상승하는 현상을 말한다. 중앙은행은 인플레이션을 조절하기 위해 기준금리를 조정하는데, 금리를 인상하면 돈의 가치가 올라가고 대출이 줄어들어 소비와 투자가 감소한다. 반대로 금리를 인하하면 경기가 활성화되지만 물가 상승 압력이 커진다. 적정 수준의 인플레이션(연 2% 내외)은 경제 성장에 긍정적이지만, 과도한 인플레이션은 화폐 가치 하락과 구매력 감소를 초래해 경제 불안을 야기한다.",
        passageExtended: "인플레이션은 물가가 지속적으로 상승하는 현상을 말하며, 소비자물가지수(CPI)로 측정한다. 인플레이션의 원인은 크게 수요 견인 인플레이션(소비 증가로 수요가 공급 초과)과 비용 인상 인플레이션(원자재 가격, 임금 상승)으로 나뉜다. 중앙은행(한국은행, 미국 연준 등)은 인플레이션을 조절하기 위해 기준금리를 조정하는 통화정책을 시행한다. 금리를 인상하면 예금 금리가 오르고 대출 비용이 증가하여 돈의 가치가 올라가고, 대출이 줄어들어 소비와 투자가 감소한다. 이는 총수요를 낮춰 물가 상승을 억제한다. 반대로 금리를 인하하면 대출이 늘고 소비가 증가하여 경기가 활성화되지만, 시중에 돈이 많이 풀려 물가 상승 압력이 커진다. 대부분의 선진국 중앙은행들은 연 2% 내외의 인플레이션을 목표로 설정하는데, 적정 수준의 인플레이션은 기업의 투자와 고용을 촉진하고 경제 성장에 긍정적으로 작용한다. 그러나 과도한 인플레이션은 화폐 가치 하락으로 같은 돈으로 살 수 있는 물건이 줄어들어 구매력이 감소하고, 특히 고정 수입자(연금 생활자 등)에게 타격을 주어 경제 불안을 야기한다. 극단적인 경우 하이퍼인플레이션으로 이어질 수 있다.",
        question: "이 글의 중심 내용은?",
        options: [
          "금리 조정이 경기와 물가에 미치는 복합적 영향",
          "인플레이션의 개념과 금리를 통한 조절 방식",
          "중앙은행의 통화정책과 그 경제적 파급효과",
          "물가 안정을 위한 금리 정책의 필요성과 한계"
        ],
        correct: 1,
        explanation: "이 글은 인플레이션이 무엇인지 정의한 후, 중앙은행이 기준금리 인상과 인하를 통해 인플레이션을 조절하는 방식을 설명하고 있습니다. 적정 수준과 과도한 수준의 차이도 언급하며 인플레이션 조절의 중요성을 강조합니다."
      },
      {
        category: "경제",
        skill: "구조 파악력",
        passage: "수요와 공급의 법칙은 시장경제의 기본 원리다. 수요가 공급보다 많으면 가격이 상승하고, 공급이 수요보다 많으면 가격이 하락한다. 예를 들어, 농작물 흉년으로 공급이 감소하면 가격이 올라가고, 반대로 풍년으로 공급이 늘어나면 가격이 내려간다. 시장은 이러한 가격 메커니즘을 통해 자원을 효율적으로 배분한다. 그러나 독과점이나 정보 비대칭 같은 시장 실패가 발생하면 정부 개입이 필요하다.",
        passageExtended: "수요와 공급의 법칙은 시장경제의 기본 원리로, 18세기 경제학자 애덤 스미스 이후 경제학의 핵심 개념으로 자리 잡았다. 수요란 소비자가 특정 가격에 구매하고자 하는 양이고, 공급은 생산자가 특정 가격에 판매하고자 하는 양이다. 수요가 공급보다 많으면 물건이 부족해지므로 가격이 상승하고, 공급이 수요보다 많으면 물건이 남아돌아 가격이 하락한다. 수요와 공급이 일치하는 점을 균형 가격(균형점)이라 한다. 예를 들어, 농작물 흉년으로 공급이 감소하면 수요는 그대로인데 물량이 줄어 가격이 올라가고, 반대로 풍년으로 공급이 늘어나면 물량이 넘쳐 가격이 내려간다. 시장은 이러한 가격 메커니즘을 통해 자원을 효율적으로 배분하는데, 이를 애덤 스미스는 '보이지 않는 손'이라 표현했다. 그러나 소수 기업이 시장을 지배하는 독과점, 매수자와 매도자 간 정보 비대칭, 환경 오염 같은 외부 효과 등 시장 실패가 발생하면 시장 기능만으로는 효율적 자원 배분이 어려워지므로 정부의 규제나 개입이 필요하다.",
        question: "수요와 공급의 관계에 따른 가격 변동 순서로 올바른 것은?",
        options: [
          "공급 감소 → 희소성 증가 → 가격 하락",
          "공급 감소 → 수요 증가 → 가격 상승",
          "수요 감소 → 공급 과잉 → 가격 상승",
          "수요 증가 → 공급 부족 → 가격 안정"
        ],
        correct: 1,
        explanation: "글에서 '수요가 공급보다 많으면 가격이 상승한다'고 설명합니다. 공급이 감소하고 수요가 증가하면 수요가 공급을 크게 초과하므로 가격이 상승하게 됩니다. 이는 흉년의 예시에서도 확인할 수 있습니다."
      },
      {
        category: "경제",
        skill: "어휘 맥락력",
        passage: "주식은 기업의 소유권을 나타내는 증권이다. 주식을 보유하면 기업의 이익에 따라 배당금을 받을 수 있고, 주가가 상승하면 자본 이득을 얻을 수 있다. 그러나 기업 실적이 나빠지면 주가가 하락하여 손실을 볼 수도 있다. 주식 투자는 높은 수익을 기대할 수 있지만, 그만큼 변동성도 크다. 따라서 투자자는 분산 투자를 통해 위험을 완화하고, 장기적 관점에서 접근하는 것이 중요하다.",
        passageExtended: "주식(Stock)은 주식회사가 자본금을 조달하기 위해 발행하는 증권으로, 기업의 소유권 일부를 나타낸다. 주식을 보유하면 주주총회에서 의결권을 행사할 수 있고, 기업의 이익에 따라 배당금을 받을 수 있다. 또한 기업 가치가 상승하여 주가가 오르면 주식을 매도할 때 자본 이득(시세 차익)을 얻을 수 있다. 그러나 경기 침체, 경영 악화, 업종 전망 부정 등으로 기업 실적이 나빠지면 주가가 하락하여 손실을 볼 수도 있다. 극단적인 경우 기업이 파산하면 투자금 전액을 잃을 수도 있다. 주식 투자는 예금이나 채권보다 높은 수익을 기대할 수 있지만, 그만큼 변동성(리스크)도 크다. 따라서 투자자는 한 종목에 집중하지 않고 여러 종목, 여러 자산군에 나눠 투자하는 분산 투자를 통해 위험을 완화하고, 단기적 시세 변동에 일희일비하지 않으며 장기적 관점에서 접근하는 것이 중요하다. '계란을 한 바구니에 담지 말라'는 격언이 이를 잘 표현한다.",
        question: "문맥상 '완화하다'의 의미로 가장 적절한 것은?",
        options: [
          "여러 곳으로 나누다",
          "줄이거나 약하게 만들다",
          "사전에 방지하다",
          "안정적으로 유지하다"
        ],
        correct: 1,
        explanation: "문맥상 '분산 투자를 통해 위험을 완화한다'는 것은 한 곳에 집중 투자할 때의 큰 위험을 여러 곳에 나누어 투자함으로써 줄이거나 약하게 만든다는 의미입니다. 위험을 제거하는 것이 아니라 그 정도를 낮추는 것입니다."
      },
      {
        category: "경제",
        skill: "추론 통합력",
        passage: "최저임금제는 근로자의 생활 안정을 위해 임금의 최저 수준을 법으로 정하는 제도다. 최저임금이 인상되면 저소득 근로자의 소득이 증가하여 생활이 개선될 수 있다. 그러나 기업의 인건비 부담이 커져 고용이 감소하거나, 가격 인상으로 이어질 수 있다는 우려도 있다. 최저임금 정책은 근로자 보호와 경제 활력 사이의 균형을 고려하여 신중하게 결정해야 한다.",
        passageExtended: "최저임금제는 근로자의 생활 안정과 노동력의 질적 향상을 위해 임금의 최저 수준을 법으로 정하는 제도로, 한국에서는 1988년부터 시행되고 있다. 최저임금위원회에서 매년 다음 연도의 최저임금을 심의·결정한다. 최저임금이 인상되면 저소득 근로자의 소득이 증가하여 생활이 개선되고, 소비 여력이 늘어나 내수 경제 활성화에 기여할 수 있다. 또한 임금 격차를 줄이고 소득 분배를 개선하는 효과도 기대된다. 그러나 급격한 인상은 중소기업이나 자영업자의 인건비 부담을 가중시켜 고용이 감소하거나 알바 시간 단축으로 이어질 수 있다는 우려도 있다. 인건비 상승분을 제품이나 서비스 가격에 전가하면 물가 인상 요인이 될 수도 있다. 한편 최저임금 이하로 일하는 미적용 사각지대(5인 미만 사업장 일부, 수습 근로자 등)의 문제도 존재한다. 최저임금 정책은 근로자 보호와 기업 경쟁력, 고용 안정 사이의 균형을 고려하여 경제 상황에 맞게 신중하게 결정해야 한다.",
        question: "이 글로부터 추론할 수 있는 내용은?",
        options: [
          "최저임금 인상은 저소득 근로자와 기업 모두에 영향을 미친다",
          "최저임금 인상 폭이 클수록 근로자에게 유리하다",
          "최저임금 정책은 장단점을 모두 고려해야 한다",
          "최저임금 정책은 경제 활성화를 위해 필수적이다"
        ],
        correct: 2,
        explanation: "글에서 최저임금 인상의 긍정적 효과(근로자 소득 증가)와 부정적 우려(고용 감소, 가격 인상)를 모두 제시하고, 마지막에 '균형을 고려하여 신중하게 결정해야 한다'고 했습니다. 따라서 최저임금 정책은 장단점을 모두 고려해야 함을 추론할 수 있습니다."
      },
      {
        category: "경제",
        skill: "비판 적용력",
        passage: "가상화폐는 블록체인 기술을 기반으로 한 디지털 자산이다. 중앙은행이나 정부의 통제를 받지 않아 자유로운 거래가 가능하다는 장점이 있다. 그러나 가격 변동성이 매우 크고, 해킹이나 사기 위험이 있으며, 법적 보호가 미흡하다는 단점도 있다. 일부 국가는 가상화폐를 규제하거나 금지하기도 한다. 가상화폐에 투자할 때는 위험성을 충분히 인지하고, 여유 자금으로만 투자해야 한다.",
        passageExtended: "가상화폐(암호화폐)는 블록체인이라는 분산 원장 기술을 기반으로 한 디지털 자산이다. 비트코인, 이더리움 등이 대표적이며, 2009년 비트코인의 등장 이후 급격히 성장했다. 블록체인은 거래 내역을 여러 컴퓨터에 분산 저장하여 위변조가 어렵다는 특징이 있다. 중앙은행이나 정부의 통제를 받지 않아 국경을 넘는 자유로운 거래가 가능하고, 중개 기관 없이 개인 간 직접 거래(P2P)가 이루어진다는 장점이 있다. 그러나 하루에도 수십 퍼센트씩 오르내리는 극심한 가격 변동성이 있고, 거래소 해킹이나 스캠(사기) 코인 위험이 존재하며, 주식이나 예금과 달리 예금자 보호법 등 법적 보호가 미흡하다는 단점도 있다. 또한 자금 세탁, 탈세 등에 악용될 우려로 일부 국가는 가상화폐를 규제하거나 금지하기도 하며, 한국을 포함한 많은 국가에서 과세 체계를 정비 중이다. 가상화폐에 투자할 때는 높은 수익 가능성만큼 원금 손실 위험성도 충분히 인지하고, 생활비가 아닌 여유 자금으로만 투자해야 한다.",
        question: "가상화폐 투자 시 고려해야 할 사항으로 적절하지 않은 것은?",
        options: [
          "급격한 가격 변동에 따른 손실 위험 인지",
          "거래소의 보안 시스템과 신뢰도 점검",
          "높은 수익이 예상되면 생활비까지 과감히 투자하기",
          "암호화폐 관련 과세 정책 및 법규 파악"
        ],
        correct: 2,
        explanation: "글의 마지막 문장에서 '여유 자금으로만 투자해야 한다'고 명확히 권고하고 있습니다. 가상화폐는 가격 변동성이 크고 위험이 많으므로 생활비를 모두 투자하는 것은 매우 위험하며 적절하지 않은 행동입니다."
      },

      // ========== 법 (21-25) ==========
      {
        category: "법",
        skill: "핵심 이해력",
        passage: "우리나라 헌법 제10조는 '모든 국민은 인간으로서의 존엄과 가치를 가지며, 행복을 추구할 권리를 가진다'고 규정한다. 이는 헌법상 기본권의 출발점으로, 개인의 인격권과 자기결정권을 보장하는 근거가 된다. 국가는 국민의 기본적 인권을 확인하고 보장할 의무가 있으며, 이는 단순히 침해하지 않는 소극적 의무뿐 아니라 적극적으로 실현할 의무를 포함한다. 인간의 존엄성은 어떤 경우에도 제한될 수 없는 절대적 가치로 인정된다.",
        passageExtended: "우리나라 헌법 제10조는 '모든 국민은 인간으로서의 존엄과 가치를 가지며, 행복을 추구할 권리를 가진다'고 규정하고 있다. 이 조항은 헌법상 모든 기본권의 출발점이자 이념적 기초로서, 개인의 인격권과 자기결정권을 보장하는 헌법적 근거가 된다. 헌법학에서는 이를 '기본권 중의 기본권'이라 부르며, 다른 모든 기본권의 해석 기준으로 삼는다. 제10조 후단에서는 '국가는 개인이 가지는 불가침의 기본적 인권을 확인하고 이를 보장할 의무를 진다'라고 명시하여, 국가의 기본권 보장 의무를 분명히 하고 있다. 여기서 '확인'은 기본권이 천부인권으로서 국가 이전에 존재함을 인정하는 것이며, '보장'은 이를 실질적으로 실현할 국가의 적극적 의무를 의미한다. 즉, 국가는 국민의 인권을 침해하지 않는 소극적 의무뿐 아니라, 인권이 실현될 수 있도록 제도와 환경을 조성하는 적극적 의무도 부담한다. 헌법재판소는 여러 판례에서 인간의 존엄성이 어떤 경우에도 본질적으로 제한될 수 없는 절대적 가치임을 확인해 왔으며, 이는 국가 권력의 한계이자 모든 법률 해석의 지침이 된다.",
        question: "이 글이 설명하는 헌법 제10조의 핵심 내용은?",
        options: [
          "모든 국민의 자유와 평등을 보장하는 원리",
          "인간의 존엄과 가치, 행복추구권",
          "국가가 기본권을 보호해야 할 의무와 범위",
          "기본권의 종류와 각 권리의 보장 내용"
        ],
        correct: 1,
        explanation: "글의 첫 문장에서 헌법 제10조가 '인간으로서의 존엄과 가치, 행복을 추구할 권리'를 규정한다고 명확히 밝히고 있습니다. 이것이 헌법상 기본권의 출발점이며, 이 조항의 핵심 내용입니다."
      },
      {
        category: "법",
        skill: "구조 파악력",
        passage: "형법의 기본 원칙 중 하나는 '죄형법정주의'다. 이는 법률에 명시되지 않은 행위는 처벌할 수 없다는 원칙으로, 국민의 자유와 권리를 보호한다. 죄형법정주의는 '법률이 없으면 범죄도 형벌도 없다'는 라틴어 격언으로 표현된다. 이 원칙은 국가 권력의 자의적인 형벌권 행사를 막고, 국민에게 법적 안정성과 예측 가능성을 제공한다. 따라서 법률은 명확하게 규정되어야 하며, 소급 적용되어서는 안 된다.",
        passageExtended: "형법의 가장 기본적인 원칙 중 하나는 '죄형법정주의(罪刑法定主義)'이다. 이는 법률에 명시적으로 규정되지 않은 행위는 어떤 경우에도 범죄로 처벌할 수 없다는 원칙으로, 국민의 자유와 권리를 국가 권력의 자의적 행사로부터 보호하는 근대 형법의 대원칙이다. 죄형법정주의는 라틴어 격언 'nullum crimen, nulla poena sine lege(법률 없으면 범죄 없고, 법률 없으면 형벌 없다)'로 표현되며, 이는 18세기 계몽주의 시대에 확립된 개념이다. 이 원칙이 가지는 핵심적 기능은 국가 권력, 특히 형벌권의 자의적이고 예측 불가능한 행사를 방지하여 국민에게 법적 안정성과 예측 가능성을 제공하는 것이다. 죄형법정주의의 파생 원칙으로는 명확성의 원칙(법률은 일반인이 이해할 수 있도록 명확해야 함), 소급효 금지 원칙(행위 당시 범죄가 아니었던 행위를 소급하여 처벌할 수 없음), 유추해석 금지 원칙(법률에 규정되지 않은 사항을 유추하여 피고인에게 불리하게 적용할 수 없음), 관습형법 금지 원칙(관습에 의한 처벌 불가)이 있다. 이러한 원칙들은 현대 법치국가에서 국민의 기본권을 보장하는 핵심 장치로 기능한다.",
        question: "이 글의 내용 전개 방식은?",
        options: [
          "원칙 제시 → 의미 설명 → 목적 및 요건 설명",
          "핵심 원칙 제시 → 역사적 배경 → 파생 원칙 나열",
          "법적 원칙 정의 → 적용 사례 → 예외 상황 분석",
          "원칙 소개 → 구체적 사례 → 실천적 함의 도출"
        ],
        correct: 0,
        explanation: "글은 먼저 '죄형법정주의'라는 원칙을 제시하고, 그 의미(법률에 없는 행위는 처벌 불가)를 설명합니다. 이어서 그 목적(권력 남용 방지, 법적 안정성 제공)과 요건(법률의 명확성, 소급 적용 금지)을 설명하는 구조입니다."
      },
      {
        category: "법",
        skill: "어휘 맥락력",
        passage: "계약은 당사자 간의 합의로 법적 효력이 발생하는 약속이다. 계약이 성립하려면 청약과 승낙이 있어야 하며, 당사자는 계약 내용을 이행할 의무를 진다. 만약 한쪽이 계약을 위반하면 손해배상 책임을 질 수 있다. 그러나 사기, 강박, 착오 등으로 체결된 계약은 취소할 수 있다. 계약은 사회 경제 활동의 기초이며, 신의성실 원칙에 따라 이행되어야 한다.",
        passageExtended: "계약(契約)은 두 명 이상의 당사자가 상호 간에 일정한 법률효과의 발생을 목적으로 의사의 합치를 이루는 법률행위를 말한다. 민법상 계약이 성립하기 위해서는 청약(請約, 계약을 체결하자는 의사표시)과 승낙(承諾, 청약에 대한 동의의 의사표시)이라는 두 가지 의사표시의 합치가 필요하다. 계약이 유효하게 성립하면 당사자들은 그 계약 내용에 따른 채무를 부담하며, 계약 내용을 이행할 법적 의무를 지게 된다. 만약 한쪽 당사자가 계약상의 의무를 위반할 경우, 이를 채무불이행이라 하며, 상대방은 손해배상을 청구하거나 계약을 해제할 수 있다. 다만 모든 계약이 유효한 것은 아니다. 사기(詐欺), 강박(强迫), 착오(錯誤) 등 의사표시에 흠이 있는 경우에 체결된 계약은 취소할 수 있으며, 반사회적 법률행위나 무능력자의 법률행위 등은 무효가 된다. 계약은 시장 경제 질서의 근간이자 사회 경제 활동의 기초로서, 민법의 대원칙인 신의성실의 원칙(신뢰와 성실을 바탕으로 권리를 행사하고 의무를 이행해야 한다는 원칙)에 따라 이행되어야 하며, 이를 위반할 경우 법적 책임이 따른다.",
        question: "문맥상 '이행하다'의 의미로 가장 적절한 것은?",
        options: [
          "약속한 내용을 기록하다",
          "실행하거나 수행하다",
          "세부 사항을 합의하다",
          "의무 사항을 전달하다"
        ],
        correct: 1,
        explanation: "문맥상 '계약 내용을 이행할 의무'와 '신의성실 원칙에 따라 이행되어야 한다'는 것은 계약에서 약속한 내용을 실제로 실행하거나 수행해야 한다는 의미입니다. 계약 위반의 반대 개념으로 계약을 지키는 것을 의미합니다."
      },
      {
        category: "법",
        skill: "추론 통합력",
        passage: "개인정보 보호법은 개인의 정보를 보호하고, 정보 주체의 권리를 보장하기 위한 법률이다. 개인정보를 수집할 때는 반드시 본인의 동의를 받아야 하며, 목적 외 사용을 금지한다. 위반 시 벌금이나 징역형에 처해질 수 있다. 최근 빅데이터와 인공지능 기술이 발전하면서 개인정보 유출과 악용 위험이 커지고 있어, 법적 규제와 기술적 보안이 더욱 중요해지고 있다.",
        passageExtended: "개인정보 보호법은 개인의 자유와 권리를 보호하기 위해 개인정보의 처리에 관한 사항을 규정한 법률이다. 이 법에서 '개인정보'란 살아 있는 개인에 관한 정보로서 성명, 주민등록번호 및 영상 등을 통하여 개인을 알아볼 수 있는 정보를 말하며, 해당 정보만으로는 특정 개인을 알아볼 수 없더라도 다른 정보와 쉽게 결합하여 알아볼 수 있는 것도 포함한다. 개인정보 보호법의 핵심 원칙 중 하나는 정보 주체의 동의에 기반한 개인정보 처리이다. 즉, 개인정보를 수집할 때는 반드시 정보 주체 본인의 명시적 동의를 받아야 하며, 수집 목적 외의 용도로 사용하는 것은 원칙적으로 금지된다. 개인정보처리자가 이러한 규정을 위반하면 과태료나 벌금, 심한 경우 징역형에 처해질 수 있다. 최근 빅데이터 분석, 인공지능(AI), 사물인터넷(IoT) 등 4차 산업혁명 기술이 급속도로 발전하면서 대량의 개인정보가 수집·분석되는 환경이 조성되었고, 이에 따라 개인정보 유출 사고와 악용 위험이 크게 증가하고 있다. 이러한 상황에서 법적 규제의 강화와 함께 암호화, 접근 통제, 가명처리 등 기술적 보안 조치의 중요성이 더욱 부각되고 있다.",
        question: "이 글로부터 추론할 수 있는 내용은?",
        options: [
          "개인정보 보호에서 기술적 보안보다 법적 규제가 더 중요하다",
          "기술 발전과 함께 개인정보 보호의 중요성이 커지고 있다",
          "개인정보 수집 동의 절차가 점점 간소화되고 있다",
          "새로운 기술 발전으로 개인정보 유출 위험이 감소했다"
        ],
        correct: 1,
        explanation: "글의 마지막 문장에서 빅데이터와 인공지능 기술이 발전하면서 개인정보 유출과 악용 위험이 커지고 있어 법적 규제와 기술적 보안이 더욱 중요해지고 있다고 설명합니다. 이를 통해 기술 발전과 함께 개인정보 보호의 중요성이 커지고 있음을 추론할 수 있습니다."
      },
      {
        category: "법",
        skill: "비판 적용력",
        passage: "노동법은 근로자의 권리를 보호하고, 노사 관계를 규율하는 법률이다. 근로기준법은 최저임금, 근로시간, 휴가, 해고 등에 관한 기준을 정한다. 근로자는 부당 해고나 임금 체불 시 노동위원회나 법원에 구제를 신청할 수 있다. 또한 노동조합을 결성하여 단체교섭을 할 권리가 있다. 그러나 현실에서는 비정규직 차별, 장시간 노동 등의 문제가 여전히 존재한다.",
        passageExtended: "노동법은 근로자의 권리를 보호하고, 사용자와 근로자 간의 노사 관계를 규율하는 법률의 총칭이다. 노동법의 핵심인 근로기준법은 근로조건의 최저 기준을 정함으로써 근로자의 기본적 생활을 보장하고자 하며, 최저임금, 근로시간(원칙적으로 1주 40시간, 1일 8시간), 연차 유급휴가, 해고의 제한과 절차 등에 관한 구체적인 기준을 규정한다. 헌법 제33조는 근로자의 노동3권, 즉 단결권(노동조합 결성권), 단체교섭권(사용자와 협상할 권리), 단체행동권(파업 등의 권리)을 보장하고 있다. 근로자가 부당 해고, 임금 체불, 차별 등 부당한 대우를 받은 경우에는 노동위원회에 구제 신청을 하거나 법원에 소송을 제기하여 권리를 회복할 수 있다. 그러나 법적 보장에도 불구하고 현실에서는 정규직과 비정규직 간의 임금 및 처우 차별, 주 52시간 근무제 위반 등 장시간 노동 관행, 산업재해, 직장 내 괴롭힘 등의 문제가 여전히 존재하며, 플랫폼 노동자나 특수고용 노동자 등 새로운 고용 형태에 대한 법적 보호의 사각지대도 사회적 쟁점이 되고 있다.",
        question: "노동법의 취지를 실생활에 적용한 사례로 적절하지 않은 것은?",
        options: [
          "해고 예고를 받고 노동위원회에 구제 신청하기",
          "입사 전 근로계약서를 꼼꼼히 검토하고 서명하기",
          "업무 효율을 위해 휴게시간 없이 연속 근무하기",
          "임금 인상을 위해 노동조합에서 단체교섭 진행하기"
        ],
        correct: 2,
        explanation: "노동법은 근로시간에 관한 기준을 정하여 근로자를 보호하는 법입니다. 글의 마지막 문장에서 '장시간 노동'을 여전히 존재하는 문제로 지적하고 있으므로, 근로 시간을 무제한으로 연장하는 것은 노동법의 취지에 어긋나는 부적절한 사례입니다."
      }
    ];

    // 중고등 학생 판별 함수
    function isSecondaryStudent(studentGrade) {
      const grade = studentGrade || '';
      return grade.startsWith('중') || grade.startsWith('고');
    }

    // 학년에 맞는 지문 반환 함수
    function getPassage(q, studentGrade) {
      if (isSecondaryStudent(studentGrade) && q.passageExtended) {
        return q.passageExtended;
      }
      return q.passage;
    }

    // URL 파라미터에서 ID 가져오기
    const urlParams = new URLSearchParams(window.location.search);
    const applicationId = urlParams.get('id');

    async function loadTestResult() {
      if (!applicationId) {
        showError('시험지 ID가 없습니다.');
        return;
      }

      try {
        const response = await fetch(`/api/course-application/${applicationId}`);
        const result = await response.json();

        if (!result.success) {
          showError(result.message || '시험지를 불러올 수 없습니다.');
          return;
        }

        const data = result.data;

        // 답안이 없는 경우
        if (!data.answers || data.answers.length === 0) {
          showError('저장된 답안 정보가 없습니다.');
          return;
        }

        renderResult(data);
      } catch (error) {
        console.error('시험지 로드 오류:', error);
        showError('시험지를 불러오는 중 오류가 발생했습니다.');
      }
    }

    function showError(message) {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('error').style.display = 'block';
      document.getElementById('error').textContent = message;
    }

    function renderResult(data) {
      document.getElementById('loading').style.display = 'none';
      document.getElementById('content').style.display = 'block';

      // 정답/오답 개수 먼저 계산
      let correctCount = 0;
      let wrongCount = 0;
      data.answers.forEach((userAnswer, index) => {
        if (index < quizData.length) {
          const isCorrect = userAnswer === quizData[index].correct;
          if (isCorrect) {
            correctCount++;
          } else {
            wrongCount++;
          }
        }
      });

      // 실제 점수 결정 (data.score가 0이거나 없으면 correctCount 사용)
      const displayScore = (data.score && data.score > 0) ? data.score : correctCount;

      // 등급 재계산 (점수 기반)
      const studentGradeValue = data.studentGrade || '';
      const isElementary = ['3학년', '4학년', '5학년', '6학년'].includes(studentGradeValue);
      let displayGrade;

      if (isElementary) {
        // 초등 기준: 23~25 A+, 19~22 A, 14~18 C+, 0~13 D
        if (displayScore >= 23) {
          displayGrade = "최우수 (A+) / 수능내신 1~2등급(예측)";
        } else if (displayScore >= 19) {
          displayGrade = "우수 (A) / 수능내신 3등급(예측)";
        } else if (displayScore >= 14) {
          displayGrade = "보통 (C+) / 수능내신 4등급(예측)";
        } else {
          displayGrade = "기초 (D) / 수능내신 5등급(예측)";
        }
      } else {
        // 중고등 기준: 24~25 A+, 22~23 A, 16~21 C+, 0~15 D
        if (displayScore >= 24) {
          displayGrade = "최우수 (A+) / 수능내신 1~2등급(예측)";
        } else if (displayScore >= 22) {
          displayGrade = "우수 (A) / 수능내신 3등급(예측)";
        } else if (displayScore >= 16) {
          displayGrade = "보통 (C+) / 수능내신 4등급(예측)";
        } else {
          displayGrade = "기초 (D) / 수능내신 5등급(예측)";
        }
      }

      // 학생 정보 표시
      const gradeClass = `grade-${displayGrade}`;
      document.getElementById('studentInfo').innerHTML = `
        <span class="info-badge name">${data.studentName}</span>
        <span class="info-badge grade">${data.studentGrade}</span>
        <span class="info-badge result-grade ${gradeClass}">${displayGrade}</span>
        <span class="info-badge score">${displayScore}/25점</span>
      `;

      // 스킬별/과목별 점수 계산 (정답/오답은 위에서 이미 계산됨)
      correctCount = 0;
      wrongCount = 0;
      const skillScores = {
        "핵심 이해력": 0,
        "구조 파악력": 0,
        "어휘 맥락력": 0,
        "추론 통합력": 0,
        "비판 적용력": 0
      };
      const categoryScores = {
        "사회": 0,
        "과학": 0,
        "인문": 0,
        "경제": 0,
        "법": 0
      };

      data.answers.forEach((userAnswer, index) => {
        if (index < quizData.length) {
          const isCorrect = userAnswer === quizData[index].correct;
          if (isCorrect) {
            correctCount++;
            // 스킬별 점수 추가
            const skill = quizData[index].skill;
            if (skillScores.hasOwnProperty(skill)) {
              skillScores[skill]++;
            }
            // 과목별 점수 추가
            const category = quizData[index].category;
            if (categoryScores.hasOwnProperty(category)) {
              categoryScores[category]++;
            }
          } else {
            wrongCount++;
          }
        }
      });

      // 스킬별 퍼센트 계산 (각 스킬당 5문제)
      const skillPercentages = {};
      for (const skill in skillScores) {
        skillPercentages[skill] = (skillScores[skill] / 5) * 100;
      }

      // 과목별 퍼센트 계산 (각 과목당 5문제)
      const categoryPercentages = {};
      for (const category in categoryScores) {
        categoryPercentages[category] = (categoryScores[category] / 5) * 100;
      }

      // 가장 높은/낮은 스킬 찾기
      let highestSkill = Object.keys(skillScores)[0];
      let lowestSkill = Object.keys(skillScores)[0];
      for (const skill in skillScores) {
        if (skillScores[skill] > skillScores[highestSkill]) highestSkill = skill;
        if (skillScores[skill] < skillScores[lowestSkill]) lowestSkill = skill;
      }

      // 분석 결과 계산 (학년별 기준 적용)
      const score = displayScore; // 이미 계산된 displayScore 사용
      let series, recommendation, strength, weakness;

      // 초등/중고등 기준 분리
      if (isElementary) {
        // 초등 기준: 23~25 딥, 19~22 핏, 14~18 업, 0~13 온
        if (score >= 23) {
          series = "BRAIN 딥";
          recommendation = "고급 수준의 문해력을 갖추셨습니다. BRAIN 딥 시리즈로 더 깊은 사고력을 키워보세요!";
          strength = `${highestSkill} 영역이 특히 뛰어납니다 (정답률 ${skillPercentages[highestSkill]}%). 복잡한 문맥을 이해하는 능력이 탁월합니다.`;
          weakness = skillScores[lowestSkill] < 4 ? `${lowestSkill} 영역을 더 강화하면 완벽합니다!` : "현재 수준을 유지하며, 더 다양한 장르의 텍스트를 접해보세요.";
        } else if (score >= 19) {
          series = "BRAIN 핏";
          recommendation = "추론력과 이해력이 고르게 발달했습니다. BRAIN 핏 시리즈로 균형 잡힌 문해력을 완성하세요!";
          strength = `${highestSkill} 영역이 우수합니다 (정답률 ${skillPercentages[highestSkill]}%). 기본적인 독해 능력이 탄탄합니다.`;
          weakness = `${lowestSkill} 영역에서 조금 더 연습이 필요합니다 (정답률 ${skillPercentages[lowestSkill]}%).`;
        } else if (score >= 14) {
          series = "BRAIN 업";
          recommendation = "기초 이해력은 있습니다. BRAIN 업 시리즈로 추론력과 사고력을 한 단계 더 키워보세요!";
          strength = `${highestSkill} 영역에서 가능성이 보입니다 (정답률 ${skillPercentages[highestSkill]}%).`;
          weakness = `${lowestSkill} 영역을 집중 학습하면 큰 발전이 있을 것입니다 (정답률 ${skillPercentages[lowestSkill]}%).`;
        } else {
          series = "BRAIN 온";
          recommendation = "문해력 기초를 탄탄히 다질 시간입니다. BRAIN 온 시리즈로 기초부터 차근차근 시작하세요!";
          strength = "학습 의지가 있으며, 앞으로 발전 가능성이 높습니다.";
          weakness = "5가지 문해력 지수를 모두 기초부터 차근차근 쌓아가는 것이 필요합니다.";
        }
      } else {
        // 중고등 기준: 24~25 딥, 22~23 핏, 16~21 업, 0~15 온
        if (score >= 24) {
          series = "BRAIN 딥";
          recommendation = "고급 수준의 문해력을 갖추셨습니다. BRAIN 딥 시리즈로 더 깊은 사고력을 키워보세요!";
          strength = `${highestSkill} 영역이 특히 뛰어납니다 (정답률 ${skillPercentages[highestSkill]}%). 복잡한 문맥을 이해하는 능력이 탁월합니다.`;
          weakness = skillScores[lowestSkill] < 4 ? `${lowestSkill} 영역을 더 강화하면 완벽합니다!` : "현재 수준을 유지하며, 더 다양한 장르의 텍스트를 접해보세요.";
        } else if (score >= 22) {
          series = "BRAIN 핏";
          recommendation = "추론력과 이해력이 고르게 발달했습니다. BRAIN 핏 시리즈로 균형 잡힌 문해력을 완성하세요!";
          strength = `${highestSkill} 영역이 우수합니다 (정답률 ${skillPercentages[highestSkill]}%). 기본적인 독해 능력이 탄탄합니다.`;
          weakness = `${lowestSkill} 영역에서 조금 더 연습이 필요합니다 (정답률 ${skillPercentages[lowestSkill]}%).`;
        } else if (score >= 16) {
          series = "BRAIN 업";
          recommendation = "기초 이해력은 있습니다. BRAIN 업 시리즈로 추론력과 사고력을 한 단계 더 키워보세요!";
          strength = `${highestSkill} 영역에서 가능성이 보입니다 (정답률 ${skillPercentages[highestSkill]}%).`;
          weakness = `${lowestSkill} 영역을 집중 학습하면 큰 발전이 있을 것입니다 (정답률 ${skillPercentages[lowestSkill]}%).`;
        } else {
          series = "BRAIN 온";
          recommendation = "문해력 기초를 탄탄히 다질 시간입니다. BRAIN 온 시리즈로 기초부터 차근차근 시작하세요!";
          strength = "학습 의지가 있으며, 앞으로 발전 가능성이 높습니다.";
          weakness = "5가지 문해력 지수를 모두 기초부터 차근차근 쌓아가는 것이 필요합니다.";
        }
      }

      // 추천 시리즈 및 분석 결과 표시
      document.getElementById('recommendedSeries').textContent = series;
      document.getElementById('recommendationText').textContent = recommendation;
      document.getElementById('strengthText').textContent = strength;
      document.getElementById('weaknessText').textContent = weakness;

      // 레이더 차트 그리기
      drawRadarChart(skillPercentages);

      // 문해력 지수별 막대 그래프 그리기
      drawSkillBarChart(skillPercentages, data.studentGrade);

      // 과목별 막대 그래프 그리기
      drawCategoryBarChart(categoryPercentages, data.studentGrade);

      // AI 피드백용 데이터 저장 (전역)
      const studentGradeForFeedback = data.studentGrade || '초5';
      window.aiFeedbackData = {
        studentName: data.studentName || '학생',
        studentGrade: studentGradeForFeedback,
        skillPercentages: skillPercentages,
        categoryPercentages: categoryPercentages,
        gradeAverage: getGradeAverage(studentGradeForFeedback).avg,
        totalScore: correctCount
      };

      // AI 피드백 로드
      loadAIFeedback();
      console.log('AI 피드백 데이터:', window.aiFeedbackData);

      // 요약 정보
      document.getElementById('summary').innerHTML = `
        <div class="summary-item">
          <div class="label">정답</div>
          <div class="value correct">${correctCount}개</div>
        </div>
        <div class="summary-item">
          <div class="label">오답</div>
          <div class="value wrong">${wrongCount}개</div>
        </div>
        <div class="summary-item">
          <div class="label">응시일</div>
          <div class="value">${new Date(data.createdAt).toLocaleDateString('ko-KR')}</div>
        </div>
        ${data.duration ? `<div class="summary-item">
          <div class="label">소요시간</div>
          <div class="value">${data.duration}</div>
        </div>` : ''}
      `;

      // 틀린 문항 배지 렌더링
      const wrongQuestions = [];
      data.answers.forEach((userAnswer, index) => {
        if (index >= quizData.length) return;
        const q = quizData[index];
        if (userAnswer !== q.correct) {
          wrongQuestions.push(index + 1);
        }
      });

      if (wrongQuestions.length > 0) {
        document.getElementById('wrongQuestionsNav').style.display = 'block';
        const wrongBadgesHTML = wrongQuestions.map(num =>
          `<a href="#question-${num}" class="wrong-badge" onclick="scrollToQuestion(${num})">${num}</a>`
        ).join('');
        document.getElementById('wrongBadges').innerHTML = wrongBadgesHTML;
      }

      // 문제 목록 렌더링
      let questionsHTML = '';
      data.answers.forEach((userAnswer, index) => {
        if (index >= quizData.length) return;

        const q = quizData[index];
        const isCorrect = userAnswer === q.correct;
        const statusClass = isCorrect ? 'correct' : 'wrong';
        const statusIcon = isCorrect ? '✅' : '❌';

        let optionsHTML = '';
        q.options.forEach((option, optIdx) => {
          let optionClass = '';
          let marker = '';

          if (optIdx === q.correct && optIdx === userAnswer) {
            // 정답이면서 학생이 선택한 답
            optionClass = 'user-correct';
            marker = '✅ 정답 (내 선택)';
          } else if (optIdx === q.correct) {
            // 정답
            optionClass = 'correct-answer';
            marker = '✅ 정답';
          } else if (optIdx === userAnswer) {
            // 학생이 선택한 오답
            optionClass = 'user-wrong';
            marker = '❌ 내 선택';
          }

          optionsHTML += `
            <li class="option-item ${optionClass}">
              <span class="option-marker">${optIdx + 1}.</span>
              ${option}
              ${marker ? `<span style="float: right; font-weight: 600;">${marker}</span>` : ''}
            </li>
          `;
        });

        questionsHTML += `
          <div class="question-item ${statusClass}" id="question-${index + 1}">
            <div class="question-header">
              <span class="question-number">문제 ${index + 1}</span>
              <div class="question-category">
                <span class="category-badge">${q.category}</span>
                <span class="skill-badge">${q.skill}</span>
              </div>
              <span class="result-icon">${statusIcon}</span>
            </div>
            <div class="passage-box">${getPassage(q, currentStudentData?.studentGrade)}</div>
            <div class="question-text">${q.question}</div>
            <ul class="options-list">
              ${optionsHTML}
            </ul>
            <div class="explanation-box">
              <strong>해설:</strong> ${q.explanation}
            </div>
          </div>
        `;
      });

      document.getElementById('questionList').innerHTML = questionsHTML;
    }

    // 학년별 평균 계산 함수
    function getGradeAverage(studentGrade) {
      const grade = (studentGrade || '').toLowerCase();
      // 고등학생 먼저 체크 (고3에 '3'이 포함되어 초3으로 잘못 인식되는 것 방지)
      if (grade.includes('고2') || grade.includes('고3')) {
        return {
          avg: 80,
          label: '고2-3 평균',
          skills: {
            '핵심 이해력': 83,
            '구조 파악력': 88,
            '어휘 맥락력': 95,
            '추론 통합력': 85,
            '비판 적용력': 88
          },
          categories: {
            '사회': 90,
            '과학': 82,
            '인문': 90,
            '경제': 82,
            '법': 88
          }
        };
      } else if (grade.includes('중3') || grade.includes('고1')) {
        return {
          avg: 75,
          label: '중3-고1 평균',
          skills: {
            '핵심 이해력': 73,
            '구조 파악력': 78,
            '어휘 맥락력': 85,
            '추론 통합력': 85,
            '비판 적용력': 78
          },
          categories: {
            '사회': 80,
            '과학': 72,
            '인문': 80,
            '경제': 72,
            '법': 78
          }
        };
      } else if (grade.includes('중1') || grade.includes('중2')) {
        return {
          avg: 70,
          label: '중1-2 평균',
          skills: {
            '핵심 이해력': 73,
            '구조 파악력': 68,
            '어휘 맥락력': 85,
            '추론 통합력': 75,
            '비판 적용력': 78
          },
          categories: {
            '사회': 70,
            '과학': 62,
            '인문': 70,
            '경제': 62,
            '법': 68
          }
        };
      } else if (grade.includes('초5') || grade.includes('초6') || grade.includes('5') || grade.includes('6')) {
        return {
          avg: 60,
          label: '초5-6 평균',
          skills: {
            '핵심 이해력': 63,
            '구조 파악력': 58,
            '어휘 맥락력': 75,
            '추론 통합력': 65,
            '비판 적용력': 68
          },
          categories: {
            '사회': 65,
            '과학': 52,
            '인문': 60,
            '경제': 52,
            '법': 58
          }
        };
      } else if (grade.includes('초3') || grade.includes('초4') || grade.includes('3') || grade.includes('4')) {
        return {
          avg: 50,
          label: '초3-4 평균',
          skills: {
            '핵심 이해력': 53,
            '구조 파악력': 48,
            '어휘 맥락력': 70,
            '추론 통합력': 55,
            '비판 적용력': 58
          },
          categories: {
            '사회': 60,
            '과학': 48,
            '인문': 55,
            '경제': 48,
            '법': 53
          }
        };
      }
      // 기본값 (학년 파악 불가 시) - 초5-6 기준
      return {
        avg: 60,
        label: '평균',
        skills: {
          '핵심 이해력': 63,
          '구조 파악력': 58,
          '어휘 맥락력': 75,
          '추론 통합력': 65,
          '비판 적용력': 68
        },
        categories: {
          '사회': 65,
          '과학': 52,
          '인문': 60,
          '경제': 52,
          '법': 58
        }
      };
    }

    // 문해력 지수별 막대 그래프 그리기 함수
    function drawSkillBarChart(skillPercentages, studentGrade) {
      const skills = [
        "핵심 이해력",
        "구조 파악력",
        "어휘 맥락력",
        "추론 통합력",
        "비판 적용력"
      ];

      const gradeAvg = getGradeAverage(studentGrade);

      let barsHTML = '';
      skills.forEach(skill => {
        const percent = skillPercentages[skill] || 0;
        const skillAvg = gradeAvg.skills[skill] || gradeAvg.avg; // 지수별 평균
        // 평균 기준선 대비 색상 결정
        let colorClass = 'poor';
        if (percent >= skillAvg + 20) colorClass = 'excellent';      // 평균보다 20% 이상 높음
        else if (percent >= skillAvg) colorClass = 'good';           // 평균 이상
        else if (percent >= skillAvg - 20) colorClass = 'average';   // 평균보다 20% 미만 낮음

        barsHTML += `
          <div class="skill-bar-item">
            <div class="skill-bar-label">
              <span class="name">${skill}</span>
              <span class="percent">${percent.toFixed(0)}%</span>
            </div>
            <div class="skill-bar-bg">
              <div class="skill-bar-fill ${colorClass}" style="width: ${percent}%;"></div>
              <div class="grade-avg-line" style="left: ${skillAvg}%;">
                <span class="grade-avg-label">${skillAvg}%</span>
              </div>
            </div>
          </div>
        `;
      });

      barsHTML += `
        <div class="grade-avg-info">
          <span class="avg-marker"></span>
          <span>${gradeAvg.label} 지수별 기준선</span>
        </div>
      `;

      document.getElementById('skillBarContainer').innerHTML = barsHTML;
    }

    // 과목별 막대 그래프 그리기 함수
    function drawCategoryBarChart(categoryPercentages, studentGrade) {
      const categories = [
        "사회",
        "과학",
        "인문",
        "경제",
        "법"
      ];

      const gradeAvg = getGradeAverage(studentGrade);

      let barsHTML = '';
      categories.forEach(category => {
        const percent = categoryPercentages[category] || 0;
        const categoryAvg = gradeAvg.categories[category] || gradeAvg.avg; // 과목별 평균
        // 평균 기준선 대비 색상 결정
        let colorClass = 'poor';
        if (percent >= categoryAvg + 20) colorClass = 'excellent';      // 평균보다 20% 이상 높음
        else if (percent >= categoryAvg) colorClass = 'good';           // 평균 이상
        else if (percent >= categoryAvg - 20) colorClass = 'average';   // 평균보다 20% 미만 낮음

        barsHTML += `
          <div class="skill-bar-item">
            <div class="skill-bar-label">
              <span class="name">${category}</span>
              <span class="percent">${percent.toFixed(0)}%</span>
            </div>
            <div class="skill-bar-bg">
              <div class="skill-bar-fill ${colorClass}" style="width: ${percent}%;"></div>
              <div class="grade-avg-line" style="left: ${categoryAvg}%;">
                <span class="grade-avg-label">${categoryAvg}%</span>
              </div>
            </div>
          </div>
        `;
      });

      barsHTML += `
        <div class="grade-avg-info">
          <span class="avg-marker"></span>
          <span>${gradeAvg.label} 과목별 기준선</span>
        </div>
      `;

      document.getElementById('categoryBarContainer').innerHTML = barsHTML;
    }

    // 레이더 차트 그리기 함수
    function drawRadarChart(skillPercentages) {
      const canvas = document.getElementById('radarChart');
      const ctx = canvas.getContext('2d');
      const centerX = canvas.width / 2;
      const centerY = canvas.height / 2;
      const radius = 150;

      // 캔버스 초기화
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // 5개 스킬 (순서대로)
      const skills = [
        "핵심 이해력",
        "구조 파악력",
        "어휘 맥락력",
        "추론 통합력",
        "비판 적용력"
      ];

      const angles = skills.map((_, i) => (Math.PI * 2 * i) / 5 - Math.PI / 2);

      // 배경 원 그리기 (20%, 40%, 60%, 80%, 100%)
      ctx.strokeStyle = '#e0e0e0';
      ctx.lineWidth = 1;
      for (let i = 1; i <= 5; i++) {
        ctx.beginPath();
        ctx.arc(centerX, centerY, (radius * i) / 5, 0, Math.PI * 2);
        ctx.stroke();
      }

      // 축 선 그리기
      ctx.strokeStyle = '#cccccc';
      ctx.lineWidth = 1;
      angles.forEach(angle => {
        ctx.beginPath();
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(
          centerX + Math.cos(angle) * radius,
          centerY + Math.sin(angle) * radius
        );
        ctx.stroke();
      });

      // 레이블 그리기
      ctx.fillStyle = '#2c3e50';
      ctx.font = 'bold 14px "Noto Sans KR", sans-serif';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';

      skills.forEach((skill, i) => {
        const angle = angles[i];
        const labelRadius = radius + 50;
        const x = centerX + Math.cos(angle) * labelRadius;
        const y = centerY + Math.sin(angle) * labelRadius;

        // 텍스트 위치 조정 - 모든 라벨 중앙 정렬
        ctx.textAlign = 'center';

        ctx.fillText(skill, x, y);
      });

      // 데이터 영역 그리기
      ctx.beginPath();
      ctx.strokeStyle = '#667eea';
      ctx.fillStyle = 'rgba(102, 126, 234, 0.2)';
      ctx.lineWidth = 3;

      skills.forEach((skill, i) => {
        const percentage = skillPercentages[skill] || 0;
        const angle = angles[i];
        const r = (radius * percentage) / 100;
        const x = centerX + Math.cos(angle) * r;
        const y = centerY + Math.sin(angle) * r;

        if (i === 0) {
          ctx.moveTo(x, y);
        } else {
          ctx.lineTo(x, y);
        }
      });

      ctx.closePath();
      ctx.fill();
      ctx.stroke();

      // 데이터 점 그리기
      skills.forEach((skill, i) => {
        const percentage = skillPercentages[skill] || 0;
        const angle = angles[i];
        const r = (radius * percentage) / 100;
        const x = centerX + Math.cos(angle) * r;
        const y = centerY + Math.sin(angle) * r;

        ctx.beginPath();
        ctx.arc(x, y, 5, 0, Math.PI * 2);
        ctx.fillStyle = '#667eea';
        ctx.fill();
        ctx.strokeStyle = 'white';
        ctx.lineWidth = 2;
        ctx.stroke();

        // 퍼센트 표시
        ctx.fillStyle = '#667eea';
        ctx.font = 'bold 12px "Noto Sans KR", sans-serif';
        ctx.textAlign = 'center';
        ctx.fillText(`${percentage.toFixed(0)}%`, x, y - 15);
      });
    }

    // 페이지 로드 시 실행
    window.addEventListener('DOMContentLoaded', loadTestResult);

    // 현재 로드된 학생 정보 저장용
    let currentStudentData = null;

    // renderResult 함수에서 데이터 저장하도록 수정 (기존 renderResult 호출 시 데이터 저장)
    const originalRenderResult = renderResult;
    renderResult = function(data) {
      currentStudentData = data;
      originalRenderResult(data);
    };

    // 카카오 SDK 초기화
    if (typeof Kakao !== 'undefined' && !Kakao.isInitialized()) {
      Kakao.init('6ad10cc6680c7a5829a4fd7a3cbb4a7e');
    }

    // 틀린 문항 바로가기 스크롤 함수
    function scrollToQuestion(num) {
      const element = document.getElementById(`question-${num}`);
      if (element) {
        element.scrollIntoView({ behavior: 'smooth', block: 'center' });
        // 하이라이트 효과
        element.style.boxShadow = '0 0 15px rgba(231, 76, 60, 0.5)';
        setTimeout(() => {
          element.style.boxShadow = '';
        }, 2000);
      }
    }

    // AI 피드백 로드 함수
    async function loadAIFeedback() {
      const loadingEl = document.getElementById('aiFeedbackLoading');
      const contentEl = document.getElementById('aiFeedbackContent');
      const errorEl = document.getElementById('aiFeedbackError');

      // 로딩 상태
      loadingEl.style.display = 'block';
      contentEl.style.display = 'none';
      errorEl.style.display = 'none';

      try {
        const feedbackData = window.aiFeedbackData;
        if (!feedbackData) {
          throw new Error('피드백 데이터가 없습니다.');
        }

        const response = await fetch('/api/literacy-test/ai-feedback', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },
          body: JSON.stringify(feedbackData)
        });

        const result = await response.json();

        if (!result.ok) {
          throw new Error(result.error || '피드백 생성 실패');
        }

        // 피드백 표시
        const feedback = result.feedback;
        document.getElementById('feedbackOverall').textContent = feedback.overall || '';
        document.getElementById('feedbackStrengths').textContent = feedback.strengths || '';
        document.getElementById('feedbackImprovements').textContent = feedback.improvements || '';
        document.getElementById('feedbackTips').textContent = feedback.tips || '';

        loadingEl.style.display = 'none';
        contentEl.style.display = 'block';

      } catch (err) {
        console.error('AI 피드백 로드 오류:', err);
        loadingEl.style.display = 'none';
        errorEl.style.display = 'block';
      }
    }

    // PDF 다운로드 기능
    async function downloadPDF() {
      const content = document.getElementById('content');
      if (!content) {
        alert('PDF 생성에 실패했습니다.');
        return;
      }

      // 로딩 표시
      const loadingDiv = document.createElement('div');
      loadingDiv.id = 'pdfLoading';
      loadingDiv.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); display: flex; justify-content: center; align-items: center; z-index: 9999; color: white; font-size: 18px;';
      loadingDiv.innerHTML = '<div style="text-align: center;"><div style="margin-bottom: 10px;">PDF 생성 중...</div><div style="font-size: 14px;">잠시만 기다려주세요</div></div>';
      document.body.appendChild(loadingDiv);

      try {
        const { jsPDF } = window.jspdf;

        // html2canvas로 화면 캡처 (품질 낮춤으로 용량 감소)
        const canvas = await html2canvas(content, {
          scale: 1.5, // 품질 낮춤 (기본 2)
          useCORS: true,
          logging: false,
          backgroundColor: '#ffffff'
        });

        const imgData = canvas.toDataURL('image/jpeg', 0.7); // JPEG로 변환하여 용량 감소
        const imgWidth = 210; // A4 가로
        const pageHeight = 297; // A4 세로
        const imgHeight = canvas.height * imgWidth / canvas.width;

        const pdf = new jsPDF('p', 'mm', 'a4');

        let heightLeft = imgHeight;
        let position = 0;

        // 첫 페이지
        pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight, undefined, 'FAST');
        heightLeft -= pageHeight;

        // 다음 페이지들
        while (heightLeft > 0) {
          position = heightLeft - imgHeight;
          pdf.addPage();
          pdf.addImage(imgData, 'JPEG', 0, position, imgWidth, imgHeight, undefined, 'FAST');
          heightLeft -= pageHeight;
        }

        // 학생 정보 기반 파일명
        const studentName = currentStudentData?.studentName || '학생';
        const studentGrade = currentStudentData?.studentGrade || '';
        const dateStr = new Date().toLocaleDateString('ko-KR').replace(/\./g, '').replace(/ /g, '');

        pdf.save(`문해력진단_시험지_${studentGrade}_${studentName}_${dateStr}.pdf`);
      } catch (error) {
        console.error('PDF 생성 오류:', error);
        alert('PDF 생성 중 오류가 발생했습니다.');
      } finally {
        // 로딩 제거
        document.getElementById('pdfLoading')?.remove();
      }
    }

    // 카카오톡 전송 기능
    function sendKakao() {
      if (typeof Kakao === 'undefined') {
        alert('카카오톡 SDK를 불러오는 중입니다.\n잠시 후 다시 시도해주세요.');
        return;
      }

      if (!Kakao.isInitialized()) {
        Kakao.init('6ad10cc6680c7a5829a4fd7a3cbb4a7e');
      }

      const studentName = currentStudentData?.studentName || '학생';
      const studentGrade = currentStudentData?.studentGrade || '';
      const gradeResult = currentStudentData?.grade || '';
      const score = currentStudentData?.score || 0;

      // 현재 시험지 URL (ID 포함) - Render 서버 URL 사용 (로그인 없이 접근 가능)
      const resultUrl = `https://dan-dan-app.onrender.com/test-result-viewer.html?id=${applicationId}`;

      Kakao.Link.sendDefault({
        objectType: 'feed',
        content: {
          title: '📝 단단국어 문해력 진단 시험지',
          description: `${studentGrade} ${studentName} 학생\n등급: ${gradeResult}\n점수: ${score}/25점\n전체 문제 정답 및 해설 확인하기`,
          imageUrl: 'https://dan-dan-app.web.app/images/kakao_share.png',
          link: {
            mobileWebUrl: resultUrl,
            webUrl: resultUrl
          }
        },
        buttons: [
          {
            title: '진단결과보기',
            link: {
              mobileWebUrl: resultUrl,
              webUrl: resultUrl
            }
          }
        ]
      });
    }

    // 맨 위로 가기 버튼 기능
    window.addEventListener('scroll', () => {
      const scrollToTopBtn = document.getElementById('scrollToTopBtn');
      if (scrollToTopBtn) {
        if (window.scrollY > 300) {
          scrollToTopBtn.classList.add('visible');
        } else {
          scrollToTopBtn.classList.remove('visible');
        }
      }
    });

    function scrollToTop() {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>

  <!-- 맨 위로 가기 버튼 -->
  <button class="scroll-to-top" id="scrollToTopBtn" onclick="scrollToTop()" title="맨 위로">
    ↑
  </button>
</body>
</html>
