<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>⏰ 시간도서관 — 시즌 2</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: "Gmarket Sans", "Noto Sans KR", sans-serif;
      overflow-x: hidden;
      background: #1a1a1a;
    }

    /* 고정 지도 캔버스 */
    #map-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100vh;
      background: url(https://cdn.jsdelivr.net/gh/kukicoollevitt-hash/dan-dan-app@main/public/images/time-library-story/time_part2_main.jpg);
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      transition: background-image 1s ease-in-out;
      z-index: 1;
    }

    #map-canvas {
      display: none;
    }

    /* 스크롤 가능한 콘텐츠 */
    #content {
      position: relative;
      z-index: 2;
      pointer-events: none;
    }

    .story-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 60px 120px;
      pointer-events: none;
    }

    /* 홀수 섹션은 왼쪽 */
    .story-section:nth-child(odd) {
      justify-content: flex-start;
    }

    /* 짝수 섹션은 오른쪽 */
    .story-section:nth-child(even) {
      justify-content: flex-end;
    }

    .story-card {
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(15px);
      padding: 40px;
      border-radius: 24px;
      max-width: 550px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      transform: translateX(100px);
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.165, 0.84, 0.44, 1);
      pointer-events: auto;
    }

    /* 왼쪽에서 나오는 카드 */
    .story-section:nth-child(odd) .story-card {
      transform: translateX(-100px);
    }

    /* 오른쪽에서 나오는 카드 */
    .story-section:nth-child(even) .story-card {
      transform: translateX(100px);
    }

    .story-card.active {
      transform: translateX(0);
      opacity: 1;
    }

    .story-card .chapter {
      display: inline-block;
      padding: 8px 20px;
      background: linear-gradient(135deg, #FF6B35 0%, #F7931E 100%);
      color: white;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 15px;
      box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
    }

    .story-card h2 {
      font-size: 28px;
      color: #2c3e50;
      margin-bottom: 20px;
      line-height: 1.4;
    }

    .story-card p {
      font-size: 16px;
      line-height: 1.8;
      color: #34495e;
      margin-bottom: 12px;
    }

    .story-card p:last-child {
      margin-bottom: 0;
    }

    /* 인트로 섹션 */
    .intro-section {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 60px;
    }

    .intro-content {
      background: transparent;
      padding: 60px 80px;
      border-radius: 30px;
      max-width: 800px;
      animation: fadeInUp 1s ease-out;
    }

    .intro-content h1 {
      font-size: 48px;
      font-weight: 700;
      color: #ffffff;
      margin-bottom: 20px;
      text-shadow: 0 4px 8px rgba(0, 0, 0, 0.8);
    }

    .intro-content .subtitle {
      font-size: 20px;
      line-height: 1.8;
      color: #ffffff;
      margin-bottom: 40px;
      font-weight: 500;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }

    .intro-content .scroll-hint {
      font-size: 16px;
      color: #ffffff;
      font-weight: 600;
      animation: pulse 2s infinite;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(30px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.5;
      }
    }

    /* 스크롤 인디케이터 */
    .scroll-indicator {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
      animation: bounce 2s infinite;
      pointer-events: none;
    }

    .scroll-indicator svg {
      width: 40px;
      height: 40px;
      opacity: 0.7;
    }

    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {
        transform: translateX(-50%) translateY(0);
      }
      40% {
        transform: translateX(-50%) translateY(-20px);
      }
      60% {
        transform: translateX(-50%) translateY(-10px);
      }
    }

    /* 반응형 디자인 */
    @media (max-width: 768px) {
      .story-section {
        padding: 40px 20px;
      }

      .story-card {
        max-width: 100%;
        padding: 30px;
      }

      .story-card h2 {
        font-size: 24px;
      }

      .story-card p {
        font-size: 15px;
      }
    }

    /* 네비게이션 버튼 */
    .nav-buttons {
      position: fixed;
      bottom: 40px;
      right: 40px;
      z-index: 1000;
      display: flex;
      gap: 15px;
      pointer-events: auto;
    }

    .nav-btn {
      padding: 15px 30px;
      background: rgba(255, 107, 53, 0.9);
      backdrop-filter: blur(10px);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
    }

    .nav-btn:hover {
      background: rgba(247, 147, 30, 0.9);
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 107, 53, 0.4);
    }

    @media (max-width: 768px) {
      .nav-buttons {
        bottom: 20px;
        right: 20px;
        flex-direction: column;
      }

      .nav-btn {
        padding: 12px 24px;
        font-size: 14px;
      }
    }
  </style>
</head>
<body>
  <!-- 고정된 배경 컨테이너 -->
  <div id="map-container">
    <canvas id="map-canvas"></canvas>
  </div>

  <!-- 스크롤 가능한 스토리 콘텐츠 -->
  <div id="content">
    <!-- 인트로 -->
    <section class="intro-section">
      <div class="intro-content">
        <h1>⏰ 시간도서관</h1>
        <p class="subtitle">
          시즌 2 - 현재의 균열<br>
          시간이 뒤틀린 도서관
        </p>
        <p class="scroll-hint">↓ 아래로 스크롤 해주세요 ↓</p>
      </div>
    </section>

    <!-- Part 1 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_01.jpg">
      <div class="story-card">
        <span class="chapter">Part 1</span>
        <h2>도서관이 변하기 시작하다</h2>
        <p>아이들이 시즌1의 시간 파편을 도서관으로 가져온 뒤 며칠 동안은 아무 이상이 없는 것처럼 보였다.</p>
        <p>그러나 어느 날 아침, 도서관에 들어선 민준은 소름 돋는 장면을 목격한다.</p>
        <p>• 도서관 천장에 '머리카락처럼 얇은 금빛 균열'들이 생김</p>
        <p>• 책 표지가 서로 뒤바뀌고</p>
        <p>• 책장 사이에서 '시간 먼지(Time Dust)'가 떨어짐</p>
        <p>• 한 책에서는 과거의 장면이 잠깐 튀어나왔다가 사라짐</p>
        <p>루미는 급히 달려오며 말한다.</p>
        <p><strong>"시간의 균형이 무너졌어. 과거 세계에서 가져온 파편이 현재를 불러오고 있어."</strong></p>
        <p>그리고 루미의 눈빛에는 숨기려던 두려움이 담겨 있었다.</p>
      </div>
    </section>

    <!-- Part 2 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_02.jpg">
      <div class="story-card">
        <span class="chapter">Part 2</span>
        <h2>시간 폭발(Time Burst) 발생</h2>
        <p>그날 밤, 도서관 중앙에서 시간 폭발이 일어난다.</p>
        <p>콰아아앙!!</p>
        <p>책들이 동시에 하늘로 떠오르고 도서관 복도는 영화처럼 뒤틀리기 시작했다.</p>
        <p>• 어떤 책은 페이지를 넘기지 않아도 고대 전쟁 장면이 현실처럼 튀어나오고</p>
        <p>• 어떤 책은 현재 세계를 과거처럼 바꿔버리고</p>
        <p>• 시계들은 거꾸로 움직이거나 멈추고</p>
        <p>• 도서관의 모든 문은 서로 다른 시대와 연결됨</p>
        <p>수아가 떨리는 목소리로 말한다.</p>
        <p><strong>"이건… 그냥 도서관이 아니라 여러 시대가 한 공간으로 겹쳐지고 있어."</strong></p>
        <p>루미는 관측 장치를 꺼내며 설명한다.</p>
        <p><strong>"시간 파편을 되돌리지 않으면 현재 세계 전체가 '시간 틈' 속으로 빨려 들어가."</strong></p>
      </div>
    </section>

    <!-- Part 3 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_03.jpg">
      <div class="story-card">
        <span class="chapter">Part 3</span>
        <h2>크로노 브레이커스의 침입</h2>
        <p>이때, 도서관 게이트가 갑자기 흔들리더니 검은 그림자가 천천히 걸어나왔다.</p>
        <p>바로 크로노 브레이커스. 시즌 1 마지막에 아이들을 덮쳤던 그림자 조직.</p>
        <p>이번에는 1명이 아니라 네 명의 핵심 멤버 + 그림자 부대가 들어왔다.</p>
        <p><strong>1) 타임 리퍼(Time Reaper) – 리더</strong></p>
        <p>• 얼굴이 가려진 검은 후드</p>
        <p>• 손에서 시계 바늘처럼 생긴 무기 소환</p>
        <p>• 시간 조작 능력 보유</p>
        <p><strong>2) 글리치(Glitch)</strong> - 현실과 픽셀 사이를 넘나드는 능력, 책 속 단어를 지우거나 재구성해 공격</p>
        <p><strong>3) 네메시스(Nemesis)</strong> - 그림자 속에서 괴물 형태로 변화, 시대별 공격 패턴 사용</p>
        <p><strong>4) 스레드(Thread)</strong> - 시간선(타임라인)을 실처럼 뽑아 함정을 만드는 전략가</p>
        <p>리퍼는 도서관 중앙에서 선언한다.</p>
        <p><strong>"과거 파편을 가져온 건 너희다. 시간이 무너지는 것도… 너희 책임이지."</strong></p>
      </div>
    </section>

    <!-- Part 4 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_04.jpg">
      <div class="story-card">
        <span class="chapter">Part 4</span>
        <h2>시간 붕괴 구역(Time Ruins) 조사</h2>
        <p>크로노 브레이커스가 나타난 뒤 도서관은 더 빠르게 붕괴되기 시작했다.</p>
        <p>아이들과 루미는 도서관 지도를 보며 붕괴 지역을 탐사하기로 한다.</p>
        <p>붕괴 구역은 크게 3종류였다.</p>
        <p><strong>1) 슬로우 존(Slow Zone)</strong></p>
        <p>• 시간이 느려지는 지역</p>
        <p>• 책장이 1cm 움직이는 데 10초 걸림</p>
        <p>• 사람 목소리는 '느릿느릿' 늘어남</p>
        <p><strong>2) 패스트 존(Fast Zone)</strong></p>
        <p>• 시간이 너무 빨라 폭발하듯 움직임</p>
        <p>• 책 페이지가 1초에 100장 넘게 넘어감</p>
        <p><strong>3) 타임 혼란 존(Chaos Zone)</strong></p>
        <p>• 시간이 순서 없이 '점프'함</p>
        <p>• 과거 → 현재 → 과거 → 또 다른 시대로 훅훅 바뀜</p>
        <p>태영이 말했다. "이거… 그냥 게임 스테이지 난이도가 아니라 진짜 목숨이 위태로운 곳인데?"</p>
      </div>
    </section>

    <!-- Part 5 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_05.jpg">
      <div class="story-card">
        <span class="chapter">Part 5</span>
        <h2>첫 번째 전투: 타임 리퍼와의 충돌</h2>
        <p>도서관 중앙홀에서 타임 리퍼가 아이들을 기다리고 있었다.</p>
        <p>그는 손을 들자 수백 개의 시계 바늘 같은 '시간의 파편'을 소환했다.</p>
        <p>쉬잉—!</p>
        <p>파편들이 아이들을 향해 날아오자 아이들은 시즌1에서 얻은 시간 문양을 발동했다.</p>
        <p>• 민준 → "지혜의 문양"이 파편 속 움직임을 읽어 방어</p>
        <p>• 수아 → "관찰의 문양"으로 공격의 약점을 찾아 반격</p>
        <p>• 태영 → "용기의 문양"으로 파편을 밀어내며 돌파</p>
        <p>전투는 치열했지만 타임 리퍼는 아이들을 시험하듯 중단한다.</p>
        <p><strong>"과거에서 파편 하나를 가져온 것만으로 시간의 흐름은 이렇게나 취약해지는 것이다."</strong></p>
        <p>그리고는 "진짜 파편은 미래에 있다."라는 말을 남기고 사라졌다.</p>
      </div>
    </section>

    <!-- Part 6 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_06.jpg">
      <div class="story-card">
        <span class="chapter">Part 6</span>
        <h2>도서관의 정체, 드디어 밝혀지다</h2>
        <p>루미는 아이들을 불러 모은다. "이제 감출 수 없어."</p>
        <p>루미는 도서관 깊숙한 곳, "시간 기록실(Time Vault)"로 아이들을 데려갔다.</p>
        <p>그곳엔 도서관이 태어난 이유가 기록되어 있었다.</p>
        <p>• 도서관은 단순한 책 창고가 아니라 '시간을 기록하고 지키는 생명체'</p>
        <p>• 책 하나하나가 시간의 조각</p>
        <p>• 시간심장은 모든 시대를 연결하는 중심</p>
        <p>• 과거 세계에서 파편을 가져오면 현재의 시간축이 흔들림</p>
        <p>• 크로노 브레이커스는 미래에서 온 존재</p>
        <p>민준은 충격받아 말했다. "우리가… 미래의 적을 깨운 거야?"</p>
        <p>루미는 고개를 저었다.</p>
        <p><strong>"적을 깨운 건 너희가 아니라, 시간 파편 자체야. 파편이 움직이면 그들은 반드시 따라온다."</strong></p>
      </div>
    </section>

    <!-- Part 7 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_07.jpg">
      <div class="story-card">
        <span class="chapter">Part 7</span>
        <h2>글리치의 함정: 책 속 세계 붕괴</h2>
        <p>글리치가 도서관 2층을 점령한다. 그는 손가락으로 '단어'를 지우기 시작한다.</p>
        <p>• '불'이라는 단어가 사라지자 책 속 화로가 꺼지고</p>
        <p>• '하늘'이 사라지자 책 속 세계의 하늘이 검게 변하고</p>
        <p>• '마음'이 사라지자 등장인물의 표정이 무표정해짐</p>
        <p>• '용기'라는 단어가 지워지자 모험 책 속 주인공이 움직이지 않음</p>
        <p>페이지 자체가 '글자 없는 흰 화면'처럼 변했다.</p>
        <p>아이들은 책 속 세계가 무너지는 걸 보며 외쳤다. "이러다 책이 죽어버려!"</p>
        <p>수아는 글자들을 되돌리기 위해 관찰 문양을 발동해 글자의 잔상을 추적했다.</p>
        <p>민준은 지혜 문양으로 '사라진 단어'를 다시 복원하는 주문을 찾았고,</p>
        <p>태영은 글리치가 조작한 프로그램형 함정을 부숴 책 속 인물들을 구해냈다.</p>
      </div>
    </section>

    <!-- Part 8 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_08.jpg">
      <div class="story-card">
        <span class="chapter">Part 8</span>
        <h2>네메시스가 만든 시간의 괴물</h2>
        <p>네메시스는 도서관 깊은 곳 "과거 기록실"을 오염시켰다.</p>
        <p>그는 그림자를 찍어 각 시대의 괴물 실루엣을 소환했다.</p>
        <p>• 고대 왕국의 거대 늑대</p>
        <p>• 중세 유럽의 그림자 드래곤</p>
        <p>• 고블린 병사들</p>
        <p>• 역사 속 무사들의 유령</p>
        <p>• 전설 속 해적 그림자대</p>
        <p>괴물들은 책장 사이를 뛰어다니며 도서관 곳곳을 파괴했다.</p>
        <p>태영이 소리쳤다. "이거… 거의 전쟁이잖아!!"</p>
        <p>민준은 무너지는 책장을 피해 괴물들의 '원래 시대'를 파악해 되돌려보냈다.</p>
        <p>수아는 괴물 몸에 새겨진 '시대 코드 문양'을 해독해 약점을 찾아냈다.</p>
        <p>전투는 몇 시간이나 계속되었고 아이들은 온몸이 지쳤다.</p>
      </div>
    </section>

    <!-- Part 9 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_09.jpg">
      <div class="story-card">
        <span class="chapter">Part 9</span>
        <h2>현재가 사라지기 시작하다</h2>
        <p>전투가 끝난 후, 도서관의 중앙 천장에서 거대한 금빛 눈(문양)이 떠올랐다.</p>
        <p>그리고 최악의 장면이 펼쳐졌다.</p>
        <p>• 도서관의 시계가 모두 멈춤</p>
        <p>• 밖의 현실이 안 보임</p>
        <p>• 창문 너머는 '시간의 안개'만 존재</p>
        <p>• 도서관 자체가 다른 시대로 빨려 들어가고 있음</p>
        <p>• 아이들 발 아래 바닥이 '검은 모래시계'처럼 변함</p>
        <p>수아는 충격받아 말했다. "우리가… 현재를 잃고 있어."</p>
        <p>루미는 절망적 목소리로 외쳤다.</p>
        <p><strong>"시간심장이 도망쳤어! 심장이 사라지면… 현재는 존재할 수 없어!"</strong></p>
        <p>민준은 심장쪽에서 느껴지는 희미한 파동을 감지한다.</p>
        <p><strong>"미래야… 시간심장은 미래로 간 거야."</strong></p>
      </div>
    </section>

    <!-- Part 10 -->
    <section class="story-section" data-bg="/images/time-library-story/time_part2_10.jpg">
      <div class="story-card">
        <span class="chapter">Part 10</span>
        <h2>미래로 향하는 문이 열린다</h2>
        <p>시간 붕괴가 한계에 돌입하는 순간—</p>
        <p>콰앙!!</p>
        <p>도서관 한가운데에 거대한 시간의 관문(Time Gate)이 열렸다.</p>
        <p>관문 안쪽은</p>
        <p>• 미래 도시의 실루엣</p>
        <p>• 빛으로 된 도서관</p>
        <p>• 인공지능 책들이 움직이는 낯선 세계</p>
        <p>크로노 브레이커스 리더 타임 리퍼가 관문 위에서 아이들을 내려다보며 말했다.</p>
        <p><strong>"미래를 되찾고 싶으면… 여기로 와라."</strong></p>
        <p>문이 천천히 닫히려고 하자 민준이 외쳤다.</p>
        <p><strong>"저 문을 넘어야 해! 미래를 구하려면… 우리도 가야 해!"</strong></p>
        <p>태영은 단단히 주먹을 쥐고, 수아는 눈빛을 굳혔다.</p>
        <p>"그래. 미래에서 시간심장을 되찾자."</p>
        <p>아이들은 결심을 굳히며 문 앞으로 다가갔다.</p>
        <p>그리고 시즌 2는 <strong>'미래로 가는 도서관 수호자들'</strong>이라는 대사와 함께 장엄하게 끝난다.</p>
      </div>
    </section>
  </div>

  <!-- 스크롤 인디케이터 -->
  <div class="scroll-indicator">
    <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24">
      <path d="M12 4l-8 8h6v8h4v-8h6z"/>
    </svg>
  </div>

  <!-- 네비게이션 버튼 -->
  <div class="nav-buttons">
    <button class="nav-btn" onclick="window.location.href='/menu.html'">← 메인으로</button>
  </div>

  <script>
    // 스크롤 기반 배경 이미지 변경
    const sections = document.querySelectorAll('.story-section');
    const mapContainer = document.getElementById('map-container');
    const scrollIndicator = document.querySelector('.scroll-indicator');

    let currentBg = '';

    function updateBackground() {
      const scrollPos = window.scrollY + window.innerHeight / 2;

      sections.forEach((section, index) => {
        const rect = section.getBoundingClientRect();
        const sectionTop = window.scrollY + rect.top;
        const sectionBottom = sectionTop + rect.height;

        // 섹션이 화면 중앙에 있을 때
        if (scrollPos >= sectionTop && scrollPos < sectionBottom) {
          const bgImage = section.dataset.bg;
          if (bgImage && bgImage !== currentBg) {
            currentBg = bgImage;
            mapContainer.style.backgroundImage = `url(${bgImage})`;
          }

          // 카드 활성화
          const card = section.querySelector('.story-card');
          if (card && !card.classList.contains('active')) {
            card.classList.add('active');
          }
        }
      });

      // 스크롤 인디케이터 숨기기
      if (window.scrollY > 100) {
        scrollIndicator.style.opacity = '0';
      } else {
        scrollIndicator.style.opacity = '0.7';
      }
    }

    // 초기 로드
    window.addEventListener('load', () => {
      updateBackground();
      // 첫 번째 카드는 바로 표시
      const firstCard = sections[0].querySelector('.story-card');
      if (firstCard) {
        firstCard.classList.add('active');
      }
    });

    // 스크롤 이벤트
    let ticking = false;
    window.addEventListener('scroll', () => {
      if (!ticking) {
        window.requestAnimationFrame(() => {
          updateBackground();
          ticking = false;
        });
        ticking = true;
      }
    });
  </script>
</body>
</html>
